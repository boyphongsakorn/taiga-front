{"version":3,"file":"../app.js","sources":["app.js"],"sourcesContent":["\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var configure, i18nInit, init, module, modules, oldWindowOpen, pluginsModules, pluginsWithModule, taiga;\n\n  this.taiga = taiga = {};\n\n  taiga.emojis = window.emojis;\n\n  this.taigaContribPlugins = this.taigaContribPlugins || window.taigaContribPlugins || [];\n\n  taiga.generateHash = function(components) {\n    if (components == null) {\n      components = [];\n    }\n    components = _.map(components, function(x) {\n      return JSON.stringify(x);\n    });\n    return hex_sha1(components.join(\":\"));\n  };\n\n  taiga.generateUniqueSessionIdentifier = function() {\n    var date, randomNumber;\n    date = (new Date()).getTime();\n    randomNumber = Math.floor(Math.random() * 0x9000000);\n    return taiga.generateHash([date, randomNumber]);\n  };\n\n  taiga.sessionId = taiga.generateUniqueSessionIdentifier();\n\n  oldWindowOpen = window.open;\n\n  window.open = (function(_this) {\n    return function(url, name, config) {\n      if (url.startsWith('/')) {\n        url = document.baseURI + url;\n      }\n      return oldWindowOpen(url);\n    };\n  })(this);\n\n  configure = function($routeProvider, $locationProvider, $httpProvider, $provide, $tgEventsProvider, $compileProvider, $translateProvider, $translatePartialLoaderProvider, $animateProvider, $logProvider) {\n    var authHttpIntercept, blockingIntercept, decorators, defaultHeaders, loaderIntercept, originalWhen, preferedLangCode, userInfo, versionCheckHttpIntercept;\n    $animateProvider.classNameFilter(/^(?:(?!ng-animate-disabled).)*$/);\n    originalWhen = $routeProvider.when;\n    $routeProvider.when = function(path, route) {\n      route.resolve || (route.resolve = {});\n      angular.extend(route.resolve, {\n        languageLoad: [\n          \"$q\", \"$translate\", function($q, $translate) {\n            var deferred;\n            deferred = $q.defer();\n            $translate(\"COMMON.YES\").then(function() {\n              return deferred.resolve();\n            });\n            return deferred.promise;\n          }\n        ],\n        projectLoaded: [\n          \"$q\", \"tgProjectService\", \"$route\", function($q, projectService, $route) {\n            var deferred, ref;\n            deferred = $q.defer();\n            projectService.setSection((ref = $route.current.$$route) != null ? ref.section : void 0);\n            if ($route.current.params.pslug) {\n              projectService.setProjectBySlug($route.current.params.pslug).then(deferred.resolve);\n            } else {\n              projectService.cleanProject();\n              deferred.resolve();\n            }\n            return deferred.promise;\n          }\n        ]\n      });\n      return originalWhen.call($routeProvider, path, route);\n    };\n    $routeProvider.when(\"/\", {\n      templateUrl: \"home/home.html\",\n      controller: \"Home\",\n      controllerAs: \"vm\",\n      loader: true,\n      title: \"HOME.PAGE_TITLE\",\n      loader: true,\n      description: \"HOME.PAGE_DESCRIPTION\",\n      joyride: \"dashboard\"\n    });\n    $routeProvider.when(\"/discover\", {\n      templateUrl: \"discover/discover-home/discover-home.html\",\n      controller: \"DiscoverHome\",\n      controllerAs: \"vm\",\n      title: \"PROJECT.NAVIGATION.DISCOVER\",\n      loader: true\n    });\n    $routeProvider.when(\"/discover/search\", {\n      templateUrl: \"discover/discover-search/discover-search.html\",\n      title: \"PROJECT.NAVIGATION.DISCOVER\",\n      loader: true,\n      controller: \"DiscoverSearch\",\n      controllerAs: \"vm\",\n      reloadOnSearch: false\n    });\n    $routeProvider.when(\"/projects/\", {\n      templateUrl: \"projects/listing/projects-listing.html\",\n      access: {\n        requiresLogin: true\n      },\n      title: \"PROJECTS.PAGE_TITLE\",\n      description: \"PROJECTS.PAGE_DESCRIPTION\",\n      loader: true,\n      controller: \"ProjectsListing\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/project/new\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      templateUrl: \"projects/create/create-project.html\",\n      loader: true,\n      controller: \"CreateProjectCtrl\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/project/new/scrum\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-create-project-form type=\\\"scrum\\\"></tg-create-project-form>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/new/kanban\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-create-project-form type=\\\"kanban\\\"></tg-create-project-form>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/new/duplicate\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-duplicate-project></tg-duplicate-project>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/new/import/:platform?\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-import-project></tg-import-project>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/:pslug/\", {\n      template: \"\",\n      loader: true,\n      controller: \"ProjectRouter\"\n    });\n    $routeProvider.when(\"/project/:pslug/timeline\", {\n      templateUrl: \"projects/project/project.html\",\n      loader: true,\n      controller: \"Project\",\n      controllerAs: \"vm\",\n      section: \"project-timeline\"\n    });\n    $routeProvider.when(\"/project/:pslug/t/:ref\", {\n      loader: true,\n      controller: \"DetailController\",\n      template: \"\"\n    });\n    $routeProvider.when(\"/project/:pslug/search\", {\n      templateUrl: \"search/search.html\",\n      reloadOnSearch: false,\n      section: \"search\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/:pslug/epics\", {\n      section: \"epics\",\n      templateUrl: \"epics/dashboard/epics-dashboard.html\",\n      loader: true,\n      controller: \"EpicsDashboardCtrl\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/project/:pslug/epic/:epicref\", {\n      templateUrl: \"epic/epic-detail.html\",\n      loader: true,\n      section: \"epics\"\n    });\n    $routeProvider.when(\"/project/:pslug/backlog\", {\n      templateUrl: \"backlog/backlog.html\",\n      loader: true,\n      section: \"backlog\",\n      joyride: \"backlog\"\n    });\n    $routeProvider.when(\"/project/:pslug/kanban\", {\n      templateUrl: \"kanban/kanban.html\",\n      loader: true,\n      section: \"kanban\",\n      joyride: \"kanban\"\n    });\n    $routeProvider.when(\"/project/:pslug/taskboard/:sslug\", {\n      templateUrl: \"taskboard/taskboard.html\",\n      loader: true,\n      section: \"backlog\"\n    });\n    $routeProvider.when(\"/project/:pslug/us/:usref\", {\n      templateUrl: \"us/us-detail.html\",\n      loader: true,\n      section: \"backlog-kanban\"\n    });\n    $routeProvider.when(\"/project/:pslug/task/:taskref\", {\n      templateUrl: \"task/task-detail.html\",\n      loader: true,\n      section: \"backlog-kanban\"\n    });\n    $routeProvider.when(\"/project/:pslug/wiki\", {\n      redirectTo: function(params) {\n        return \"/project/\" + params.pslug + \"/wiki/home\";\n      }\n    });\n    $routeProvider.when(\"/project/:pslug/wiki-list\", {\n      templateUrl: \"wiki/wiki-list.html\",\n      loader: true,\n      section: \"wiki\"\n    });\n    $routeProvider.when(\"/project/:pslug/wiki/:slug\", {\n      templateUrl: \"wiki/wiki.html\",\n      loader: true,\n      section: \"wiki\"\n    });\n    $routeProvider.when(\"/project/:pslug/team\", {\n      templateUrl: \"team/team.html\",\n      loader: true,\n      section: \"team\"\n    });\n    $routeProvider.when(\"/project/:pslug/issues\", {\n      templateUrl: \"issue/issues.html\",\n      loader: true,\n      section: \"issues\"\n    });\n    $routeProvider.when(\"/project/:pslug/issue/:issueref\", {\n      templateUrl: \"issue/issues-detail.html\",\n      loader: true,\n      section: \"issues\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/details\", {\n      templateUrl: \"admin/admin-project-profile.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/default-values\", {\n      templateUrl: \"admin/admin-project-default-values.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/modules\", {\n      templateUrl: \"admin/admin-project-modules.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/export\", {\n      templateUrl: \"admin/admin-project-export.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/reports\", {\n      templateUrl: \"admin/admin-project-reports.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/status\", {\n      templateUrl: \"admin/admin-project-values-status.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/points\", {\n      templateUrl: \"admin/admin-project-values-points.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/priorities\", {\n      templateUrl: \"admin/admin-project-values-priorities.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/severities\", {\n      templateUrl: \"admin/admin-project-values-severities.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/types\", {\n      templateUrl: \"admin/admin-project-values-types.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/custom-fields\", {\n      templateUrl: \"admin/admin-project-values-custom-fields.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/tags\", {\n      templateUrl: \"admin/admin-project-values-tags.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/due-dates\", {\n      templateUrl: \"admin/admin-project-values-due-dates.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/kanban-power-ups\", {\n      templateUrl: \"admin/admin-project-values-kanban-power-ups.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/memberships\", {\n      templateUrl: \"admin/admin-memberships.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/roles\", {\n      templateUrl: \"admin/admin-roles.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/webhooks\", {\n      templateUrl: \"admin/admin-third-parties-webhooks.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/github\", {\n      templateUrl: \"admin/admin-third-parties-github.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/gitlab\", {\n      templateUrl: \"admin/admin-third-parties-gitlab.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/bitbucket\", {\n      templateUrl: \"admin/admin-third-parties-bitbucket.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/gogs\", {\n      templateUrl: \"admin/admin-third-parties-gogs.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/contrib/:plugin\", {\n      templateUrl: \"contrib/main.html\"\n    });\n    $routeProvider.when(\"/project/:pslug/transfer/:token\", {\n      templateUrl: \"projects/transfer/transfer-page.html\",\n      loader: true,\n      controller: \"Project\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/user-settings/user-profile\", {\n      templateUrl: \"user/user-profile.html\"\n    });\n    $routeProvider.when(\"/user-settings/user-change-password\", {\n      templateUrl: \"user/user-change-password.html\"\n    });\n    $routeProvider.when(\"/user-settings/user-project-settings\", {\n      templateUrl: \"user/user-project-settings.html\"\n    });\n    $routeProvider.when(\"/user-settings/mail-notifications\", {\n      templateUrl: \"user/mail-notifications.html\"\n    });\n    $routeProvider.when(\"/user-settings/live-notifications\", {\n      templateUrl: \"user/live-notifications.html\"\n    });\n    $routeProvider.when(\"/user-settings/web-notifications\", {\n      templateUrl: \"user/web-notifications.html\"\n    });\n    $routeProvider.when(\"/change-email/:email_token\", {\n      templateUrl: \"user/change-email.html\"\n    });\n    $routeProvider.when(\"/verify-email/:email_token\", {\n      templateUrl: \"user/verify-email.html\"\n    });\n    $routeProvider.when(\"/cancel-account/:cancel_token\", {\n      templateUrl: \"user/cancel-account.html\"\n    });\n    $routeProvider.when(\"/user-settings/contrib/:plugin\", {\n      templateUrl: \"contrib/user-settings.html\"\n    });\n    $routeProvider.when(\"/profile\", {\n      templateUrl: \"profile/profile.html\",\n      loader: true,\n      access: {\n        requiresLogin: true\n      },\n      controller: \"Profile\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/notifications\", {\n      templateUrl: \"notifications/notifications.html\",\n      loader: true,\n      access: {\n        requiresLogin: true\n      },\n      controller: \"Notifications\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/profile/:slug\", {\n      templateUrl: \"profile/profile.html\",\n      loader: true,\n      controller: \"Profile\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/login\", {\n      templateUrl: \"auth/login.html\",\n      title: \"LOGIN.PAGE_TITLE\",\n      description: \"LOGIN.PAGE_DESCRIPTION\",\n      disableHeader: true,\n      controller: \"LoginPage\"\n    });\n    if (window.taigaConfig.publicRegisterEnabled) {\n      $routeProvider.when(\"/register\", {\n        templateUrl: \"auth/register.html\",\n        title: \"REGISTER.PAGE_TITLE\",\n        description: \"REGISTER.PAGE_DESCRIPTION\",\n        disableHeader: true\n      });\n    }\n    $routeProvider.when(\"/forgot-password\", {\n      templateUrl: \"auth/forgot-password.html\",\n      title: \"FORGOT_PASSWORD.PAGE_TITLE\",\n      description: \"FORGOT_PASSWORD.PAGE_DESCRIPTION\",\n      disableHeader: true\n    });\n    $routeProvider.when(\"/change-password/:token\", {\n      templateUrl: \"auth/change-password-from-recovery.html\",\n      title: \"CHANGE_PASSWORD.PAGE_TITLE\",\n      description: \"CHANGE_PASSWORD.PAGE_TITLE\",\n      disableHeader: true\n    });\n    $routeProvider.when(\"/invitation/:token\", {\n      templateUrl: \"auth/invitation.html\",\n      title: \"INVITATION.PAGE_TITLE\",\n      description: \"INVITATION.PAGE_DESCRIPTION\",\n      disableHeader: true\n    });\n    $routeProvider.when(\"/external-apps\", {\n      templateUrl: \"external-apps/external-app.html\",\n      title: \"EXTERNAL_APP.PAGE_TITLE\",\n      description: \"EXTERNAL_APP.PAGE_DESCRIPTION\",\n      controller: \"ExternalApp\",\n      controllerAs: \"vm\",\n      disableHeader: true,\n      mobileViewport: true\n    });\n    $routeProvider.when(\"/blocked-project/:pslug/\", {\n      templateUrl: \"projects/project/blocked-project.html\",\n      loader: true\n    });\n    $routeProvider.when(\"/error\", {\n      templateUrl: \"error/error.html\"\n    });\n    $routeProvider.when(\"/not-found\", {\n      templateUrl: \"error/not-found.html\"\n    });\n    $routeProvider.when(\"/permission-denied\", {\n      templateUrl: \"error/permission-denied.html\"\n    });\n    $routeProvider.otherwise({\n      templateUrl: \"error/not-found.html\"\n    });\n    $locationProvider.html5Mode({\n      enabled: true,\n      requireBase: true\n    });\n    defaultHeaders = {\n      \"Content-Type\": \"application/json\",\n      \"Accept-Language\": window.taigaConfig.defaultLanguage || \"en\",\n      \"X-Session-Id\": taiga.sessionId\n    };\n    $httpProvider.defaults.headers[\"delete\"] = defaultHeaders;\n    $httpProvider.defaults.headers.patch = defaultHeaders;\n    $httpProvider.defaults.headers.post = defaultHeaders;\n    $httpProvider.defaults.headers.put = defaultHeaders;\n    $httpProvider.defaults.headers.get = {\n      \"X-Session-Id\": taiga.sessionId\n    };\n    $httpProvider.useApplyAsync(true);\n    $tgEventsProvider.setSessionId(taiga.sessionId);\n    authHttpIntercept = function($q, $location, $navUrls, $lightboxService, errorHandlingService, $injector, urls, storage) {\n      var httpResponseError, retry;\n      retry = {\n        inProgress: false,\n        promise: null\n      };\n      httpResponseError = function(response) {\n        if (response.config.url.includes('/auth/refresh')) {\n          return $q.reject(response);\n        }\n        if (response.status === 0 || (response.status === -1 && !response.config.cancelable)) {\n          $lightboxService.closeAll();\n          errorHandlingService.error();\n        } else if (response.status === 401 && $location.url().indexOf('/login') === -1) {\n          return new Promise((function(_this) {\n            return function(resolve, reject) {\n              var $http, apiUrl, errorToken, nextUrl, refreshToken, refreshTokenReponse, removeUser, request, search;\n              $http = $injector.get('$http');\n              removeUser = function() {\n                storage.remove(\"token\");\n                return storage.remove(\"userInfo\");\n              };\n              refreshTokenReponse = function(responseRefresh) {\n                storage.set(\"token\", responseRefresh.data.auth_token);\n                storage.set(\"refresh\", responseRefresh.data.refresh);\n                response.config.headers.Authorization = \"Bearer \" + responseRefresh.data.auth_token;\n                return $http(response.config).then(function(result) {\n                  return resolve(result);\n                });\n              };\n              errorToken = function() {\n                var nextUrl, search;\n                nextUrl = $location.url();\n                search = $location.search();\n                storage.remove(\"refresh\");\n                removeUser();\n                if (search.force_next) {\n                  return window.location.href = $navUrls.resolve(\"login\") + '?force_next=' + search.force_next;\n                } else {\n                  return window.location.href = $navUrls.resolve(\"login\") + '?unauthorized=true&next=' + nextUrl;\n                }\n              };\n              if (retry.inProgress) {\n                return retry.promise.then(function(responseRefresh) {\n                  return refreshTokenReponse(responseRefresh)[\"catch\"](function(err) {\n                    return reject(err);\n                  });\n                })[\"catch\"](function(err) {\n                  errorToken();\n                  return reject(err);\n                });\n              } else {\n                retry.inProgress = true;\n                apiUrl = urls.resolve('refresh');\n                refreshToken = storage.get(\"refresh\");\n                if (refreshToken) {\n                  request = $http.post(apiUrl, {\n                    refresh: refreshToken\n                  });\n                  retry.promise = request;\n                  request.then(function(responseRefresh) {\n                    retry.inProgress = false;\n                    return refreshTokenReponse(responseRefresh)[\"catch\"](function(err) {\n                      return reject(err);\n                    });\n                  });\n                  return request[\"catch\"](function(err) {\n                    retry.inProgress = false;\n                    errorToken();\n                    return reject(err);\n                  });\n                } else {\n                  window.location.href = $navUrls.resolve(\"login\") + '?force_login';\n                  nextUrl = $location.url();\n                  search = $location.search();\n                  removeUser();\n                  if (search.force_next) {\n                    window.location.href = $navUrls.resolve(\"login\") + '?force_next=' + search.force_next;\n                  } else {\n                    window.location.href = $navUrls.resolve(\"login\") + '?unauthorized=true&next=' + nextUrl;\n                  }\n                  reject(response);\n                }\n              }\n            };\n          })(this));\n        }\n        return $q.reject(response);\n      };\n      return {\n        responseError: httpResponseError\n      };\n    };\n    $provide.factory(\"authHttpIntercept\", [\"$q\", \"$location\", \"$tgNavUrls\", \"lightboxService\", \"tgErrorHandlingService\", \"$injector\", \"$tgUrls\", \"$tgStorage\", authHttpIntercept]);\n    $httpProvider.interceptors.push(\"authHttpIntercept\");\n    loaderIntercept = function($q, loaderService) {\n      return {\n        request: function(config) {\n          loaderService.logRequest();\n          return config;\n        },\n        requestError: function(rejection) {\n          loaderService.logResponse();\n          return $q.reject(rejection);\n        },\n        responseError: function(rejection) {\n          loaderService.logResponse();\n          return $q.reject(rejection);\n        },\n        response: function(response) {\n          loaderService.logResponse();\n          return response;\n        }\n      };\n    };\n    $provide.factory(\"loaderIntercept\", [\"$q\", \"tgLoader\", loaderIntercept]);\n    $httpProvider.interceptors.push(\"loaderIntercept\");\n    versionCheckHttpIntercept = function($q) {\n      var httpResponseError;\n      httpResponseError = function(response) {\n        var $injector;\n        if (response.status === 400 && response.data.version) {\n          $injector = angular.element(\"body\").injector();\n          $injector.invoke([\n            \"$tgConfirm\", \"$translate\", (function(_this) {\n              return function($confirm, $translate) {\n                var versionErrorMsg;\n                versionErrorMsg = $translate.instant(\"ERROR.VERSION_ERROR\");\n                return $confirm.notify(\"error\", versionErrorMsg, null, 10000);\n              };\n            })(this)\n          ]);\n        }\n        return $q.reject(response);\n      };\n      return {\n        responseError: httpResponseError\n      };\n    };\n    $provide.factory(\"versionCheckHttpIntercept\", [\"$q\", versionCheckHttpIntercept]);\n    $httpProvider.interceptors.push(\"versionCheckHttpIntercept\");\n    blockingIntercept = function($q, errorHandlingService) {\n      var redirectToBlockedPage, responseError, responseOk;\n      redirectToBlockedPage = function() {\n        return errorHandlingService.block();\n      };\n      responseOk = function(response) {\n        if (response.data.blocked_code) {\n          redirectToBlockedPage();\n        }\n        return response;\n      };\n      responseError = function(response) {\n        if (response.status === 451) {\n          redirectToBlockedPage();\n        }\n        return $q.reject(response);\n      };\n      return {\n        response: responseOk,\n        responseError: responseError\n      };\n    };\n    $provide.factory(\"blockingIntercept\", [\"$q\", \"tgErrorHandlingService\", blockingIntercept]);\n    $httpProvider.interceptors.push(\"blockingIntercept\");\n    $compileProvider.debugInfoEnabled(window.taigaConfig.debugInfo || false);\n    if (localStorage.userInfo) {\n      userInfo = JSON.parse(localStorage.userInfo);\n    }\n    preferedLangCode = (userInfo != null ? userInfo.lang : void 0) || window.taigaConfig.defaultLanguage || \"en\";\n    $translatePartialLoaderProvider.addPart('taiga');\n    $translateProvider.useLoader('$translatePartialLoader', {\n      urlTemplate: window._version + '/locales/{part}/locale-{lang}.json'\n    }).useSanitizeValueStrategy('escapeParameters').addInterpolation('$translateMessageFormatInterpolation').preferredLanguage(preferedLangCode).useMissingTranslationHandlerLog();\n    $translateProvider.fallbackLanguage(\"en\");\n    decorators = window.getDecorators();\n    _.each(decorators, function(decorator) {\n      return $provide.decorator(decorator.provider, decorator.decorator);\n    });\n    $logProvider.debugEnabled(window.taigaConfig.debug);\n    if (window.taigaConfig.debug) {\n      return console.info(\"Debug mode is enable\");\n    }\n  };\n\n  i18nInit = function(lang, $translate) {\n    var messages;\n    moment.locale(lang);\n    document.querySelector('html').setAttribute('lang', lang);\n    if (lang !== 'en') {\n      ljs.load((\"/\" + window._version + \"/locales/moment-locales/\") + lang + \".js\");\n    }\n    messages = {\n      defaultMessage: $translate.instant(\"COMMON.FORM_ERRORS.DEFAULT_MESSAGE\"),\n      type: {\n        email: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_EMAIL\"),\n        url: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_URL\"),\n        urlstrict: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_URLSTRICT\"),\n        number: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_NUMBER\"),\n        digits: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_DIGITS\"),\n        dateIso: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_DATEISO\"),\n        alphanum: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_ALPHANUM\"),\n        phone: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_PHONE\")\n      },\n      notnull: $translate.instant(\"COMMON.FORM_ERRORS.NOTNULL\"),\n      notblank: $translate.instant(\"COMMON.FORM_ERRORS.NOT_BLANK\"),\n      required: $translate.instant(\"COMMON.FORM_ERRORS.REQUIRED\"),\n      regexp: $translate.instant(\"COMMON.FORM_ERRORS.REGEXP\"),\n      min: $translate.instant(\"COMMON.FORM_ERRORS.MIN\"),\n      max: $translate.instant(\"COMMON.FORM_ERRORS.MAX\"),\n      range: $translate.instant(\"COMMON.FORM_ERRORS.RANGE\"),\n      minlength: $translate.instant(\"COMMON.FORM_ERRORS.MIN_LENGTH\"),\n      maxlength: $translate.instant(\"COMMON.FORM_ERRORS.MAX_LENGTH\"),\n      rangelength: $translate.instant(\"COMMON.FORM_ERRORS.RANGE_LENGTH\"),\n      mincheck: $translate.instant(\"COMMON.FORM_ERRORS.MIN_CHECK\"),\n      maxcheck: $translate.instant(\"COMMON.FORM_ERRORS.MAX_CHECK\"),\n      rangecheck: $translate.instant(\"COMMON.FORM_ERRORS.RANGE_CHECK\"),\n      equalto: $translate.instant(\"COMMON.FORM_ERRORS.EQUAL_TO\"),\n      linewidth: $translate.instant(\"COMMON.FORM_ERRORS.LINEWIDTH\"),\n      pikaday: $translate.instant(\"COMMON.FORM_ERRORS.PIKADAY\")\n    };\n    return checksley.updateMessages('default', messages);\n  };\n\n  init = function($log, $rootscope, $auth, $events, $analytics, $tagManager, $userPilot, $translate, $location, $navUrls, appMetaService, loaderService, navigationBarService, errorHandlingService, lightboxService, $tgConfig, projectService) {\n    var lang, un, user, validators;\n    $log.debug(\"Initialize application\");\n    $rootscope.$on('$translatePartialLoaderStructureChanged', function() {\n      return $translate.refresh();\n    });\n    validators = {\n      linewidth: function(val, width) {\n        var lines, valid;\n        lines = taiga.nl2br(val).split(\"<br />\");\n        valid = _.every(lines, function(line) {\n          return line.length < width;\n        });\n        return valid;\n      },\n      pikaday: function(val) {\n        var prettyDate;\n        prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n        return moment(val, prettyDate).isValid();\n      },\n      url: function(val) {\n        var re_weburl;\n        re_weburl = new RegExp(\"^\" + \"(?:(?:https?|ftp)://)\" + \"(?:\\\\S+(?::\\\\S*)?@)?\" + \"(?:\" + \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" + \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" + \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\" + \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" + \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" + \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" + \"|\" + \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\" + \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\" + \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\" + \"\\\\.?\" + \")\" + \"(?::\\\\d{2,5})?\" + \"(?:[/?#]\\\\S*)?\" + \"$\", \"i\");\n        return re_weburl.test(val);\n      }\n    };\n    checksley.updateValidators(validators);\n    $rootscope.contribPlugins = this.taigaContribPlugins;\n    $rootscope.adminPlugins = _.filter(this.taigaContribPlugins, {\n      \"type\": \"admin\"\n    });\n    $rootscope.authPlugins = _.filter(this.taigaContribPlugins, {\n      \"type\": \"auth\"\n    });\n    $rootscope.userSettingsPlugins = _.filter(this.taigaContribPlugins, {\n      \"type\": \"userSettings\"\n    });\n    lang = null;\n    $rootscope.$on(\"$translateChangeEnd\", function(e, ctx) {\n      var legacy, rtlLanguages;\n      if (lang !== ctx.language) {\n        lang = ctx.language;\n        i18nInit(lang, $translate);\n        rtlLanguages = $tgConfig.get(\"rtlLanguages\", []);\n        $rootscope.isRTL = rtlLanguages.indexOf(lang) > -1;\n        legacy = document.querySelector('tg-legacy');\n        return legacy.translations = {\n          translationTable: $translate.getTranslationTable(lang),\n          lan: lang\n        };\n      }\n    });\n    $events.setupConnection();\n    if ($auth.isAuthenticated()) {\n      user = $auth.getUser();\n    }\n    $analytics.initialize();\n    $tagManager.initialize();\n    $userPilot.initialize();\n    $userPilot.identify();\n    $rootscope.$on('$locationChangeStart', function(event) {\n      errorHandlingService.init();\n      if (lightboxService.getLightboxOpen().length) {\n        event.preventDefault();\n        return lightboxService.closeAll();\n      }\n    });\n    un = $rootscope.$on('$routeChangeStart', function(event, next) {\n      if (next.loader) {\n        loaderService.start(true);\n      }\n      return un();\n    });\n    return $rootscope.$on('$routeChangeSuccess', function(event, next) {\n      var description, ref, title;\n      if ((ref = projectService.project) != null ? ref.get('blocked_code') : void 0) {\n        errorHandlingService.block();\n      }\n      if (next.loader) {\n        loaderService.start(true);\n      }\n      if (next.access && next.access.requiresLogin) {\n        if (!$auth.isAuthenticated()) {\n          $location.path($navUrls.resolve(\"login\"));\n        }\n      }\n      if (next.title || next.description) {\n        title = $translate.instant(next.title || \"\");\n        description = $translate.instant(next.description || \"\");\n        appMetaService.setAll(title, description);\n      }\n      if (next.mobileViewport) {\n        appMetaService.addMobileViewport();\n      } else {\n        appMetaService.removeMobileViewport();\n      }\n      if (next.disableHeader) {\n        return navigationBarService.disableHeader();\n      } else {\n        return navigationBarService.enableHeader();\n      }\n    });\n  };\n\n  angular.module('infinite-scroll').value('THROTTLE_MILLISECONDS', 500);\n\n  pluginsWithModule = _.filter(this.taigaContribPlugins, function(plugin) {\n    return plugin.module;\n  });\n\n  pluginsModules = _.map(pluginsWithModule, function(plugin) {\n    return plugin.module;\n  });\n\n  modules = [\"taigaBase\", \"taigaCommon\", \"taigaResources\", \"taigaResources2\", \"taigaAuth\", \"taigaEvents\", \"taigaHome\", \"taigaNavigationBar\", \"taigaProjects\", \"taigaRelatedTasks\", \"taigaBacklog\", \"taigaTaskboard\", \"taigaKanban\", \"taigaIssues\", \"taigaUserStories\", \"taigaTasks\", \"taigaTeam\", \"taigaWiki\", \"taigaSearch\", \"taigaAdmin\", \"taigaProject\", \"taigaUserSettings\", \"taigaFeedback\", \"taigaPlugins\", \"taigaIntegrations\", \"taigaComponents\", \"taigaProfile\", \"taigaHome\", \"taigaUserTimeline\", \"taigaExternalApps\", \"taigaDiscover\", \"taigaHistory\", \"taigaNotifications\", \"taigaWikiHistory\", \"taigaEpics\", \"taigaUtils\", \"templates\", \"ngSanitize\", \"ngRoute\", \"ngAnimate\", \"ngAria\", \"pascalprecht.translate\", \"infinite-scroll\", \"tgRepeat\"].concat(pluginsModules);\n\n  module = angular.module(\"taiga\", modules);\n\n  module.config([\"$routeProvider\", \"$locationProvider\", \"$httpProvider\", \"$provide\", \"$tgEventsProvider\", \"$compileProvider\", \"$translateProvider\", \"$translatePartialLoaderProvider\", \"$animateProvider\", \"$logProvider\", configure]);\n\n  module.run([\"$log\", \"$rootScope\", \"$tgAuth\", \"$tgEvents\", \"$tgAnalytics\", \"$tgTagManager\", \"$tgUserPilot\", \"$translate\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"tgLoader\", \"tgNavigationBarService\", \"tgErrorHandlingService\", \"lightboxService\", \"$tgConfig\", \"tgProjectService\", init]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TaigaBase, TaigaController, TaigaService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  TaigaBase = (function() {\n    function TaigaBase() {}\n\n    return TaigaBase;\n\n  })();\n\n  TaigaService = (function(superClass) {\n    extend(TaigaService, superClass);\n\n    function TaigaService() {\n      return TaigaService.__super__.constructor.apply(this, arguments);\n    }\n\n    return TaigaService;\n\n  })(TaigaBase);\n\n  TaigaController = (function(superClass) {\n    extend(TaigaController, superClass);\n\n    function TaigaController() {\n      this.onInitialDataError = bind(this.onInitialDataError, this);\n      return TaigaController.__super__.constructor.apply(this, arguments);\n    }\n\n    TaigaController.prototype.onInitialDataError = function(xhr) {\n      if (xhr) {\n        if (xhr.status === 404) {\n          this.errorHandlingService.notfound();\n        } else if (xhr.status === 403) {\n          this.errorHandlingService.permissionDenied();\n        }\n      }\n      return this.q.reject(xhr);\n    };\n\n    return TaigaController;\n\n  })(TaigaBase);\n\n  this.taiga.Base = TaigaBase;\n\n  this.taiga.Service = TaigaService;\n\n  this.taiga.Controller = TaigaController;\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DEFAULT_COLOR_LIST, addClass, bindMethods, bindOnce, cancelTimeout, debounce, debounceLeading, defineImmutableProperty, findScope, getDefaulColorList, getMatches, getRandomDefaultColor, groupBy, isEmail, isImage, isPdf, joinStr, mixOf, nl2br, normalizeString, patch, randomInt, replaceTags, scopeDefer, sizeFormat, slugify, startswith, stripTags, taiga, timeout, toString, toggleText, trim, truncate, unslugify,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n    slice = [].slice,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  addClass = function(el, className) {\n    if (el.classList) {\n      return el.classList.add(className);\n    } else {\n      return el.className += ' ' + className;\n    }\n  };\n\n  nl2br = (function(_this) {\n    return function(str) {\n      var breakTag;\n      breakTag = '<br />';\n      return (str + '').replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, '$1' + breakTag + '$2');\n    };\n  })(this);\n\n  bindMethods = (function(_this) {\n    return function(object) {\n      var dependencies, methods;\n      dependencies = _.keys(object);\n      methods = [];\n      _.forIn(object, function(value, key) {\n        if (indexOf.call(dependencies, key) < 0 && _.isFunction(value)) {\n          return methods.push(key);\n        }\n      });\n      return _.bindAll(object, methods);\n    };\n  })(this);\n\n  bindOnce = (function(_this) {\n    return function(scope, attr, continuation) {\n      var delBind, val;\n      val = scope.$eval(attr);\n      if (val !== void 0) {\n        return continuation(val);\n      }\n      delBind = null;\n      return delBind = scope.$watch(attr, function(val) {\n        if (val === void 0) {\n          return;\n        }\n        continuation(val);\n        if (delBind) {\n          return delBind();\n        }\n      });\n    };\n  })(this);\n\n  mixOf = function() {\n    var Mixed, base, i, method, mixin, mixins, name, ref;\n    base = arguments[0], mixins = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    Mixed = (function(superClass) {\n      extend(Mixed, superClass);\n\n      function Mixed() {\n        return Mixed.__super__.constructor.apply(this, arguments);\n      }\n\n      return Mixed;\n\n    })(base);\n    for (i = mixins.length - 1; i >= 0; i += -1) {\n      mixin = mixins[i];\n      ref = mixin.prototype;\n      for (name in ref) {\n        method = ref[name];\n        Mixed.prototype[name] = method;\n      }\n    }\n    return Mixed;\n  };\n\n  trim = function(data, char) {\n    return _.trim(data, char);\n  };\n\n  slugify = function(data) {\n    return data.toString().toLowerCase().trim().replace(/\\s+/g, '-').replace(/&/g, '-and-').replace(/[^\\w\\-]+/g, '').replace(/\\-\\-+/g, '-');\n  };\n\n  unslugify = function(data) {\n    if (data) {\n      return _.capitalize(data.replace(/-/g, ' '));\n    }\n    return data;\n  };\n\n  toggleText = function(element, texts) {\n    var nextTextPosition, text;\n    nextTextPosition = element.data('nextTextPosition');\n    if ((nextTextPosition == null) || nextTextPosition >= texts.length) {\n      nextTextPosition = 0;\n    }\n    text = texts[nextTextPosition];\n    element.data('nextTextPosition', nextTextPosition + 1);\n    return element.text(text);\n  };\n\n  groupBy = function(coll, pred) {\n    var i, item, len, result;\n    result = {};\n    for (i = 0, len = coll.length; i < len; i++) {\n      item = coll[i];\n      result[pred(item)] = item;\n    }\n    return result;\n  };\n\n  timeout = function(wait, continuation) {\n    return window.setTimeout(continuation, wait);\n  };\n\n  cancelTimeout = function(timeoutVar) {\n    return window.clearTimeout(timeoutVar);\n  };\n\n  scopeDefer = function(scope, func) {\n    return _.defer((function(_this) {\n      return function() {\n        return scope.$apply(func);\n      };\n    })(this));\n  };\n\n  toString = function(value) {\n    if (_.isNumber(value)) {\n      return value + \"\";\n    } else if (_.isString(value)) {\n      return value;\n    } else if (_.isPlainObject(value)) {\n      return JSON.stringify(value);\n    } else if (_.isUndefined(value)) {\n      return \"\";\n    }\n    return value.toString();\n  };\n\n  joinStr = function(str, coll) {\n    return coll.join(str);\n  };\n\n  debounce = function(wait, func) {\n    return _.debounce(func, wait, {\n      leading: true,\n      trailing: false\n    });\n  };\n\n  debounceLeading = function(wait, func) {\n    return _.debounce(func, wait, {\n      leading: false,\n      trailing: true\n    });\n  };\n\n  startswith = function(str1, str2) {\n    return _.startsWith(str1, str2);\n  };\n\n  truncate = function(str, maxLength, suffix) {\n    var out;\n    if (suffix == null) {\n      suffix = \"...\";\n    }\n    if ((typeof str !== \"string\") && !(str instanceof String)) {\n      return str;\n    }\n    out = str.slice(0);\n    if (out.length > maxLength) {\n      out = out.substring(0, maxLength + 1);\n      out = out.substring(0, Math.min(out.length, out.lastIndexOf(\" \")));\n      out = out + suffix;\n    }\n    return out;\n  };\n\n  sizeFormat = function(input, precision) {\n    var number, size, units;\n    if (precision == null) {\n      precision = 1;\n    }\n    if (isNaN(parseFloat(input)) || !isFinite(input)) {\n      return \"-\";\n    }\n    if (input === 0) {\n      return \"0 bytes\";\n    }\n    units = [\"bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\"];\n    number = Math.floor(Math.log(input) / Math.log(1024));\n    if (number > 5) {\n      number = 5;\n    }\n    size = (input / Math.pow(1024, number)).toFixed(precision);\n    return size + \" \" + units[number];\n  };\n\n  stripTags = function(str, exception) {\n    var pattern;\n    if (exception) {\n      pattern = new RegExp('<(?!' + exception + '\\s*\\/?)[^>]+>', 'gi');\n      return String(str).replace(pattern, '');\n    } else {\n      return String(str).replace(/<\\/?[^>]+>/g, '');\n    }\n  };\n\n  replaceTags = function(str, tags, replace) {\n    var pattern;\n    pattern = new RegExp('<(' + tags + ')>', 'gi');\n    str = str.replace(pattern, '<' + replace + '>');\n    pattern = new RegExp('<\\/(' + tags + ')>', 'gi');\n    str = str.replace(pattern, '</' + replace + '>');\n    return str;\n  };\n\n  defineImmutableProperty = (function(_this) {\n    return function(obj, name, fn) {\n      return Object.defineProperty(obj, name, {\n        get: function() {\n          var fn_result;\n          if (!_.isFunction(fn)) {\n            throw \"defineImmutableProperty third param must be a function\";\n          }\n          fn_result = fn();\n          if (fn_result && _.isObject(fn_result)) {\n            if (fn_result.size === void 0) {\n              throw \"defineImmutableProperty must return immutable data\";\n            }\n          }\n          return fn_result;\n        }\n      });\n    };\n  })(this);\n\n  _.mixin({\n    removeKeys: function(obj, keys) {\n      return _.chain([keys]).flatten().reduce(function(obj, key) {\n        delete obj[key];\n        return obj;\n      }, obj).value();\n    },\n    cartesianProduct: function() {\n      return _.reduceRight(arguments, function(a, b) {\n        return _.flatten(_.map(a, function(x) {\n          return _.map(b, function(y) {\n            return [y].concat(x);\n          });\n        }), true);\n      }, [[]]);\n    }\n  });\n\n  isImage = function(name) {\n    return name.match(/\\.(jpe?g|png|gif|gifv|svg|psd|webp)/i) !== null;\n  };\n\n  isEmail = function(name) {\n    return (name != null) && name.match(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/) !== null;\n  };\n\n  isPdf = function(name) {\n    return name.match(/\\.(pdf)/i) !== null;\n  };\n\n  patch = function(oldImmutable, newImmutable) {\n    var pathObj;\n    pathObj = {};\n    newImmutable.forEach(function(newValue, key) {\n      if (newValue !== oldImmutable.get(key)) {\n        if (newValue.toJS) {\n          return pathObj[key] = newValue.toJS();\n        } else {\n          return pathObj[key] = newValue;\n        }\n      }\n    });\n    return pathObj;\n  };\n\n  DEFAULT_COLOR_LIST = ['#D35163', '#D351CF', '#AC51D3', '#8151D3', '#5551D3', '#5178D3', '#78D351', '#51D355', '#51D381', '#51D3AC', '#51CFD3', '#51A3D3', '#A3D350', '#CFD350', '#D3AC50', '#D38050', '#D35450', '#E44057', '#4C566A', '#70728F', '#A9AABC'];\n\n  getRandomDefaultColor = function() {\n    return _.sample(DEFAULT_COLOR_LIST);\n  };\n\n  getDefaulColorList = function() {\n    return _.clone(DEFAULT_COLOR_LIST);\n  };\n\n  getMatches = function(string, regex, index) {\n    var match, matches;\n    index || (index = 1);\n    matches = [];\n    match = null;\n    while (match = regex.exec(string)) {\n      if (index === -1) {\n        matches.push(match);\n      } else {\n        matches.push(match[index]);\n      }\n    }\n    return matches;\n  };\n\n  randomInt = function(start, end) {\n    var interval;\n    interval = end - start;\n    return start + Math.floor(Math.random() * (interval + 1));\n  };\n\n  normalizeString = function(string) {\n    var normalizedString;\n    normalizedString = string;\n    normalizedString = normalizedString.replace(\"Á\", \"A\").replace(\"Ä\", \"A\").replace(\"À\", \"A\");\n    normalizedString = normalizedString.replace(\"É\", \"E\").replace(\"Ë\", \"E\").replace(\"È\", \"E\");\n    normalizedString = normalizedString.replace(\"Í\", \"I\").replace(\"Ï\", \"I\").replace(\"Ì\", \"I\");\n    normalizedString = normalizedString.replace(\"Ó\", \"O\").replace(\"Ö\", \"O\").replace(\"Ò\", \"O\");\n    normalizedString = normalizedString.replace(\"Ú\", \"U\").replace(\"Ü\", \"U\").replace(\"Ù\", \"U\");\n    return normalizedString;\n  };\n\n  findScope = function($scope, condition) {\n    var result;\n    result = condition($scope);\n    if (result) {\n      return result;\n    }\n    if ($scope) {\n      return findScope($scope.$parent, condition);\n    }\n    return null;\n  };\n\n  taiga = this.taiga;\n\n  taiga.addClass = addClass;\n\n  taiga.nl2br = nl2br;\n\n  taiga.bindMethods = bindMethods;\n\n  taiga.bindOnce = bindOnce;\n\n  taiga.mixOf = mixOf;\n\n  taiga.trim = trim;\n\n  taiga.slugify = slugify;\n\n  taiga.unslugify = unslugify;\n\n  taiga.toggleText = toggleText;\n\n  taiga.groupBy = groupBy;\n\n  taiga.timeout = timeout;\n\n  taiga.cancelTimeout = cancelTimeout;\n\n  taiga.scopeDefer = scopeDefer;\n\n  taiga.toString = toString;\n\n  taiga.joinStr = joinStr;\n\n  taiga.truncate = truncate;\n\n  taiga.debounce = debounce;\n\n  taiga.debounceLeading = debounceLeading;\n\n  taiga.startswith = startswith;\n\n  taiga.sizeFormat = sizeFormat;\n\n  taiga.stripTags = stripTags;\n\n  taiga.replaceTags = replaceTags;\n\n  taiga.defineImmutableProperty = defineImmutableProperty;\n\n  taiga.isImage = isImage;\n\n  taiga.isEmail = isEmail;\n\n  taiga.isPdf = isPdf;\n\n  taiga.patch = patch;\n\n  taiga.getRandomDefaultColor = getRandomDefaultColor;\n\n  taiga.getDefaulColorList = getDefaulColorList;\n\n  taiga.getMatches = getMatches;\n\n  taiga.randomInt = randomInt;\n\n  taiga.normalizeString = normalizeString;\n\n  taiga.findScope = findScope;\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var FiltersMixin, PageMixin, UsFiltersMixin, groupBy, joinStr, taiga, toString, trim;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  joinStr = this.taiga.joinStr;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  PageMixin = (function() {\n    function PageMixin() {}\n\n    PageMixin.prototype.fillUsersAndRoles = function(users, roles) {\n      var activeUsers, computableRoles;\n      activeUsers = _.filter(users, (function(_this) {\n        return function(user) {\n          return user.is_active;\n        };\n      })(this));\n      this.scope.activeUsers = _.sortBy(activeUsers, \"full_name_display\");\n      this.scope.activeUsersById = groupBy(this.scope.activeUsers, function(e) {\n        return e.id;\n      });\n      this.scope.users = _.sortBy(users, \"full_name_display\");\n      this.scope.usersById = groupBy(users, function(e) {\n        return e.id;\n      });\n      this.scope.roles = _.sortBy(roles, \"order\");\n      computableRoles = _(this.scope.project.members).map(\"role\").uniq().value();\n      return this.scope.computableRoles = _(roles).filter(\"computable\").filter(function(x) {\n        return _.includes(computableRoles, x.id);\n      }).value();\n    };\n\n    PageMixin.prototype.loadUsersAndRoles = function() {\n      var promise;\n      promise = this.q.all([this.rs.projects.usersList(this.scope.projectId), this.rs.projects.rolesList(this.scope.projectId)]);\n      return promise.then((function(_this) {\n        return function(results) {\n          var roles, users;\n          users = results[0], roles = results[1];\n          _this.fillUsersAndRoles(users, roles);\n          return results;\n        };\n      })(this));\n    };\n\n    return PageMixin;\n\n  })();\n\n  taiga.PageMixin = PageMixin;\n\n  FiltersMixin = (function() {\n    function FiltersMixin() {}\n\n    FiltersMixin.prototype.excludePrefix = \"exclude_\";\n\n    FiltersMixin.prototype.selectFilter = function(name, value, load, mode) {\n      var existing, location, params;\n      if (load == null) {\n        load = false;\n      }\n      if (mode == null) {\n        mode = \"include\";\n      }\n      params = this.location.search();\n      if (mode === \"exclude\") {\n        name = this.excludePrefix.concat(name);\n      }\n      if (params[name] !== void 0 && name !== \"page\") {\n        existing = _.map(taiga.toString(params[name]).split(\",\"), function(x) {\n          return trim(x);\n        });\n        existing.push(taiga.toString(value));\n        existing = _.compact(existing);\n        value = joinStr(\",\", _.uniq(existing));\n      }\n      if (!this.location.isInCurrentRouteParams(name, value)) {\n        location = load ? this.location : this.location.noreload(this.scope);\n        return location.search(name, value);\n      }\n    };\n\n    FiltersMixin.prototype.replaceFilter = function(name, value, load) {\n      var location;\n      if (load == null) {\n        load = false;\n      }\n      if (!this.location.isInCurrentRouteParams(name, value)) {\n        location = load ? this.location : this.location.noreload(this.scope);\n        return location.search(name, value);\n      }\n    };\n\n    FiltersMixin.prototype.replaceAllFilters = function(filters, load) {\n      var location;\n      if (load == null) {\n        load = false;\n      }\n      location = load ? this.location : this.location.noreload(this.scope);\n      return location.search(filters);\n    };\n\n    FiltersMixin.prototype.unselectFilter = function(name, value, load, mode) {\n      var location, newValues, params, parsedValues;\n      if (load == null) {\n        load = false;\n      }\n      if (mode == null) {\n        mode = 'include';\n      }\n      params = this.location.search();\n      if (mode === \"exclude\") {\n        name = this.excludePrefix.concat(name);\n      }\n      if (params[name] === void 0) {\n        return;\n      }\n      if (value === void 0 || value === null) {\n        delete params[name];\n      }\n      parsedValues = _.map(taiga.toString(params[name]).split(\",\"), function(x) {\n        return trim(x);\n      });\n      newValues = _.reject(parsedValues, function(x) {\n        return x === taiga.toString(value);\n      });\n      newValues = _.compact(newValues);\n      if (_.isEmpty(newValues)) {\n        value = null;\n      } else {\n        value = joinStr(\",\", _.uniq(newValues));\n      }\n      location = load ? this.location : this.location.noreload(this.scope);\n      return location.search(name, value);\n    };\n\n    FiltersMixin.prototype.applyStoredFilters = function(projectSlug, key, validKeys) {\n      var filters;\n      if (_.isEmpty(this.location.search())) {\n        filters = this.getFilters(projectSlug, key);\n        if (validKeys) {\n          filters = _.pick(filters, validKeys);\n        }\n        if (Object.keys(filters).length) {\n          this.location.search(filters);\n          this.location.replace();\n          return true;\n        }\n      }\n      return false;\n    };\n\n    FiltersMixin.prototype.storeFilters = function(projectSlug, params, filtersHashSuffix) {\n      var hash, ns;\n      ns = projectSlug + \":\" + filtersHashSuffix;\n      hash = taiga.generateHash([projectSlug, ns]);\n      return this.storage.set(hash, params);\n    };\n\n    FiltersMixin.prototype.getFilters = function(projectSlug, filtersHashSuffix) {\n      var data, hash, ns;\n      ns = projectSlug + \":\" + filtersHashSuffix;\n      hash = taiga.generateHash([projectSlug, ns]);\n      data = this.storage.get(hash) || {};\n      delete data.q;\n      return data;\n    };\n\n    FiltersMixin.prototype.formatSelectedFilters = function(type, list, urlIds, mode) {\n      var invalidAppliedTags, invalidTags, selectedFilters, selectedIds, validAppliedTags;\n      if (mode == null) {\n        mode = \"include\";\n      }\n      selectedIds = urlIds.split(',');\n      selectedFilters = _.filter(list, function(it) {\n        return selectedIds.indexOf(_.toString(it.id)) !== -1;\n      });\n      invalidTags = _.filter(selectedIds, function(it) {\n        return !_.find(selectedFilters, function(sit) {\n          return _.toString(sit.id) === it;\n        });\n      });\n      invalidAppliedTags = _.map(invalidTags, function(it) {\n        return {\n          id: it,\n          key: type + \":\" + it,\n          dataType: type,\n          name: it,\n          mode: mode\n        };\n      });\n      validAppliedTags = _.map(selectedFilters, function(it) {\n        return {\n          id: it.id,\n          key: type + \":\" + it.id,\n          dataType: type,\n          name: it.name,\n          color: it.color,\n          mode: mode\n        };\n      });\n      return invalidAppliedTags.concat(validAppliedTags);\n    };\n\n    return FiltersMixin;\n\n  })();\n\n  taiga.FiltersMixin = FiltersMixin;\n\n  UsFiltersMixin = (function() {\n    function UsFiltersMixin() {}\n\n    UsFiltersMixin.prototype.excludePrefix = \"exclude_\";\n\n    UsFiltersMixin.prototype.filterCategories = [\"tags\", \"status\", \"assigned_users\", \"assigned_to\", \"owner\", \"epic\", \"role\"];\n\n    UsFiltersMixin.prototype.excludeFilters = [];\n\n    UsFiltersMixin.prototype.changeQ = function(q) {\n      this.filterQ = q;\n      return this.filtersReloadContent();\n    };\n\n    UsFiltersMixin.prototype.removeFilter = function(filter) {\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters();\n    };\n\n    UsFiltersMixin.prototype.addFilter = function(newFilter) {\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters();\n    };\n\n    UsFiltersMixin.prototype.selectCustomFilter = function(customFilter) {\n      this.replaceAllFilters(customFilter.filter);\n      this.filtersReloadContent();\n      return this.generateFilters();\n    };\n\n    UsFiltersMixin.prototype.saveCustomFilter = function(name) {\n      var excludeKey, filters, i, key, len, ref, urlfilters;\n      filters = {};\n      urlfilters = this.location.search();\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        filters[key] = urlfilters[key];\n        filters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.storeCustomFiltersName).then((function(_this) {\n        return function(userFilters) {\n          userFilters[name] = filters;\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.storeCustomFiltersName).then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    UsFiltersMixin.prototype.removeCustomFilter = function(customFilter) {\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.storeCustomFiltersName).then((function(_this) {\n        return function(userFilters) {\n          delete userFilters[customFilter.id];\n          _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.storeCustomFiltersName).then(_this.generateFilters);\n          return _this.generateFilters();\n        };\n      })(this));\n    };\n\n    UsFiltersMixin.prototype.isFilterDataTypeSelected = function(filterDataType) {\n      var filter, i, len, ref;\n      ref = this.selectedFilters;\n      for (i = 0, len = ref.length; i < len; i++) {\n        filter = ref[i];\n        if (filter['dataType'] === filterDataType) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    UsFiltersMixin.prototype.generateFilters = function(milestone) {\n      var excludeKey, i, key, len, loadFilters, ref, urlfilters;\n      this.storeFilters(this.params.pslug, this.location.search(), this.storeFiltersName);\n      urlfilters = this.location.search();\n      loadFilters = {};\n      loadFilters.project = this.scope.projectId;\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        loadFilters[key] = urlfilters[key];\n        loadFilters[excludeKey] = urlfilters[excludeKey];\n      }\n      if (milestone) {\n        loadFilters.milestone = milestone;\n      }\n      return this.q.all([this.rs.userstories.filtersData(loadFilters), this.filterRemoteStorageService.getFilters(this.scope.projectId, this.storeCustomFiltersName)]).then((function(_this) {\n        return function(result) {\n          var customFiltersRaw, data, dataCollection, j, len1, ref1, selected, tagsWithAtLeastOneElement;\n          data = result[0];\n          customFiltersRaw = result[1];\n          dataCollection = {};\n          dataCollection.status = _.map(data.statuses, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.tags = _.map(data.tags, function(it) {\n            it.id = it.name;\n            return it;\n          });\n          tagsWithAtLeastOneElement = _.filter(dataCollection.tags, function(tag) {\n            return tag.count > 0;\n          });\n          dataCollection.assigned_users = _.map(data.assigned_users, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.assigned_to = _.map(data.assigned_to, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.role = _.map(data.roles, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.owner = _.map(data.owners, function(it) {\n            it.id = it.id.toString();\n            it.name = it.full_name;\n            return it;\n          });\n          dataCollection.epic = _.map(data.epics, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n              it.name = \"#\" + it.ref + \" \" + it.subject;\n            } else {\n              it.id = \"null\";\n              it.name = \"Not in an epic\";\n            }\n            return it;\n          });\n          _this.selectedFilters = [];\n          ref1 = _this.filterCategories;\n          for (j = 0, len1 = ref1.length; j < len1; j++) {\n            key = ref1[j];\n            excludeKey = _this.excludePrefix.concat(key);\n            if (loadFilters[key]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[key]);\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n            if (loadFilters[excludeKey]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\");\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n          }\n          _this.filters = [];\n          if (!_this.excludeFilters.includes('status')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\n              dataType: \"status\",\n              content: dataCollection.status\n            });\n          }\n          if (!_this.excludeFilters.includes('tags')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\n              dataType: \"tags\",\n              content: dataCollection.tags,\n              hideEmpty: true,\n              totalTaggedElements: tagsWithAtLeastOneElement.length\n            });\n          }\n          if (!_this.excludeFilters.includes('assigned_to')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\n              dataType: \"assigned_users\",\n              content: dataCollection.assigned_users\n            });\n          }\n          if (!_this.excludeFilters.includes('role')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\n              dataType: \"role\",\n              content: dataCollection.role\n            });\n          }\n          if (!_this.excludeFilters.includes('created_by')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\n              dataType: \"owner\",\n              content: dataCollection.owner\n            });\n          }\n          if (!_this.excludeFilters.includes('epic')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.EPIC\"),\n              dataType: \"epic\",\n              content: dataCollection.epic\n            });\n          }\n          _this.customFilters = [];\n          return _.forOwn(customFiltersRaw, function(value, key) {\n            return _this.customFilters.push({\n              id: key,\n              name: key,\n              filter: value\n            });\n          });\n        };\n      })(this));\n    };\n\n    return UsFiltersMixin;\n\n  })();\n\n  taiga.UsFiltersMixin = UsFiltersMixin;\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaAdmin\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var $translateMissingTranslationHandlerLog;\n\n  $translateMissingTranslationHandlerLog = function($log) {\n    return function(translationId) {};\n  };\n\n  $translateMissingTranslationHandlerLog.$inject = ['$log'];\n\n  angular.module('pascalprecht.translate').factory('$translateMissingTranslationHandlerLog', $translateMissingTranslationHandlerLog);\n\n  $translateMissingTranslationHandlerLog.displayName = '$translateMissingTranslationHandlerLog';\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AuthService, CancelAccountDirective, ChangeEmailDirective, ChangePasswordFromRecoveryDirective, ForgotPasswordDirective, InvitationDirective, LoginDirective, LoginPage, PublicRegisterMessageDirective, RegisterDirective, RegisterOptionsDirective, VerifyEmailDirective, debounce, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaAuth\", [\"taigaResources\"]);\n\n  LoginPage = (function() {\n    LoginPage.$inject = ['tgCurrentUserService', '$location', '$tgNavUrls', '$routeParams', '$tgAuth'];\n\n    function LoginPage(currentUserService, $location, $navUrls, $routeParams, $auth) {\n      var url;\n      if (currentUserService.isAuthenticated()) {\n        if (!$routeParams['force_login']) {\n          url = $navUrls.resolve(\"home\");\n          if ($routeParams['next']) {\n            url = decodeURIComponent($routeParams['next']);\n            $location.search('next', null);\n          }\n          if ($routeParams['unauthorized']) {\n            $auth.clear();\n            $auth.removeToken();\n          } else {\n            $location.url(url);\n          }\n        }\n      }\n    }\n\n    return LoginPage;\n\n  })();\n\n  module.controller('LoginPage', LoginPage);\n\n  AuthService = (function(superClass) {\n    extend(AuthService, superClass);\n\n    AuthService.$inject = [\"$rootScope\", \"$tgStorage\", \"$tgModel\", \"$tgResources\", \"$tgHttp\", \"$tgUrls\", \"$tgConfig\", \"$tgUserPilot\", \"$translate\", \"tgCurrentUserService\", \"tgThemeService\", \"$tgAnalytics\"];\n\n    function AuthService(rootscope, storage, model, rs, http, urls, config1, userpilot, translate, currentUserService1, themeService, analytics) {\n      var userModel;\n      this.rootscope = rootscope;\n      this.storage = storage;\n      this.model = model;\n      this.rs = rs;\n      this.http = http;\n      this.urls = urls;\n      this.config = config1;\n      this.userpilot = userpilot;\n      this.translate = translate;\n      this.currentUserService = currentUserService1;\n      this.themeService = themeService;\n      this.analytics = analytics;\n      AuthService.__super__.constructor.call(this);\n      userModel = this.getUser();\n      this._currentTheme = this._getUserTheme();\n      this.setUserdata(userModel);\n    }\n\n    AuthService.prototype.setUserdata = function(userModel) {\n      if (userModel) {\n        this.userData = Immutable.fromJS(userModel.getAttrs());\n        this.currentUserService.setUser(this.userData);\n      } else {\n        this.userData = null;\n      }\n      return this.analytics.setUserId();\n    };\n\n    AuthService.prototype._getUserTheme = function() {\n      var compiledThemes, defaultTheme, ref, ref1, ref2;\n      compiledThemes = window._taigaAvailableThemes;\n      defaultTheme = this.config.get(\"defaultTheme\") || \"taiga\";\n      if (!_.includes(this.config.get(\"themes\"), (ref = this.rootscope.user) != null ? ref.theme : void 0) || !compiledThemes.includes((ref1 = this.rootscope.user) != null ? ref1.theme : void 0)) {\n        return defaultTheme;\n      }\n      return (ref2 = this.rootscope.user) != null ? ref2.theme : void 0;\n    };\n\n    AuthService.prototype._setTheme = function() {\n      var newTheme;\n      newTheme = this._getUserTheme();\n      if (this._currentTheme !== newTheme) {\n        this._currentTheme = newTheme;\n        return this.themeService.use(this._currentTheme);\n      }\n    };\n\n    AuthService.prototype._setLocales = function() {\n      var lang, ref;\n      lang = ((ref = this.rootscope.user) != null ? ref.lang : void 0) || this.config.get(\"defaultLanguage\") || \"en\";\n      this.translate.preferredLanguage(lang);\n      return this.translate.use(lang);\n    };\n\n    AuthService.prototype.getUser = function() {\n      var user, userData;\n      if (this.rootscope.user) {\n        return this.rootscope.user;\n      }\n      userData = this.storage.get(\"userInfo\");\n      if (userData) {\n        user = this.model.make_model(\"users\", userData);\n        this.rootscope.user = user;\n        this._setLocales();\n        this._setTheme();\n        return user;\n      } else {\n        this._setTheme();\n      }\n      return null;\n    };\n\n    AuthService.prototype.setUser = function(user) {\n      this.rootscope.auth = user;\n      this.storage.set(\"userInfo\", user.getAttrs());\n      this.rootscope.user = user;\n      this.setUserdata(user);\n      this._setLocales();\n      return this._setTheme();\n    };\n\n    AuthService.prototype.clear = function() {\n      this.rootscope.auth = null;\n      this.rootscope.user = null;\n      return this.storage.remove(\"userInfo\");\n    };\n\n    AuthService.prototype.setRefreshToken = function(token) {\n      return this.storage.set(\"refresh\", token);\n    };\n\n    AuthService.prototype.getRefreshToken = function() {\n      return this.storage.get(\"refresh\");\n    };\n\n    AuthService.prototype.setToken = function(token) {\n      return this.storage.set(\"token\", token);\n    };\n\n    AuthService.prototype.getToken = function() {\n      return this.storage.get(\"token\");\n    };\n\n    AuthService.prototype.removeToken = function() {\n      this.storage.remove(\"token\");\n      return this.storage.remove(\"refresh\");\n    };\n\n    AuthService.prototype.isAuthenticated = function() {\n      if (this.getUser() !== null) {\n        return true;\n      }\n      return false;\n    };\n\n    AuthService.prototype.refresh = function() {\n      var url;\n      url = this.urls.resolve(\"user-me\");\n      return this.http.get(url).then((function(_this) {\n        return function(data, status) {\n          var user;\n          user = data.data;\n          user.token = _this.getUser().auth_token;\n          user = _this.model.make_model(\"users\", user);\n          _this.setUser(user);\n          _this.rootscope.$broadcast(\"auth:refresh\", user);\n          return user;\n        };\n      })(this));\n    };\n\n    AuthService.prototype.login = function(data, type) {\n      var url;\n      url = this.urls.resolve(\"auth\");\n      data = _.clone(data, false);\n      data.type = type ? type : \"normal\";\n      this.removeToken();\n      return this.http.post(url, data).then((function(_this) {\n        return function(data, status) {\n          var user;\n          user = _this.model.make_model(\"users\", data.data);\n          _this.setToken(user.auth_token);\n          _this.setRefreshToken(user.refresh);\n          _this.setUser(user);\n          _this.rootscope.$broadcast(\"auth:login\", user);\n          return user;\n        };\n      })(this));\n    };\n\n    AuthService.prototype.logout = function() {\n      this.removeToken();\n      this.clear();\n      this.currentUserService.removeUser();\n      this._setTheme();\n      this._setLocales();\n      this.rootscope.$broadcast(\"auth:logout\");\n      return this.analytics.setUserId();\n    };\n\n    AuthService.prototype.register = function(data, type, existing) {\n      var url;\n      url = this.urls.resolve(\"auth-register\");\n      data = _.clone(data, false);\n      data.type = type ? type : \"public\";\n      if (type === \"private\") {\n        data.existing = existing ? existing : false;\n      }\n      this.removeToken();\n      return this.http.post(url, data).then((function(_this) {\n        return function(response) {\n          var user;\n          user = _this.model.make_model(\"users\", response.data);\n          _this.setToken(user.auth_token);\n          _this.setUser(user);\n          _this.rootscope.$broadcast(\"auth:register\", user);\n          return user;\n        };\n      })(this));\n    };\n\n    AuthService.prototype.getInvitation = function(token) {\n      return this.rs.invitations.get(token);\n    };\n\n    AuthService.prototype.acceptInvitiationWithNewUser = function(data) {\n      return this.register(data, \"private\", false);\n    };\n\n    AuthService.prototype.forgotPassword = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-password-recovery\");\n      data = _.clone(data, false);\n      this.removeToken();\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.changePasswordFromRecovery = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-change-password-from-recovery\");\n      data = _.clone(data, false);\n      this.removeToken();\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.changeEmail = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-change-email\");\n      data = _.clone(data, false);\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.cancelAccount = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-cancel-account\");\n      data = _.clone(data, false);\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.exportProfile = function() {\n      var url;\n      url = this.urls.resolve(\"users-export\");\n      return this.http.post(url);\n    };\n\n    AuthService.prototype.sendVerificationEmail = function() {\n      var url;\n      url = this.urls.resolve(\"user-send-verification-email\");\n      return this.http.post(url);\n    };\n\n    return AuthService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgAuth\", AuthService);\n\n  PublicRegisterMessageDirective = function($config, $navUrls, $routeParams, templates) {\n    var template, templateFn;\n    template = templates.get(\"auth/login-text.html\", true);\n    templateFn = function() {\n      var nextUrl, publicRegisterEnabled, url;\n      publicRegisterEnabled = $config.get(\"publicRegisterEnabled\");\n      if (!publicRegisterEnabled) {\n        return \"\";\n      }\n      url = $navUrls.resolve(\"register\");\n      if ($routeParams['force_next']) {\n        nextUrl = encodeURIComponent($routeParams['force_next']);\n        url += \"?next=\" + nextUrl;\n      }\n      return template({\n        url: url\n      });\n    };\n    return {\n      restrict: \"AE\",\n      scope: {},\n      template: templateFn\n    };\n  };\n\n  module.directive(\"tgPublicRegisterMessage\", [\"$tgConfig\", \"$tgNavUrls\", \"$routeParams\", \"$tgTemplate\", PublicRegisterMessageDirective]);\n\n  LoginDirective = function($auth, $confirm, $location, $config, $routeParams, $navUrls, $events, $translate, $window, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onError, onSuccess, submit;\n      form = new checksley.Form($el.find(\"form.login-form\"));\n      $scope.defaultLoginEnabled = $config.get(\"defaultLoginEnabled\", true);\n      if ($routeParams['next'] && $routeParams['next'] !== $navUrls.resolve(\"login\") && !$routeParams['next'].startsWith(\"%2Fdiscover\")) {\n        $scope.nextUrl = decodeURIComponent($routeParams['next']);\n      } else {\n        $scope.nextUrl = $navUrls.resolve(\"home\");\n      }\n      if ($routeParams['force_next']) {\n        $scope.nextUrl = decodeURIComponent($routeParams['force_next']);\n      }\n      onSuccess = function(response) {\n        $events.setupConnection();\n        $analytics.trackEvent(\"auth\", \"login\", \"user login\", 1);\n        if ($scope.nextUrl.indexOf('http') === 0) {\n          return $window.location.href = $scope.nextUrl;\n        } else {\n          return $location.url($scope.nextUrl);\n        }\n      };\n      onError = function(response) {\n        return $confirm.notify(\"light-error\", $translate.instant(\"LOGIN_FORM.ERROR_AUTH_INCORRECT\"));\n      };\n      $scope.onKeyUp = function(event) {\n        var target, value;\n        target = angular.element(event.currentTarget);\n        value = target.val();\n        $scope.iscapsLockActivated = false;\n        if (value !== value.toLowerCase()) {\n          return $scope.iscapsLockActivated = true;\n        }\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var data, loginFormType, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          data = {\n            \"username\": $el.find(\"form.login-form input[name=username]\").val(),\n            \"password\": $el.find(\"form.login-form input[name=password]\").val()\n          };\n          loginFormType = $config.get(\"loginFormType\", \"normal\");\n          promise = $auth.login(data, loginFormType);\n          return promise.then(onSuccess, onError);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      window.prerenderReady = true;\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLogin\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgConfig\", \"$routeParams\", \"$tgNavUrls\", \"$tgEvents\", \"$translate\", \"$window\", \"$tgAnalytics\", LoginDirective]);\n\n  RegisterDirective = function($auth, $confirm, $location, $navUrls, $config, $routeParams, $analytics, $translate, $window) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      if (!$config.get(\"publicRegisterEnabled\")) {\n        $location.path($navUrls.resolve(\"not-found\"));\n        $location.replace();\n      }\n      $scope.data = {};\n      form = $el.find(\"form\").checksley({\n        onlyOneErrorElement: true\n      });\n      if ($routeParams['next'] && $routeParams['next'] !== $navUrls.resolve(\"login\")) {\n        $scope.nextUrl = decodeURIComponent($routeParams['next']);\n      } else {\n        $scope.nextUrl = $navUrls.resolve(\"home\");\n      }\n      onSuccessSubmit = function(response) {\n        $analytics.trackEvent(\"auth\", \"register\", \"user registration\", 1);\n        if ($scope.nextUrl.indexOf('http') === 0) {\n          return $window.location.href = $scope.nextUrl;\n        } else {\n          return $location.url($scope.nextUrl);\n        }\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        if (response.data._error_message) {\n          text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n            error: response.data._error_message\n          });\n          $confirm.notify(\"light-error\", text);\n        }\n        return form.setErrors(response.data);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.register($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return window.prerenderReady = true;\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRegister\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgNavUrls\", \"$tgConfig\", \"$routeParams\", \"$tgAnalytics\", \"$translate\", \"$window\", RegisterDirective]);\n\n  RegisterOptionsDirective = function() {\n    return {};\n  };\n\n  module.directive(\"tgRegisterOptions\", [RegisterOptionsDirective]);\n\n  ForgotPasswordDirective = function($auth, $confirm, $location, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var message, title;\n        $location.path($navUrls.resolve(\"login\"));\n        title = $translate.instant(\"FORGOT_PASSWORD_FORM.SUCCESS_TITLE\");\n        message = $translate.instant(\"FORGOT_PASSWORD_FORM.SUCCESS_TEXT\");\n        return $confirm.success(title, message);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"FORGOT_PASSWORD_FORM.ERROR\");\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.forgotPassword($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return window.prerenderReady = true;\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgForgotPassword\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgNavUrls\", \"$translate\", ForgotPasswordDirective]);\n\n  ChangePasswordFromRecoveryDirective = function($auth, $confirm, $location, $params, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit, text;\n      $scope.data = {};\n      if ($params.token != null) {\n        $scope.tokenInParams = true;\n        $scope.data.token = $params.token;\n      } else {\n        $location.path($navUrls.resolve(\"login\"));\n        text = '';\n        text = response.data.token.map(function(message) {\n          return text + \" \" + message;\n        });\n        $confirm.notify(\"light-error\", text);\n      }\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        $location.path($navUrls.resolve(\"login\"));\n        text = $translate.instant(\"CHANGE_PASSWORD_RECOVERY_FORM.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        text = '';\n        text = response.data.password.map(function(message) {\n          return text + \" \" + message;\n        });\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.changePasswordFromRecovery($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgChangePasswordFromRecovery\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", \"$translate\", ChangePasswordFromRecoveryDirective]);\n\n  InvitationDirective = function($auth, $confirm, $location, $config, $params, $navUrls, $analytics, $translate, config) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var loginForm, onErrorSubmitLogin, onErrorSubmitRegister, onSuccessSubmitLogin, onSuccessSubmitRegister, promise, registerForm, submitLogin, submitRegister, token;\n      token = $params.token;\n      promise = $auth.getInvitation(token);\n      promise.then(function(invitation) {\n        $scope.invitation = invitation;\n        return $scope.publicRegisterEnabled = config.get(\"publicRegisterEnabled\");\n      });\n      promise.then(null, function(response) {\n        var text;\n        $location.path($navUrls.resolve(\"login\"));\n        text = $translate.instant(\"INVITATION_LOGIN_FORM.NOT_FOUND\");\n        return $confirm.notify(\"light-error\", text);\n      });\n      $scope.dataLogin = {\n        token: token\n      };\n      loginForm = $el.find(\"form.login-form\").checksley({\n        onlyOneErrorElement: true\n      });\n      onSuccessSubmitLogin = function(response) {\n        var text;\n        $analytics.trackEvent(\"auth\", \"invitationAccept\", \"invitation accept with existing user\", 1);\n        $location.path($navUrls.resolve(\"project\", {\n          project: $scope.invitation.project_slug\n        }));\n        text = $translate.instant(\"INVITATION_LOGIN_FORM.SUCCESS\", {\n          \"project_name\": $scope.invitation.project_name\n        });\n        return $confirm.notify(\"success\", text);\n      };\n      onErrorSubmitLogin = function(response) {\n        return $confirm.notify(\"light-error\", response.data._error_message);\n      };\n      submitLogin = debounce(2000, (function(_this) {\n        return function(event) {\n          var data, loginFormType;\n          event.preventDefault();\n          if (!loginForm.validate()) {\n            return;\n          }\n          loginFormType = $config.get(\"loginFormType\", \"normal\");\n          data = $scope.dataLogin;\n          promise = $auth.login({\n            username: data.username,\n            password: data.password,\n            invitation_token: data.token\n          }, loginFormType);\n          return promise.then(onSuccessSubmitLogin, onErrorSubmitLogin);\n        };\n      })(this));\n      $el.on(\"submit\", \"form.login-form\", submitLogin);\n      $el.on(\"click\", \".button-login\", submitLogin);\n      $scope.dataRegister = {\n        token: token\n      };\n      registerForm = $el.find(\"form.register-form\").checksley({\n        onlyOneErrorElement: true\n      });\n      onSuccessSubmitRegister = function(response) {\n        var text;\n        $analytics.trackEvent(\"auth\", \"invitationAccept\", \"invitation accept with new user\", 1);\n        $location.path($navUrls.resolve(\"project\", {\n          project: $scope.invitation.project_slug\n        }));\n        text = $translate.instant(\"INVITATION_LOGIN_FORM.SUCCESS\", {\n          \"project_name\": $scope.invitation.project_name\n        });\n        return $confirm.notify(\"success\", text);\n      };\n      onErrorSubmitRegister = function(response) {\n        var text;\n        if (response.data._error_message) {\n          text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n            error: response.data._error_message\n          });\n          $confirm.notify(\"light-error\", text);\n        }\n        return registerForm.setErrors(response.data);\n      };\n      submitRegister = debounce(2000, (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          if (!registerForm.validate()) {\n            return;\n          }\n          promise = $auth.acceptInvitiationWithNewUser($scope.dataRegister);\n          return promise.then(onSuccessSubmitRegister, onErrorSubmitRegister);\n        };\n      })(this));\n      $el.on(\"submit\", \"form.register-form\", submitRegister);\n      $el.on(\"click\", \".button-register\", submitRegister);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgInvitation\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgConfig\", \"$routeParams\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"$tgConfig\", InvitationDirective]);\n\n  VerifyEmailDirective = function($repo, $model, $auth, $confirm, $location, $params, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      $scope.data.email_token = $params.email_token;\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var text;\n        if ($auth.isAuthenticated()) {\n          $repo.queryOne(\"users\", $auth.getUser().id).then((function(_this) {\n            return function(data) {\n              return $auth.setUser(data);\n            };\n          })(this));\n          $location.url($navUrls.resolve(\"home\"));\n        } else {\n          $location.url($navUrls.resolve(\"login\"));\n        }\n        text = $translate.instant(\"VERIFY_EMAIL_FORM.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n          error: response.data._error_message\n        });\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = function() {\n        var promise;\n        if (!form.validate()) {\n          return;\n        }\n        promise = $auth.changeEmail($scope.data);\n        return promise.then(onSuccessSubmit, onErrorSubmit);\n      };\n      $el.on(\"submit\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"click\", \"a.ng-submit-form\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgVerifyEmail\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", \"$translate\", VerifyEmailDirective]);\n\n  ChangeEmailDirective = function($repo, $model, $auth, $confirm, $location, $params, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      $scope.data.email_token = $params.email_token;\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var text;\n        if ($auth.isAuthenticated()) {\n          $repo.queryOne(\"users\", $auth.getUser().id).then((function(_this) {\n            return function(data) {\n              return $auth.setUser(data);\n            };\n          })(this));\n          $location.url($navUrls.resolve(\"home\"));\n        } else {\n          $location.url($navUrls.resolve(\"login\"));\n        }\n        text = $translate.instant(\"CHANGE_EMAIL_FORM.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n          error: response.data._error_message\n        });\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = function() {\n        var promise;\n        if (!form.validate()) {\n          return;\n        }\n        promise = $auth.changeEmail($scope.data);\n        return promise.then(onSuccessSubmit, onErrorSubmit);\n      };\n      $el.on(\"submit\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"click\", \"a.ng-submit-form\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgChangeEmail\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", \"$translate\", ChangeEmailDirective]);\n\n  CancelAccountDirective = function($repo, $model, $auth, $confirm, $location, $params, $navUrls) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      $scope.data.cancel_token = $params.cancel_token;\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var text;\n        $auth.logout();\n        $location.path($navUrls.resolve(\"home\"));\n        text = $translate.instant(\"CANCEL_ACCOUNT.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n          error: response.data._error_message\n        });\n        return $confirm.notify(\"error\", text);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.cancelAccount($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgCancelAccount\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", CancelAccountDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaBacklog\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TaigaMainDirective, bindOnce, groupBy, init, module, taiga, urls;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaBase\", []);\n\n  TaigaMainDirective = function($rootscope, $window) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $window.onresize = function() {\n        return $rootscope.$broadcast(\"resize\");\n      };\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMain\", [\"$rootScope\", \"$window\", TaigaMainDirective]);\n\n  urls = {\n    \"home\": \"/\",\n    \"projects\": \"/projects\",\n    \"error\": \"/error\",\n    \"not-found\": \"/not-found\",\n    \"permission-denied\": \"/permission-denied\",\n    \"discover\": \"/discover\",\n    \"discover-search\": \"/discover/search\",\n    \"login\": \"/login\",\n    \"forgot-password\": \"/forgot-password\",\n    \"change-password\": \"/change-password/:token\",\n    \"change-email\": \"/change-email/:token\",\n    \"verified-email\": \"/change-email/:token\",\n    \"cancel-account\": \"/cancel-account/:token\",\n    \"register\": \"/register\",\n    \"invitation\": \"/invitation/:token\",\n    \"create-project\": \"/project/new\",\n    \"create-project-scrum\": \"/project/new/scrum\",\n    \"create-project-kanban\": \"/project/new/kanban\",\n    \"create-project-duplicate\": \"/project/new/duplicate\",\n    \"create-project-import\": \"/project/new/import\",\n    \"create-project-import-platform\": \"/project/new/import/:platform\",\n    \"profile\": \"/profile\",\n    \"user-profile\": \"/profile/:username\",\n    \"blocked-project\": \"/blocked-project/:project\",\n    \"project\": \"/project/:project\",\n    \"project-detail-ref\": \"/project/:project/t/:ref\",\n    \"project-backlog\": \"/project/:project/backlog\",\n    \"project-taskboard\": \"/project/:project/taskboard/:sprint\",\n    \"project-kanban\": \"/project/:project/kanban\",\n    \"project-issues\": \"/project/:project/issues\",\n    \"project-epics\": \"/project/:project/epics\",\n    \"project-search\": \"/project/:project/search\",\n    \"project-timeline\": \"/project/:project/timeline\",\n    \"project-epics-detail\": \"/project/:project/epic/:ref\",\n    \"project-userstories-detail\": \"/project/:project/us/:ref\",\n    \"project-tasks-detail\": \"/project/:project/task/:ref\",\n    \"project-issues-detail\": \"/project/:project/issue/:ref\",\n    \"project-wiki\": \"/project/:project/wiki\",\n    \"project-wiki-list\": \"/project/:project/wiki-list\",\n    \"project-wiki-page\": \"/project/:project/wiki/:slug\",\n    \"project-team\": \"/project/:project/team\",\n    \"project-admin-home\": \"/project/:project/admin/project-profile/details\",\n    \"project-admin-project-profile-details\": \"/project/:project/admin/project-profile/details\",\n    \"project-admin-project-profile-default-values\": \"/project/:project/admin/project-profile/default-values\",\n    \"project-admin-project-profile-modules\": \"/project/:project/admin/project-profile/modules\",\n    \"project-admin-project-profile-export\": \"/project/:project/admin/project-profile/export\",\n    \"project-admin-project-profile-reports\": \"/project/:project/admin/project-profile/reports\",\n    \"project-admin-project-values-status\": \"/project/:project/admin/project-values/status\",\n    \"project-admin-project-values-points\": \"/project/:project/admin/project-values/points\",\n    \"project-admin-project-values-priorities\": \"/project/:project/admin/project-values/priorities\",\n    \"project-admin-project-values-severities\": \"/project/:project/admin/project-values/severities\",\n    \"project-admin-project-values-types\": \"/project/:project/admin/project-values/types\",\n    \"project-admin-project-values-custom-fields\": \"/project/:project/admin/project-values/custom-fields\",\n    \"project-admin-project-values-tags\": \"/project/:project/admin/project-values/tags\",\n    \"project-admin-project-values-due-dates\": \"/project/:project/admin/project-values/due-dates\",\n    \"project-admin-project-values-kanban-power-ups\": \"/project/:project/admin/project-values/kanban-power-ups\",\n    \"project-admin-memberships\": \"/project/:project/admin/memberships\",\n    \"project-admin-roles\": \"/project/:project/admin/roles\",\n    \"project-admin-third-parties-webhooks\": \"/project/:project/admin/third-parties/webhooks\",\n    \"project-admin-third-parties-github\": \"/project/:project/admin/third-parties/github\",\n    \"project-admin-third-parties-gitlab\": \"/project/:project/admin/third-parties/gitlab\",\n    \"project-admin-third-parties-bitbucket\": \"/project/:project/admin/third-parties/bitbucket\",\n    \"project-admin-third-parties-gogs\": \"/project/:project/admin/third-parties/gogs\",\n    \"project-admin-contrib\": \"/project/:project/admin/contrib/:plugin\",\n    \"user-settings-user-profile\": \"/user-settings/user-profile\",\n    \"user-settings-user-change-password\": \"/user-settings/user-change-password\",\n    \"user-settings-user-avatar\": \"/user-settings/user-avatar\",\n    \"user-settings-user-project-settings\": \"/user-settings/user-project-settings\",\n    \"user-settings-mail-notifications\": \"/user-settings/mail-notifications\",\n    \"user-settings-live-notifications\": \"/user-settings/live-notifications\",\n    \"user-settings-web-notifications\": \"/user-settings/web-notifications\",\n    \"user-settings-contrib\": \"/user-settings/contrib/:plugin\",\n    \"notifications\": \"/notifications\"\n  };\n\n  init = function($log, $navurls) {\n    $log.debug(\"Initialize navigation urls\");\n    return $navurls.update(urls);\n  };\n\n  module.run([\"$log\", \"$tgNavUrls\", init]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AnimationFrame, Autofocus, Capslock, CheckPermissionDirective, ClassPermissionDirective, DataPickerConfig, ProjectUrl, Qqueue, QueueModelTransformation, SelectedText, Svg, Template, ToggleCommentDirective, module, taiga,\n    slice = [].slice,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\", []);\n\n  DataPickerConfig = function($translate, $config, $auth) {\n    return {\n      get: function() {\n        var isRTL, lang, rtlLanguages, user;\n        user = $auth.getUser();\n        lang = (user != null ? user.lang : void 0) || $translate.preferredLanguage();\n        rtlLanguages = $config.get(\"rtlLanguages\", []);\n        isRTL = rtlLanguages.indexOf(lang) > -1;\n        return {\n          i18n: {\n            previousMonth: $translate.instant(\"COMMON.PICKERDATE.PREV_MONTH\"),\n            nextMonth: $translate.instant(\"COMMON.PICKERDATE.NEXT_MONTH\"),\n            months: [$translate.instant(\"COMMON.PICKERDATE.MONTHS.JAN\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.FEB\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.MAR\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.APR\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.MAY\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.JUN\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.JUL\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.AUG\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.SEP\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.OCT\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.NOV\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.DEC\")],\n            weekdays: [$translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.SUN\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.MON\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.TUE\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.WED\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.THU\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.FRI\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.SAT\")],\n            weekdaysShort: [$translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.SUN\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.MON\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.TUE\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.WED\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.THU\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.FRI\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.SAT\")]\n          },\n          isRTL: isRTL,\n          firstDay: parseInt($translate.instant(\"COMMON.PICKERDATE.FIRST_DAY_OF_WEEK\"), 10),\n          format: $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\n        };\n      }\n    };\n  };\n\n  module.factory(\"tgDatePickerConfigService\", [\"$translate\", \"$tgConfig\", \"$tgAuth\", DataPickerConfig]);\n\n  SelectedText = function($window, $document) {\n    var get;\n    get = function() {\n      if ($window.getSelection) {\n        return $window.getSelection().toString();\n      } else if ($document.selection) {\n        return $document.selection.createRange().text;\n      }\n      return \"\";\n    };\n    return {\n      get: get\n    };\n  };\n\n  module.factory(\"$selectedText\", [\"$window\", \"$document\", SelectedText]);\n\n  CheckPermissionDirective = function(projectService) {\n    var link, render;\n    render = function($el, project, permission) {\n      if (project && permission) {\n        if (project.get('my_permissions').indexOf(permission) > -1) {\n          return $el.removeClass('hidden');\n        }\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var permission, unObserve, unwatch;\n      $el.addClass('hidden');\n      permission = $attrs.tgCheckPermission;\n      unwatch = $scope.$watch(function() {\n        return projectService.project;\n      }, function() {\n        if (!projectService.project) {\n          return;\n        }\n        render($el, projectService.project, permission);\n        return unwatch();\n      });\n      unObserve = $attrs.$observe(\"tgCheckPermission\", function(permission) {\n        if (!permission) {\n          return;\n        }\n        render($el, projectService.project, permission);\n        return unObserve();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  CheckPermissionDirective.$inject = [\"tgProjectService\"];\n\n  module.directive(\"tgCheckPermission\", CheckPermissionDirective);\n\n  ClassPermissionDirective = function() {\n    var link, name;\n    name = \"tgClassPermission\";\n    link = function($scope, $el, $attrs) {\n      var checkPermissions, tgClassPermissionWatchAction, unbindWatcher;\n      checkPermissions = function(project, className, permission) {\n        var negation;\n        negation = permission[0] === \"!\";\n        if (negation) {\n          permission = permission.slice(1);\n        }\n        if (negation && project.my_permissions.indexOf(permission) === -1) {\n          return $el.addClass(className);\n        } else if (!negation && project.my_permissions.indexOf(permission) !== -1) {\n          return $el.addClass(className);\n        } else {\n          return $el.removeClass(className);\n        }\n      };\n      tgClassPermissionWatchAction = function(project) {\n        var className, classes, permission, results;\n        if (project) {\n          unbindWatcher();\n          classes = $scope.$eval($attrs[name]);\n          results = [];\n          for (className in classes) {\n            permission = classes[className];\n            results.push(checkPermissions(project, className, permission));\n          }\n          return results;\n        }\n      };\n      return unbindWatcher = $scope.$watch(\"project\", tgClassPermissionWatchAction);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgClassPermission\", ClassPermissionDirective);\n\n  AnimationFrame = function() {\n    var add, animationFrame, performAnimation, tail;\n    animationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;\n    performAnimation = (function(_this) {\n      return function(time) {\n        var fn;\n        fn = tail.shift();\n        fn();\n        if (tail.length) {\n          return animationFrame(performAnimation);\n        }\n      };\n    })(this);\n    tail = [];\n    add = function() {\n      var fn, i, len, results;\n      results = [];\n      for (i = 0, len = arguments.length; i < len; i++) {\n        fn = arguments[i];\n        tail.push(fn);\n        if (tail.length === 1) {\n          results.push(animationFrame(performAnimation));\n        } else {\n          results.push(void 0);\n        }\n      }\n      return results;\n    };\n    return {\n      add: add\n    };\n  };\n\n  module.factory(\"animationFrame\", AnimationFrame);\n\n  ToggleCommentDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $el.find(\"textarea\").on(\"focus\", function() {\n        return $el.addClass(\"active\");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgToggleComment\", ToggleCommentDirective);\n\n  ProjectUrl = function($navurls) {\n    var get;\n    get = function(project) {\n      var ctx;\n      if (project.toJS) {\n        project = project.toJS();\n      }\n      ctx = {\n        project: project.slug\n      };\n      if (project.is_backlog_activated && project.my_permissions.indexOf(\"view_us\") > -1) {\n        return $navurls.resolve(\"project-backlog\", ctx);\n      }\n      if (project.is_kanban_activated && project.my_permissions.indexOf(\"view_us\") > -1) {\n        return $navurls.resolve(\"project-kanban\", ctx);\n      }\n      if (project.is_wiki_activated && project.my_permissions.indexOf(\"view_wiki_pages\") > -1) {\n        return $navurls.resolve(\"project-wiki\", ctx);\n      }\n      if (project.is_issues_activated && project.my_permissions.indexOf(\"view_issues\") > -1) {\n        return $navurls.resolve(\"project-issues\", ctx);\n      }\n      return $navurls.resolve(\"project\", ctx);\n    };\n    return {\n      get: get\n    };\n  };\n\n  module.factory(\"$projectUrl\", [\"$tgNavUrls\", ProjectUrl]);\n\n  Qqueue = function($q) {\n    var deferred, lastPromise, qqueue;\n    deferred = $q.defer();\n    deferred.resolve();\n    lastPromise = deferred.promise;\n    qqueue = {\n      bindAdd: (function(_this) {\n        return function(fn) {\n          return function() {\n            var args;\n            args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n            return lastPromise = lastPromise.then(function() {\n              return fn.apply(_this, args);\n            });\n          };\n        };\n      })(this),\n      add: (function(_this) {\n        return function(fn) {\n          if (!lastPromise) {\n            lastPromise = fn();\n          } else {\n            lastPromise = lastPromise.then(fn);\n          }\n          return qqueue;\n        };\n      })(this)\n    };\n    return qqueue;\n  };\n\n  module.factory(\"$tgQqueue\", [\"$q\", Qqueue]);\n\n  QueueModelTransformation = (function(superClass) {\n    extend(QueueModelTransformation, superClass);\n\n    QueueModelTransformation.$inject = [\"$tgQqueue\", \"$tgRepo\", \"$q\", \"$tgModel\"];\n\n    function QueueModelTransformation(qqueue1, repo, q, model1) {\n      this.qqueue = qqueue1;\n      this.repo = repo;\n      this.q = q;\n      this.model = model1;\n    }\n\n    QueueModelTransformation.prototype.setObject = function(scope1, prop) {\n      this.scope = scope1;\n      this.prop = prop;\n    };\n\n    QueueModelTransformation.prototype.clone = function() {\n      var attrs, model;\n      attrs = _.cloneDeep(this.scope[this.prop]._attrs);\n      model = this.model.make_model(this.scope[this.prop]._name, attrs);\n      return model;\n    };\n\n    QueueModelTransformation.prototype.getObj = function() {\n      return this.scope[this.prop];\n    };\n\n    QueueModelTransformation.prototype.save = function(transformation) {\n      var defered;\n      defered = this.q.defer();\n      this.qqueue.add((function(_this) {\n        return function() {\n          var clone, comment, modified, obj, success;\n          obj = _this.getObj();\n          comment = obj.comment;\n          obj.comment = '';\n          clone = _this.clone();\n          modified = _.omit(obj._modifiedAttrs, ['version']);\n          clone = _.assign(clone, modified);\n          transformation(clone);\n          if (comment.length) {\n            clone.comment = comment;\n          }\n          success = function() {\n            _this.scope[_this.prop] = clone;\n            return defered.resolve.apply(null, arguments);\n          };\n          return _this.repo.save(clone).then(success, defered.reject);\n        };\n      })(this));\n      return defered.promise;\n    };\n\n    return QueueModelTransformation;\n\n  })(taiga.Service);\n\n  module.service(\"$tgQueueModelTransformation\", QueueModelTransformation);\n\n  Template = function($templateCache) {\n    return {\n      get: (function(_this) {\n        return function(name, lodash) {\n          var tmp;\n          if (lodash == null) {\n            lodash = false;\n          }\n          tmp = $templateCache.get(name);\n          if (lodash) {\n            tmp = _.template(tmp);\n          }\n          return tmp;\n        };\n      })(this)\n    };\n  };\n\n  module.factory(\"$tgTemplate\", [\"$templateCache\", Template]);\n\n  Capslock = function() {\n    var template;\n    template = \"<tg-svg class=\\\"capslock\\\" ng-if=\\\"capslockIcon && iscapsLockActivated\\\" svg-icon='icon-capslock' svg-title='COMMON.CAPSLOCK_WARNING'></tg-svg>\";\n    return {\n      template: template\n    };\n  };\n\n  module.directive(\"tgCapslock\", [Capslock]);\n\n  Svg = function() {\n    var template;\n    template = \"<svg class=\\\"{{ 'icon ' + svgIcon }}\\\" style=\\\"fill: {{ svgFill }}\\\">\\n    <use xlink:href=\\\"\\\" ng-attr-xlink:href=\\\"{{ '#' + svgIcon }}\\\" ng-attr-href=\\\"{{ '#' + svgIcon }}\\\">\\n        <title ng-if=\\\"svgTitle\\\">{{svgTitle}}</title>\\n        <title ng-if=\\\"svgTitleTranslate\\\">{{svgTitleTranslate | translate: svgTitleTranslateValues}}</title>\\n    </use>\\n</svg>\";\n    return {\n      scope: {\n        svgIcon: \"@\",\n        svgTitle: \"@\",\n        svgTitleTranslate: \"@\",\n        svgTitleTranslateValues: \"=\",\n        svgFill: \"=\"\n      },\n      template: template\n    };\n  };\n\n  module.directive(\"tgSvg\", [Svg]);\n\n  Autofocus = function($timeout, $parse, animationFrame) {\n    return {\n      restrict: 'A',\n      link: function($scope, $element, attrs) {\n        var model;\n        if (attrs.ngShow) {\n          model = $parse(attrs.ngShow);\n          return $scope.$watch(model, function(value) {\n            if (value === true) {\n              return $timeout(function() {\n                return $element[0].focus();\n              });\n            }\n          });\n        } else {\n          return $timeout(function() {\n            return $element[0].focus();\n          });\n        }\n      }\n    };\n  };\n\n  module.directive('tgAutofocus', ['$timeout', '$parse', \"animationFrame\", Autofocus]);\n\n  module.directive('tgPreloadImage', function() {\n    var preload, spinner, template;\n    spinner = \"<img class='loading-spinner' src='\" + window._version + \"/svg/spinner-circle.svg' alt='loading...' />\";\n    template = \"<div>\\n    <ng-transclude></ng-transclude>\\n</div>\";\n    preload = function(src, onLoad) {\n      var image;\n      image = new Image();\n      image.onload = onLoad;\n      image.src = src;\n      return image;\n    };\n    return {\n      template: template,\n      transclude: true,\n      replace: true,\n      link: function(scope, el, attrs) {\n        var image, onLoad, timeout;\n        image = el.find('img:last');\n        timeout = null;\n        onLoad = function() {\n          el.find('.loading-spinner').remove();\n          image.show();\n          if (timeout) {\n            clearTimeout(timeout);\n            return timeout = null;\n          }\n        };\n        return attrs.$observe('preloadSrc', function(src) {\n          if (timeout) {\n            clearTimeout(timeout);\n          }\n          el.find('.loading-spinner').remove();\n          timeout = setTimeout(function() {\n            return el.prepend(spinner);\n          }, 200);\n          image.hide();\n          return preload(src, onLoad);\n        });\n      }\n    };\n  });\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DetailController, bindMethods, bindOnce, groupBy, joinStr, mixOf, module, taiga, toString;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaCommon\");\n\n  DetailController = (function() {\n    DetailController.$inject = ['$routeParams', '$tgRepo', \"tgProjectService\", \"$tgNavUrls\", \"$location\"];\n\n    function DetailController(params, repo, projectService, navurls, location) {\n      this.params = params;\n      this.repo = repo;\n      this.projectService = projectService;\n      this.navurls = navurls;\n      this.location = location;\n      this.repo.resolve({\n        pslug: this.params.pslug,\n        ref: this.params.ref\n      }).then((function(_this) {\n        return function(result) {\n          var url;\n          if (result.issue) {\n            url = _this.navurls.resolve('project-issues-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.task) {\n            url = _this.navurls.resolve('project-tasks-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.us) {\n            url = _this.navurls.resolve('project-userstories-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.epic) {\n            url = _this.navurls.resolve('project-epics-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.wikipage) {\n            url = _this.navurls.resolve('project-wiki-page', {\n              project: _this.projectService.project.get('slug'),\n              slug: _this.params.ref\n            });\n          }\n          return _this.location.path(url);\n        };\n      })(this));\n    }\n\n    return DetailController;\n\n  })();\n\n  module.controller(\"DetailController\", DetailController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaEpics\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var EventsProvider, EventsService, bindMethods, module, startswith, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  startswith = this.taiga.startswith;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaEvents\", []);\n\n  EventsService = (function() {\n    function EventsService(win, log, config, auth, liveAnnouncementService1, rootScope) {\n      this.win = win;\n      this.log = log;\n      this.config = config;\n      this.auth = auth;\n      this.liveAnnouncementService = liveAnnouncementService1;\n      this.rootScope = rootScope;\n      this.processMessage = bind(this.processMessage, this);\n      bindMethods(this);\n    }\n\n    EventsService.prototype.initialize = function(sessionId) {\n      this.sessionId = sessionId;\n      this.subscriptions = {};\n      this.connected = false;\n      this.error = false;\n      this.pendingMessages = [];\n      this.reconnectTryInterval = this.config.get(\"eventsReconnectTryInterval\", 10000);\n      this.maxConnectionErrors = this.config.get(\"eventsMaxConnectionErrors\", 5);\n      this.errors = 0;\n      this.missedHeartbeats = 0;\n      this.heartbeatInterval = null;\n      if (this.win.WebSocket === void 0) {\n        return this.log.info(\"WebSockets not supported on your browser\");\n      }\n    };\n\n    EventsService.prototype.setupConnection = function() {\n      var loc, path, scheme, url;\n      this.stopExistingConnection();\n      url = this.config.get(\"eventsUrl\");\n      if (!url) {\n        return;\n      }\n      if (!startswith(url, \"ws:\") && !startswith(url, \"wss:\")) {\n        loc = this.win.location;\n        scheme = loc.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n        path = _.trimStart(url, \"/\");\n        url = scheme + \"//\" + loc.host + \"/\" + path;\n      }\n      this.error = false;\n      this.ws = new this.win.WebSocket(url);\n      this.ws.addEventListener(\"open\", this.onOpen);\n      this.ws.addEventListener(\"message\", this.onMessage);\n      this.ws.addEventListener(\"error\", this.onError);\n      return this.ws.addEventListener(\"close\", this.onClose);\n    };\n\n    EventsService.prototype.stopExistingConnection = function() {\n      if (this.ws === void 0) {\n        return;\n      }\n      this.ws.removeEventListener(\"open\", this.onOpen);\n      this.ws.removeEventListener(\"close\", this.onClose);\n      this.ws.removeEventListener(\"error\", this.onError);\n      this.ws.removeEventListener(\"message\", this.onMessage);\n      this.stopHeartBeatMessages();\n      this.ws.close();\n      return delete this.ws;\n    };\n\n    EventsService.prototype.notifications = function() {\n      return this.subscribe(null, 'notifications', (function(_this) {\n        return function(data) {\n          _this.liveAnnouncementService.show(data.title, data.desc);\n          return _this.rootScope.$digest();\n        };\n      })(this));\n    };\n\n    EventsService.prototype.liveNotifications = function() {\n      var subscribe, userId;\n      if (this.auth.userData == null) {\n        return;\n      }\n      userId = this.auth.userData.get('id');\n      subscribe = (function(_this) {\n        return function() {\n          return _this.subscribe(null, \"live_notifications.\" + userId, function(data) {\n            var notification;\n            notification = new Notification(data.title, {\n              icon: \"/\" + window._version + \"/images/favicon.png\",\n              body: data.body,\n              tag: data.id\n            });\n            notification.onshow = function() {\n              if (data.timeout && data.timeout > 0) {\n                return setTimeout(function() {\n                  return notification.close();\n                }, data.timeout);\n              }\n            };\n            if (data.url) {\n              return notification.onclick = function() {\n                return window.open(data.url);\n              };\n            }\n          });\n        };\n      })(this);\n      if (!window.Notification) {\n        return this.log.info(\"This browser does not support desktop notification\");\n      } else if (Notification.permission === \"granted\") {\n        return subscribe();\n      } else if (Notification.permission !== 'denied') {\n        return Notification.requestPermission((function(_this) {\n          return function(permission) {\n            if (permission === \"granted\") {\n              return subscribe();\n            }\n          };\n        })(this));\n      }\n    };\n\n    EventsService.prototype.webNotifications = function() {\n      var randomTimeout, routingKey, userId;\n      if (this.auth.userData == null) {\n        return;\n      }\n      userId = this.auth.userData.get('id');\n      routingKey = \"web_notifications.\" + userId;\n      randomTimeout = taiga.randomInt(700, 1000);\n      return this.subscribe(null, routingKey, (function(_this) {\n        return function(data) {\n          return _this.rootScope.$broadcast(\"notifications:new\");\n        };\n      })(this));\n    };\n\n    EventsService.prototype.startHeartBeatMessages = function() {\n      var heartbeatIntervalTime, maxMissedHeartbeats;\n      if (this.heartbeatInterval) {\n        return;\n      }\n      maxMissedHeartbeats = this.config.get(\"eventsMaxMissedHeartbeats\", 5);\n      heartbeatIntervalTime = this.config.get(\"eventsHeartbeatIntervalTime\", 60000);\n      this.missedHeartbeats = 0;\n      this.heartbeatInterval = setInterval((function(_this) {\n        return function() {\n          var e;\n          try {\n            if (_this.missedHeartbeats >= maxMissedHeartbeats) {\n              throw new Error(\"Too many missed heartbeats PINGs.\");\n            }\n            _this.missedHeartbeats++;\n            _this.sendMessage({\n              cmd: \"ping\"\n            });\n            return _this.log.debug(\"HeartBeat send PING\");\n          } catch (error1) {\n            e = error1;\n            _this.log.error(\"HeartBeat error: \" + e.message);\n            return _this.setupConnection();\n          }\n        };\n      })(this), heartbeatIntervalTime);\n      return this.log.debug(\"HeartBeat enabled\");\n    };\n\n    EventsService.prototype.stopHeartBeatMessages = function() {\n      if (!this.heartbeatInterval) {\n        return;\n      }\n      clearInterval(this.heartbeatInterval);\n      this.heartbeatInterval = null;\n      return this.log.debug(\"HeartBeat disabled\");\n    };\n\n    EventsService.prototype.processHeartBeatPongMessage = function(data) {\n      this.missedHeartbeats = 0;\n      return this.log.debug(\"HeartBeat received PONG\");\n    };\n\n    EventsService.prototype.serialize = function(message) {\n      if (_.isObject(message)) {\n        return JSON.stringify(message);\n      }\n      return message;\n    };\n\n    EventsService.prototype.sendMessage = function(message) {\n      var i, len, messages, msg, results;\n      this.pendingMessages.push(message);\n      if (!this.connected) {\n        return;\n      }\n      messages = _.map(this.pendingMessages, this.serialize);\n      this.pendingMessages = [];\n      results = [];\n      for (i = 0, len = messages.length; i < len; i++) {\n        msg = messages[i];\n        results.push(this.ws.send(msg));\n      }\n      return results;\n    };\n\n    EventsService.prototype.processMessage = function(data) {\n      var routingKey, subscription;\n      routingKey = data.routing_key;\n      if (this.subscriptions[routingKey] == null) {\n        return;\n      }\n      subscription = this.subscriptions[routingKey];\n      if (subscription.scope) {\n        return subscription.scope.$apply(function() {\n          return subscription.callback(data.data);\n        });\n      } else {\n        return subscription.callback(data.data);\n      }\n    };\n\n    EventsService.prototype.subscribe = function(scope, routingKey, callback, options) {\n      var message, subscription;\n      if (this.error) {\n        return;\n      }\n      this.log.debug(\"Subscribe to: \" + routingKey);\n      subscription = {\n        scope: scope,\n        routingKey: routingKey,\n        callback: callback\n      };\n      message = {\n        \"cmd\": \"subscribe\",\n        \"routing_key\": routingKey\n      };\n      if (options) {\n        message.options = options;\n      }\n      this.subscriptions[routingKey] = subscription;\n      this.sendMessage(message);\n      if (scope) {\n        return scope.$on(\"$destroy\", (function(_this) {\n          return function() {\n            return _this.unsubscribe(routingKey);\n          };\n        })(this));\n      }\n    };\n\n    EventsService.prototype.unsubscribe = function(routingKey) {\n      var message;\n      if (this.error) {\n        return;\n      }\n      this.log.debug(\"Unsubscribe from: \" + routingKey);\n      message = {\n        \"cmd\": \"unsubscribe\",\n        \"routing_key\": routingKey\n      };\n      return this.sendMessage(message);\n    };\n\n    EventsService.prototype.onOpen = function() {\n      var message, token;\n      this.connected = true;\n      this.log.debug(\"WebSocket connection opened\");\n      token = this.auth.getToken();\n      message = {\n        cmd: \"auth\",\n        data: {\n          token: token,\n          sessionId: this.sessionId\n        }\n      };\n      this.sendMessage(message);\n      this.startHeartBeatMessages();\n      this.notifications();\n      this.liveNotifications();\n      return this.webNotifications();\n    };\n\n    EventsService.prototype.onMessage = function(event) {\n      var data;\n      this.log.debug(\"WebSocket message received: \" + event.data);\n      data = JSON.parse(event.data);\n      if (data.cmd === \"pong\") {\n        return this.processHeartBeatPongMessage(data);\n      } else {\n        return this.processMessage(data);\n      }\n    };\n\n    EventsService.prototype.onError = function(error) {\n      this.log.error(\"WebSocket error: \" + error);\n      this.error = true;\n      this.errors++;\n      if (this.errors < this.maxConnectionErrors) {\n        return setTimeout(this.setupConnection, this.randomTryInterval());\n      } else {\n        return this.log.error(\"Events are disabled: the maximum number of connection errors has been reached.\");\n      }\n    };\n\n    EventsService.prototype.onClose = function() {\n      this.log.debug(\"WebSocket closed.\");\n      this.connected = false;\n      this.stopHeartBeatMessages();\n      if (!this.error) {\n        return setTimeout(this.setupConnection, this.randomTryInterval());\n      }\n    };\n\n    EventsService.prototype.randomTryInterval = function() {\n      var max, min;\n      min = this.reconnectTryInterval / 2;\n      max = this.reconnectTryInterval;\n      return Math.floor(Math.random() * (max - min + 1)) + min;\n    };\n\n    return EventsService;\n\n  })();\n\n  EventsProvider = (function() {\n    function EventsProvider() {}\n\n    EventsProvider.prototype.setSessionId = function(sessionId) {\n      return this.sessionId = sessionId;\n    };\n\n    EventsProvider.prototype.$get = function($win, $log, $conf, $auth, liveAnnouncementService, $rootScope) {\n      var service;\n      service = new EventsService($win, $log, $conf, $auth, liveAnnouncementService, $rootScope);\n      service.initialize(this.sessionId);\n      return service;\n    };\n\n    EventsProvider.prototype.$get.$inject = [\"$window\", \"$log\", \"$tgConfig\", \"$tgAuth\", \"tgLiveAnnouncementService\", \"$rootScope\"];\n\n    return EventsProvider;\n\n  })();\n\n  module.provider(\"$tgEvents\", EventsProvider);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var FeedbackDirective, bindOnce, debounce, groupBy, mixOf, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  mixOf = this.taiga.mixOf;\n\n  debounce = this.taiga.debounce;\n\n  trim = this.taiga.trim;\n\n  module = angular.module(\"taigaFeedback\", []);\n\n  FeedbackDirective = function($lightboxService, $repo, $confirm, $loading, feedbackService) {\n    var directive, link;\n    link = function($scope, $el, $attrs) {\n      var form, openLightbox, submit, submitButton;\n      form = $el.find(\"form\").checksley();\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.create(\"feedback\", $scope.feedback);\n          promise.then(function(data) {\n            currentLoading.finish();\n            $lightboxService.close($el);\n            return $confirm.notify(\"success\", \"\\\\o/ we'll be happy to read your\");\n          });\n          return promise.then(null, function() {\n            currentLoading.finish();\n            return $confirm.notify(\"error\");\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      openLightbox = function() {\n        $scope.feedback = {};\n        $lightboxService.open($el);\n        return $el.find(\"textarea\").focus();\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return openLightbox();\n    };\n    directive = {\n      link: link,\n      templateUrl: \"common/lightbox-feedback.html\",\n      scope: {}\n    };\n    return directive;\n  };\n\n  module.directive(\"tgLbFeedback\", [\"lightboxService\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"tgFeedbackService\", FeedbackDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaIntegrations\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaIssues\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaKanban\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaPlugins\", [\"ngRoute\"]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaProject\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var RelatedTaskAssignedToInlineEditionDirective, RelatedTaskCreateButtonDirective, RelatedTaskCreateFormDirective, RelatedTaskRowDirective, RelatedTasksDirective, debounce, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  trim = this.taiga.trim;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaRelatedTasks\", []);\n\n  RelatedTaskRowDirective = function($repo, $compile, $confirm, $rootscope, $loading, $template, $translate, $emojis) {\n    var link, templateEdit, templateView;\n    templateView = $template.get(\"task/related-task-row.html\", true);\n    templateEdit = $template.get(\"task/related-task-row-edit.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var renderEdit, renderView, saveTask;\n      saveTask = debounce(2000, function(task) {\n        var currentLoading, promise;\n        task.subject = $el.find('input').val();\n        currentLoading = $loading().target($el.find('.task-name')).start();\n        promise = $repo.save(task);\n        promise.then((function(_this) {\n          return function() {\n            currentLoading.finish();\n            return $rootscope.$broadcast(\"related-tasks:update\");\n          };\n        })(this));\n        promise.then(null, (function(_this) {\n          return function() {\n            currentLoading.finish();\n            $el.find('input').val(task.subject);\n            return $confirm.notify(\"error\");\n          };\n        })(this));\n        return promise;\n      });\n      renderEdit = function(task) {\n        if (this.childScope) {\n          this.childScope.$destroy();\n        }\n        this.childScope = $scope.$new();\n        $el.off();\n        $el.html($compile(templateEdit({\n          task: task\n        }))(childScope));\n        $el.find(\".task-name input\").val(task.subject);\n        $el.on(\"keyup\", \"input\", function(event) {\n          if (event.keyCode === 13) {\n            return saveTask($model.$modelValue).then(function() {\n              return renderView($model.$modelValue);\n            });\n          } else if (event.keyCode === 27) {\n            return renderView($model.$modelValue);\n          }\n        });\n        $el.on(\"click\", \".save-task\", function(event) {\n          return saveTask($model.$modelValue).then(function() {\n            return renderView($model.$modelValue);\n          });\n        });\n        return $el.on(\"click\", \".cancel-edit\", function(event) {\n          return renderView($model.$modelValue);\n        });\n      };\n      renderView = function(task) {\n        var perms;\n        perms = {\n          modify_task: $scope.project.my_permissions.indexOf(\"modify_task\") !== -1,\n          delete_task: $scope.project.my_permissions.indexOf(\"delete_task\") !== -1\n        };\n        $el.html($compile(templateView({\n          task: task,\n          perms: perms,\n          emojify: function(text) {\n            return $emojis.replaceEmojiNameByHtmlImgs(_.escape(text));\n          }\n        }))($scope));\n        $el.on(\"click\", \".edit-task\", function() {\n          renderEdit($model.$modelValue);\n          return $el.find('input').focus().select();\n        });\n        return $el.on(\"click\", \".delete-task\", function(event) {\n          var message, title;\n          title = $translate.instant(\"TASK.TITLE_DELETE_ACTION\");\n          task = $model.$modelValue;\n          message = task.subject;\n          return $confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = $repo.remove(task);\n            promise.then(function() {\n              askResponse.finish();\n              return $scope.$emit(\"related-tasks:delete\");\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            });\n          });\n        });\n      };\n      $scope.$watch($attrs.ngModel, function(val) {\n        if (!val) {\n          return;\n        }\n        $el.off();\n        return renderView(val);\n      });\n      $scope.$on(\"related-tasks:assigned-to-changed\", function() {\n        return $rootscope.$broadcast(\"related-tasks:update\");\n      });\n      $scope.$on(\"related-tasks:status-changed\", function() {\n        return $rootscope.$broadcast(\"related-tasks:update\");\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgRelatedTaskRow\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$rootScope\", \"$tgLoading\", \"$tgTemplate\", \"$translate\", \"$tgEmojis\", RelatedTaskRowDirective]);\n\n  RelatedTaskCreateFormDirective = function($repo, $compile, $confirm, $tgmodel, $loading, $analytics) {\n    var link, newTask;\n    newTask = {\n      subject: \"\",\n      assigned_to: null\n    };\n    link = function($scope, $el, $attrs) {\n      var close, createTask, render, reset;\n      createTask = function(task) {\n        var currentLoading, promise;\n        task.subject = $el.find('input').val();\n        task.assigned_to = $scope.newTask.assigned_to;\n        task.status = $scope.newTask.status;\n        $scope.newTask.status = $scope.project.default_task_status;\n        $scope.newTask.assigned_to = null;\n        currentLoading = $loading().target($el.find('.task-name')).start();\n        promise = $repo.create(\"tasks\", task);\n        promise.then(function() {\n          $analytics.trackEvent(\"task\", \"create\", \"create task on userstory\", 1);\n          currentLoading.finish();\n          return $scope.$emit(\"related-tasks:add\");\n        });\n        promise.then(null, function() {\n          $el.find('input').val(task.subject);\n          currentLoading.finish();\n          return $confirm.notify(\"error\");\n        });\n        return promise;\n      };\n      close = function() {\n        $el.off();\n        return $scope.openNewRelatedTask = false;\n      };\n      reset = function() {\n        newTask = {\n          subject: \"\",\n          assigned_to: null\n        };\n        newTask[\"status\"] = $scope.project.default_task_status;\n        newTask[\"project\"] = $scope.project.id;\n        newTask[\"user_story\"] = $scope.us.id;\n        return $scope.newTask = $tgmodel.make_model(\"tasks\", newTask);\n      };\n      render = function() {\n        if ($scope.openNewRelatedTask) {\n          return;\n        }\n        $scope.openNewRelatedTask = true;\n        $el.on(\"submit\", \"form\", function(event) {\n          event.preventDefault();\n          return createTask(newTask).then(function() {\n            reset();\n            return $el.find('input').focus();\n          });\n        });\n        return $el.on(\"keyup\", \"input\", function(event) {\n          if (event.keyCode === 27) {\n            return $scope.$apply(function() {\n              return close();\n            });\n          }\n        });\n      };\n      $scope.save = function() {\n        return createTask(newTask).then(function() {\n          return close();\n        });\n      };\n      taiga.bindOnce($scope, \"us\", reset);\n      $scope.$on(\"related-tasks:show-form\", function() {\n        return $scope.$apply(render);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      templateUrl: 'task/related-task-create-form.html'\n    };\n  };\n\n  module.directive(\"tgRelatedTaskCreateForm\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$tgModel\", \"$tgLoading\", \"$tgAnalytics\", RelatedTaskCreateFormDirective]);\n\n  RelatedTaskCreateButtonDirective = function($repo, $compile, $confirm, $tgmodel, $template) {\n    var link, template;\n    template = $template.get(\"common/components/add-button.html\", true);\n    link = function($scope, $el, $attrs) {\n      $scope.$watch(\"project\", function(val) {\n        if (!val) {\n          return;\n        }\n        $el.off();\n        if ($scope.project.my_permissions.indexOf(\"add_task\") !== -1) {\n          $el.html($compile(template())($scope));\n        } else {\n          $el.html(\"\");\n        }\n        return $el.on(\"click\", \".add-button\", function(event) {\n          return $scope.$emit(\"related-tasks:add-new-clicked\");\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTaskCreateButton\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$tgModel\", \"$tgTemplate\", RelatedTaskCreateButtonDirective]);\n\n  RelatedTasksDirective = function($rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var _isEditable, _isVisible;\n      _isVisible = function() {\n        if ($scope.project) {\n          return $scope.project.my_permissions.indexOf(\"view_tasks\") !== -1;\n        }\n        return false;\n      };\n      _isEditable = function() {\n        if ($scope.project) {\n          return $scope.project.my_permissions.indexOf(\"modify_task\") !== -1;\n        }\n        return false;\n      };\n      $scope.reorderTask = function(task, newIndex) {\n        return $rootscope.$broadcast('task:reorder', task, newIndex);\n      };\n      $scope.showAddTaks = function() {\n        if ($scope.project) {\n          return $scope.project.my_permissions.indexOf(\"add_task\") !== -1;\n        }\n        return false;\n      };\n      $scope.showRelatedTasks = function() {\n        return _isVisible();\n      };\n      $scope.$on(\"related-tasks:add\", function() {\n        return $rootscope.$broadcast(\"related-tasks:update\");\n      });\n      $scope.$on(\"related-tasks:reordered\", function() {\n        return $rootscope.$broadcast(\"related-tasks:update\");\n      });\n      $scope.$on(\"related-tasks:delete\", function() {\n        return $rootscope.$broadcast(\"related-tasks:update\");\n      });\n      $scope.$on(\"related-tasks:add-new-clicked\", function() {\n        return $scope.$broadcast(\"related-tasks:show-form\");\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTasks\", [\"$rootScope\", RelatedTasksDirective]);\n\n  RelatedTaskAssignedToInlineEditionDirective = function($repo, $rootscope, $translate, avatarService, $lightboxFactory) {\n    var link, template;\n    template = _.template(\"<img style=\\\"background-color: <%- bg %>\\\" src=\\\"<%- imgurl %>\\\" alt=\\\"<%- name %>\\\"/>\\n<figcaption><%- name %></figcaption>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, autoSave, notAutoSave, task, updateRelatedTask;\n      updateRelatedTask = function(task) {\n        var avatar, ctx, member;\n        ctx = {\n          name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\")\n        };\n        member = $scope.usersById[task.assigned_to];\n        avatar = avatarService.getAvatar(member);\n        ctx.imgurl = avatar.url;\n        ctx.bg = avatar.bg;\n        if (member) {\n          ctx.name = member.full_name_display;\n        }\n        $el.find(\".avatar\").html(template(ctx));\n        return $el.find(\".task-assignedto\").attr('title', ctx.name);\n      };\n      $ctrl = $el.controller();\n      task = $scope.$eval($attrs.tgRelatedTaskAssignedToInlineEdition);\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      autoSave = !notAutoSave;\n      $scope.$watch($attrs.tgRelatedTaskAssignedToInlineEdition, function() {\n        task = $scope.$eval($attrs.tgRelatedTaskAssignedToInlineEdition);\n        return updateRelatedTask(task);\n      });\n      updateRelatedTask(task);\n      $el.on(\"click\", \".task-assignedto\", function(event) {\n        var onClose;\n        event.preventDefault();\n        event.stopPropagation();\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            task.assigned_to = assignedUsers.pop() || null;\n            if (autoSave) {\n              return $repo.save(task).then(function() {\n                $scope.$emit(\"related-tasks:assigned-to-changed\");\n                return updateRelatedTask(task);\n              });\n            }\n          };\n        })(this);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": [task.assigned_to],\n          \"activeUsers\": $scope.activeUsers,\n          \"onClose\": onClose,\n          \"single\": true,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        if (project.my_permissions.indexOf(\"modify_task\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTaskAssignedToInlineEdition\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"tgAvatarService\", \"tgLightboxFactory\", RelatedTaskAssignedToInlineEditionDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ResourcesService, initResources, initUrls, module, taiga, urls,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  ResourcesService = (function(superClass) {\n    extend(ResourcesService, superClass);\n\n    function ResourcesService() {\n      return ResourcesService.__super__.constructor.apply(this, arguments);\n    }\n\n    return ResourcesService;\n\n  })(taiga.Service);\n\n  urls = {\n    \"auth\": \"/auth\",\n    \"auth-register\": \"/auth/register\",\n    \"invitations\": \"/invitations\",\n    \"refresh\": \"/auth/refresh\",\n    \"users\": \"/users\",\n    \"by_username\": \"/users/by_username\",\n    \"users-password-recovery\": \"/users/password_recovery\",\n    \"users-change-password-from-recovery\": \"/users/change_password_from_recovery\",\n    \"users-change-password\": \"/users/change_password\",\n    \"users-change-email\": \"/users/change_email\",\n    \"users-cancel-account\": \"/users/cancel\",\n    \"users-export\": \"/users/export\",\n    \"user-stats\": \"/users/%s/stats\",\n    \"user-liked\": \"/users/%s/liked\",\n    \"user-voted\": \"/users/%s/voted\",\n    \"user-watched\": \"/users/%s/watched\",\n    \"user-contacts\": \"/users/%s/contacts\",\n    \"user-me\": \"/users/me\",\n    \"user-send-verification-email\": \"/users/send_verification_email\",\n    \"permissions\": \"/permissions\",\n    \"notify-policies\": \"/notify-policies\",\n    \"notifications\": \"/web-notifications\",\n    \"user-project-settings\": \"/user-project-settings\",\n    \"user-storage\": \"/user-storage\",\n    \"memberships\": \"/memberships\",\n    \"bulk-create-memberships\": \"/memberships/bulk_create\",\n    \"roles\": \"/roles\",\n    \"permissions\": \"/permissions\",\n    \"resolver\": \"/resolver\",\n    \"projects\": \"/projects\",\n    \"project-templates\": \"/project-templates\",\n    \"project-modules\": \"/projects/%s/modules\",\n    \"bulk-update-projects-order\": \"/projects/bulk_update_order\",\n    \"project-like\": \"/projects/%s/like\",\n    \"project-unlike\": \"/projects/%s/unlike\",\n    \"project-watch\": \"/projects/%s/watch\",\n    \"project-unwatch\": \"/projects/%s/unwatch\",\n    \"project-contact\": \"contact\",\n    \"project-transfer-validate-token\": \"/projects/%s/transfer_validate_token\",\n    \"project-transfer-accept\": \"/projects/%s/transfer_accept\",\n    \"project-transfer-reject\": \"/projects/%s/transfer_reject\",\n    \"project-transfer-request\": \"/projects/%s/transfer_request\",\n    \"project-transfer-start\": \"/projects/%s/transfer_start\",\n    \"epic-statuses\": \"/epic-statuses\",\n    \"userstory-statuses\": \"/userstory-statuses\",\n    \"userstory-due-dates\": \"/userstory-due-dates\",\n    \"userstory-due-dates-create-default\": \"/userstory-due-dates/create_default\",\n    \"points\": \"/points\",\n    \"task-statuses\": \"/task-statuses\",\n    \"task-due-dates\": \"/task-due-dates\",\n    \"task-due-dates-create-default\": \"/task-due-dates/create_default\",\n    \"issue-statuses\": \"/issue-statuses\",\n    \"issue-due-dates\": \"/issue-due-dates\",\n    \"issue-due-dates-create-default\": \"/issue-due-dates/create_default\",\n    \"issue-types\": \"/issue-types\",\n    \"priorities\": \"/priorities\",\n    \"severities\": \"/severities\",\n    \"milestones\": \"/milestones\",\n    \"move-userstories-to-milestone\": \"/milestones/%s/move_userstories_to_sprint\",\n    \"move-tasks-to-milestone\": \"/milestones/%s/move_tasks_to_sprint\",\n    \"move-issues-to-milestone\": \"/milestones/%s/move_issues_to_sprint\",\n    \"epics\": \"/epics\",\n    \"epic-upvote\": \"/epics/%s/upvote\",\n    \"epic-downvote\": \"/epics/%s/downvote\",\n    \"epic-watch\": \"/epics/%s/watch\",\n    \"epic-unwatch\": \"/epics/%s/unwatch\",\n    \"epic-related-userstories\": \"/epics/%s/related_userstories\",\n    \"epic-related-userstories-bulk-create\": \"/epics/%s/related_userstories/bulk_create\",\n    \"userstories\": \"/userstories\",\n    \"bulk-create-us\": \"/userstories/bulk_create\",\n    \"bulk-update-us-backlog-order\": \"/userstories/bulk_update_backlog_order\",\n    \"bulk-update-us-milestone\": \"/userstories/bulk_update_milestone\",\n    \"bulk-update-us-miles-order\": \"/userstories/bulk_update_sprint_order\",\n    \"bulk-update-us-kanban-order\": \"/userstories/bulk_update_kanban_order\",\n    \"userstories-filters\": \"/userstories/filters_data\",\n    \"userstory-upvote\": \"/userstories/%s/upvote\",\n    \"userstory-downvote\": \"/userstories/%s/downvote\",\n    \"userstory-watch\": \"/userstories/%s/watch\",\n    \"userstory-unwatch\": \"/userstories/%s/unwatch\",\n    \"tasks\": \"/tasks\",\n    \"bulk-create-tasks\": \"/tasks/bulk_create\",\n    \"bulk-update-task-taskboard-order\": \"/tasks/bulk_update_taskboard_order\",\n    \"bulk-update-task-milestone\": \"/tasks/bulk_update_milestone\",\n    \"task-upvote\": \"/tasks/%s/upvote\",\n    \"task-downvote\": \"/tasks/%s/downvote\",\n    \"task-watch\": \"/tasks/%s/watch\",\n    \"task-unwatch\": \"/tasks/%s/unwatch\",\n    \"task-filters\": \"/tasks/filters_data\",\n    \"promote-task-to-us\": \"/tasks/%s/promote_to_user_story\",\n    \"issues\": \"/issues\",\n    \"bulk-create-issues\": \"/issues/bulk_create\",\n    \"bulk-update-issue-milestone\": \"/issues/bulk_update_milestone\",\n    \"issues-filters\": \"/issues/filters_data\",\n    \"issue-upvote\": \"/issues/%s/upvote\",\n    \"issue-downvote\": \"/issues/%s/downvote\",\n    \"issue-watch\": \"/issues/%s/watch\",\n    \"issue-unwatch\": \"/issues/%s/unwatch\",\n    \"promote-issue-to-us\": \"/issues/%s/promote_to_user_story\",\n    \"swimlanes\": \"/swimlanes\",\n    \"swimlane-userstory-statuses\": \"/swimlane-userstory-statuses\",\n    \"wiki\": \"/wiki\",\n    \"wiki-restore\": \"/wiki/%s/restore\",\n    \"wiki-links\": \"/wiki-links\",\n    \"history/epic\": \"/history/epic\",\n    \"history/us\": \"/history/userstory\",\n    \"history/issue\": \"/history/issue\",\n    \"history/task\": \"/history/task\",\n    \"history/wiki\": \"/history/wiki\",\n    \"attachments/epic\": \"/epics/attachments\",\n    \"attachments/us\": \"/userstories/attachments\",\n    \"attachments/issue\": \"/issues/attachments\",\n    \"attachments/task\": \"/tasks/attachments\",\n    \"attachments/wiki_page\": \"/wiki/attachments\",\n    \"attachments/wikipage\": \"/wiki/attachments\",\n    \"attachments/wiki\": \"/wiki/attachments\",\n    \"custom-attributes/epic\": \"/epic-custom-attributes\",\n    \"custom-attributes/userstory\": \"/userstory-custom-attributes\",\n    \"custom-attributes/task\": \"/task-custom-attributes\",\n    \"custom-attributes/issue\": \"/issue-custom-attributes\",\n    \"custom-attributes-values/epic\": \"/epics/custom-attributes-values\",\n    \"custom-attributes-values/userstory\": \"/userstories/custom-attributes-values\",\n    \"custom-attributes-values/task\": \"/tasks/custom-attributes-values\",\n    \"custom-attributes-values/issue\": \"/issues/custom-attributes-values\",\n    \"webhooks\": \"/webhooks\",\n    \"webhooks-test\": \"/webhooks/%s/test\",\n    \"webhooklogs\": \"/webhooklogs\",\n    \"webhooklogs-resend\": \"/webhooklogs/%s/resend\",\n    \"epics-csv\": \"/epics/csv?uuid=%s\",\n    \"userstories-csv\": \"/userstories/csv?uuid=%s\",\n    \"tasks-csv\": \"/tasks/csv?uuid=%s\",\n    \"issues-csv\": \"/issues/csv?uuid=%s\",\n    \"timeline-profile\": \"/timeline/profile\",\n    \"timeline-user\": \"/timeline/user\",\n    \"timeline-project\": \"/timeline/project\",\n    \"search\": \"/search\",\n    \"exporter\": \"/exporter\",\n    \"importer\": \"/importer/load_dump\",\n    \"feedback\": \"/feedback\",\n    \"locales\": \"/locales\",\n    \"applications\": \"/applications\",\n    \"application-tokens\": \"/application-tokens\",\n    \"stats-discover\": \"/stats/discover\",\n    \"importers-trello-auth-url\": \"/importers/trello/auth_url\",\n    \"importers-trello-authorize\": \"/importers/trello/authorize\",\n    \"importers-trello-list-projects\": \"/importers/trello/list_projects\",\n    \"importers-trello-list-users\": \"/importers/trello/list_users\",\n    \"importers-trello-import-project\": \"/importers/trello/import_project\",\n    \"importers-jira-auth-url\": \"/importers/jira/auth_url\",\n    \"importers-jira-authorize\": \"/importers/jira/authorize\",\n    \"importers-jira-list-projects\": \"/importers/jira/list_projects\",\n    \"importers-jira-list-users\": \"/importers/jira/list_users\",\n    \"importers-jira-import-project\": \"/importers/jira/import_project\",\n    \"importers-github-auth-url\": \"/importers/github/auth_url\",\n    \"importers-github-authorize\": \"/importers/github/authorize\",\n    \"importers-github-list-projects\": \"/importers/github/list_projects\",\n    \"importers-github-list-users\": \"/importers/github/list_users\",\n    \"importers-github-import-project\": \"/importers/github/import_project\",\n    \"importers-asana-auth-url\": \"/importers/asana/auth_url\",\n    \"importers-asana-authorize\": \"/importers/asana/authorize\",\n    \"importers-asana-list-projects\": \"/importers/asana/list_projects\",\n    \"importers-asana-list-users\": \"/importers/asana/list_users\",\n    \"importers-asana-import-project\": \"/importers/asana/import_project\"\n  };\n\n  initUrls = function($log, $urls) {\n    $log.debug(\"Initialize api urls\");\n    return $urls.update(urls);\n  };\n\n  initResources = function($log, $rs) {\n    var i, len, provider, providers, results;\n    $log.debug(\"Initialize resources\");\n    providers = _.toArray(arguments).slice(2);\n    results = [];\n    for (i = 0, len = providers.length; i < len; i++) {\n      provider = providers[i];\n      results.push(provider($rs));\n    }\n    return results;\n  };\n\n  module = angular.module(\"taigaResources\", [\"taigaBase\"]);\n\n  module.service(\"$tgResources\", ResourcesService);\n\n  module.run([\"$log\", \"$tgUrls\", initUrls]);\n\n  module.run([\"$log\", \"$tgResources\", \"$tgProjectsResourcesProvider\", \"$tgCustomAttributesResourcesProvider\", \"$tgCustomAttributesValuesResourcesProvider\", \"$tgMembershipsResourcesProvider\", \"$tgNotifyPoliciesResourcesProvider\", \"$tgInvitationsResourcesProvider\", \"$tgRolesResourcesProvider\", \"$tgUserProjectSettingsResourcesProvider\", \"$tgUserSettingsResourcesProvider\", \"$tgSprintsResourcesProvider\", \"$tgEpicsResourcesProvider\", \"$tgUserstoriesResourcesProvider\", \"$tgTasksResourcesProvider\", \"$tgIssuesResourcesProvider\", \"$tgSwimlanesResourcesProvider\", \"$tgWikiResourcesProvider\", \"$tgSearchResourcesProvider\", \"$tgMdRenderResourcesProvider\", \"$tgHistoryResourcesProvider\", \"$tgKanbanResourcesProvider\", \"$tgModulesResourcesProvider\", \"$tgWebhooksResourcesProvider\", \"$tgWebhookLogsResourcesProvider\", \"$tgLocalesResourcesProvider\", \"$tgUsersResourcesProvider\", initResources]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var SearchBoxDirective, SearchController, SearchDirective, bindOnce, debounce, debounceLeading, groupBy, mixOf, module, taiga, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  mixOf = this.taiga.mixOf;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  trim = this.taiga.trim;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaSearch\", []);\n\n  SearchController = (function(superClass) {\n    extend(SearchController, superClass);\n\n    SearchController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function SearchController(scope1, repo, rs, params, q, location, appMetaService, navUrls, translate, errorHandlingService, projectService1) {\n      var description, loadSearchData, title;\n      this.scope = scope1;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      this.scope.sectionName = \"Search\";\n      this.loadInitialData();\n      title = this.translate.instant(\"SEARCH.PAGE_TITLE\", {\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"SEARCH.PAGE_DESCRIPTION\", {\n        projectName: this.scope.project.name,\n        projectDescription: this.scope.project.description\n      });\n      this.appMetaService.setAll(title, description);\n      this.scope.searchTerm = null;\n      loadSearchData = debounceLeading(100, (function(_this) {\n        return function(t) {\n          return _this.loadSearchData(t);\n        };\n      })(this));\n      bindOnce(this.scope, \"projectId\", (function(_this) {\n        return function(projectId) {\n          if (!_this.scope.searchResults && _this.scope.searchTerm) {\n            return _this.loadSearchData();\n          }\n        };\n      })(this));\n      this.scope.$watch(\"searchTerm\", (function(_this) {\n        return function(term) {\n          if (term !== void 0 && _this.scope.projectId) {\n            return _this.loadSearchData(term);\n          }\n        };\n      })(this));\n    }\n\n    SearchController.prototype.loadFilters = function() {\n      var defered;\n      defered = this.q.defer();\n      defered.resolve();\n      return defered.promise;\n    };\n\n    SearchController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.epicStatusById = groupBy(project.epic_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.issueStatusById = groupBy(project.issue_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.taskStatusById = groupBy(project.task_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.severityById = groupBy(project.severities, function(x) {\n        return x.id;\n      });\n      this.scope.priorityById = groupBy(project.priorities, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    SearchController.prototype.loadSearchData = function(term) {\n      if (term == null) {\n        term = \"\";\n      }\n      this.scope.loading = true;\n      return this._loadSearchData(term).then((function(_this) {\n        return function(data) {\n          _this.scope.searchResults = data;\n          return _this.scope.loading = false;\n        };\n      })(this));\n    };\n\n    SearchController.prototype._loadSearchData = function(term) {\n      if (term == null) {\n        term = \"\";\n      }\n      if (this._promise) {\n        this._promise.abort();\n      }\n      this._promise = this.rs.search[\"do\"](this.scope.projectId, term);\n      return this._promise;\n    };\n\n    SearchController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.scope.projectId = project.id;\n      return this.fillUsersAndRoles(project.members, project.roles);\n    };\n\n    return SearchController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"SearchController\", SearchController);\n\n  SearchBoxDirective = function(projectService, $lightboxService, $navurls, $location, $route) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var openLightbox, project, submit;\n      project = null;\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var form, text, url;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          text = $el.find(\"#search-text\").val();\n          url = $navurls.resolve(\"project-search\", {\n            project: project.get(\"slug\")\n          });\n          return $scope.$apply(function() {\n            $lightboxService.close($el);\n            $location.path(url);\n            $location.search(\"text\", text).path(url);\n            return $route.reload();\n          });\n        };\n      })(this));\n      openLightbox = function() {\n        project = projectService.project;\n        return $lightboxService.open($el).then(function() {\n          return $el.find(\"#search-text\").focus();\n        });\n      };\n      $el.on(\"submit\", \"form\", submit);\n      return openLightbox();\n    };\n    return {\n      templateUrl: \"search/lightbox-search.html\",\n      link: link\n    };\n  };\n\n  SearchBoxDirective.$inject = [\"tgProjectService\", \"lightboxService\", \"$tgNavUrls\", \"$tgLocation\", \"$route\"];\n\n  module.directive(\"tgSearchBox\", SearchBoxDirective);\n\n  SearchDirective = function($log, $compile, $templatecache, $routeparams, $location, $analytics) {\n    var link, linkTable;\n    linkTable = function($scope, $el, $attrs, $ctrl) {\n      var activeSectionName, applyAutoTab, currentSearchResults, getActiveSection, markSectionTabActive, renderFilterTabs, renderTableContent, tabsDom, templates;\n      applyAutoTab = true;\n      activeSectionName = \"userstories\";\n      tabsDom = $el.find(\".search-filter\");\n      currentSearchResults = null;\n      getActiveSection = function(data) {\n        var i, len, maxVal, name, ref, selectedSection, value;\n        maxVal = 0;\n        selectedSection = {};\n        selectedSection.name = \"userstories\";\n        selectedSection.value = [];\n        if (!applyAutoTab) {\n          selectedSection.name = activeSectionName;\n          selectedSection.value = data[activeSectionName];\n          return selectedSection;\n        }\n        if (data) {\n          ref = [\"userstories\", \"epics\", \"issues\", \"tasks\", \"wikipages\"];\n          for (i = 0, len = ref.length; i < len; i++) {\n            name = ref[i];\n            value = data[name];\n            if (value.length > maxVal) {\n              maxVal = value.length;\n              selectedSection.name = name;\n              selectedSection.value = value;\n              break;\n            }\n          }\n        }\n        if (maxVal === 0) {\n          return selectedSection;\n        }\n        return selectedSection;\n      };\n      renderFilterTabs = function(data) {\n        var name, results, value;\n        results = [];\n        for (name in data) {\n          value = data[name];\n          tabsDom.find(\"li.\" + name).show();\n          results.push(tabsDom.find(\"li.\" + name + \" .num\").html(value.length));\n        }\n        return results;\n      };\n      markSectionTabActive = function(section) {\n        tabsDom.find(\"a.active\").removeClass(\"active\");\n        tabsDom.find(\"li.\" + section.name + \" a\").addClass(\"active\");\n        applyAutoTab = false;\n        return activeSectionName = section.name;\n      };\n      templates = {\n        epics: $templatecache.get(\"search-epics\"),\n        issues: $templatecache.get(\"search-issues\"),\n        tasks: $templatecache.get(\"search-tasks\"),\n        userstories: $templatecache.get(\"search-userstories\"),\n        wikipages: $templatecache.get(\"search-wikipages\")\n      };\n      renderTableContent = function(section) {\n        var element, oldElements, oldScope, scope, template;\n        oldElements = $el.find(\".search-result-table\").children();\n        oldScope = oldElements.scope();\n        if (oldScope) {\n          oldScope.$destroy();\n          oldElements.remove();\n        }\n        scope = $scope.$new();\n        scope[section.name] = section.value;\n        template = angular.element.parseHTML(trim(templates[section.name]));\n        element = $compile(template)(scope);\n        return $el.find(\".search-result-table\").html(element);\n      };\n      $scope.$watch(\"searchResults\", function(data) {\n        var activeSection;\n        currentSearchResults = data;\n        if (!currentSearchResults) {\n          return;\n        }\n        activeSection = getActiveSection(data);\n        renderFilterTabs(data);\n        renderTableContent(activeSection);\n        return markSectionTabActive(activeSection);\n      });\n      $scope.$watch(\"searchTerm\", function(searchTerm) {\n        if (searchTerm !== void 0) {\n          $location.search(\"text\", searchTerm);\n        }\n        return $analytics.trackPage($location.url(), \"Search\");\n      });\n      return $el.on(\"click\", \".search-filter li > a\", function(event) {\n        var section, sectionData, sectionName, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        sectionName = target.parent().data(\"name\");\n        sectionData = !currentSearchResults ? [] : currentSearchResults[sectionName];\n        section = {\n          name: sectionName,\n          value: sectionData\n        };\n        return $scope.$apply(function() {\n          renderTableContent(section);\n          return markSectionTabActive(section);\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl, searchText;\n      $ctrl = $el.controller();\n      linkTable($scope, $el, $attrs, $ctrl);\n      searchText = $routeparams.text;\n      return $scope.$watch(\"projectId\", function(projectId) {\n        if (projectId != null) {\n          return $scope.searchTerm = searchText;\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSearch\", [\"$log\", \"$compile\", \"$templateCache\", \"$routeParams\", \"$tgLocation\", \"$tgAnalytics\", SearchDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaTaskboard\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaTasks\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaTeam\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaUserSettings\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaUserStories\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaWiki\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AnalyticsService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  AnalyticsService = (function(superClass) {\n    extend(AnalyticsService, superClass);\n\n    AnalyticsService.$inject = [\"$rootScope\", \"$log\", \"$tgConfig\", \"$window\", \"$document\", \"$location\"];\n\n    function AnalyticsService(rootscope, log, config, win, doc, location) {\n      var conf;\n      this.rootscope = rootscope;\n      this.log = log;\n      this.config = config;\n      this.win = win;\n      this.doc = doc;\n      this.location = location;\n      this.initialized = false;\n      conf = this.config.get(\"analytics\", {});\n      this.accountId = conf.accountId;\n      this.pageEvent = conf.pageEvent || \"$routeChangeSuccess\";\n      this.trackRoutes = conf.trackRoutes || true;\n      this.ignoreFirstPageLoad = conf.ignoreFirstPageLoad || false;\n    }\n\n    AnalyticsService.prototype.initialize = function() {\n      if (!this.accountId) {\n        this.log.debug(\"Analytics: no account id provided. Disabling.\");\n        return;\n      }\n      this.injectAnalytics();\n      this.win.ga(\"create\", this.accountId, \"auto\");\n      this.win.ga(\"require\", \"ec\");\n      this.win.ga(\"require\", \"displayfeatures\");\n      if (this.trackRoutes && (!this.ignoreFirstPageLoad)) {\n        this.win.ga(\"send\", \"pageview\", this.getUrl());\n      }\n      if (this.trackRoutes) {\n        this.rootscope.$on(this.pageEvent, (function(_this) {\n          return function() {\n            return _this.trackPage(_this.getUrl(), \"Taiga\");\n          };\n        })(this));\n      }\n      this.initialized = true;\n      return this.setUserId();\n    };\n\n    AnalyticsService.prototype.setUserId = function() {\n      var ref, ref1;\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      return this.win.ga('set', 'userId', (ref = this.rootscope) != null ? (ref1 = ref.user) != null ? ref1.uuid : void 0 : void 0);\n    };\n\n    AnalyticsService.prototype.getUrl = function() {\n      return this.location.path();\n    };\n\n    AnalyticsService.prototype.injectAnalytics = function() {\n      var fn;\n      fn = (function(i,s,o,g,r,a,m){i[\"GoogleAnalyticsObject\"]=r;i[r]=i[r]||function(){\n              (i[r].q=i[r].q||[]).push(arguments);},i[r].l=1*new Date();a=s.createElement(o),\n              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m);});\n      return fn(window, document, \"script\", \"//www.google-analytics.com/analytics.js\", \"ga\");\n    };\n\n    AnalyticsService.prototype.trackPage = function(url, title) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      title = title || this.doc[0].title;\n      return this.win.ga(\"send\", \"pageview\", {\n        \"page\": url,\n        \"title\": title\n      });\n    };\n\n    AnalyticsService.prototype.trackEvent = function(category, action, label, value) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      return this.win.ga(\"send\", \"event\", category, action, label, value);\n    };\n\n    AnalyticsService.prototype.ecViewPlan = function(plan) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan.plan_id,\n        'name': plan.name,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'detail');\n      return this.trackEvent(\"ecommerce\", \"view-product-detail\", plan.name, plan.plan_id);\n    };\n\n    AnalyticsService.prototype.ecClickPlan = function(plan) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan.plan_id,\n        'name': plan.name,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'click');\n      return this.trackEvent(\"ecommerce\", \"click-product\", plan.name, plan.plan_id);\n    };\n\n    AnalyticsService.prototype.ecListPlans = function(arg, page) {\n      var i, len, plan, plans, position;\n      plans = arg[0];\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      position = 1;\n      for (i = 0, len = plans.length; i < len; i++) {\n        plan = plans[i];\n        this.win.ga('ec:addImpression', {\n          'id': plan.plan_id,\n          'name': plan.name,\n          'list': page,\n          'position': position\n        });\n        position++;\n      }\n      return this.trackEvent(\"ecommerce\", \"list-plans\");\n    };\n\n    AnalyticsService.prototype.ecAddToCart = function(plan_id, plan_name, plan_price) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'add');\n      return this.trackEvent('ecommerce', 'add-to-cart', 'Collect Payment Info', null);\n    };\n\n    AnalyticsService.prototype.ecConfirmChange = function(plan_id, plan_name, plan_price) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'checkout', {\n        'step': 1\n      });\n      return this.trackEvent(\"ecommerce\", \"start-checkout\", \"start\", 1);\n    };\n\n    AnalyticsService.prototype.ecPurchase = function(plan_id, plan_name, plan_price) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'checkout', {\n        'step': 2\n      });\n      this.trackEvent(\"ecommerce\", \"end-checkout\", \"end\", 2);\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'purchase', {\n        'id': plan_id,\n        'revenue': plan_price\n      });\n      return this.trackEvent('ecommerce', 'checkout', 'Plan checkout', null);\n    };\n\n    return AnalyticsService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgAnalytics\", AnalyticsService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var BindScope, module;\n\n  module = angular.module(\"taigaCommon\");\n\n  BindScope = function(config) {\n    var link;\n    if (!config.debugInfo) {\n      jQuery.fn.scope = function() {\n        return this.data('scope');\n      };\n    }\n    link = function($scope, $el) {\n      if (!config.debugInfo) {\n        return $el.data('scope', $scope).addClass('tg-scope');\n      }\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBindScope\", [\"$tgConfig\", BindScope]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CompileHtmlDirective;\n\n  CompileHtmlDirective = function($compile) {\n    var link;\n    link = function(scope, element, attrs) {\n      return scope.$watch(attrs.tgCompileHtml, function(newValue, oldValue) {\n        element.html(newValue);\n        return $compile(element.contents())(scope);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  CompileHtmlDirective.$inject = [\"$compile\"];\n\n  angular.module(\"taigaCommon\").directive(\"tgCompileHtml\", CompileHtmlDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var BlockButtonDirective, CreatedByDisplayDirective, DateRangeDirective, DateSelectorDirective, DeleteButtonDirective, ListItemAssignedtoDirective, ListItemEpicStatusDirective, ListItemIssueStatusDirective, ListItemPriorityDirective, ListItemSeverityDirective, ListItemTaskStatusDirective, ListItemTypeDirective, ListItemUsStatusDirective, SprintProgressBarDirective, TgMainTitleDirective, TgProgressBarDirective, UserDisplayDirective, bindOnce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaCommon\");\n\n  DateRangeDirective = function($translate) {\n    var link, renderRange;\n    renderRange = function($el, first, second) {\n      var endDate, prettyDate, startDate;\n      prettyDate = $translate.instant(\"BACKLOG.SPRINTS.DATE\");\n      startDate = moment(first).format(prettyDate);\n      endDate = moment(second).format(prettyDate);\n      return $el.html($translate.instant(\"TASKBOARD.TITLE_DATE_RANGE\", {\n        startDate: startDate,\n        endDate: endDate\n      }));\n    };\n    link = function($scope, $el, $attrs) {\n      var first, ref, second;\n      ref = $attrs.tgDateRange.split(\",\"), first = ref[0], second = ref[1];\n      return bindOnce($scope, first, function(valFirst) {\n        return bindOnce($scope, second, function(valSecond) {\n          return renderRange($el, valFirst, valSecond);\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgDateRange\", [\"$translate\", DateRangeDirective]);\n\n  DateSelectorDirective = function($rootscope, datePickerConfigService) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var initialize, selectedDate, unbind;\n      selectedDate = null;\n      initialize = function() {\n        var datePickerConfig;\n        datePickerConfig = datePickerConfigService.get();\n        _.merge(datePickerConfig, {\n          field: $el[0]\n        });\n        return $el.picker = new Pikaday(datePickerConfig);\n      };\n      unbind = $rootscope.$on(\"$translateChangeEnd\", (function(_this) {\n        return function(ctx) {\n          if ($el.picker) {\n            $el.picker.destroy();\n          }\n          return initialize();\n        };\n      })(this));\n      $attrs.$observe(\"pickerValue\", function(val) {\n        $el.val(val);\n        if (val != null) {\n          if ($el.picker) {\n            $el.picker.destroy();\n          }\n          initialize();\n        }\n        return $el.picker.setDate(val);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        unbind();\n        return $el.picker.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgDateSelector\", [\"$rootScope\", \"tgDatePickerConfigService\", DateSelectorDirective]);\n\n  SprintProgressBarDirective = function() {\n    var link, renderProgress;\n    renderProgress = function($el, percentage, visual_percentage) {\n      if ($el.hasClass(\".current-progress\")) {\n        return $el.css(\"width\", percentage + \"%\");\n      } else {\n        $el.find(\".current-progress\").css(\"width\", visual_percentage + \"%\");\n        return $el.find(\".number\").html(percentage + \" %\");\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      bindOnce($scope, $attrs.tgSprintProgressbar, function(sprint) {\n        var closedPoints, percentage, totalPoints, visual_percentage;\n        closedPoints = sprint.closed_points;\n        totalPoints = sprint.total_points;\n        percentage = 0;\n        if (totalPoints !== 0) {\n          percentage = Math.round(100 * (closedPoints / totalPoints));\n        }\n        visual_percentage = 0;\n        if (totalPoints !== 0) {\n          visual_percentage = Math.round(98 * (closedPoints / totalPoints));\n        }\n        return renderProgress($el, percentage, visual_percentage);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSprintProgressbar\", SprintProgressBarDirective);\n\n  CreatedByDisplayDirective = function($template, $compile, $translate, $navUrls, avatarService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      bindOnce($scope, $attrs.ngModel, function(model) {\n        var avatar, ref;\n        if (model != null) {\n          avatar = avatarService.getAvatar(model.owner_extra_info);\n          $scope.owner = model.owner_extra_info || {\n            full_name_display: $translate.instant(\"COMMON.EXTERNAL_USER\")\n          };\n          $scope.owner.avatar = avatar.url;\n          $scope.owner.bg = avatar.bg;\n          $scope.url = ((ref = $scope.owner) != null ? ref.is_active : void 0) ? $navUrls.resolve(\"user-profile\", {\n            username: $scope.owner.username\n          }) : \"\";\n          return $scope.date = moment(model.created_date).format($translate.instant(\"COMMON.DATETIME\"));\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      scope: true,\n      templateUrl: \"common/components/created-by.html\"\n    };\n  };\n\n  module.directive(\"tgCreatedByDisplay\", [\"$tgTemplate\", \"$compile\", \"$translate\", \"$tgNavUrls\", \"tgAvatarService\", CreatedByDisplayDirective]);\n\n  UserDisplayDirective = function($template, $compile, $translate, $navUrls, avatarService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var avatar, id;\n      id = $attrs.tgUserId;\n      $scope.user = $scope.usersById[id] || {\n        full_name_display: $translate.instant(\"COMMON.EXTERNAL_USER\")\n      };\n      avatar = avatarService.getAvatar($scope.usersById[id] || null);\n      $scope.user.avatar = avatar.url;\n      $scope.user.bg = avatar.bg;\n      $scope.url = $scope.user.is_active ? $navUrls.resolve(\"user-profile\", {\n        username: $scope.user.username\n      }) : \"\";\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      scope: true,\n      templateUrl: \"common/components/user-display.html\"\n    };\n  };\n\n  module.directive(\"tgUserDisplay\", [\"$tgTemplate\", \"$compile\", \"$translate\", \"$tgNavUrls\", \"tgAvatarService\", UserDisplayDirective]);\n\n  BlockButtonDirective = function($rootscope, $loading, $template) {\n    var link, template;\n    template = $template.get(\"common/components/block-button.html\");\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      $scope.$watch($attrs.ngModel, function(item) {\n        if (!item) {\n          return;\n        }\n        $scope.item = item;\n        if (isEditable()) {\n          return $el.find('.button-lock').addClass('editable');\n        }\n      });\n      $el.on(\"click\", \".item-block\", function(event) {\n        event.preventDefault();\n        return $rootscope.$broadcast(\"block\", $model.$modelValue);\n      });\n      $el.on(\"click\", \".item-unblock\", function(event) {\n        var currentLoading, finish;\n        event.preventDefault();\n        currentLoading = $loading().target($el.find(\".item-unblock\")).start();\n        finish = function() {\n          return currentLoading.finish();\n        };\n        return $rootscope.$broadcast(\"unblock\", $model.$modelValue, finish);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      template: template\n    };\n  };\n\n  module.directive(\"tgBlockButton\", [\"$rootScope\", \"$tgLoading\", \"$tgTemplate\", BlockButtonDirective]);\n\n  DeleteButtonDirective = function($log, $repo, $confirm, $location, $template) {\n    var link, template;\n    template = $template.get(\"common/components/delete-button.html\");\n    link = function($scope, $el, $attrs, $model) {\n      if (!$attrs.onDeleteGoToUrl) {\n        return $log.error(\"DeleteButtonDirective requires on-delete-go-to-url set in scope.\");\n      }\n      if (!$attrs.onDeleteTitle) {\n        return $log.error(\"DeleteButtonDirective requires on-delete-title set in scope.\");\n      }\n      $el.on(\"click\", \".button-delete\", function(event) {\n        var subtitle, title;\n        title = $attrs.onDeleteTitle;\n        subtitle = $model.$modelValue.subject;\n        return $confirm.askOnDelete(title, subtitle).then((function(_this) {\n          return function(askResponse) {\n            var promise;\n            promise = $repo.remove($model.$modelValue);\n            promise.then(function() {\n              var url;\n              askResponse.finish();\n              url = $scope.$eval($attrs.onDeleteGoToUrl);\n              return $location.path(url);\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            });\n          };\n        })(this));\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      template: template\n    };\n  };\n\n  module.directive(\"tgDeleteButton\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"$tgTemplate\", DeleteButtonDirective]);\n\n  ListItemEpicStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var epic;\n      epic = $scope.$eval($attrs.tgListitemEpicStatus);\n      return bindOnce($scope, \"epicStatusById\", function(epicStatusById) {\n        return $el.text(epicStatusById[epic.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemEpicStatus\", ListItemEpicStatusDirective);\n\n  ListItemUsStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var us;\n      us = $scope.$eval($attrs.tgListitemUsStatus);\n      return bindOnce($scope, \"usStatusById\", function(usStatusById) {\n        return $el.text(usStatusById[us.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemUsStatus\", ListItemUsStatusDirective);\n\n  ListItemTaskStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var task;\n      task = $scope.$eval($attrs.tgListitemTaskStatus);\n      return bindOnce($scope, \"taskStatusById\", function(taskStatusById) {\n        return $el.text(taskStatusById[task.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemTaskStatus\", ListItemTaskStatusDirective);\n\n  ListItemAssignedtoDirective = function($template, $translate, avatarService) {\n    var link, template;\n    template = $template.get(\"common/components/list-item-assigned-to-avatar.html\", true);\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, \"usersById\", function(usersById) {\n        var avatar, ctx, item, member;\n        item = $scope.$eval($attrs.tgListitemAssignedto);\n        ctx = {\n          name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\")\n        };\n        member = usersById[item.assigned_to];\n        avatar = avatarService.getAvatar(member);\n        ctx.imgurl = avatar.url;\n        ctx.bg = avatar.bg;\n        if (member) {\n          ctx.name = member.full_name_display;\n        }\n        return $el.html(template(ctx));\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemAssignedto\", [\"$tgTemplate\", \"$translate\", \"tgAvatarService\", ListItemAssignedtoDirective]);\n\n  ListItemIssueStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var issue;\n      issue = $scope.$eval($attrs.tgListitemIssueStatus);\n      return bindOnce($scope, \"issueStatusById\", function(issueStatusById) {\n        return $el.text(issueStatusById[issue.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemIssueStatus\", ListItemIssueStatusDirective);\n\n  ListItemTypeDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(issueTypeById, issue) {\n        var domNode, type;\n        type = issueTypeById[issue.type];\n        domNode = $el.find(\".level\");\n        domNode.css(\"background-color\", type.color);\n        return domNode.attr(\"title\", type.name);\n      };\n      bindOnce($scope, \"issueTypeById\", function(issueTypeById) {\n        var issue;\n        issue = $scope.$eval($attrs.tgListitemType);\n        return render(issueTypeById, issue);\n      });\n      return $scope.$watch($attrs.tgListitemType, function(issue) {\n        return render($scope.issueTypeById, issue);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/level.html\"\n    };\n  };\n\n  module.directive(\"tgListitemType\", ListItemTypeDirective);\n\n  ListItemPriorityDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(priorityById, issue) {\n        var domNode, priority;\n        priority = priorityById[issue.priority];\n        domNode = $el.find(\".level\");\n        domNode.css(\"background-color\", priority.color);\n        return domNode.attr(\"title\", priority.name);\n      };\n      bindOnce($scope, \"priorityById\", function(priorityById) {\n        var issue;\n        issue = $scope.$eval($attrs.tgListitemPriority);\n        return render(priorityById, issue);\n      });\n      return $scope.$watch($attrs.tgListitemPriority, function(issue) {\n        return render($scope.priorityById, issue);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/level.html\"\n    };\n  };\n\n  module.directive(\"tgListitemPriority\", ListItemPriorityDirective);\n\n  ListItemSeverityDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(severityById, issue) {\n        var domNode, severity;\n        severity = severityById[issue.severity];\n        domNode = $el.find(\".level\");\n        domNode.css(\"background-color\", severity.color);\n        return domNode.attr(\"title\", severity.name);\n      };\n      bindOnce($scope, \"severityById\", function(severityById) {\n        var issue;\n        issue = $scope.$eval($attrs.tgListitemSeverity);\n        return render(severityById, issue);\n      });\n      return $scope.$watch($attrs.tgListitemSeverity, function(issue) {\n        return render($scope.severityById, issue);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/level.html\"\n    };\n  };\n\n  module.directive(\"tgListitemSeverity\", ListItemSeverityDirective);\n\n  TgProgressBarDirective = function($template) {\n    var link, render, template;\n    template = $template.get(\"common/components/progress-bar.html\", true);\n    render = function(el, percentage) {\n      return el.html(template({\n        percentage: percentage\n      }));\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$watch($attrs.tgProgressBar, function(percentage) {\n        percentage = _.max([0, percentage]);\n        percentage = _.min([100, percentage]);\n        return render($el, percentage);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProgressBar\", [\"$tgTemplate\", TgProgressBarDirective]);\n\n  TgMainTitleDirective = function($translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      $attrs.$observe(\"i18nSectionName\", function(i18nSectionName) {\n        return $scope.sectionName = i18nSectionName;\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/main-title.html\"\n    };\n  };\n\n  module.directive(\"tgMainTitle\", [\"$translate\", TgMainTitleDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ConfirmService, NOTIFICATION_MSG, bindMethods, cancelTimeout, debounce, module, taiga, timeout,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  timeout = this.taiga.timeout;\n\n  cancelTimeout = this.taiga.cancelTimeout;\n\n  debounce = this.taiga.debounce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  NOTIFICATION_MSG = {\n    \"success\": {\n      title: \"NOTIFICATION.OK\",\n      message: \"NOTIFICATION.SAVED\"\n    },\n    \"error\": {\n      title: \"NOTIFICATION.WARNING\",\n      message: \"NOTIFICATION.WARNING_TEXT\"\n    },\n    \"light-error\": {\n      title: \"NOTIFICATION.WARNING\",\n      message: \"NOTIFICATION.WARNING_TEXT\"\n    }\n  };\n\n  ConfirmService = (function(superClass) {\n    extend(ConfirmService, superClass);\n\n    ConfirmService.$inject = [\"$q\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$filter\"];\n\n    function ConfirmService(q, lightboxService, loading, translate, filter) {\n      this.q = q;\n      this.lightboxService = lightboxService;\n      this.loading = loading;\n      this.translate = translate;\n      this.filter = filter;\n      bindMethods(this);\n    }\n\n    ConfirmService.prototype.hide = function(el) {\n      if (el) {\n        this.lightboxService.close(el);\n        return el.off(\".confirm-dialog\");\n      }\n    };\n\n    ConfirmService.prototype.ask = function(title, subtitle, message, lightboxSelector) {\n      var defered, el, onEsc;\n      if (lightboxSelector == null) {\n        lightboxSelector = \".lightbox-generic-ask\";\n      }\n      defered = this.q.defer();\n      el = angular.element(lightboxSelector);\n      el.find(\".title\").text(title || '');\n      el.find(\".subtitle\").text(subtitle || '');\n      if (message) {\n        message = this.filter('textToHTML')(message);\n      }\n      el.find(\".message\").html(message || '');\n      el.on(\"click.confirm-dialog\", \".js-confirm\", debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, currentWidth, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          currentWidth = target.width();\n          target.width(currentWidth);\n          currentLoading = _this.loading().target(target).start();\n          return defered.resolve({\n            finish: function(ok) {\n              if (ok == null) {\n                ok = true;\n              }\n              target.css(\"width\", \"\");\n              currentLoading.finish();\n              if (ok) {\n                return _this.hide(el);\n              }\n            }\n          });\n        };\n      })(this)));\n      el.on(\"click.confirm-dialog\", \".js-cancel\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.reject();\n          return _this.hide(el);\n        };\n      })(this));\n      onEsc = (function(_this) {\n        return function() {\n          return _this.hide(el);\n        };\n      })(this);\n      this.lightboxService.open(el, null, onEsc);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.askDelete = function(title, subtitle, message, lightboxSelector) {\n      var defered, lightbox, onEsc;\n      if (lightboxSelector == null) {\n        lightboxSelector = \".lightbox-generic-delete\";\n      }\n      defered = this.q.defer();\n      lightbox = angular.element(lightboxSelector);\n      lightbox.find(\".title\").text(title || '');\n      lightbox.find(\".subtitle\").text(subtitle || '');\n      if (message) {\n        message = this.filter('textToHTML')(message);\n      }\n      lightbox.find(\".message\").html(message || '');\n      lightbox.on(\"click.confirm-dialog\", \".js-confirm\", debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, currentWidth, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          currentWidth = target.width();\n          target.width(currentWidth);\n          currentLoading = _this.loading().target(target).start();\n          return defered.resolve({\n            finish: function(ok) {\n              if (ok == null) {\n                ok = true;\n              }\n              target.css(\"width\", \"\");\n              currentLoading.finish();\n              if (ok) {\n                return _this.hide(lightbox);\n              }\n            }\n          });\n        };\n      })(this)));\n      lightbox.on(\"click.confirm-dialog\", \".js-cancel\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.reject();\n          return _this.hide(lightbox);\n        };\n      })(this));\n      onEsc = (function(_this) {\n        return function() {\n          return _this.hide(lightbox);\n        };\n      })(this);\n      this.lightboxService.open(lightbox, null, onEsc);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.askOnDelete = function(title, message, subtitle) {\n      if (subtitle == null) {\n        subtitle = this.translate.instant(\"NOTIFICATION.ASK_DELETE\");\n      }\n      return this.askDelete(title, subtitle, message);\n    };\n\n    ConfirmService.prototype.askChoice = function(title, subtitle, choices, replacement, warning, lightboxSelector) {\n      var choicesField, defered, el;\n      if (lightboxSelector == null) {\n        lightboxSelector = \".lightbox-ask-choice\";\n      }\n      defered = this.q.defer();\n      el = angular.element(lightboxSelector);\n      el.find(\".title\").text(title);\n      el.find(\".subtitle\").text(subtitle);\n      if (replacement) {\n        el.find(\".replacement\").text(replacement);\n      } else {\n        el.find(\".replacement\").remove();\n      }\n      if (warning) {\n        el.find(\".warning\").text(warning);\n      } else {\n        el.find(\".warning\").remove();\n      }\n      choicesField = el.find(\".choices\");\n      choicesField.html('');\n      _.each(choices, function(value, key) {\n        value = _.escape(value);\n        return choicesField.append(angular.element(\"<option value='\" + key + \"'>\" + value + \"</option>\"));\n      });\n      el.on(\"click.confirm-dialog\", \".js-confirm-ask\", debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          currentLoading = _this.loading().target(target).start();\n          return defered.resolve({\n            selected: choicesField.val(),\n            finish: function(ok) {\n              if (ok == null) {\n                ok = true;\n              }\n              currentLoading.finish();\n              if (ok) {\n                return _this.hide(el);\n              }\n            }\n          });\n        };\n      })(this)));\n      el.on(\"click.confirm-dialog\", \".js-cancel-ask\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.reject();\n          return _this.hide(el);\n        };\n      })(this));\n      this.lightboxService.open(el);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.error = function(message) {\n      var defered, el;\n      defered = this.q.defer();\n      el = angular.element(\".lightbox-generic-error\");\n      el.find(\".title\").html(message);\n      el.on(\"click.confirm-dialog\", \".button-green\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      el.on(\"click.confirm-dialog\", \".close\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      this.lightboxService.open(el);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.success = function(title, message, icon, action) {\n      var defered, detailImage, el, svgContainer, useSVG;\n      defered = this.q.defer();\n      el = angular.element(\".lightbox-generic-success\");\n      el.find(\"img\").remove();\n      el.find(\"svg\").remove();\n      if (icon) {\n        if (icon.type === \"img\") {\n          detailImage = $('<img>').addClass('lb-icon').attr('src', icon.name);\n        } else if (icon.type === \"svg\") {\n          detailImage = document.createElement(\"div\");\n          taiga.addClass(detailImage, \"icon\");\n          taiga.addClass(detailImage, icon.name);\n          taiga.addClass(detailImage, \"lb-icon\");\n          svgContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n          useSVG = document.createElementNS('http://www.w3.org/2000/svg', 'use');\n          useSVG.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#' + icon.name);\n          detailImage.appendChild(svgContainer).appendChild(useSVG);\n        }\n        if (detailImage) {\n          el.find('section').prepend(detailImage);\n        }\n      }\n      if (title) {\n        el.find(\".title\").html(title);\n      }\n      if (message) {\n        el.find(\".message\").html(message);\n      }\n      if (action) {\n        el.find(\".js-confirm\").html(action);\n        el.find(\".js-confirm\").attr('title', action);\n      }\n      el.on(\"click.confirm-dialog\", \".js-confirm\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      el.on(\"click.confirm-dialog\", \".close\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      this.lightboxService.open(el);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.loader = function(title, message, spin) {\n      var el;\n      if (spin == null) {\n        spin = false;\n      }\n      el = angular.element(\".lightbox-generic-loading\");\n      if (title) {\n        el.find(\".title\").html(title);\n      }\n      if (message) {\n        el.find(\".message\").html(message);\n      }\n      if (spin) {\n        el.find(\".spin\").removeClass(\"hidden\");\n      }\n      return {\n        start: (function(_this) {\n          return function() {\n            return _this.lightboxService.open(el);\n          };\n        })(this),\n        stop: (function(_this) {\n          return function() {\n            return _this.lightboxService.close(el);\n          };\n        })(this),\n        update: (function(_this) {\n          return function(status, title, message, percent) {\n            if (title) {\n              el.find(\".title\").html(title);\n            }\n            if (message) {\n              el.find(\".message\").html(message);\n            }\n            if (percent) {\n              el.find(\".spin\").addClass(\"hidden\");\n              el.find(\".progress-bar-wrapper\").removeClass(\"hidden\");\n              el.find(\".progress-bar-wrapper > .bar\").width(percent + '%');\n              return el.find(\".progress-bar-wrapper > span\").html(percent + '%').css('left', (percent - 9) + '%');\n            } else {\n              el.find(\".spin\").removeClass(\"hidden\");\n              return el.find(\".progress-bar-wrapper\").addClass(\"hidden\");\n            }\n          };\n        })(this)\n      };\n    };\n\n    ConfirmService.prototype.notify = function(type, message, title, time) {\n      var body, el, selector;\n      selector = \".notification-message-\" + type;\n      el = angular.element(selector);\n      if (el.hasClass(\"active\")) {\n        return;\n      }\n      if (title) {\n        el.find(\"h4\").html(title);\n      } else {\n        el.find(\"h4\").html(this.translate.instant(NOTIFICATION_MSG[type].title));\n      }\n      if (message) {\n        el.find(\"p\").html(message);\n      } else {\n        el.find(\"p\").html(this.translate.instant(NOTIFICATION_MSG[type].message));\n      }\n      body = angular.element(\"body\");\n      body.find(\".notification-message .notification-light\").removeClass('active').addClass('inactive');\n      body.find(selector).removeClass('inactive').addClass('active');\n      if (this.tsem) {\n        cancelTimeout(this.tsem);\n      }\n      if (!time) {\n        time = type === 'error' || type === 'light-error' ? 3500 : 1500;\n      }\n      this.tsem = timeout(time, (function(_this) {\n        return function() {\n          body.find(selector).removeClass('active').addClass('inactive').one('animationend', function() {\n            return $(this).removeClass('inactive');\n          });\n          return delete _this.tsem;\n        };\n      })(this));\n      return el.on(\"click\", \".icon-close, .close\", (function(_this) {\n        return function(event) {\n          return body.find(selector).removeClass('active').addClass('inactive');\n        };\n      })(this));\n    };\n\n    return ConfirmService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaCommon\");\n\n  module.service(\"$tgConfirm\", ConfirmService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CHECKBOX_TYPE, CustomAttributeValueDirective, CustomAttributesValuesController, CustomAttributesValuesDirective, DATE_TYPE, DROPDOWN_TYPE, MULTILINE_TYPE, NUMBER_TYPE, RICHTEXT_TYPE, TEXT_TYPE, TYPE_CHOICES, URL_TYPE, bindMethods, bindOnce, debounce, generateHash, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  bindMethods = this.taiga.bindMethods;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  generateHash = taiga.generateHash;\n\n  module = angular.module(\"taigaCommon\");\n\n  TEXT_TYPE = \"text\";\n\n  RICHTEXT_TYPE = \"url\";\n\n  MULTILINE_TYPE = \"multiline\";\n\n  DATE_TYPE = \"date\";\n\n  URL_TYPE = \"url\";\n\n  DROPDOWN_TYPE = \"dropdown\";\n\n  CHECKBOX_TYPE = \"checkbox\";\n\n  NUMBER_TYPE = \"number\";\n\n  TYPE_CHOICES = [\n    {\n      key: TEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_TEXT\"\n    }, {\n      key: MULTILINE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_MULTI\"\n    }, {\n      key: DATE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DATE\"\n    }, {\n      key: URL_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_URL\"\n    }, {\n      key: RICHTEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_RICHTEXT\"\n    }, {\n      key: DROPDOWN_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DROPDOWN\"\n    }, {\n      key: CHECKBOX_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_CHECKBOX\"\n    }, {\n      key: NUMBER_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_NUMBER\"\n    }\n  ];\n\n  CustomAttributesValuesController = (function(superClass) {\n    extend(CustomAttributesValuesController, superClass);\n\n    CustomAttributesValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$q\"];\n\n    function CustomAttributesValuesController(scope1, rootscope, repo, rs, confirm, q) {\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.q = q;\n      bindMethods(this);\n      this.type = null;\n      this.objectId = null;\n      this.projectId = null;\n      this.customAttributes = [];\n      this.customAttributesValues = null;\n    }\n\n    CustomAttributesValuesController.prototype.initialize = function(type, objectId) {\n      this.project = this.scope.project;\n      this.type = type;\n      this.objectId = objectId;\n      return this.projectId = this.scope.projectId;\n    };\n\n    CustomAttributesValuesController.prototype.loadCustomAttributesValues = function() {\n      if (!this.objectId) {\n        return this.customAttributesValues;\n      }\n      return this.rs.customAttributesValues[this.type].get(this.objectId).then((function(_this) {\n        return function(customAttributesValues) {\n          _this.customAttributes = _this.project[_this.type + \"_custom_attributes\"];\n          _this.customAttributesValues = customAttributesValues;\n          return customAttributesValues;\n        };\n      })(this));\n    };\n\n    CustomAttributesValuesController.prototype.getAttributeValue = function(attribute) {\n      var attributeValue;\n      attributeValue = _.clone(attribute, false);\n      attributeValue.value = this.customAttributesValues.attributes_values[attribute.id];\n      return attributeValue;\n    };\n\n    CustomAttributesValuesController.prototype.updateAttributeValue = function(attributeValue) {\n      var attributesValues, onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"custom-attributes-values:edit\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function(response) {\n          _this.confirm.notify(\"error\");\n          return _this.q.reject();\n        };\n      })(this);\n      attributesValues = _.clone(this.customAttributesValues.attributes_values, true);\n      attributesValues[attributeValue.id] = attributeValue.value;\n      this.customAttributesValues.attributes_values = attributesValues;\n      this.customAttributesValues.id = this.objectId;\n      return this.repo.save(this.customAttributesValues).then(onSuccess, onError);\n    };\n\n    return CustomAttributesValuesController;\n\n  })(taiga.Controller);\n\n  CustomAttributesValuesDirective = function($templates, $storage) {\n    var collapsedHash, link, template, templateFn;\n    template = $templates.get(\"custom-attributes/custom-attributes-values.html\", true);\n    collapsedHash = function(type) {\n      return generateHash([\"custom-attributes-collapsed\", type]);\n    };\n    link = function($scope, $el, $attrs, $ctrls) {\n      var $ctrl, $model, hash;\n      $ctrl = $ctrls[0];\n      $model = $ctrls[1];\n      hash = collapsedHash($attrs.type);\n      $scope.collapsed = $storage.get(hash) || false;\n      bindOnce($scope, $attrs.ngModel, function(value) {\n        $ctrl.initialize($attrs.type, value.id);\n        return $ctrl.loadCustomAttributesValues();\n      });\n      $scope.toggleCollapse = function() {\n        $scope.collapsed = !$scope.collapsed;\n        return $storage.set(hash, $scope.collapsed);\n      };\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    templateFn = function($el, $attrs) {\n      return template({\n        requiredEditionPerm: $attrs.requiredEditionPerm\n      });\n    };\n    return {\n      require: [\"tgCustomAttributesValues\", \"ngModel\"],\n      controller: CustomAttributesValuesController,\n      controllerAs: \"ctrl\",\n      restrict: \"AE\",\n      scope: true,\n      link: link,\n      template: templateFn\n    };\n  };\n\n  module.directive(\"tgCustomAttributesValues\", [\"$tgTemplate\", \"$tgStorage\", \"$translate\", CustomAttributesValuesDirective]);\n\n  CustomAttributeValueDirective = function($template, $selectedText, $compile, $translate, datePickerConfigService, wysiwygService) {\n    var link, template, templateEdit;\n    template = $template.get(\"custom-attributes/custom-attribute-value.html\", true);\n    templateEdit = $template.get(\"custom-attributes/custom-attribute-value-edit.html\", true);\n    link = function($scope, $el, $attrs, $ctrl) {\n      var attributeValue, isEditable, prettyDate, render, setFocusAndSelectOnInputField, submit;\n      prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n      render = function(attributeValue, edit) {\n        var ctx, datePickerConfig, editable, html, scope, value;\n        if (edit == null) {\n          edit = false;\n        }\n        if (attributeValue.type === DATE_TYPE && attributeValue.value) {\n          value = moment(attributeValue.value, \"YYYY-MM-DD\").format(prettyDate);\n        }\n        if (attributeValue.type === NUMBER_TYPE && attributeValue.value) {\n          value = parseFloat(attributeValue.value);\n        } else {\n          value = attributeValue.value;\n        }\n        editable = isEditable();\n        ctx = {\n          id: attributeValue.id,\n          name: attributeValue.name,\n          description: attributeValue.description,\n          value: value,\n          type: attributeValue.type,\n          isEditable: editable\n        };\n        scope = $scope.$new();\n        scope.attributeHtml = wysiwygService.getHTML(\"\" + value);\n        scope.extra = attributeValue.extra;\n        scope.model = value;\n        scope.project = $scope.project;\n        if (editable && (edit || !value)) {\n          html = templateEdit(ctx);\n          html = $compile(html)(scope);\n          $el.html(html);\n          if (attributeValue.type === DATE_TYPE) {\n            datePickerConfig = datePickerConfigService.get();\n            _.merge(datePickerConfig, {\n              field: $el.find(\"input[name=value]\")[0],\n              onSelect: (function(_this) {\n                return function(date) {\n                  var selectedDate;\n                  return selectedDate = date;\n                };\n              })(this),\n              onOpen: (function(_this) {\n                return function() {\n                  if (typeof selectedDate !== \"undefined\" && selectedDate !== null) {\n                    return $el.picker.setDate(selectedDate);\n                  }\n                };\n              })(this)\n            });\n            return $el.picker = new Pikaday(datePickerConfig);\n          }\n        } else {\n          html = template(ctx);\n          html = $compile(html)(scope);\n          return $el.html(html);\n        }\n      };\n      isEditable = function() {\n        var permissions, requiredEditionPerm;\n        permissions = $scope.project.my_permissions;\n        requiredEditionPerm = $attrs.requiredEditionPerm;\n        return permissions.indexOf(requiredEditionPerm) > -1;\n      };\n      $scope.saveCustomRichText = (function(_this) {\n        return function(markdown, callback) {\n          attributeValue.value = markdown;\n          return $ctrl.updateAttributeValue(attributeValue).then(function() {\n            callback();\n            return render(attributeValue, false);\n          });\n        };\n      })(this);\n      $scope.cancelCustomRichText = (function(_this) {\n        return function() {\n          render(attributeValue, false);\n          return null;\n        };\n      })(this);\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var form, formControl;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          if (attributeValue.type === DROPDOWN_TYPE) {\n            formControl = $el.find(\"select[name='value']\");\n            attributeValue.value = formControl.val();\n          } else if (attributeValue.type === CHECKBOX_TYPE) {\n            formControl = $el.find(\"input[name=value]\");\n            attributeValue.value = formControl[0].checked;\n          } else {\n            formControl = $el.find(\"input[name=value], textarea[name='value']\");\n            attributeValue.value = formControl.val();\n            if (attributeValue.type === DATE_TYPE && moment(attributeValue.value, prettyDate).isValid()) {\n              attributeValue.value = moment(attributeValue.value, prettyDate).format(\"YYYY-MM-DD\");\n            }\n            if (attributeValue.type === NUMBER_TYPE) {\n              attributeValue.value = parseFloat(attributeValue.value);\n            }\n          }\n          return $scope.$apply(function() {\n            return $ctrl.updateAttributeValue(attributeValue).then(function() {\n              return render(attributeValue, false);\n            });\n          });\n        };\n      })(this));\n      setFocusAndSelectOnInputField = function() {\n        return $el.find(\"input[name='value'], textarea[name='value']\").focus().select();\n      };\n      attributeValue = $scope.$eval($attrs.tgCustomAttributeValue);\n      if (attributeValue.value === null || attributeValue.value === void 0) {\n        attributeValue.value = \"\";\n      }\n      $scope.customAttributeValue = attributeValue;\n      render(attributeValue);\n      $el.on(\"click\", \".js-value-view-mode span a\", function(event) {\n        return event.stopPropagation();\n      });\n      $el.on(\"click\", \".js-value-view-mode\", function() {\n        if (!isEditable()) {\n          return;\n        }\n        if ($selectedText.get().length) {\n          return;\n        }\n        render(attributeValue, true);\n        return setFocusAndSelectOnInputField();\n      });\n      $el.on(\"click\", \".js-edit-description\", function(event) {\n        event.preventDefault();\n        render(attributeValue, true);\n        return setFocusAndSelectOnInputField();\n      });\n      $el.on(\"keyup\", \"input[name=value], textarea[name='value']\", function(event) {\n        if (event.keyCode === 13 && event.currentTarget.type !== \"textarea\") {\n          return submit(event);\n        } else if (event.keyCode === 27) {\n          return render(attributeValue, false);\n        }\n      });\n      $el.on(\"submit\", \"form\", submit);\n      $el.on(\"click\", \".js-save-description\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      require: \"^tgCustomAttributesValues\",\n      restrict: \"AE\"\n    };\n  };\n\n  module.directive(\"tgCustomAttributeValue\", [\"$tgTemplate\", \"$selectedText\", \"$compile\", \"$translate\", \"tgDatePickerConfigService\", \"tgWysiwygService\", CustomAttributeValueDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var EmojisService, module, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  EmojisService = (function(superClass) {\n    extend(EmojisService, superClass);\n\n    EmojisService.$inject = [];\n\n    function EmojisService() {\n      this.replaceEmojiNameByHtmlImgs = bind(this.replaceEmojiNameByHtmlImgs, this);\n      this.replaceEmojiNameByImgs = bind(this.replaceEmojiNameByImgs, this);\n      this.replaceImgsByEmojiName = bind(this.replaceImgsByEmojiName, this);\n      this.getEmojiByName = bind(this.getEmojiByName, this);\n      this.getEmojiById = bind(this.getEmojiById, this);\n      this.searchByName = bind(this.searchByName, this);\n      this.emojis = _.map(taiga.emojis, function(it) {\n        it.image = (\"/\" + window._version + \"/emojis/\") + it.image;\n        return it;\n      });\n      this.emojisById = _.keyBy(this.emojis, 'id');\n      this.emojisByName = _.keyBy(this.emojis, 'name');\n    }\n\n    EmojisService.prototype.searchByName = function(name) {\n      return _.filter(this.emojis, function(it) {\n        return it.name.indexOf(name) !== -1;\n      });\n    };\n\n    EmojisService.prototype.getEmojiById = function(id) {\n      return this.emojisById[id];\n    };\n\n    EmojisService.prototype.getEmojiByName = function(name) {\n      return this.emojisByName[name];\n    };\n\n    EmojisService.prototype.replaceImgsByEmojiName = function(html) {\n      var emoji, emojiId, emojiIds, i, len, regexImgs;\n      emojiIds = taiga.getMatches(html, /emojis\\/([^\"]+).png\"/gi);\n      for (i = 0, len = emojiIds.length; i < len; i++) {\n        emojiId = emojiIds[i];\n        regexImgs = new RegExp('<img(.*)' + emojiId + '[^>]+\\>', 'g');\n        emoji = this.getEmojiById(emojiId);\n        html = html.replace(regexImgs, ':' + emoji.name + ':');\n      }\n      return html;\n    };\n\n    EmojisService.prototype.replaceEmojiNameByImgs = function(text) {\n      var emoji, emojiId, emojiIds, i, len, regexImgs;\n      emojiIds = taiga.getMatches(text, /:([\\w +-]*):/g);\n      for (i = 0, len = emojiIds.length; i < len; i++) {\n        emojiId = emojiIds[i];\n        regexImgs = new RegExp(':' + emojiId + ':', 'g');\n        emoji = this.getEmojiByName(emojiId);\n        if (emoji) {\n          text = text.replace(regexImgs, '![alt](' + emoji.image + ')');\n        }\n      }\n      return text;\n    };\n\n    EmojisService.prototype.replaceEmojiNameByHtmlImgs = function(text) {\n      var emoji, emojiId, emojiIds, i, len, regexImgs;\n      emojiIds = taiga.getMatches(text, /:([\\w +-]*):/g);\n      for (i = 0, len = emojiIds.length; i < len; i++) {\n        emojiId = emojiIds[i];\n        regexImgs = new RegExp(':' + _.escapeRegExp(emojiId) + ':', 'g');\n        emoji = this.getEmojiByName(emojiId);\n        if (emoji) {\n          text = text.replace(regexImgs, '<img src=\"' + emoji.image + '\" />');\n        }\n      }\n      return text;\n    };\n\n    return EmojisService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgEmojis\", EmojisService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var EstimationsService, LbUsEstimationDirective, UsEstimationDirective, groupBy, module, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  module = angular.module(\"taigaCommon\");\n\n  LbUsEstimationDirective = function($tgEstimationsService, $rootScope, $repo, $template, $compile) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      $scope.$watch($attrs.ngModel, function(us) {\n        var estimationProcess;\n        if (us) {\n          estimationProcess = $tgEstimationsService.create($el, us, $scope.project);\n          estimationProcess.onSelectedPointForRole = function(roleId, pointId, points) {\n            us.points = points;\n            estimationProcess.render();\n            return $scope.$apply(function() {\n              return $model.$setViewValue(us);\n            });\n          };\n          estimationProcess.render = function() {\n            var ctx, html, mainTemplate, template;\n            ctx = {\n              totalPoints: this.calculateTotalPoints(),\n              roles: this.calculateRoles(),\n              editable: this.isEditable,\n              loading: false\n            };\n            mainTemplate = \"common/estimation/us-estimation-points-per-role.html\";\n            template = $template.get(mainTemplate, true);\n            html = template(ctx);\n            html = $compile(html)($scope);\n            return this.$el.html(html);\n          };\n          return estimationProcess.render();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgLbUsEstimation\", [\"$tgEstimationsService\", \"$rootScope\", \"$tgRepo\", \"$tgTemplate\", \"$compile\", LbUsEstimationDirective]);\n\n  UsEstimationDirective = function($tgEstimationsService, $rootScope, $repo, $template, $compile, $modelTransform, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var save;\n      save = function(points) {\n        var onError, transform;\n        transform = $modelTransform.save((function(_this) {\n          return function(us) {\n            us.points = points;\n            return us;\n          };\n        })(this));\n        onError = (function(_this) {\n          return function() {\n            return $confirm.notify(\"error\");\n          };\n        })(this);\n        return transform.then(null, onError);\n      };\n      $scope.$watchCollection(function() {\n        return $model.$modelValue && $model.$modelValue.points;\n      }, function() {\n        var estimationProcess, us;\n        us = $model.$modelValue;\n        if (us) {\n          estimationProcess = $tgEstimationsService.create($el, us, $scope.project);\n          estimationProcess.onSelectedPointForRole = function(roleId, pointId, points) {\n            estimationProcess.loading = roleId;\n            estimationProcess.render();\n            return save(points).then(function() {\n              estimationProcess.loading = false;\n              $rootScope.$broadcast(\"object:updated\");\n              return estimationProcess.render();\n            });\n          };\n          estimationProcess.render = function() {\n            var ctx, html, mainTemplate, template;\n            ctx = {\n              totalPoints: this.calculateTotalPoints(),\n              roles: this.calculateRoles(),\n              editable: this.isEditable,\n              loading: estimationProcess.loading\n            };\n            mainTemplate = \"common/estimation/us-estimation-points-per-role.html\";\n            template = $template.get(mainTemplate, true);\n            html = template(ctx);\n            html = $compile(html)($scope);\n            return this.$el.html(html);\n          };\n          return estimationProcess.render();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsEstimation\", [\"$tgEstimationsService\", \"$rootScope\", \"$tgRepo\", \"$tgTemplate\", \"$compile\", \"$tgQueueModelTransformation\", \"$tgConfirm\", UsEstimationDirective]);\n\n  EstimationsService = function($template, $repo, $confirm, $q, $qqueue) {\n    var EstimationProcess, create, pointsTemplate;\n    pointsTemplate = $template.get(\"common/estimation/us-estimation-points.html\", true);\n    EstimationProcess = (function() {\n      function EstimationProcess($el1, us1, project1) {\n        this.$el = $el1;\n        this.us = us1;\n        this.project = project1;\n        this.bindClickEvents = bind(this.bindClickEvents, this);\n        this.isEditable = this.project.my_permissions.indexOf(\"modify_us\") !== -1;\n        this.roles = this.project.roles;\n        this.points = this.project.points;\n        this.loading = false;\n        this.pointsById = groupBy(this.points, function(x) {\n          return x.id;\n        });\n        this.onSelectedPointForRole = function(roleId, pointId) {};\n        this.render = function() {};\n      }\n\n      EstimationProcess.prototype.save = function(roleId, pointId) {\n        var deferred;\n        deferred = $q.defer();\n        $qqueue.add((function(_this) {\n          return function() {\n            var onError, onSuccess;\n            onSuccess = function() {\n              deferred.resolve();\n              return _this.render();\n            };\n            onError = function() {\n              $confirm.notify(\"error\");\n              _this.us.revert();\n              _this.render();\n              return deferred.reject();\n            };\n            return $repo.save(_this.us).then(onSuccess, onError);\n          };\n        })(this));\n        return deferred.promise;\n      };\n\n      EstimationProcess.prototype.calculateTotalPoints = function() {\n        var notNullValues, values;\n        values = _.map(this.us.points, (function(_this) {\n          return function(v, k) {\n            var ref;\n            return (ref = _this.pointsById[v]) != null ? ref.value : void 0;\n          };\n        })(this));\n        if (values.length === 0) {\n          return \"?\";\n        }\n        notNullValues = _.filter(values, function(v) {\n          return v != null;\n        });\n        if (notNullValues.length === 0) {\n          return \"?\";\n        }\n        return _.reduce(notNullValues, function(acc, num) {\n          return acc + num;\n        });\n      };\n\n      EstimationProcess.prototype.calculateRoles = function() {\n        var computableRoles, roles;\n        computableRoles = _.filter(this.project.roles, \"computable\");\n        roles = _.map(computableRoles, (function(_this) {\n          return function(role) {\n            var pointId, pointObj;\n            pointId = _this.us.points[role.id];\n            pointObj = _this.pointsById[pointId];\n            role = _.clone(role, true);\n            role.points = (pointObj != null) && (pointObj.name != null) ? pointObj.name : \"?\";\n            return role;\n          };\n        })(this));\n        return roles;\n      };\n\n      EstimationProcess.prototype.bindClickEvents = function() {\n        this.$el.on(\"click\", \".total.clickable\", (function(_this) {\n          return function(event) {\n            var roleId, target;\n            event.preventDefault();\n            event.stopPropagation();\n            target = angular.element(event.currentTarget);\n            roleId = target.data(\"role-id\");\n            _this.renderPointsSelector(roleId, target);\n            target.siblings().removeClass('active');\n            return target.addClass('active');\n          };\n        })(this));\n        return this.$el.on(\"click\", \".point\", (function(_this) {\n          return function(event) {\n            var pointId, points, roleId, target;\n            event.preventDefault();\n            event.stopPropagation();\n            target = angular.element(event.currentTarget);\n            roleId = target.data(\"role-id\");\n            pointId = target.data(\"point-id\");\n            _this.$el.find(\".popover\").popover().close();\n            points = _.clone(_this.us.points, true);\n            points[roleId] = pointId;\n            return _this.onSelectedPointForRole(roleId, pointId, points);\n          };\n        })(this));\n      };\n\n      EstimationProcess.prototype.renderPointsSelector = function(roleId, target) {\n        var horizontalList, html, maxPointLength, points, pop;\n        points = _.map(this.points, (function(_this) {\n          return function(point) {\n            point = _.clone(point, true);\n            point.selected = _this.us.points[roleId] === point.id ? false : true;\n            return point;\n          };\n        })(this));\n        maxPointLength = 5;\n        horizontalList = _.some(points, (function(_this) {\n          return function(point) {\n            return point.name.length > maxPointLength;\n          };\n        })(this));\n        html = pointsTemplate({\n          \"points\": points,\n          roleId: roleId,\n          horizontal: horizontalList\n        });\n        this.$el.find(\".popover\").popover().close();\n        this.$el.find(\".pop-points-open\").remove();\n        if (target != null) {\n          this.$el.find(target).append(html);\n        } else {\n          this.$el.append(html);\n        }\n        this.$el.find(\".pop-points-open\").popover().open(function() {\n          return $(this).removeClass(\"active\").closest(\"li\").removeClass(\"active\");\n        });\n        this.$el.find(\".pop-points-open\").show();\n        pop = this.$el.find(\".pop-points-open\");\n        if (pop.offset().top + pop.height() > document.body.clientHeight) {\n          return pop.addClass('pop-bottom');\n        }\n      };\n\n      return EstimationProcess;\n\n    })();\n    create = function($el, us, project) {\n      var estimationProcess;\n      $el.unbind(\"click\");\n      estimationProcess = new EstimationProcess($el, us, project);\n      if (estimationProcess.isEditable) {\n        estimationProcess.bindClickEvents();\n      }\n      return estimationProcess;\n    };\n    return {\n      create: create\n    };\n  };\n\n  module.factory(\"$tgEstimationsService\", [\"$tgTemplate\", \"$tgRepo\", \"$tgConfirm\", \"$q\", \"$tgQqueue\", EstimationsService]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var byRefFilter, darkerFilter, defaultFilter, emojify, inArray, markdownToHTML, module, momentFormat, momentFromNow, sizeFormat, taiga, textToHTML, toMutableFilter, unslugify, yesNoFilter;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  defaultFilter = function() {\n    return function(value, defaultValue) {\n      if (value === [null, void 0]) {\n        return defaultValue;\n      }\n      return value;\n    };\n  };\n\n  module.filter(\"default\", defaultFilter);\n\n  yesNoFilter = function($translate) {\n    return function(value) {\n      if (value) {\n        return $translate.instant(\"COMMON.YES\");\n      }\n      return $translate.instant(\"COMMON.NO\");\n    };\n  };\n\n  module.filter(\"yesNo\", [\"$translate\", yesNoFilter]);\n\n  unslugify = function() {\n    return taiga.unslugify;\n  };\n\n  module.filter(\"unslugify\", unslugify);\n\n  momentFormat = function() {\n    return function(input, format) {\n      if (input) {\n        return moment(input).format(format);\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"momentFormat\", momentFormat);\n\n  momentFromNow = function() {\n    return function(input, without_suffix) {\n      if (input) {\n        return moment(input).fromNow(without_suffix || false);\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"momentFromNow\", momentFromNow);\n\n  sizeFormat = (function(_this) {\n    return function() {\n      return _this.taiga.sizeFormat;\n    };\n  })(this);\n\n  module.filter(\"sizeFormat\", sizeFormat);\n\n  toMutableFilter = function() {\n    var memoizedMutable, toMutable;\n    toMutable = function(js) {\n      return js.toJS();\n    };\n    memoizedMutable = _.memoize(toMutable);\n    return function(input) {\n      if (input instanceof Immutable.List) {\n        return memoizedMutable(input);\n      }\n      return input;\n    };\n  };\n\n  module.filter(\"toMutable\", toMutableFilter);\n\n  byRefFilter = function($filterFilter) {\n    return function(userstories, filter) {\n      var cleanRef;\n      if (filter != null ? filter.startsWith(\"#\") : void 0) {\n        cleanRef = filter.substr(1);\n        return _.filter(userstories, (function(_this) {\n          return function(us) {\n            return String(us.ref).startsWith(cleanRef);\n          };\n        })(this));\n      }\n      return $filterFilter(userstories, filter);\n    };\n  };\n\n  module.filter(\"byRef\", [\"filterFilter\", byRefFilter]);\n\n  darkerFilter = function() {\n    return function(color, luminosity) {\n      var black, c, i, j, len, newColor, ref, white;\n      if (!color) {\n        return 'transparent';\n      }\n      color = new String(color).replace(/[^0-9a-f]/gi, '');\n      if (color.length < 6) {\n        color = color[0] + color[0] + color[1] + color[1] + color[2] + color[2];\n      }\n      luminosity = luminosity || 0;\n      newColor = \"#\";\n      c = 0;\n      i = 0;\n      black = 0;\n      white = 255;\n      ref = [0, 1, 2];\n      for (j = 0, len = ref.length; j < len; j++) {\n        i = ref[j];\n        c = parseInt(color.substr(i * 2, 2), 16);\n        c = Math.round(Math.min(Math.max(black, c + (luminosity * white)), white)).toString(16);\n        newColor += (\"00\" + c).substr(c.length);\n      }\n      return newColor;\n    };\n  };\n\n  module.filter(\"darker\", darkerFilter);\n\n  markdownToHTML = function(wysiwigService) {\n    return function(input) {\n      if (input) {\n        return wysiwigService.getHTML(input);\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"markdownToHTML\", [\"tgWysiwygService\", markdownToHTML]);\n\n  inArray = function($filter) {\n    return function(list, arrayFilter, element) {\n      var filter;\n      if (arrayFilter) {\n        filter = $filter(\"filter\");\n        return filter(list, function(listItem) {\n          return arrayFilter.indexOf(listItem[element]) !== -1;\n        });\n      }\n    };\n  };\n\n  module.filter(\"inArray\", [\"$filter\", inArray]);\n\n  emojify = function($emojis) {\n    return function(input) {\n      if (input) {\n        return _.unescape($emojis.replaceEmojiNameByHtmlImgs(_.escape(input)));\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"emojify\", [\"$tgEmojis\", emojify]);\n\n  textToHTML = function($filter) {\n    return function(input) {\n      if (input) {\n        return input.replace(/\\<(?!(\\/?)(strong|br)(\\/?)).*?\\>/g, \"\");\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"textToHTML\", [\"$filter\", textToHTML]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var BlockLightboxDirective, BlockingMessageInputDirective, CreateBulkUserstoriesDirective, CreateEditDirective, LightboxClose, LightboxDirective, LightboxKeyboardNavigationService, LightboxLeaveProjectWarningDirective, LightboxService, RelateToEpicLightboxDirective, SetDueDateDirective, bindOnce, debounce, debounceLeading, groupBy, module, normalizeString, sizeFormat, timeout, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  module = angular.module(\"taigaCommon\");\n\n  bindOnce = this.taiga.bindOnce;\n\n  timeout = this.taiga.timeout;\n\n  debounce = this.taiga.debounce;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  trim = this.taiga.trim;\n\n  normalizeString = this.taiga.normalizeString;\n\n  LightboxService = (function(superClass) {\n    extend(LightboxService, superClass);\n\n    function LightboxService(animationFrame, q, rootScope) {\n      this.animationFrame = animationFrame;\n      this.q = q;\n      this.rootScope = rootScope;\n    }\n\n    LightboxService.prototype.open = function($el, onClose, onEsc, ignoreEsc) {\n      var defered, docEl, lightboxContent;\n      this.onClose = onClose;\n      if (_.isString($el)) {\n        $el = $($el);\n      }\n      defered = this.q.defer();\n      lightboxContent = $el.children().not(\".close\");\n      lightboxContent.hide();\n      this.animationFrame.add(function() {\n        return $el.css('display', 'flex');\n      });\n      this.animationFrame.add(function() {\n        $el.addClass(\"open\");\n        return $el.one(\"transitionend\", (function(_this) {\n          return function() {\n            var firstField;\n            firstField = $el.find('input:not(.no-focus),textarea:not(.no-focus)').first();\n            if (firstField.length) {\n              return firstField.focus();\n            } else if (document.activeElement) {\n              return $(document.activeElement).blur();\n            }\n          };\n        })(this));\n      });\n      this.animationFrame.add((function(_this) {\n        return function() {\n          lightboxContent.show();\n          return defered.resolve();\n        };\n      })(this));\n      if (!ignoreEsc) {\n        docEl = angular.element(document);\n        docEl.on(\"keydown.lightbox\", (function(_this) {\n          return function(e) {\n            var code;\n            code = e.keyCode ? e.keyCode : e.which;\n            if (code === 27) {\n              if (onEsc) {\n                return _this.rootScope.$applyAsync(onEsc);\n              } else {\n                return _this.close($el);\n              }\n            }\n          };\n        })(this));\n      }\n      this.rootScope.$broadcast(\"lightbox:opened\");\n      return defered.promise;\n    };\n\n    LightboxService.prototype.close = function($el) {\n      return this.q((function(_this) {\n        return function(resolve) {\n          var docEl, scope;\n          if (_.isString($el)) {\n            $el = $($el);\n          }\n          docEl = angular.element(document);\n          docEl.off(\".lightbox\");\n          docEl.off(\".keyboard-navigation\");\n          $el.addClass('close-started');\n          _this.animationFrame.add(function() {\n            $el.addClass('close');\n            return $el.one(\"transitionend\", function() {\n              $el.removeAttr('style');\n              $el.removeClass(\"open\").removeClass('close').removeClass('close-started');\n              if (_this.onClose) {\n                _this.rootScope.$apply(_this.onClose);\n              }\n              return resolve();\n            });\n          });\n          if ($el.hasClass(\"remove-on-close\")) {\n            scope = $el.data(\"scope\");\n            if (scope) {\n              scope.$destroy();\n            }\n            $el.remove();\n          }\n          return _this.rootScope.$broadcast(\"lightbox:closed\");\n        };\n      })(this));\n    };\n\n    LightboxService.prototype.getLightboxOpen = function() {\n      return $(\".lightbox.open:not(.close-started)\");\n    };\n\n    LightboxService.prototype.closeAll = function() {\n      var docEl, i, len, lightboxEl, ref, results;\n      docEl = angular.element(document);\n      ref = docEl.find(\".lightbox.open\");\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        lightboxEl = ref[i];\n        results.push(this.close($(lightboxEl)));\n      }\n      return results;\n    };\n\n    return LightboxService;\n\n  })(taiga.Service);\n\n  module.service(\"lightboxService\", [\"animationFrame\", \"$q\", \"$rootScope\", LightboxService]);\n\n  LightboxKeyboardNavigationService = (function(superClass) {\n    extend(LightboxKeyboardNavigationService, superClass);\n\n    function LightboxKeyboardNavigationService() {\n      return LightboxKeyboardNavigationService.__super__.constructor.apply(this, arguments);\n    }\n\n    LightboxKeyboardNavigationService.prototype.stop = function() {\n      var docEl;\n      docEl = angular.element(document);\n      return docEl.off(\".keyboard-navigation\");\n    };\n\n    LightboxKeyboardNavigationService.prototype.dispatch = function($el, code) {\n      var activeElement, next, prev;\n      activeElement = $el.find(\".selected\");\n      if (code === 13) {\n        if ($el.find(\".user-list-single\").length === 1) {\n          return $el.find('.user-list-single:first').trigger(\"click\");\n        } else {\n          return activeElement.trigger(\"click\");\n        }\n      } else if (code === 40) {\n        if (!activeElement.length) {\n          return $el.find('.user-list-single:not(\".is-active\"):first').addClass('selected');\n        } else {\n          next = activeElement.next('.user-list-single');\n          if (next.length) {\n            activeElement.removeClass('selected');\n            return next.addClass('selected');\n          }\n        }\n      } else if (code === 38) {\n        if (!activeElement.length) {\n          return $el.find('.user-list-single:last').addClass('selected');\n        } else {\n          prev = activeElement.prev('.user-list-single:not(\".is-active\")');\n          if (prev.length) {\n            activeElement.removeClass('selected');\n            return prev.addClass('selected');\n          }\n        }\n      }\n    };\n\n    LightboxKeyboardNavigationService.prototype.init = function($el) {\n      var docEl;\n      this.stop();\n      docEl = angular.element(document);\n      return docEl.on(\"keydown.keyboard-navigation\", (function(_this) {\n        return function(event) {\n          var code;\n          code = event.keyCode ? event.keyCode : event.which;\n          if (code === 40 || code === 38 || code === 13) {\n            event.preventDefault();\n            return _this.dispatch($el, code);\n          }\n        };\n      })(this));\n    };\n\n    return LightboxKeyboardNavigationService;\n\n  })(taiga.Service);\n\n  module.service(\"lightboxKeyboardNavigationService\", LightboxKeyboardNavigationService);\n\n  LightboxDirective = function(lightboxService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      if (!$attrs.$attr.visible) {\n        return $el.on(\"click\", \".close\", function(event) {\n          event.preventDefault();\n          return lightboxService.close($el);\n        });\n      }\n    };\n    return {\n      restrict: \"C\",\n      link: link\n    };\n  };\n\n  module.directive(\"lightbox\", [\"lightboxService\", LightboxDirective]);\n\n  LightboxClose = function() {\n    var link, template;\n    template = \"<a class=\\\"close\\\" ng-click=\\\"onClose()\\\" href=\\\"\\\" title=\\\"{{'COMMON.CLOSE' | translate}}\\\">\\n    <tg-svg svg-icon=\\\"icon-close\\\"></tg-svg>\\n</a>\";\n    link = function(scope, elm, attrs) {};\n    return {\n      scope: {\n        onClose: '&'\n      },\n      link: link,\n      template: template\n    };\n  };\n\n  module.directive(\"tgLightboxClose\", [LightboxClose]);\n\n  BlockLightboxDirective = function($rootscope, $tgrepo, $confirm, lightboxService, $loading, $modelTransform, $translate) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var block, title, unblock;\n      title = $translate.instant($attrs.title);\n      $el.find(\"h2.title\").text(title);\n      unblock = (function(_this) {\n        return function(finishCallback) {\n          var transform;\n          transform = $modelTransform.save(function(item) {\n            item.is_blocked = false;\n            item.blocked_note = \"\";\n            return item;\n          });\n          transform.then(function() {\n            $confirm.notify(\"success\");\n            $rootscope.$broadcast(\"object:updated\");\n            return finishCallback();\n          });\n          transform.then(null, function() {\n            $confirm.notify(\"error\");\n            return item.revert();\n          });\n          transform[\"finally\"](function() {\n            return finishCallback();\n          });\n          return transform;\n        };\n      })(this);\n      block = function() {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find(\".js-block-item\")).start();\n        transform = $modelTransform.save(function(item) {\n          item.is_blocked = true;\n          item.blocked_note = $el.find(\".reason\").val();\n          return item;\n        });\n        transform.then(function() {\n          $confirm.notify(\"success\");\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          currentLoading.finish();\n          return lightboxService.close($el);\n        });\n      };\n      $scope.$on(\"block\", function() {\n        $el.find(\".reason\").val($model.$modelValue.blocked_note);\n        return lightboxService.open($el);\n      });\n      $scope.$on(\"unblock\", (function(_this) {\n        return function(event, model, finishCallback) {\n          return unblock(finishCallback);\n        };\n      })(this));\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return $el.on(\"click\", \".js-block-item\", function(event) {\n        event.preventDefault();\n        return block();\n      });\n    };\n    return {\n      templateUrl: \"common/lightbox/lightbox-block.html\",\n      link: link,\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgLbBlock\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"lightboxService\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$translate\", BlockLightboxDirective]);\n\n  BlockingMessageInputDirective = function($log, $template, $compile) {\n    var link, template, templateFn;\n    template = $template.get(\"common/lightbox/lightbox-blocking-message-input.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      if (!$attrs.watch) {\n        return $log.error(\"No watch attribute on tg-blocking-message-input directive\");\n      }\n      return $scope.$watch($attrs.watch, function(value) {\n        if (value === !void 0 && value === true) {\n          return $el.find(\".blocked-note\").removeClass(\"hidden\");\n        } else {\n          return $el.find(\".blocked-note\").addClass(\"hidden\");\n        }\n      });\n    };\n    templateFn = function($el, $attrs) {\n      return template({\n        ngmodel: $attrs.ngModel\n      });\n    };\n    return {\n      template: templateFn,\n      link: link,\n      require: \"ngModel\",\n      restrict: \"EA\"\n    };\n  };\n\n  module.directive(\"tgBlockingMessageInput\", [\"$log\", \"$tgTemplate\", \"$compile\", BlockingMessageInputDirective]);\n\n  CreateBulkUserstoriesDirective = function($repo, $rs, $rootscope, lightboxService, $loading, $model, $timeout, $confirm, $translate) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var form, getCurrentStatus, submit, submitButton;\n      form = null;\n      $scope.displayStatusSelector = false;\n      getCurrentStatus = (function(_this) {\n        return function() {\n          return $scope.currentStatus = $scope.project.us_statuses.filter(function(status) {\n            return status.id === $scope[\"new\"].statusId;\n          }).pop();\n        };\n      })(this);\n      $scope.toggleStatus = function() {\n        return $scope.displayStatusSelector = !$scope.displayStatusSelector;\n      };\n      $scope.displayStatus = function() {\n        return $scope.displayStatusSelector = true;\n      };\n      $scope.hideStatus = function() {\n        $scope.displayStatusSelector = false;\n        return $scope.$apply();\n      };\n      $scope.setStatus = (function(_this) {\n        return function(status) {\n          $scope[\"new\"].statusId = status.id;\n          getCurrentStatus();\n          return $scope.displayStatusSelector = false;\n        };\n      })(this);\n      $scope.$on(\"usform:bulk\", function(ctx, projectId, status, swimlaneId) {\n        if (form) {\n          form.reset();\n        }\n        $scope[\"new\"] = {\n          projectId: projectId,\n          statusId: status,\n          bulk: \"\",\n          swimlaneId: swimlaneId,\n          us_position: 'bottom'\n        };\n        getCurrentStatus();\n        return lightboxService.open($el);\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise, swimlaneId;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley({\n            onlyOneErrorElement: true\n          });\n          if (!form.validate()) {\n            return;\n          }\n          swimlaneId = null;\n          if ($scope.project.is_kanban_activated) {\n            swimlaneId = $scope[\"new\"].swimlane;\n            if (swimlaneId === void 0) {\n              swimlaneId = $scope.project.default_swimlane;\n            }\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $rs.userstories.bulkCreate($scope[\"new\"].projectId, $scope[\"new\"].statusId, $scope[\"new\"].bulk, swimlaneId);\n          promise.then(function(result) {\n            result = _.map(result.data, (function(_this) {\n              return function(x) {\n                return $model.make_model('userstories', x);\n              };\n            })(this));\n            currentLoading.finish();\n            $rootscope.$broadcast(\"usform:bulk:success\", result, $scope[\"new\"].us_position);\n            return lightboxService.close($el);\n          });\n          return promise.then(null, function(response) {\n            var text;\n            currentLoading.finish();\n            form.setErrors(response);\n            if (response.data.status) {\n              text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_STATUS\");\n              $confirm.notify(\"error\", text);\n            }\n            if (response.data.swimlane_id) {\n              text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_SWIMLANE\");\n              $confirm.notify(\"error\", text);\n            }\n            if (response._error_message) {\n              return $confirm.notify(\"error\", response._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".js-submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      $el.on(\"click\", (function(_this) {\n        return function(event) {\n          var parentNodes, target;\n          target = angular.element(event.target);\n          parentNodes = _.filter(target.parents(), function(parent) {\n            return parent.className === \"bulk-status-selector-wrapper\";\n          });\n          if (!parentNodes.length) {\n            return $scope.hideStatus();\n          }\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateBulkUserstories\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$tgModel\", \"$timeout\", \"$tgConfirm\", \"$translate\", CreateBulkUserstoriesDirective]);\n\n  LightboxLeaveProjectWarningDirective = function(lightboxService, $template, $compile) {\n    var link;\n    link = function($scope, $el, attrs) {\n      return lightboxService.open($el);\n    };\n    return {\n      templateUrl: 'common/lightbox/lightbox-leave-project-warning.html',\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgLightboxLeaveProjectWarning\", [\"lightboxService\", LightboxLeaveProjectWarningDirective]);\n\n  SetDueDateDirective = function($rootscope, lightboxService, $loading, $translate, $confirm, $modelTransform) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var prettyDate, remove, save;\n      prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n      lightboxService.open($el);\n      if ($scope.object.due_date) {\n        $scope.new_due_date = moment($scope.object.due_date).format(prettyDate);\n      }\n      $el.on(\"click\", \".suggestion\", function(event) {\n        var quantity, target, unit, value;\n        target = angular.element(event.currentTarget);\n        quantity = target.data('quantity');\n        unit = target.data('unit');\n        value = moment().add(quantity, unit).format(prettyDate);\n        return $el.find(\".due-date\").val(value);\n      });\n      save = function() {\n        var currentLoading, new_due_date, transform;\n        currentLoading = $loading().target($el.find(\".submit-button\")).start();\n        if ($scope.notAutoSave) {\n          new_due_date = $('.due-date').val();\n          $scope.object.due_date = new_due_date ? moment(new_due_date, prettyDate).format(\"YYYY-MM-DD\") : null;\n          $scope.$apply();\n          currentLoading.finish();\n          lightboxService.close($el);\n          return;\n        }\n        transform = $modelTransform.save(function(object) {\n          new_due_date = $('.due-date').val();\n          object.due_date = new_due_date ? moment(new_due_date, prettyDate).format(\"YYYY-MM-DD\") : null;\n          return object;\n        });\n        transform.then(function() {\n          return $confirm.notify(\"success\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          currentLoading.finish();\n          lightboxService.close($el);\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n      };\n      $el.on(\"click\", \".submit-button\", function(event) {\n        event.preventDefault();\n        return save();\n      });\n      remove = function() {\n        var message, subtitle, title;\n        title = $translate.instant(\"LIGHTBOX.DELETE_DUE_DATE.TITLE\");\n        subtitle = $translate.instant(\"LIGHTBOX.DELETE_DUE_DATE.SUBTITLE\");\n        message = moment($scope.object.due_date).format(prettyDate);\n        return $confirm.askOnDelete(title, message, subtitle).then(function(askResponse) {\n          askResponse.finish();\n          $('.due-date').val(null);\n          $scope.object.due_date_reason = null;\n          if ($scope.notAutoSave) {\n            $scope.object.due_date = null;\n            return lightboxService.close($el);\n          } else {\n            return save();\n          }\n        });\n      };\n      return $el.on(\"click\", \".delete-due-date\", function(event) {\n        event.preventDefault();\n        return remove();\n      });\n    };\n    return {\n      templateUrl: 'common/lightbox/lightbox-due-date.html',\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgLbSetDueDate\", [\"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$tgConfirm\", \"$tgQueueModelTransformation\", SetDueDateDirective]);\n\n  groupBy = this.taiga.groupBy;\n\n  CreateEditDirective = function($log, $repo, $model, $rs, $rootScope, lightboxService, $loading, $translate, $confirm, $q, attachmentsService, $template, $compile) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var addExistingToSprint, attachmentsToAdd, attachmentsToDelete, checkClose, close, createAttachments, deleteAttachments, docEl, form, getSchema, isDisabledExisting, mount, objType, render, resetAttachments, saveItem, schema, schemas, setStatus, sprintChangeConfirmAndSave, submit;\n      schema = null;\n      objType = null;\n      form = null;\n      attachmentsToAdd = Immutable.List();\n      attachmentsToDelete = Immutable.List();\n      schemas = {\n        us: {\n          objName: 'User Story',\n          model: 'userstories',\n          params: {\n            include_attachments: true,\n            include_tasks: true\n          },\n          data: function(project) {\n            return {\n              translationID: 'US',\n              translationIDPlural: 'US',\n              statusList: _.sortBy(project.us_statuses, \"order\")\n            };\n          },\n          initialData: function(data) {\n            return {\n              project: data.project.id,\n              subject: \"\",\n              description: \"\",\n              tags: [],\n              points: {},\n              swimlane: data.project.is_kanban_activated ? data.project.default_swimlane : null,\n              status: data.statusId ? data.statusId : data.project.default_us_status,\n              is_archived: false\n            };\n          }\n        },\n        task: {\n          objName: 'Task',\n          model: 'tasks',\n          params: {\n            include_attachments: true\n          },\n          data: function(project) {\n            return {\n              translationID: 'TASK',\n              translationIDPlural: 'TASKS',\n              statusList: _.sortBy(project.task_statuses, \"order\")\n            };\n          },\n          initialData: function(data) {\n            return {\n              project: data.project.id,\n              subject: \"\",\n              description: \"\",\n              assigned_to: null,\n              tags: [],\n              milestone: data.sprintId,\n              status: data.project.default_task_status,\n              user_story: data.usId,\n              is_archived: false\n            };\n          }\n        },\n        issue: {\n          objName: 'Issue',\n          model: 'issues',\n          params: {\n            include_attachments: true\n          },\n          data: function(project) {\n            return {\n              translationID: 'ISSUE',\n              translationIDPlural: 'ISSUES',\n              project: project,\n              statusList: _.sortBy(project.issue_statuses, \"order\"),\n              typeById: groupBy(project.issue_types, function(x) {\n                return x.id;\n              }),\n              typeList: _.sortBy(project.issue_types, \"order\"),\n              severityById: groupBy(project.severities, function(x) {\n                return x.id;\n              }),\n              severityList: _.sortBy(project.severities, \"order\"),\n              priorityById: groupBy(project.priorities, function(x) {\n                return x.id;\n              }),\n              priorityList: _.sortBy(project.priorities, \"order\"),\n              milestonesById: groupBy(project.milestones, function(x) {\n                return x.id;\n              })\n            };\n          },\n          initialData: function(data) {\n            return {\n              assigned_to: null,\n              milestone: data.sprintId,\n              priority: data.project.default_priority,\n              project: data.project.id,\n              severity: data.project.default_severity,\n              status: data.project.default_issue_status,\n              subject: \"\",\n              tags: [],\n              type: data.project.default_issue_type\n            };\n          }\n        }\n      };\n      $scope.setMode = function(value) {\n        return $scope.mode = value;\n      };\n      $scope.$on(\"genericform:new\", function(ctx, params) {\n        getSchema(params);\n        $scope.mode = 'new';\n        $scope.getOrCreate = false;\n        return mount(params);\n      });\n      $scope.$on(\"genericform:new-or-existing\", function(ctx, params) {\n        getSchema(params);\n        $scope.mode = 'add-existing';\n        $scope.getOrCreate = true;\n        $scope.existingFilterText = '';\n        $rs[schema.model].listInAllProjects({\n          project: $scope.project.id\n        }, true).then(function(data) {\n          return $scope.existingItems = angular.copy(data);\n        });\n        return mount(params);\n      });\n      $scope.$on(\"genericform:edit\", function(ctx, params) {\n        getSchema(params);\n        $scope.mode = 'edit';\n        $scope.getOrCreate = false;\n        return mount(params);\n      });\n      getSchema = function(params) {\n        _.map(params, function(value, key) {\n          return $scope[key] = value;\n        });\n        if (!$scope.objType || !schemas[$scope.objType]) {\n          return $log.error(\"Invalid objType `\" + $scope.objType + \"` for `genericform` event\");\n        }\n        return schema = schemas[$scope.objType];\n      };\n      mount = function(params) {\n        $scope.objName = schema.objName;\n        if ($scope.mode === 'edit') {\n          $scope.obj = params.obj;\n          $scope.attachments = Immutable.fromJS(params.attachments);\n        } else {\n          $scope.obj = $model.make_model(schema.model, schema.initialData(params));\n          $scope.attachments = Immutable.List();\n        }\n        _.map(schema.data($scope.project), function(value, key) {\n          return $scope[key] = value;\n        });\n        if (params.objType === 'us') {\n          $scope.obj.us_position = 'bottom';\n        }\n        if (form) {\n          form.reset();\n        }\n        resetAttachments();\n        setStatus($scope.obj.status);\n        render();\n        $scope.lightboxOpen = true;\n        return lightboxService.open($el, null, null, true);\n      };\n      resetAttachments = function() {\n        attachmentsToAdd = Immutable.List();\n        return attachmentsToDelete = Immutable.List();\n      };\n      $scope.addAttachment = function(attachment) {\n        return attachmentsToAdd = attachmentsToAdd.push(attachment);\n      };\n      $scope.deleteAttachment = function(attachment) {\n        attachmentsToAdd = attachmentsToAdd.filter(function(it) {\n          return it.get('name') !== attachment.get('name');\n        });\n        if (attachment.get(\"id\")) {\n          return attachmentsToDelete = attachmentsToDelete.push(attachment);\n        }\n      };\n      $scope.addTag = function(tag, color) {\n        var inserted, itemtags, projectTags, tags, value;\n        value = trim(tag.toLowerCase());\n        tags = $scope.project.tags;\n        projectTags = $scope.project.tags_colors;\n        if (tags == null) {\n          tags = [];\n        }\n        if (projectTags == null) {\n          projectTags = {};\n        }\n        if (indexOf.call(tags, value) < 0) {\n          tags.push(value);\n        }\n        projectTags[tag] = color || null;\n        $scope.project.tags = tags;\n        itemtags = _.clone($scope.obj.tags);\n        inserted = _.find(itemtags, function(it) {\n          return it[0] === value;\n        });\n        if (!inserted) {\n          itemtags.push([value, color]);\n          return $scope.obj.tags = itemtags;\n        }\n      };\n      $scope.deleteTag = function(tag) {\n        var itemtags, tags, value;\n        value = trim(tag[0].toLowerCase());\n        tags = $scope.project.tags;\n        itemtags = _.clone($scope.obj.tags);\n        _.remove(itemtags, function(tag) {\n          return tag[0] === value;\n        });\n        $scope.obj.tags = itemtags;\n        return _.pull($scope.obj.tags, value);\n      };\n      createAttachments = function(obj) {\n        var promises;\n        promises = _.map(attachmentsToAdd.toJS(), function(attachment) {\n          return attachmentsService.upload(attachment.file, obj.id, $scope.obj.project, $scope.objType);\n        });\n        return $q.all(promises);\n      };\n      deleteAttachments = function(obj) {\n        var promises;\n        promises = _.map(attachmentsToDelete.toJS(), function(attachment) {\n          return attachmentsService[\"delete\"]($scope.objType, attachment.id);\n        });\n        return $q.all(promises);\n      };\n      addExistingToSprint = function(item) {\n        var currentLoading, onError, onSuccess;\n        currentLoading = $loading().target($el.find(\".add-existing-button\")).start();\n        if (item.milestone) {\n          return sprintChangeConfirmAndSave(item);\n        } else {\n          onSuccess = function() {\n            close();\n            return $rootScope.$broadcast($scope.objType + \"form:add:success\", item);\n          };\n          onError = function() {\n            return close();\n          };\n          return saveItem(item, onSuccess, onError);\n        }\n      };\n      sprintChangeConfirmAndSave = function(item) {\n        var message, newSprintName, oldSprintName, title;\n        oldSprintName = $scope.milestonesById[item.milestone].name;\n        newSprintName = $scope.milestonesById[$scope.relatedObjectId].name;\n        title = $translate.instant(\"ISSUES.CONFIRM_CHANGE_FROM_SPRINT.TITLE\");\n        message = $translate.instant(\"ISSUES.CONFIRM_CHANGE_FROM_SPRINT.MESSAGE\", {\n          issue: item.subject,\n          oldSprintName: oldSprintName,\n          newSprintName: newSprintName\n        });\n        return $confirm.ask(title, null, message).then(function(askResponse) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            askResponse.finish();\n            lightboxService.closeAll();\n            $scope.lightboxOpen = false;\n            return $rootScope.$broadcast($scope.objType + \"form:add:success\", item);\n          };\n          onError = function() {\n            askResponse.finish(false);\n            return $confirm.notify(\"error\");\n          };\n          return saveItem(item, onSuccess, onError);\n        });\n      };\n      saveItem = function(item, onSuccess, onError) {\n        item.setAttr($scope.relatedField, $scope.relatedObjectId);\n        return $repo.save(item, true).then(onSuccess, onError);\n      };\n      isDisabledExisting = function(item) {\n        return item && item[$scope.relatedField] === $scope.relatedObjectId;\n      };\n      $scope.isDisabledExisting = function(selectedItem) {\n        return isDisabledExisting(selectedItem);\n      };\n      $scope.addExistingToSprint = function(selectedItem) {\n        return addExistingToSprint(selectedItem);\n      };\n      submit = debounce(2000, function(event) {\n        var broadcastEvent, currentLoading, prettyDate, promise, us_position;\n        form = $el.find(\"form\").checksley();\n        us_position = null;\n        if (!form.validate()) {\n          return;\n        }\n        currentLoading = $loading().target($el.find(\"#submitButton\")).start();\n        if (currentLoading.isLoading()) {\n          return;\n        }\n        if ($scope.mode === 'new') {\n          us_position = $scope.obj.us_position;\n          delete $scope.obj.us_position;\n          promise = $repo.create(schema.model, $scope.obj);\n          broadcastEvent = $scope.objType + \"form:new:success\";\n        } else {\n          if ($scope.obj.due_date instanceof moment) {\n            prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n            $scope.obj.due_date = $scope.obj.due_date.format(\"YYYY-MM-DD\");\n          }\n          promise = $repo.save($scope.obj, true);\n          broadcastEvent = $scope.objType + \"form:edit:success\";\n        }\n        promise.then(function(data) {\n          return deleteAttachments(data).then(function() {\n            return createAttachments(data).then(function() {\n              currentLoading.finish();\n              $confirm.notify(\"success\");\n              close();\n              if (data.ref) {\n                return $rs[schema.model].getByRef(data.project, data.ref, schema.params).then(function(obj) {\n                  return $rootScope.$broadcast(broadcastEvent, obj, us_position);\n                });\n              }\n            });\n          });\n        });\n        return promise.then(null, function(response) {\n          var text;\n          currentLoading.finish();\n          form.setErrors(response);\n          if (response.status) {\n            text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_STATUS\");\n            $confirm.notify(\"error\", text);\n          }\n          if (response.swimlane) {\n            text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_SWIMLANE\");\n            $confirm.notify(\"error\", text);\n          }\n          if (response._error_message) {\n            return $confirm.notify(\"error\", response._error_message);\n          }\n        });\n      });\n      checkClose = function() {\n        if (!$scope.obj.isModified()) {\n          close();\n          return $scope.$apply(function() {\n            return $scope.obj.revert();\n          });\n        } else {\n          return $confirm.ask($translate.instant(\"LIGHTBOX.CREATE_EDIT.CONFIRM_CLOSE\")).then(function(result) {\n            result.finish();\n            return close();\n          });\n        }\n      };\n      close = function() {\n        lightboxService.closeAll();\n        return $scope.lightboxOpen = false;\n      };\n      docEl = angular.element(document);\n      docEl.on(\"keydown.lightbox-create-edit\", function(event) {\n        var code;\n        if ($scope.lightboxOpen) {\n          event.stopPropagation();\n          code = event.keyCode ? event.keyCode : event.which;\n          if (code === 27) {\n            return checkClose();\n          }\n        }\n      });\n      $el.on(\"submit\", \"form\", submit);\n      $el.find('.close').on(\"click\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return checkClose();\n      });\n      $el.on(\"click\", \".status-dropdown\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        setStatus(angular.element(event.currentTarget).data(\"status-id\"));\n        $scope.$apply();\n        $scope.$broadcast(\"status:changed\", $scope.obj.status);\n        return $el.find(\".pop-status\").popover().close();\n      });\n      $el.on(\"click\", \".team-requirement\", function(event) {\n        $scope.obj.team_requirement = !$scope.obj.team_requirement;\n        return $scope.$apply();\n      });\n      $el.on(\"click\", \".client-requirement\", function(event) {\n        $scope.obj.client_requirement = !$scope.obj.client_requirement;\n        return $scope.$apply();\n      });\n      $el.on(\"click\", \".is-blocked\", function(event) {\n        $scope.obj.is_blocked = !$scope.obj.is_blocked;\n        return $scope.$apply();\n      });\n      $el.on(\"click\", \".iocaine\", function(event) {\n        $scope.obj.is_iocaine = !$scope.obj.is_iocaine;\n        $scope.$apply();\n        return $scope.$broadcast(\"isiocaine:changed\", $scope.obj);\n      });\n      $scope.isTeamRequirement = function() {\n        var ref;\n        return (ref = $scope.obj) != null ? ref.team_requirement : void 0;\n      };\n      $scope.isClientRequirement = function() {\n        var ref;\n        return (ref = $scope.obj) != null ? ref.client_requirement : void 0;\n      };\n      setStatus = function(id) {\n        $scope.obj.status = id;\n        $scope.selectedStatus = _.find($scope.statusList, function(item) {\n          return item.id === id;\n        });\n        return $scope.obj.is_closed = $scope.selectedStatus.is_closed;\n      };\n      return render = function(sprint) {\n        var compiledTemplate, template, templateScope;\n        template = $template.get(\"common/lightbox/lightbox-create-edit/lb-create-edit.html\");\n        templateScope = $scope.$new();\n        compiledTemplate = $compile(template)(templateScope);\n        return $el.html(compiledTemplate);\n      };\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateEdit\", [\"$log\", \"$tgRepo\", \"$tgModel\", \"$tgResources\", \"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$tgConfirm\", \"$q\", \"tgAttachmentsService\", \"$tgTemplate\", \"$compile\", CreateEditDirective]);\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  RelateToEpicLightboxDirective = function($rootScope, $confirm, lightboxService, $tgCurrentUserService, tgResources, $tgResources, $epicsService, tgAnalytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var existingEpicForm, filterEpics, loadProjects, newEpicForm, selectProject, us;\n      us = null;\n      $scope.projects = null;\n      $scope.projectEpics = Immutable.List();\n      $scope.loading = false;\n      $scope.selectedProject = $scope.project.id;\n      newEpicForm = $el.find(\".new-epic-form\").checksley();\n      existingEpicForm = $el.find(\".existing-epic-form\").checksley();\n      loadProjects = function() {\n        if ($scope.projects === null) {\n          return $scope.projects = $tgCurrentUserService.projects.get(\"unblocked\");\n        }\n      };\n      filterEpics = function(selectedProjectId, filterText) {\n        return tgResources.epics.listInAllProjects({\n          is_epics_activated: true,\n          project__blocked_code: 'null',\n          project: selectedProjectId,\n          q: filterText\n        }, true).then(function(data) {\n          var excludeIds, filteredData;\n          excludeIds = [];\n          if (us.epics) {\n            excludeIds = us.epics.map(function(epic) {\n              return epic.id;\n            });\n          }\n          filteredData = data.filter(function(epic) {\n            return excludeIds.indexOf(epic.get('id')) === -1;\n          });\n          return $scope.projectEpics = filteredData;\n        });\n      };\n      selectProject = function(selectedProjectId) {\n        $scope.selectedEpic = null;\n        $scope.searchEpic = \"\";\n        return filterEpics(selectedProjectId, $scope.searchEpic);\n      };\n      $el.on(\"click\", \".close\", function(event) {\n        event.preventDefault();\n        return lightboxService.close($el);\n      });\n      $scope.$on(\"relate-to-epic:add\", function(ctx, item) {\n        us = item;\n        $scope.selectedEpic = null;\n        $scope.searchEpic = \"\";\n        loadProjects();\n        return filterEpics($scope.selectedProject, $scope.searchEpic).then(function() {\n          return lightboxService.open($el).then(function() {\n            return $el.find('input').focus;\n          });\n        });\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $scope.selectProject = function(selectedProjectId) {\n        return selectProject(selectedProjectId);\n      };\n      $scope.onUpdateSearchEpic = debounceLeading(300, function() {\n        $scope.selectedEpic = null;\n        return filterEpics($scope.selectedProject, $scope.searchEpic);\n      });\n      $scope.saveRelatedEpic = function(selectedEpicId, onSavedRelatedEpic) {\n        var onError, onSuccess, usId;\n        if (!existingEpicForm.validate()) {\n          return;\n        }\n        $scope.loading = true;\n        onError = function(data) {\n          $scope.loading = false;\n          $confirm.notify(\"error\");\n          return existingEpicForm.setErrors(data);\n        };\n        onSuccess = function(data) {\n          tgAnalytics.trackEvent(\"user story related epic\", \"create\", \"create related epic on user story\", 1);\n          $scope.loading = false;\n          $rootScope.$broadcast(\"related-epics:changed\", us);\n          return lightboxService.close($el);\n        };\n        usId = us.id;\n        return tgResources.epics.addRelatedUserstory(selectedEpicId, usId).then(onSuccess, onError);\n      };\n      return $scope.createEpic = function(selectedProjectId, epicSubject) {\n        var onCreateEpic, onError, onSuccess;\n        if (!newEpicForm.validate()) {\n          return;\n        }\n        this.loading = true;\n        onError = function(data) {\n          $scope.loading = false;\n          $confirm.notify(\"error\");\n          return newEpicForm.setErrors(errors);\n        };\n        onSuccess = function() {\n          tgAnalytics.trackEvent(\"user story related epic\", \"create\", \"create related epic on user story\", 1);\n          $scope.loading = false;\n          $rootScope.$broadcast(\"related-epics:changed\", us);\n          return lightboxService.close($el);\n        };\n        onCreateEpic = function(epic) {\n          var epicId, usId;\n          epicId = epic.get('id');\n          usId = us.id;\n          return tgResources.epics.addRelatedUserstory(epicId, usId).then(onSuccess, onError);\n        };\n        return $epicsService.createEpic({\n          subject: epicSubject\n        }, null, selectedProjectId).then(onCreateEpic, onError);\n      };\n    };\n    return {\n      templateUrl: \"common/lightbox/lightbox-relate-to-epic.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbRelatetoepic\", [\"$rootScope\", \"$tgConfirm\", \"lightboxService\", \"tgCurrentUserService\", \"tgResources\", \"$tgResources\", \"tgEpicsService\", \"$tgAnalytics\", RelateToEpicLightboxDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Loaded, module;\n\n  module = angular.module(\"taigaCommon\");\n\n  Loaded = function($parse, $timeout) {\n    return {\n      restrict: 'A',\n      compile: function($element, $attrs) {\n        var fn;\n        fn = $parse($attrs['tgLoaded']);\n        return function($scope, $element) {\n          var callback;\n          callback = function() {\n            return fn($scope, {\n              $event: {\n                target: $element\n              }\n            });\n          };\n          $timeout(function() {\n            return callback();\n          });\n          return null;\n        };\n      }\n    };\n  };\n\n  module.directive(\"tgLoaded\", ['$parse', '$timeout', Loaded]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Loader, LoaderDirective, module, sizeFormat, taiga, timeout;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaCommon\");\n\n  LoaderDirective = function(tgLoader, $rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      tgLoader.onStart(function() {\n        $(document.body).addClass(\"loader-active\");\n        return $el.addClass(\"active\");\n      });\n      return tgLoader.onEnd(function() {\n        $(document.body).removeClass(\"loader-active\");\n        return $el.removeClass(\"active\");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLoader\", [\"tgLoader\", \"$rootScope\", LoaderDirective]);\n\n  Loader = function($rootscope) {\n    var autoClose, config, lastResponseDate, open, pageLoaded, requestCount, start, startLoadTime;\n    config = {\n      minTime: 300\n    };\n    open = false;\n    startLoadTime = 0;\n    requestCount = 0;\n    lastResponseDate = 0;\n    pageLoaded = function(force) {\n      var diff, endTime, timeoutValue;\n      if (force == null) {\n        force = false;\n      }\n      if (startLoadTime) {\n        timeoutValue = 0;\n        if (!force) {\n          endTime = new Date().getTime();\n          diff = endTime - startLoadTime;\n          if (diff < config.minTime) {\n            timeoutValue = config.minTime - diff;\n          }\n        }\n        timeout(timeoutValue, function() {\n          $rootscope.$broadcast(\"loader:end\");\n          open = false;\n          return window.prerenderReady = true;\n        });\n      }\n      startLoadTime = 0;\n      requestCount = 0;\n      return lastResponseDate = 0;\n    };\n    autoClose = function() {\n      var intervalAuto;\n      return intervalAuto = setInterval((function() {\n        if (lastResponseDate && requestCount === 0) {\n          pageLoaded();\n          return clearInterval(intervalAuto);\n        }\n      }), 50);\n    };\n    start = function() {\n      startLoadTime = new Date().getTime();\n      $rootscope.$broadcast(\"loader:start\");\n      return open = true;\n    };\n    return {\n      pageLoaded: pageLoaded,\n      open: function() {\n        return open;\n      },\n      start: function(auto) {\n        if (auto == null) {\n          auto = false;\n        }\n        if (!open) {\n          start();\n          if (auto) {\n            return autoClose();\n          }\n        }\n      },\n      onStart: function(fn) {\n        return $rootscope.$on(\"loader:start\", fn);\n      },\n      onEnd: function(fn) {\n        return $rootscope.$on(\"loader:end\", fn);\n      },\n      logRequest: function() {\n        return requestCount++;\n      },\n      logResponse: function() {\n        if (requestCount > 0) {\n          requestCount--;\n        }\n        return lastResponseDate = new Date().getTime();\n      }\n    };\n  };\n\n  Loader.$inject = [\"$rootScope\"];\n\n  module.factory(\"tgLoader\", Loader);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var LoadingDirective, TgLoadingService, module,\n    slice = [].slice;\n\n  module = angular.module(\"taigaCommon\");\n\n  TgLoadingService = function($compile) {\n    var spinner;\n    spinner = \"<img class='loading-spinner' src='\" + window._version + \"/svg/spinner-circle.svg' alt='loading...' />\";\n    return function() {\n      var service;\n      service = {\n        settings: {\n          target: null,\n          scope: null,\n          classes: [],\n          timeout: 0,\n          template: null\n        },\n        target: function(target) {\n          service.settings.target = target;\n          return service;\n        },\n        scope: function(scope) {\n          service.settings.scope = scope;\n          return service;\n        },\n        template: function(template) {\n          service.settings.template = template;\n          return service;\n        },\n        removeClasses: function() {\n          var classess;\n          classess = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          service.settings.classes = classess;\n          return service;\n        },\n        timeout: function(timeout) {\n          service.settings.timeout = timeout;\n          return service;\n        },\n        isLoading: function() {\n          var target;\n          target = service.settings.target;\n          return target.hasClass('loading');\n        },\n        start: function() {\n          var target, timeoutId;\n          target = service.settings.target;\n          service.settings.classes.map(function(className) {\n            return target.removeClass(className);\n          });\n          if (!target.hasClass('loading') && !service.settings.template) {\n            service.settings.template = target.html();\n          }\n          timeoutId = setTimeout((function() {\n            if (!target.hasClass('loading')) {\n              target.addClass('loading');\n              return target.html(spinner);\n            }\n          }), service.settings.timeout);\n          service.settings.timeoutId = timeoutId;\n          return service;\n        },\n        finish: function() {\n          var removeClasses, target, timeoutId;\n          target = service.settings.target;\n          timeoutId = service.settings.timeoutId;\n          if (timeoutId) {\n            clearTimeout(timeoutId);\n            removeClasses = service.settings.classes;\n            removeClasses.map(function(className) {\n              return service.settings.target.addClass(className);\n            });\n            target.html(service.settings.template);\n            target.removeClass('loading');\n            if (service.settings.scope) {\n              $compile(target.contents())(service.settings.scope);\n            }\n          }\n          return service;\n        }\n      };\n      return service;\n    };\n  };\n\n  TgLoadingService.$inject = [\"$compile\"];\n\n  module.factory(\"$tgLoading\", TgLoadingService);\n\n  LoadingDirective = function($loading) {\n    var link;\n    link = function($scope, $el, attr) {\n      var currentLoading, template;\n      currentLoading = null;\n      template = $el.html();\n      return $scope.$watch(attr.tgLoading, (function(_this) {\n        return function(showLoading) {\n          if (showLoading) {\n            return currentLoading = $loading().target($el).timeout(100).template(template).scope($scope).start();\n          } else if (currentLoading) {\n            return currentLoading.finish();\n          }\n        };\n      })(this));\n    };\n    return {\n      priority: 99999,\n      link: link\n    };\n  };\n\n  module.directive(\"tgLoading\", [\"$tgLoading\", LoadingDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var RelatedTaskStatusDirective, UsStatusDirective, bindOnce, debounce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaCommon\");\n\n  UsStatusDirective = function($repo, $template) {\n\n    /*\n    Print the status of a US and a popover to change it.\n    - tg-us-status: The user story\n    - on-update: Method call after US is updated\n    \n    Example:\n    \n      div.status(tg-us-status=\"us\" on-update=\"ctrl.loadSprintState()\")\n        a.us-status(href=\"\", title=\"Status Name\")\n    \n    NOTE: This directive need 'usStatusById' and 'project'.\n     */\n    var link, template;\n    template = $template.get(\"common/popover/popover-us-status.html\", true);\n    link = function($scope, $el, $attrs) {\n      var $ctrl, render, us;\n      $ctrl = $el.controller();\n      render = function(us) {\n        var usStatusById, usStatusDom, usStatusDomParent;\n        usStatusDomParent = $el.find(\".us-status\");\n        usStatusDom = $el.find(\".us-status .us-status-bind\");\n        usStatusById = $scope.usStatusById;\n        if (usStatusById[us.status]) {\n          usStatusDom.text(usStatusById[us.status].name);\n          return usStatusDomParent.css(\"color\", usStatusById[us.status].color);\n        }\n      };\n      $el.on(\"click\", \".us-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".popover-status\", debounce(2000, function(event) {\n        var statusElement, target, us;\n        event.preventDefault();\n        event.stopPropagation();\n        statusElement = $(event.currentTarget).find('#js-status-btn');\n        target = angular.element(statusElement);\n        us = $scope.$eval($attrs.tgUsStatus);\n        us.status = target.data(\"status-id\");\n        render(us);\n        $el.find(\".pop-status\").popover().close();\n        return $scope.$apply(function() {\n          return $repo.save(us).then(function() {\n            return $scope.$eval($attrs.onUpdate);\n          });\n        });\n      }));\n      $scope.$on(\"userstories:loaded\", function() {\n        return render($scope.$eval($attrs.tgUsStatus));\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      us = $scope.$eval($attrs.tgUsStatus);\n      render(us);\n      return bindOnce($scope, \"project\", function(project) {\n        var html;\n        html = template({\n          \"statuses\": project.us_statuses,\n          \"currentStatus\": us.status\n        });\n        $el.append(html);\n        if ($scope.project.my_permissions.indexOf(\"modify_us\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUsStatus\", [\"$tgRepo\", \"$tgTemplate\", UsStatusDirective]);\n\n  RelatedTaskStatusDirective = function($repo, $template) {\n\n    /*\n    Print the status of a related task and a popover to change it.\n    - tg-related-task-status: The related task\n    - on-update: Method call after US is updated\n    \n    Example:\n    \n      div.status(tg-related-task-status=\"task\" on-update=\"ctrl.loadSprintState()\")\n        a.task-status(href=\"\", title=\"Status Name\")\n    \n    NOTE: This directive need 'taskStatusById' and 'project'.\n     */\n    var link, selectionTemplate, updateTaskStatus;\n    selectionTemplate = $template.get(\"common/popover/popover-related-task-status.html\", true);\n    updateTaskStatus = function($el, task, taskStatusById) {\n      var taskStatusDom, taskStatusDomParent;\n      taskStatusDomParent = $el.find(\".us-status\");\n      taskStatusDom = $el.find(\".task-status .task-status-bind\");\n      if (taskStatusById[task.status]) {\n        taskStatusDom.text(taskStatusById[task.status].name);\n        return taskStatusDomParent.css('color', taskStatusById[task.status].color);\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl, autoSave, notAutoSave, task;\n      $ctrl = $el.controller();\n      task = $scope.$eval($attrs.tgRelatedTaskStatus);\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      autoSave = !notAutoSave;\n      $el.on(\"click\", \".task-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        task.status = target.data(\"status-id\");\n        $el.find(\".pop-status\").popover().close();\n        updateTaskStatus($el, task, $scope.taskStatusById);\n        if (autoSave) {\n          return $scope.$apply(function() {\n            return $repo.save(task).then(function() {\n              $scope.$eval($attrs.onUpdate);\n              return $scope.$emit(\"related-tasks:status-changed\");\n            });\n          });\n        }\n      }));\n      $scope.$watch($attrs.tgRelatedTaskStatus, function() {\n        task = $scope.$eval($attrs.tgRelatedTaskStatus);\n        return updateTaskStatus($el, task, $scope.taskStatusById);\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        $el.append(selectionTemplate({\n          'statuses': project.task_statuses\n        }));\n        updateTaskStatus($el, task, $scope.taskStatusById);\n        if (project.my_permissions.indexOf(\"modify_task\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTaskStatus\", [\"$tgRepo\", \"$tgTemplate\", RelatedTaskStatusDirective]);\n\n  $.fn.popover = function() {\n    var $el, close, closeAll, closePopover, isVisible, open;\n    $el = this;\n    isVisible = (function(_this) {\n      return function() {\n        var docViewBottom, docViewLeft, docViewRight, docViewTop, docViewWidth, elemBottom, elemLeft, elemRight, elemTop, elemWidth;\n        $el.css({\n          \"display\": \"block\",\n          \"visibility\": \"hidden\"\n        });\n        docViewTop = $(window).scrollTop();\n        docViewBottom = docViewTop + $(window).height();\n        docViewWidth = $(window).width();\n        docViewRight = docViewWidth;\n        docViewLeft = 0;\n        elemTop = $el.offset().top;\n        elemBottom = elemTop + $el.height();\n        elemWidth = $el.width();\n        elemLeft = $el.offset().left;\n        elemRight = $el.offset().left + elemWidth;\n        $el.css({\n          \"display\": \"none\",\n          \"visibility\": \"visible\"\n        });\n        return (elemBottom <= docViewBottom) && (elemTop >= docViewTop) && (elemLeft >= docViewLeft) && (elemRight <= docViewRight);\n      };\n    })(this);\n    closePopover = (function(_this) {\n      return function(onClose) {\n        if (onClose) {\n          onClose.call($el);\n        }\n        $el.fadeOut(function() {\n          return $el.removeClass(\"active\").removeClass(\"fix\");\n        });\n        return $el.off(\"popup:close\");\n      };\n    })(this);\n    closeAll = (function(_this) {\n      return function() {\n        return $(\".popover.active\").each(function() {\n          return $(this).trigger(\"popup:close\");\n        });\n      };\n    })(this);\n    open = (function(_this) {\n      return function(onClose) {\n        if ($el.hasClass(\"active\")) {\n          return close();\n        } else {\n          closeAll();\n          if (!isVisible()) {\n            $el.addClass(\"fix\");\n          }\n          $el.fadeIn(function() {\n            $el.addClass(\"active\");\n            $(document.body).off(\"popover\");\n            return $(document.body).one(\"click.popover\", function() {\n              return closeAll();\n            });\n          });\n          return $el.on(\"popup:close\", function(e) {\n            return closePopover(onClose);\n          });\n        }\n      };\n    })(this);\n    close = (function(_this) {\n      return function() {\n        return $el.trigger(\"popup:close\");\n      };\n    })(this);\n    return {\n      open: open,\n      close: close,\n      closeAll: closeAll\n    };\n  };\n\n  taiga.globalPopover = function(target, list, options, cb) {\n    var close, createSvg, elementPosition, followElement, ul, wrapper;\n    if (options == null) {\n      options = {};\n    }\n    wrapper = document.createElement('div');\n    wrapper.classList.add('popover', 'global-popover');\n    ul = document.createElement('ul');\n    createSvg = function(icon) {\n      var attrHref, svg, tgSvg, use, xlink;\n      tgSvg = document.createElement('tg-svg');\n      svg = document.createElement('svg');\n      use = document.createElement('use');\n      xlink = document.createAttribute('xlink:href');\n      xlink.value = '#' + icon;\n      attrHref = document.createAttribute('attr-href');\n      attrHref.value = '#' + icon;\n      use.setAttributeNode(xlink);\n      use.setAttributeNode(attrHref);\n      svg.classList.add('icon');\n      svg.appendChild(use);\n      tgSvg.appendChild(svg);\n      return tgSvg;\n    };\n    close = function() {\n      $(wrapper).popover().close();\n      return $(wrapper).remove();\n    };\n    followElement = function() {\n      elementPosition();\n      return requestAnimationFrame(followElement);\n    };\n    elementPosition = function() {\n      var left, rect, top, width;\n      rect = target.getBoundingClientRect();\n      top = rect.top + rect.height;\n      width = options.width || 170;\n      left = rect.right - width;\n      if (options.paddingTop) {\n        top = top + options.paddingTop;\n      }\n      if (options.paddingLeft) {\n        left = left + options.paddingLeft;\n      }\n      wrapper.style.top = top + 'px';\n      wrapper.style.left = left + 'px';\n      return wrapper.style.width = width + 'px';\n    };\n    elementPosition();\n    followElement();\n    document.addEventListener('scroll', close, true);\n    list.forEach(function(option) {\n      var button, li;\n      li = document.createElement('li');\n      button = document.createElement('button');\n      button.addEventListener('click', option.event);\n      if (option.icon) {\n        button.innerHTML = createSvg(option.icon).innerHTML;\n      }\n      button.appendChild(document.createTextNode(option.text));\n      li.appendChild(button);\n      return ul.appendChild(li);\n    });\n    wrapper.appendChild(ul);\n    document.body.appendChild(wrapper);\n    $(wrapper).popover().open(function() {\n      document.removeEventListener('scroll', close);\n      cb();\n      if (wrapper) {\n        return setTimeout(function() {\n          return $(wrapper).remove();\n        }, 2000);\n      }\n    });\n    return (function(_this) {\n      return function() {\n        return $(wrapper).popover().close();\n      };\n    })(this);\n  };\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ExceptionHandlerFactory, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  ExceptionHandlerFactory = function($log, config) {\n    var ravenConfig;\n    this.config = config;\n    ravenConfig = this.config.get(\"ravenConfig\", null);\n    if (ravenConfig) {\n      $log.debug(\"Using the RavenJS exception handler.\");\n      Raven.config(ravenConfig).install();\n      return function(exception, cause) {\n        $log.error.apply($log, arguments);\n        return Raven.captureException(exception);\n      };\n    } else {\n      $log.debug(\"Using the default logging exception handler.\");\n      return function(exception, cause) {\n        return $log.error.apply($log, arguments);\n      };\n    }\n  };\n\n  module.factory(\"$exceptionHandler\", [\"$log\", \"$tgConfig\", ExceptionHandlerFactory]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var SectionsService, module,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  module = angular.module(\"taigaCommon\");\n\n  SectionsService = (function(superClass) {\n    var SECTIONS;\n\n    extend(SectionsService, superClass);\n\n    SectionsService.$inject = [\"$translate\", \"tgCurrentUserService\"];\n\n    SECTIONS = {\n      1: {\n        id: 1,\n        title: 'TIMELINE',\n        path: 'timeline',\n        enabled: ''\n      },\n      2: {\n        id: 2,\n        title: 'EPICS',\n        path: 'epics',\n        enabled: 'is_epics_activated'\n      },\n      3: {\n        id: 3,\n        title: 'BACKLOG',\n        path: 'backlog',\n        enabled: 'is_backlog_activated'\n      },\n      4: {\n        id: 4,\n        title: 'KANBAN',\n        path: 'kanban',\n        enabled: 'is_kanban_activated'\n      },\n      5: {\n        id: 5,\n        title: 'ISSUES',\n        path: 'issues',\n        enabled: 'is_issues_activated'\n      },\n      6: {\n        id: 6,\n        title: 'WIKI',\n        path: 'wiki',\n        enabled: 'is_wiki_activated'\n      }\n    };\n\n    function SectionsService(translate, currentUserService) {\n      this.translate = translate;\n      this.currentUserService = currentUserService;\n      SectionsService.__super__.constructor.call(this);\n      _.map(SECTIONS, (function(_this) {\n        return function(x) {\n          return x.title = _this.translate.instant(\"PROJECT.SECTION.\" + x.title);\n        };\n      })(this));\n    }\n\n    SectionsService.prototype.list = function() {\n      return SECTIONS;\n    };\n\n    SectionsService.prototype.getPath = function(projectSlug, sectionId) {\n      var defaultHomePage, project, projects, ref, section;\n      defaultHomePage = \"timeline\";\n      projects = (ref = this.currentUserService.projects) != null ? ref.get(\"all\") : void 0;\n      if (!projects) {\n        return defaultHomePage;\n      }\n      project = projects.find(function(p) {\n        return p.get('slug') === projectSlug;\n      });\n      if (!project) {\n        return defaultHomePage;\n      }\n      if (!sectionId) {\n        sectionId = project.get('my_homepage');\n      }\n      section = _.find(SECTIONS, {\n        \"id\": sectionId\n      });\n      if (!section || (project != null ? project.get(section.enabled) : void 0) === !true) {\n        return defaultHomePage;\n      }\n      return section.path;\n    };\n\n    return SectionsService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgSections\", SectionsService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TagManagerService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  TagManagerService = (function(superClass) {\n    extend(TagManagerService, superClass);\n\n    TagManagerService.$inject = [\"$rootScope\", \"$log\", \"$tgConfig\", \"$window\", \"$document\", \"$location\"];\n\n    function TagManagerService(rootscope, log, config, win, doc, location) {\n      var conf;\n      this.rootscope = rootscope;\n      this.log = log;\n      this.config = config;\n      this.win = win;\n      this.doc = doc;\n      this.location = location;\n      this.initialized = false;\n      conf = this.config.get(\"tagManager\", {});\n      this.accountId = conf.accountId;\n    }\n\n    TagManagerService.prototype.initialize = function() {\n      if (!this.accountId) {\n        this.log.debug(\"Tag Manager: no account id provided. Disabling.\");\n        return;\n      }\n      this.injectTagManager();\n      return this.initialized = true;\n    };\n\n    TagManagerService.prototype.injectTagManager = function() {\n      var fn;\n      fn = (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n              new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n              j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;\n              j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;\n              f.parentNode.insertBefore(j,f);});\n      return fn(window, document, \"script\", \"dataLayer\", this.accountId);\n    };\n\n    return TagManagerService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgTagManager\", TagManagerService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ColorizeTagsBacklogDirective, LbTagLineDirective, TagsDirective, bindOnce, module, taiga, trim,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  trim = this.taiga.trim;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaCommon\");\n\n  TagsDirective = function() {\n    var formatter, link, parser;\n    formatter = function(v) {\n      if (_.isArray(v)) {\n        return v.join(\", \");\n      }\n      return \"\";\n    };\n    parser = function(v) {\n      var result;\n      if (!v) {\n        return [];\n      }\n      result = _(v.split(\",\")).map(function(x) {\n        return _.trim(x);\n      });\n      return result.value();\n    };\n    link = function($scope, $el, $attrs, $ctrl) {\n      $ctrl.$formatters.push(formatter);\n      $ctrl.$parsers.push(parser);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      require: \"ngModel\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgTags\", TagsDirective);\n\n  ColorizeTagsBacklogDirective = function($emojis) {\n    var link, template;\n    template = _.template(\"<% _.each(tags, function(tag) { %>\\n    <% if (tag[1] !== null) { %>\\n    <div class=\\\"tag\\\" style=\\\"background: <%- tag[1] %>\\\">\\n        <%= emojify(tag[0]) %>\\n    </div>\\n    <% } %>\\n<% }) %>\\n<% _.each(tags, function(tag) { %>\\n    <% if (tag[1] === null) { %>\\n    <div class=\\\"tag\\\">\\n        <%= emojify(tag[0]) %>\\n    </div>\\n    <% } %>\\n<% }) %>\");\n    link = function($scope, $el, $attrs, $ctrl) {\n      var render;\n      render = function(tags) {\n        var html;\n        html = template({\n          tags: tags,\n          emojify: function(text) {\n            return $emojis.replaceEmojiNameByHtmlImgs(_.escape(text));\n          }\n        });\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.tgColorizeBacklogTags, function(tags) {\n        if (tags != null) {\n          return render(tags);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgColorizeBacklogTags\", [\"$tgEmojis\", ColorizeTagsBacklogDirective]);\n\n  LbTagLineDirective = function($rs, $template, $compile) {\n    var COMMA_KEY, ENTER_KEY, autocomplete, link, templateTags;\n    ENTER_KEY = 13;\n    COMMA_KEY = 188;\n    templateTags = $template.get(\"common/tag/lb-tag-line-tags.html\", true);\n    autocomplete = null;\n    link = function($scope, $el, $attrs, $model) {\n      var addValue, deleteValue, hideSaveButton, renderTags, resetInput, saveInputTag, showSaveButton, withoutColors;\n      withoutColors = _.has($attrs, \"withoutColors\");\n      renderTags = function(tags, tagsColors) {\n        var color, ctx, html;\n        if (tagsColors == null) {\n          tagsColors = [];\n        }\n        color = !withoutColors ? tagsColors[t] : null;\n        ctx = {\n          tags: _.map(tags, function(t) {\n            return {\n              name: t,\n              style: color ? \"border-left: 5px solid \" + color : \"\"\n            };\n          })\n        };\n        html = $compile(templateTags(ctx))($scope);\n        return $el.find(\".tags-container\").html(html);\n      };\n      showSaveButton = function() {\n        return $el.find(\".save\").removeClass(\"hidden\");\n      };\n      hideSaveButton = function() {\n        return $el.find(\".save\").addClass(\"hidden\");\n      };\n      resetInput = function() {\n        $el.find(\"input\").val(\"\");\n        return autocomplete.close();\n      };\n      addValue = function(value) {\n        var tags;\n        value = trim(value.toLowerCase());\n        if (value.length === 0) {\n          return;\n        }\n        tags = _.clone($model.$modelValue, false);\n        if (tags == null) {\n          tags = [];\n        }\n        if (indexOf.call(tags, value) < 0) {\n          tags.push(value);\n        }\n        $scope.$apply(function() {\n          return $model.$setViewValue(tags);\n        });\n        return hideSaveButton();\n      };\n      deleteValue = function(value) {\n        var tags;\n        value = trim(value.toLowerCase());\n        if (value.length === 0) {\n          return;\n        }\n        tags = _.clone($model.$modelValue, false);\n        tags = _.pull(tags, value);\n        return $scope.$apply(function() {\n          return $model.$setViewValue(tags);\n        });\n      };\n      saveInputTag = function() {\n        var value;\n        value = $el.find(\"input\").val();\n        addValue(value);\n        return resetInput();\n      };\n      $el.on(\"keypress\", \"input\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        if (event.keyCode === ENTER_KEY) {\n          event.preventDefault();\n          return saveInputTag();\n        } else if (String.fromCharCode(event.keyCode) === ',') {\n          event.preventDefault();\n          return saveInputTag();\n        } else {\n          if (target.val().length) {\n            return showSaveButton();\n          } else {\n            return hideSaveButton();\n          }\n        }\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        event.preventDefault();\n        return saveInputTag();\n      });\n      $el.on(\"click\", \".remove-tag\", function(event) {\n        var target, value;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        value = target.siblings(\".tag-name\").text();\n        return deleteValue(value);\n      });\n      bindOnce($scope, \"project\", function(project) {\n        var input;\n        input = $el.find(\"input\");\n        autocomplete = new Awesomplete(input[0], {\n          list: _.keys(project.tags_colors)\n        });\n        return input.on(\"awesomplete-selectcomplete\", function() {\n          addValue(input.val());\n          return input.val(\"\");\n        });\n      });\n      $scope.$watch($attrs.ngModel, function(tags) {\n        var ref, tagsColors;\n        tagsColors = ((ref = $scope.project) != null ? ref.tags_colors : void 0) || [];\n        return renderTags(tags, tagsColors);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      require: \"ngModel\",\n      templateUrl: \"common/tag/lb-tag-line.html\"\n    };\n  };\n\n  module.directive(\"tgLbTagLine\", [\"$tgResources\", \"$tgTemplate\", \"$compile\", LbTagLineDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserPilotService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  UserPilotService = (function(superClass) {\n    var JOINED_LIMIT_DAYS;\n\n    extend(UserPilotService, superClass);\n\n    UserPilotService.$inject = [\"$rootScope\", \"$window\"];\n\n    JOINED_LIMIT_DAYS = 42;\n\n    function UserPilotService(rootScope, win) {\n      this.rootScope = rootScope;\n      this.win = win;\n      this.initialized = false;\n    }\n\n    UserPilotService.prototype.initialize = function() {\n      if (this.initialized) {\n        return;\n      }\n      this.rootScope.$on('$locationChangeSuccess', (function(_this) {\n        return function() {\n          if (_this.win.userpilot) {\n            return _this.win.userpilot.reload();\n          }\n        };\n      })(this));\n      this.rootScope.$on(\"auth:refresh\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      this.rootScope.$on(\"auth:register\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      this.rootScope.$on(\"auth:login\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      this.rootScope.$on(\"auth:logout\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      return this.initialized = true;\n    };\n\n    UserPilotService.prototype.checkZendeskConditions = function(userData) {\n      var hasPaidPlan, is_new_user, joined;\n      hasPaidPlan = this.hasPaidPlan(userData);\n      joined = new Date(userData[\"date_joined\"]);\n      is_new_user = joined > this.getJoinedLimit();\n      return hasPaidPlan && is_new_user;\n    };\n\n    UserPilotService.prototype.identify = function() {\n      var userData, userInfo, userPilotCustomer, userPilotId;\n      userInfo = this.win.localStorage.getItem(\"userInfo\") || \"{}\";\n      userData = JSON.parse(userInfo);\n      if (this.win.userpilot) {\n        userPilotId = this.calculateUserPilotId(userData);\n        userPilotCustomer = this.prepareUserPilotCustomer(userData);\n        this.win.userpilot.identify(userPilotId, userPilotCustomer);\n      }\n      if (this.win.zE) {\n        if (this.checkZendeskConditions(userData)) {\n          return this.setZendeskWidgetStatus({\n            enabled: true\n          });\n        } else {\n          return this.setZendeskWidgetStatus({\n            enabled: false\n          });\n        }\n      }\n    };\n\n    UserPilotService.prototype.prepareUserPilotCustomer = function(data) {\n      if (!data[\"id\"]) {\n        return {\n          created_at: Date.now()\n        };\n      }\n      return {\n        name: data[\"full_name_display\"],\n        email: data[\"email\"],\n        created_at: Date.now(),\n        taiga_id: data[\"id\"],\n        taiga_username: data[\"username\"],\n        taiga_date_joined: data[\"date_joined\"],\n        taiga_lang: data[\"lang\"],\n        taiga_max_private_projects: data[\"max_private_projects\"],\n        taiga_max_memberships_private_projects: data[\"max_memberships_private_projects\"],\n        taiga_verified_email: data[\"verified_email\"],\n        taiga_total_private_projects: data[\"total_private_projects\"],\n        taiga_total_public_projects: data[\"total_public_projects\"],\n        taiga_roles: data[\"roles\"] && data[\"roles\"].toString()\n      };\n    };\n\n    UserPilotService.prototype.hasPaidPlan = function(data) {\n      var maxPrivateProjects;\n      maxPrivateProjects = data[\"max_private_projects\"];\n      return maxPrivateProjects !== void 0 && maxPrivateProjects !== 1;\n    };\n\n    UserPilotService.prototype.calculateUserPilotId = function(data) {\n      var joined;\n      if (!data[\"id\"]) {\n        return 2;\n      }\n      joined = new Date(data[\"date_joined\"]);\n      if ((joined > this.getJoinedLimit()) || this.hasPaidPlan(data)) {\n        return data[\"id\"];\n      }\n      return 1;\n    };\n\n    UserPilotService.prototype.getJoinedLimit = function() {\n      var limit;\n      limit = new Date;\n      limit.setDate(limit.getDate() - JOINED_LIMIT_DAYS);\n      return limit;\n    };\n\n    UserPilotService.prototype.setZendeskWidgetStatus = function(config) {\n      var supress;\n      if (config == null) {\n        config = {\n          enabled: false\n        };\n      }\n      supress = !config.enabled;\n      return this.win.zE('webWidget', 'updateSettings', {\n        webWidget: {\n          chat: {\n            suppress: supress\n          },\n          contactForm: {\n            suppress: supress\n          },\n          helpCenter: {\n            suppress: supress\n          },\n          talk: {\n            suppress: supress\n          },\n          answerBot: {\n            suppress: supress\n          }\n        }\n      });\n    };\n\n    return UserPilotService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgUserPilot\", UserPilotService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CreateEditSprint, bindOnce, debounce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaBacklog\");\n\n  CreateEditSprint = function($repo, $confirm, $rs, $rootscope, lightboxService, $loading, $translate, projectService, $timeout) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var createSprint, form, getLastSprint, hasErrors, openFn, remove, resetSprint, submit, ussToAdd;\n      hasErrors = false;\n      createSprint = true;\n      form = null;\n      $scope.newSprint = {};\n      ussToAdd = null;\n      $scope.createEditOpen = false;\n      resetSprint = function() {\n        if (form) {\n          form.reset();\n        }\n        return $scope.newSprint = {\n          project: null,\n          name: null,\n          estimated_start: null,\n          estimated_finish: null\n        };\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var broadcastEvent, currentLoading, estimated_end, estimated_start, newSprint, prettyDate, promise, submitButton, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n          submitButton = $el.find(\".submit-button\");\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            hasErrors = true;\n            $el.find(\".last-sprint-name\").addClass(\"disappear\");\n            return;\n          }\n          hasErrors = false;\n          broadcastEvent = null;\n          estimated_start = $('.date-start').val();\n          estimated_end = $('.date-end').val();\n          if (createSprint) {\n            newSprint = angular.copy($scope.newSprint);\n            newSprint.estimated_start = moment(estimated_start, prettyDate).format(\"YYYY-MM-DD\");\n            newSprint.estimated_finish = moment(estimated_end, prettyDate).format(\"YYYY-MM-DD\");\n            promise = $repo.create(\"milestones\", newSprint);\n            broadcastEvent = \"sprintform:create:success\";\n          } else {\n            newSprint = $scope.newSprint.realClone();\n            newSprint.estimated_start = moment(estimated_start, prettyDate).format(\"YYYY-MM-DD\");\n            newSprint.estimated_finish = moment(estimated_end, prettyDate).format(\"YYYY-MM-DD\");\n            promise = $repo.save(newSprint);\n            broadcastEvent = \"sprintform:edit:success\";\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise.then(function(data) {\n            currentLoading.finish();\n            if (createSprint) {\n              $scope.sprintsCounter += 1;\n            }\n            $scope.sprints = _.map($scope.sprints, function(it) {\n              if (it.id === data.id) {\n                return data;\n              } else {\n                return it;\n              }\n            });\n            if (broadcastEvent === \"sprintform:create:success\" && ussToAdd) {\n              $rootscope.$broadcast(broadcastEvent, data, ussToAdd);\n            } else {\n              $rootscope.$broadcast(broadcastEvent, data);\n            }\n            lightboxService.close($el);\n            return $scope.createEditOpen = false;\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"light-error\", data._error_message);\n            } else if (data.__all__) {\n              return $confirm.notify(\"light-error\", data.__all__[0]);\n            }\n          });\n        };\n      })(this));\n      remove = function() {\n        var message, title;\n        title = $translate.instant(\"LIGHTBOX.DELETE_SPRINT.TITLE\");\n        message = $scope.newSprint.name;\n        return $confirm.askOnDelete(title, message).then((function(_this) {\n          return function(askResponse) {\n            var onError, onSuccess;\n            onSuccess = function() {\n              askResponse.finish();\n              $scope.milestonesCounter -= 1;\n              lightboxService.close($el);\n              $scope.createEditOpen = false;\n              return $rootscope.$broadcast(\"sprintform:remove:success\", $scope.newSprint);\n            };\n            onError = function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            };\n            return $repo.remove($scope.newSprint).then(onSuccess, onError);\n          };\n        })(this));\n      };\n      getLastSprint = function() {\n        var openSprints, sortedSprints;\n        openSprints = _.filter($scope.sprints, function(sprint) {\n          return !sprint.closed;\n        });\n        sortedSprints = _.sortBy(openSprints, function(sprint) {\n          return moment(sprint.estimated_finish, 'YYYY-MM-DD').format('X');\n        });\n        return sortedSprints[sortedSprints.length - 1];\n      };\n      openFn = function(cb) {\n        return $scope.$applyAsync(function() {\n          return $timeout(function() {\n            return cb();\n          }, 0);\n        });\n      };\n      $scope.$on(\"sprintform:create\", function(event, projectId, uss) {\n        $scope.createEditOpen = true;\n        return openFn(function() {\n          var estimatedFinish, estimatedStart, lastSprint, lastSprintNameDom, prettyDate, text;\n          ussToAdd = uss;\n          resetSprint();\n          form = $el.find(\"form\").checksley();\n          form.reset();\n          createSprint = true;\n          prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n          $scope.newSprint.project = projectId;\n          $scope.newSprint.name = null;\n          $scope.newSprint.slug = null;\n          lastSprint = getLastSprint();\n          estimatedStart = moment();\n          if (lastSprint) {\n            estimatedStart = moment(lastSprint.estimated_finish);\n          } else if ($scope.newSprint.estimated_start) {\n            estimatedStart = moment($scope.newSprint.estimated_start);\n          }\n          $scope.newSprint.estimated_start = estimatedStart.format(prettyDate);\n          estimatedFinish = moment().add(2, \"weeks\");\n          if (lastSprint) {\n            estimatedFinish = moment(lastSprint.estimated_finish).add(2, \"weeks\");\n          } else if ($scope.newSprint.estimated_finish) {\n            estimatedFinish = moment($scope.newSprint.estimated_finish);\n          }\n          $scope.newSprint.estimated_finish = estimatedFinish.format(prettyDate);\n          lastSprintNameDom = $el.find(\".last-sprint-name\");\n          if ((lastSprint != null ? lastSprint.name : void 0) != null) {\n            text = $translate.instant(\"LIGHTBOX.ADD_EDIT_SPRINT.LAST_SPRINT_NAME\", {\n              lastSprint: lastSprint.name\n            });\n            lastSprintNameDom.html(text);\n          }\n          $el.find(\".delete-sprint\").addClass(\"hidden\");\n          text = $translate.instant(\"LIGHTBOX.ADD_EDIT_SPRINT.TITLE\");\n          $el.find(\".title\").text(text);\n          text = $translate.instant(\"COMMON.CREATE\");\n          $el.find(\".button-green\").text(text);\n          lightboxService.open($el);\n          $el.find(\".sprint-name\").focus();\n          return $el.find(\".last-sprint-name\").removeClass(\"disappear\");\n        });\n      });\n      $scope.$on(\"sprintform:edit\", function(ctx, sprint) {\n        $scope.createEditOpen = true;\n        return openFn(function() {\n          var editSprint, prettyDate, save;\n          resetSprint();\n          createSprint = false;\n          prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n          $scope.$apply(function() {\n            $scope.newSprint = sprint.realClone();\n            $scope.newSprint.estimated_start = moment($scope.newSprint.estimated_start).format(prettyDate);\n            return $scope.newSprint.estimated_finish = moment($scope.newSprint.estimated_finish).format(prettyDate);\n          });\n          if (projectService.project.get('my_permissions').indexOf('delete_milestone') > -1) {\n            $el.find(\".delete-sprint\").removeClass(\"hidden\");\n          }\n          editSprint = $translate.instant(\"BACKLOG.EDIT_SPRINT\");\n          $el.find(\".title\").text(editSprint);\n          save = $translate.instant(\"COMMON.SAVE\");\n          $el.find(\".button-green\").text(save);\n          lightboxService.open($el);\n          $el.find(\".sprint-name\").focus().select();\n          return $el.find(\".last-sprint-name\").addClass(\"disappear\");\n        });\n      });\n      $el.on(\"keyup\", \".sprint-name\", function(event) {\n        if ($el.find(\".sprint-name\").val().length > 0 || hasErrors) {\n          return $el.find(\".last-sprint-name\").addClass(\"disappear\");\n        } else {\n          return $el.find(\".last-sprint-name\").removeClass(\"disappear\");\n        }\n      });\n      $el.on(\"submit\", \"form\", submit);\n      $el.on(\"click\", \".delete-sprint\", function(event) {\n        event.preventDefault();\n        return remove();\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return resetSprint();\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateEditSprint\", [\"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"tgProjectService\", \"$timeout\", CreateEditSprint]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var BacklogController, BacklogDirective, BurndownBacklogGraphDirective, TgBacklogProgressBarDirective, ToggleBurndownVisibility, UsEditSelector, UsPointsDirective, UsRolePointsSelectorDirective, bindMethods, bindOnce, generateHash, groupBy, mixOf, module, scopeDefer, taiga, timeout,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  bindMethods = this.taiga.bindMethods;\n\n  generateHash = this.taiga.generateHash;\n\n  module = angular.module(\"taigaBacklog\");\n\n  BacklogController = (function(superClass) {\n    extend(BacklogController, superClass);\n\n    BacklogController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"$tgLoading\", \"tgResources\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgProjectService\", \"tgLoader\"];\n\n    BacklogController.prototype.storeCustomFiltersName = 'backlog-custom-filters';\n\n    BacklogController.prototype.storeFiltersName = 'backlog-filters';\n\n    BacklogController.prototype.backlogOrder = {};\n\n    BacklogController.prototype.milestonesOrder = {};\n\n    BacklogController.prototype.newUs = [];\n\n    BacklogController.prototype.validQueryParams = ['exclude_status', 'status', 'exclude_tags', 'tags', 'exclude_assigned_users', 'assigned_users', 'exclude_role', 'role', 'exclude_epic', 'epic', 'exclude_owner', 'owner'];\n\n    function BacklogController(scope1, rootscope, repo, confirm, rs, params1, q, location, appMetaService, navUrls, events, analytics, translate, loading, rs2, modelTransform, errorHandlingService, storage, filterRemoteStorageService, projectService, tgLoader) {\n      var promise;\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params1;\n      this.q = q;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.loading = loading;\n      this.rs2 = rs2;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.projectService = projectService;\n      this.tgLoader = tgLoader;\n      bindMethods(this);\n      this.backlogOrder = {};\n      this.milestonesOrder = {};\n      this.page = 1;\n      this.disablePagination = false;\n      this.firstLoadComplete = false;\n      this.translationData = {\n        q: this.filterQ\n      };\n      this.scope.userstories = [];\n      this.totalUserStories = 0;\n      this.pendingDrag = [];\n      this.scope.noSwimlaneUserStories = false;\n      this.scope.swimlanesList = Immutable.List();\n      if (this.applyStoredFilters(this.params.pslug, \"backlog-filters\", this.validQueryParams)) {\n        return;\n      }\n      this.scope.sectionName = this.translate.instant(\"BACKLOG.SECTION_NAME\");\n      this.showTags = true;\n      this.activeFilters = false;\n      this.scope.showGraphPlaceholder = null;\n      this.displayVelocity = false;\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          _this.loadSwimlanes();\n          _this.firstLoadComplete = true;\n          title = _this.translate.instant(\"BACKLOG.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"BACKLOG.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          _this.appMetaService.setAll(title, description);\n          if (_this.rs.userstories.getShowTags(_this.scope.projectId)) {\n            _this.showTags = true;\n            return _this.scope.$broadcast(\"showTags\", _this.showTags);\n          }\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    BacklogController.prototype.preloadUsIds = function() {\n      var loadNextPage, page, usIds;\n      page = 1;\n      usIds = [];\n      loadNextPage = (function(_this) {\n        return function() {\n          var lastLoadUserstoriesParams, params, promise;\n          lastLoadUserstoriesParams = Object.assign({}, _this.lastLoadUserstoriesParams);\n          params = Object.assign(lastLoadUserstoriesParams, {\n            page: page,\n            only_ref: true\n          });\n          promise = _this.rs.userstories.listUnassigned(_this.scope.projectId, params, 100, false);\n          return promise.then(function(result) {\n            var header, userstories;\n            userstories = result[0];\n            header = result[1];\n            usIds = usIds.concat(userstories.map(function(us) {\n              return us.ref;\n            }));\n            _this.rs.userstories.storeBacklog(_this.scope.projectId, usIds);\n            if (header('x-pagination-next')) {\n              page++;\n              return loadNextPage();\n            }\n          });\n        };\n      })(this);\n      if (this.disablePagination) {\n        usIds = this.scope.userstories.map(function(us) {\n          return us.ref;\n        });\n        return this.rs.userstories.storeBacklog(this.scope.projectId, usIds);\n      } else {\n        return loadNextPage();\n      }\n    };\n\n    BacklogController.prototype.filtersReloadContent = function() {\n      return this.loadUserstories(true);\n    };\n\n    BacklogController.prototype.initializeEventHandlers = function() {\n      var load;\n      load = (function(_this) {\n        return function() {\n          _this.loadUserstories(true);\n          _this.loadProjectStats();\n          return _this.rootscope.$broadcast(\"filters:update\");\n        };\n      })(this);\n      this.scope.$on(\"usform:bulk:success\", (function(_this) {\n        return function(event, els, position) {\n          if (position == null) {\n            position = 'bottom';\n          }\n          _this.newUs = _.map(els, function(it) {\n            return it.id;\n          });\n          if (position === 'top') {\n            _this.moveUsToTopOfBacklog(els).then(function() {\n              return load();\n            });\n          } else {\n            load();\n          }\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"bulk create userstory on backlog\", 1);\n        };\n      })(this));\n      this.scope.$on(\"sprintform:create:success\", (function(_this) {\n        return function(e, data, ussToMove) {\n          _this.loadSprints().then(function() {\n            return _this.scope.$broadcast(\"sprintform:create:success:callback\", ussToMove);\n          });\n          _this.loadProjectStats();\n          _this.confirm.notify(\"success\");\n          return _this.analytics.trackEvent(\"sprint\", \"create\", \"create sprint on backlog\", 1);\n        };\n      })(this));\n      this.scope.$on(\"usform:new:success\", (function(_this) {\n        return function(event, el, position) {\n          if (position == null) {\n            position = 'bottom';\n          }\n          _this.newUs = [el.id];\n          if (position === 'top') {\n            _this.moveUsToTopOfBacklog(el).then(function() {\n              return load();\n            });\n          } else {\n            load();\n          }\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"create userstory on backlog\", 1);\n        };\n      })(this));\n      this.scope.$on(\"sprintform:edit:success\", (function(_this) {\n        return function() {\n          return _this.loadProjectStats();\n        };\n      })(this));\n      this.scope.$on(\"sprintform:remove:success\", (function(_this) {\n        return function(event, sprint) {\n          if (_this.displayVelocity) {\n            _this.toggleVelocityForecasting();\n          }\n          _this.loadSprints();\n          _this.loadProjectStats();\n          _this.loadUserstories(true);\n          if (sprint.closed) {\n            _this.loadClosedSprints();\n          }\n          return _this.rootscope.$broadcast(\"filters:update\");\n        };\n      })(this));\n      this.scope.$on(\"usform:edit:success\", (function(_this) {\n        return function(event, data) {\n          var index;\n          index = _.findIndex(_this.scope.userstories, function(us) {\n            return us.id === data.id;\n          });\n          _this.scope.userstories[index] = data;\n          return _this.rootscope.$broadcast(\"filters:update\");\n        };\n      })(this));\n      this.scope.$on(\"filters:update\", (function(_this) {\n        return function() {\n          var milestone;\n          return _this.generateFilters(milestone = \"null\");\n        };\n      })(this));\n      this.scope.$on(\"sprint:us:move\", this.moveUs);\n      this.scope.$on(\"sprint:us:moved\", (function(_this) {\n        return function() {\n          _this.resetFirstStoryIndicator();\n          return _this.rootscope.$broadcast(\"filters:update\");\n        };\n      })(this));\n      this.scope.$on(\"backlog:load-closed-sprints\", this.loadClosedSprints);\n      return this.scope.$on(\"backlog:unload-closed-sprints\", this.unloadClosedSprints);\n    };\n\n    BacklogController.prototype.initializeSubscription = function() {\n      var routingKey1, routingKey2;\n      routingKey1 = \"changes.project.\" + this.scope.projectId + \".userstories\";\n      this.events.subscribe(this.scope, routingKey1, (function(_this) {\n        return function(message) {\n          _this.loadAllPaginatedUserstories();\n          return _this.loadSprints();\n        };\n      })(this));\n      routingKey2 = \"changes.project.\" + this.scope.projectId + \".milestones\";\n      return this.events.subscribe(this.scope, routingKey2, (function(_this) {\n        return function(message) {\n          _this.loadSprints();\n          _this.loadClosedSprints();\n          return _this.loadProjectStats();\n        };\n      })(this), {\n        selfNotification: true\n      });\n    };\n\n    BacklogController.prototype.toggleShowTags = function() {\n      return this.scope.$apply((function(_this) {\n        return function() {\n          _this.showTags = !_this.showTags;\n          return _this.rs.userstories.storeShowTags(_this.scope.projectId, _this.showTags);\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.toggleActiveFilters = function() {\n      return this.activeFilters = !this.activeFilters;\n    };\n\n    BacklogController.prototype.toggleVelocityForecasting = function() {\n      this.displayVelocity = !this.displayVelocity;\n      if (!this.displayVelocity) {\n        this.scope.visibleUserStories = _.map(this.scope.userstories, function(it) {\n          return it.ref;\n        });\n      } else {\n        this.calculateForecasting();\n        this.scope.visibleUserStories = _.map(this.forecastedStories, function(it) {\n          return it.ref;\n        });\n      }\n      return scopeDefer(this.scope, (function(_this) {\n        return function() {\n          return _this.scope.$broadcast(\"userstories:loaded\");\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadProjectStats = function() {\n      return this.rs.projects.stats(this.scope.projectId).then((function(_this) {\n        return function(stats) {\n          var totalPoints;\n          _this.scope.stats = stats;\n          totalPoints = stats.total_points ? stats.total_points : stats.defined_points;\n          if (totalPoints) {\n            _this.scope.stats.completedPercentage = Math.round(100 * stats.closed_points / totalPoints);\n          } else {\n            _this.scope.stats.completedPercentage = 0;\n          }\n          _this.scope.showGraphPlaceholder = !((stats.total_points != null) && (stats.total_milestones != null));\n          _this.calculateForecasting();\n          return stats;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.setMilestonesOrder = function(sprints) {\n      var it, j, len, results, sprint;\n      results = [];\n      for (j = 0, len = sprints.length; j < len; j++) {\n        sprint = sprints[j];\n        this.milestonesOrder[sprint.id] = {};\n        results.push((function() {\n          var l, len1, ref1, results1;\n          ref1 = sprint.user_stories;\n          results1 = [];\n          for (l = 0, len1 = ref1.length; l < len1; l++) {\n            it = ref1[l];\n            results1.push(this.milestonesOrder[sprint.id][it.id] = it.sprint_order);\n          }\n          return results1;\n        }).call(this));\n      }\n      return results;\n    };\n\n    BacklogController.prototype.unloadClosedSprints = function() {\n      return this.scope.$apply((function(_this) {\n        return function() {\n          _this.scope.closedSprints = [];\n          return _this.rootscope.$broadcast(\"closed-sprints:reloaded\", []);\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadClosedSprints = function() {\n      var params;\n      params = {\n        closed: true\n      };\n      return this.rs.sprints.list(this.scope.projectId, params).then((function(_this) {\n        return function(result) {\n          var j, len, sprint, sprints;\n          sprints = result.milestones;\n          _this.setMilestonesOrder(sprints);\n          _this.scope.totalClosedMilestones = result.closed;\n          for (j = 0, len = sprints.length; j < len; j++) {\n            sprint = sprints[j];\n            sprint.user_stories = _.sortBy(sprint.user_stories, \"sprint_order\");\n          }\n          _this.scope.closedSprints = sprints;\n          _this.scope.closedSprintsById = groupBy(sprints, function(x) {\n            return x.id;\n          });\n          _this.rootscope.$broadcast(\"closed-sprints:reloaded\", sprints);\n          return sprints;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadSwimlanes = function() {\n      if (this.scope.project.swimlanes) {\n        return this.scope.project.swimlanes.forEach((function(_this) {\n          return function(swimlane) {\n            if (!_this.scope.swimlanesList.includes(swimlane)) {\n              return _this.scope.swimlanesList = _this.scope.swimlanesList.push(swimlane);\n            }\n          };\n        })(this));\n      }\n    };\n\n    BacklogController.prototype.loadSprints = function() {\n      var params;\n      params = {\n        closed: false\n      };\n      return this.rs.sprints.list(this.scope.projectId, params).then((function(_this) {\n        return function(result) {\n          var j, len, sprint, sprints;\n          sprints = result.milestones;\n          _this.setMilestonesOrder(sprints);\n          _this.scope.totalMilestones = sprints;\n          _this.scope.totalClosedMilestones = result.closed;\n          _this.scope.totalOpenMilestones = result.open;\n          _this.scope.totalMilestones = _this.scope.totalOpenMilestones + _this.scope.totalClosedMilestones;\n          for (j = 0, len = sprints.length; j < len; j++) {\n            sprint = sprints[j];\n            sprint.user_stories = _.sortBy(sprint.user_stories, \"sprint_order\");\n          }\n          _this.scope.sprints = sprints;\n          if (!_this.scope.closedSprints) {\n            _this.scope.closedSprints = [];\n          }\n          _this.scope.sprintsCounter = sprints.length;\n          _this.scope.sprintsById = groupBy(sprints, function(x) {\n            return x.id;\n          });\n          _this.rootscope.$broadcast(\"sprints:loaded\", sprints);\n          _this.scope.currentSprint = _this.findCurrentSprint();\n          return sprints;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.openSprints = function() {\n      return _.filter(this.scope.sprints, (function(_this) {\n        return function(sprint) {\n          return !sprint.closed;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadAllPaginatedUserstories = function() {\n      var page;\n      page = this.page;\n      return this.loadUserstories(true, this.scope.userstories.length).then((function(_this) {\n        return function() {\n          return _this.page = page;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadUserstories = function(resetPagination, pageSize) {\n      var params, promise;\n      if (resetPagination == null) {\n        resetPagination = false;\n      }\n      if (!this.scope.projectId) {\n        return null;\n      }\n      this.loadingUserstories = true;\n      this.disablePagination = true;\n      params = _.pick(_.clone(this.location.search()), this.validQueryParams);\n      this.rs.userstories.storeQueryParams(this.scope.projectId, params);\n      if (resetPagination) {\n        this.page = 1;\n      }\n      params.page = this.page;\n      params.q = this.filterQ;\n      this.lastLoadUserstoriesParams = params;\n      this.translationData.q = params.q;\n      promise = this.rs.userstories.listUnassigned(this.scope.projectId, params, pageSize);\n      return promise.then((function(_this) {\n        return function(result) {\n          var header, userstories, uss;\n          userstories = result[0];\n          header = result[1];\n          if (resetPagination) {\n            _this.scope.userstories = [];\n          }\n          uss = _this.parseLoadUserstoriesResponse(userstories, header);\n          if (_this.page <= 2) {\n            _this.preloadUsIds();\n          }\n          return uss;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.parseLoadUserstoriesResponse = function(userstories, header) {\n      var it, j, len, ref1;\n      this.scope.userstories = this.scope.userstories.concat(_.sortBy(userstories, \"backlog_order\"));\n      this.resetFirstStoryIndicator();\n      this.scope.visibleUserStories = _.map(this.scope.userstories, function(it) {\n        return it.ref;\n      });\n      ref1 = this.scope.userstories;\n      for (j = 0, len = ref1.length; j < len; j++) {\n        it = ref1[j];\n        if (this.newUs.includes(it.id)) {\n          it[\"new\"] = true;\n        }\n        this.backlogOrder[it.id] = it.backlog_order;\n      }\n      this.loadingUserstories = false;\n      if (header('x-pagination-next')) {\n        this.disablePagination = false;\n        this.page++;\n      }\n      if (header('Taiga-Info-Backlog-Total-Userstories')) {\n        this.totalUserStories = header('Taiga-Info-Backlog-Total-Userstories');\n      }\n      if (header('Taiga-Info-Userstories-Without-Swimlane')) {\n        this.scope.noSwimlaneUserStories = header('Taiga-Info-Userstories-Without-Swimlane');\n      }\n      this.rootscope.$broadcast(\"backlog:userstories:loaded\");\n      scopeDefer(this.scope, (function(_this) {\n        return function() {\n          _this.scope.$broadcast(\"userstories:loaded\");\n          return _this.tgLoader.pageLoaded();\n        };\n      })(this));\n      return userstories;\n    };\n\n    BacklogController.prototype.loadBacklog = function() {\n      return this.q.all([this.loadProjectStats(), this.loadSprints(), this.loadUserstories()]).then(this.calculateForecasting);\n    };\n\n    BacklogController.prototype.getLinkParams = function() {\n      var ParsedLastLoadUserstoriesParams, lastLoadUserstoriesParams;\n      lastLoadUserstoriesParams = this.lastLoadUserstoriesParams;\n      if (lastLoadUserstoriesParams) {\n        delete lastLoadUserstoriesParams['page'];\n        lastLoadUserstoriesParams = _.pickBy(lastLoadUserstoriesParams, _.identity);\n        ParsedLastLoadUserstoriesParams = {};\n        Object.keys(lastLoadUserstoriesParams).forEach(function(key) {\n          return ParsedLastLoadUserstoriesParams['backlog-' + key] = lastLoadUserstoriesParams[key];\n        });\n        ParsedLastLoadUserstoriesParams['no-milestone'] = 1;\n        return ParsedLastLoadUserstoriesParams;\n      } else {\n        return {};\n      }\n    };\n\n    BacklogController.prototype.sprintTotalPoints = function(sprint) {\n      var j, len, points, ref1, us;\n      points = 0;\n      ref1 = sprint.user_stories;\n      for (j = 0, len = ref1.length; j < len; j++) {\n        us = ref1[j];\n        if (us.milestone === sprint.id) {\n          points += us.total_points;\n        }\n      }\n      return points;\n    };\n\n    BacklogController.prototype.calculateForecasting = function() {\n      var backlog_points_sum, current_sum, j, len, ref1, results, stats, total_points, us;\n      stats = this.scope.stats;\n      total_points = stats.total_points;\n      current_sum = stats.assigned_points;\n      backlog_points_sum = 0;\n      this.forecastedStories = [];\n      this.scope.forecastNewSprint = true;\n      if (this.scope.sprints && this.scope.sprints.length) {\n        backlog_points_sum = this.sprintTotalPoints(this.scope.sprints[0]);\n        if (stats.speed > 0 && backlog_points_sum > stats.speed) {\n          backlog_points_sum = 0;\n        } else {\n          this.scope.forecastNewSprint = false;\n        }\n      }\n      ref1 = this.scope.userstories;\n      results = [];\n      for (j = 0, len = ref1.length; j < len; j++) {\n        us = ref1[j];\n        current_sum += us.total_points;\n        backlog_points_sum += us.total_points;\n        this.forecastedStories.push(us);\n        if (stats.speed > 0 && backlog_points_sum > stats.speed) {\n          break;\n        } else {\n          results.push(void 0);\n        }\n      }\n      return results;\n    };\n\n    BacklogController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_backlog_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.closedMilestones = !!project.total_closed_milestones;\n      this.scope.$emit('project:loaded', project);\n      this.scope.points = _.sortBy(project.points, \"order\");\n      this.scope.pointsById = groupBy(project.points, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusList = _.sortBy(project.us_statuses, \"id\");\n      this.resetFirstStoryIndicator();\n      return project;\n    };\n\n    BacklogController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.initializeSubscription();\n      if (this.rs.userstories.getShowTags(this.scope.projectId) === false) {\n        this.showTags = false;\n      }\n      return this.loadBacklog().then((function(_this) {\n        return function() {\n          var milestone;\n          return _this.generateFilters(milestone = \"null\");\n        };\n      })(this)).then((function(_this) {\n        return function() {\n          return _this.scope.$emit(\"backlog:loaded\");\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.toggleTags = function() {\n      return this.rs.userstories.storeShowTags(this.scope.projectId, this.showTags);\n    };\n\n    BacklogController.prototype.prepareBulkUpdateData = function(uses, field) {\n      if (field == null) {\n        field = \"backlog_order\";\n      }\n      return _.map(uses, function(x) {\n        return {\n          \"us_id\": x.id,\n          \"order\": x[field]\n        };\n      });\n    };\n\n    BacklogController.prototype.resetFirstStoryIndicator = function() {\n      if (this.scope.userstories.length > 0) {\n        return this.scope.first_us_in_backlog = this.scope.userstories[0].id;\n      }\n    };\n\n    BacklogController.prototype.moveUsToTopOfBacklog = function(uss) {\n      var nextUs, us;\n      if (!Array.isArray(uss)) {\n        uss = [uss];\n      }\n      us = uss[0];\n      if (this.scope.userstories.length) {\n        nextUs = this.scope.userstories[0].id;\n        return this.moveUs(\"sprint:us:move\", uss, 0, null, null, nextUs);\n      }\n      return Promise.resolve();\n    };\n\n    BacklogController.prototype.moveUs = function(ctx, usList, newUsIndex, newSprintId, previousUs, nextUs) {\n      var bulkUserstories, currentSprintId, j, key, l, len, len1, len2, m, newSprint, oldSprintId, position, project, promise, sprint, targetList, us;\n      oldSprintId = usList[0].milestone;\n      project = usList[0].project;\n      if (oldSprintId) {\n        sprint = this.scope.sprintsById[oldSprintId] || this.scope.closedSprintsById[oldSprintId];\n      }\n      if (newSprintId) {\n        newSprint = this.scope.sprintsById[newSprintId] || this.scope.closedSprintsById[newSprintId];\n      }\n      currentSprintId = newSprintId !== oldSprintId ? newSprintId : oldSprintId;\n      bulkUserstories = _.map(usList, function(it) {\n        return it.id;\n      });\n      if (ctx) {\n        this.pendingDrag.push({\n          usList: usList,\n          newUsIndex: newUsIndex,\n          newSprintId: newSprintId,\n          previousUs: previousUs,\n          nextUs: nextUs\n        });\n        if (newSprintId !== oldSprintId) {\n          if (sprint) {\n            usList.forEach((function(_this) {\n              return function(us, index) {\n                return _.remove(sprint.user_stories, function(it) {\n                  return it.id === us.id;\n                });\n              };\n            })(this));\n          }\n          if (newSprintId === null) {\n            for (key = j = 0, len = usList.length; j < len; key = ++j) {\n              us = usList[key];\n              _.remove(sprint.user_stories, function(it) {\n                return it.id === us.id;\n              });\n            }\n            usList.forEach((function(_this) {\n              return function(us, index) {\n                return _this.scope.userstories.splice(newUsIndex + index, 0, us);\n              };\n            })(this));\n          } else {\n            for (l = 0, len1 = usList.length; l < len1; l++) {\n              us = usList[l];\n              _.remove(this.scope.userstories, function(it) {\n                return it.id === us.id;\n              });\n            }\n            usList.forEach((function(_this) {\n              return function(us, index) {\n                us.milestone = newSprintId;\n                newSprint.user_stories.splice(newUsIndex, 0, us);\n                newSprint = Object.assign(newSprint, {\n                  user_stories: newSprint.user_stories.slice()\n                });\n                return _this.scope.sprints = _this.scope.sprints.map(function(sprint) {\n                  return Object.assign(sprint);\n                });\n              };\n            })(this));\n          }\n        } else {\n          if (newSprintId) {\n            targetList = newSprint.user_stories;\n          } else {\n            targetList = this.scope.userstories;\n          }\n          for (m = 0, len2 = usList.length; m < len2; m++) {\n            us = usList[m];\n            _.remove(targetList, function(it) {\n              return it.id === us.id;\n            });\n          }\n          position = 0;\n          if (previousUs) {\n            position = targetList.findIndex(function(us) {\n              return us.id === previousUs;\n            });\n          } else if (nextUs) {\n            position = targetList.findIndex(function(us) {\n              return us.id === previousUs;\n            });\n          }\n          position++;\n          usList.forEach((function(_this) {\n            return function(us, index) {\n              return targetList.splice(position + index, 0, us);\n            };\n          })(this));\n        }\n        this.scope.visibleUserStories = _.map(this.scope.userstories, function(it) {\n          return it.ref;\n        });\n      }\n      if (ctx && this.pendingDrag.length > 1) {\n        return;\n      }\n      promise = this.rs.userstories.bulkUpdateBacklogOrder(project, currentSprintId, previousUs, nextUs, bulkUserstories);\n      promise.then((function(_this) {\n        return function(result) {\n          var len3, n, ref1, updatedUs;\n          ref1 = result.data;\n          for (n = 0, len3 = ref1.length; n < len3; n++) {\n            updatedUs = ref1[n];\n            usList.forEach(function(us, index) {\n              if (us.id === updatedUs.id) {\n                us.milestone = updatedUs.milestone;\n                return us.backlog_order = updatedUs.backlog_order;\n              }\n            });\n          }\n          _this.pendingDrag.shift();\n          if (_this.pendingDrag.length) {\n            return _this.scope.$applyAsync(function() {\n              return _this.moveUs(null, _this.pendingDrag[0].usList, _this.pendingDrag[0].newUsIndex, _this.pendingDrag[0].newSprintId, _this.pendingDrag[0].previousUs, _this.pendingDrag[0].nextUs);\n            });\n          } else {\n            _this.rootscope.$broadcast(\"sprint:us:moved\");\n            if (!_this.events.connected) {\n              _this.loadSprints();\n              _this.loadClosedSprints();\n              _this.loadProjectStats();\n            }\n            if (_this.scope.closedSprintsById && _this.scope.closedSprintsById[oldSprintId]) {\n              return _this.rootscope.$broadcast(\"backlog:load-closed-sprints\");\n            }\n          }\n        };\n      })(this));\n      return promise;\n    };\n\n    BacklogController.prototype.updateUserStoryStatus = function() {\n      return this.generateFilters().then((function(_this) {\n        return function() {\n          _this.rootscope.$broadcast(\"filters:update\");\n          _this.loadProjectStats();\n          if (_this.isFilterDataTypeSelected('status')) {\n            return _this.filtersReloadContent();\n          }\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.editUserStory = function(projectId, ref, $event) {\n      return this.rs.userstories.getByRef(projectId, ref).then((function(_this) {\n        return function(us) {\n          return _this.rs2.attachments.list(\"us\", us.id, projectId).then(function(attachments) {\n            return _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'us',\n              'obj': us,\n              'attachments': attachments.toJS()\n            });\n          });\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.deleteUserStory = function(us) {\n      var message, title;\n      title = this.translate.instant(\"US.TITLE_DELETE_ACTION\", {\n        projectName: this.scope.project.name\n      });\n      message = this.translate.instant(\"US.TITLE_DELETE_MESSAGE\", {\n        subject: us.subject\n      });\n      return this.confirm.askOnDelete(title, message, '').then((function(_this) {\n        return function(askResponse) {\n          var promise;\n          _this.scope.userstories = _.without(_this.scope.userstories, us);\n          promise = _this.repo.remove(us);\n          promise.then(function() {\n            askResponse.finish();\n            return _this.q.all([_this.loadProjectStats(), _this.loadSprints(), _this.resetFirstStoryIndicator()]);\n          });\n          return promise.then(null, function() {\n            askResponse.finish(false);\n            return _this.confirm.notify(\"error\");\n          });\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.addNewUs = function(type) {\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new\", {\n            'objType': 'us',\n            'project': this.scope.project\n          });\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"usform:bulk\", this.scope.projectId, this.scope.project.default_us_status);\n      }\n    };\n\n    BacklogController.prototype.addNewSprint = function() {\n      return this.rootscope.$broadcast(\"sprintform:create\", this.scope.projectId);\n    };\n\n    BacklogController.prototype.findCurrentSprint = function() {\n      var currentDate;\n      currentDate = new Date().getTime();\n      return _.find(this.scope.sprints, function(sprint) {\n        var end, start;\n        start = moment(sprint.estimated_start, 'YYYY-MM-DD').format('x');\n        end = moment(sprint.estimated_finish, 'YYYY-MM-DD').format('x');\n        return currentDate >= start && currentDate <= end;\n      });\n    };\n\n    BacklogController.prototype.addFilterBacklog = function(newFilter) {\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters('null');\n    };\n\n    BacklogController.prototype.removeFilterBacklog = function(filter) {\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters('null');\n    };\n\n    return BacklogController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin, taiga.UsFiltersMixin));\n\n  module.controller(\"BacklogController\", BacklogController);\n\n  BacklogDirective = function($repo, $rootscope, $translate, $rs) {\n    var doomLineTemplate, link, linkDoomLine, linkFilters, linkToolbar, openFilterInit, showHideFilter, showHideTags;\n    doomLineTemplate = _.template(\"<div class=\\\"doom-line\\\"><span><%- text %></span></div>\");\n    linkDoomLine = function($scope, $el, $attrs, $ctrl) {\n      var addDoomLineDom, getUsItems, reloadDoomLine, removeDoomlineDom;\n      reloadDoomLine = function() {\n        var current_sum, domElement, i, j, len, ref1, results, stats, total_points, us;\n        if ($scope.displayVelocity) {\n          removeDoomlineDom();\n        }\n        if (($scope.stats != null) && ($scope.stats.total_points != null) && $scope.stats.total_points !== 0 && ($scope.displayVelocity == null)) {\n          removeDoomlineDom();\n          stats = $scope.stats;\n          total_points = stats.total_points;\n          current_sum = stats.assigned_points;\n          if (!$scope.userstories) {\n            return;\n          }\n          ref1 = $scope.userstories;\n          results = [];\n          for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n            us = ref1[i];\n            current_sum += us.total_points;\n            if (current_sum > total_points) {\n              domElement = $el.find('.backlog-table-body .us-item-row')[i];\n              addDoomLineDom(domElement);\n              break;\n            } else {\n              results.push(void 0);\n            }\n          }\n          return results;\n        }\n      };\n      removeDoomlineDom = function() {\n        return $el.find(\".doom-line\").remove();\n      };\n      addDoomLineDom = function(element) {\n        var text;\n        text = $translate.instant(\"BACKLOG.DOOMLINE\");\n        return $(element).before(doomLineTemplate({\n          \"text\": text\n        }));\n      };\n      getUsItems = function() {\n        var rowElements;\n        rowElements = $el.find('.backlog-table-body .us-item-row');\n        return _.map(rowElements, function(x) {\n          return angular.element(x);\n        });\n      };\n      $scope.$on(\"userstories:loaded\", reloadDoomLine);\n      $scope.$on(\"userstories:forecast\", removeDoomlineDom);\n      $scope.$on(\"sprint:us:moved\", reloadDoomLine);\n      return $scope.$watch(\"stats\", reloadDoomLine);\n    };\n    linkToolbar = function($scope, $el, $attrs, $ctrl) {\n      var checkSelected, getUsToMove, lastChecked, moveToCurrentSprint, moveToLatestSprint, moveUssToSprint, shiftPressed;\n      getUsToMove = function() {\n        var ussDom;\n        ussDom = $el.find(\".backlog-table-body input:checkbox:checked\");\n        return _.map(ussDom, function(item) {\n          var itemScope;\n          item = $(item).closest('.tg-scope');\n          itemScope = item.scope();\n          itemScope.us.milestone = $scope.sprints[0].id;\n          return itemScope.us;\n        });\n      };\n      moveUssToSprint = function(selectedUss, sprint) {\n        var data, extraPoints, totalExtraPoints, ussCurrent;\n        ussCurrent = _($scope.userstories);\n        $scope.userstories = ussCurrent.without.apply(ussCurrent, selectedUss).value();\n        extraPoints = _.map(selectedUss, function(v, k) {\n          return v.total_points;\n        });\n        totalExtraPoints = _.reduce(extraPoints, function(acc, num) {\n          return acc + num;\n        });\n        sprint.user_stories = _.union(sprint.user_stories, selectedUss);\n        sprint.total_points += totalExtraPoints;\n        data = _.map(selectedUss, function(us) {\n          return {\n            us_id: us.id,\n            order: us.sprint_order\n          };\n        });\n        $rs.userstories.bulkUpdateMilestone($scope.project.id, $scope.sprints[0].id, data).then((function(_this) {\n          return function() {\n            $ctrl.loadSprints();\n            $ctrl.loadProjectStats();\n            $ctrl.toggleVelocityForecasting();\n            return $ctrl.calculateForecasting();\n          };\n        })(this));\n        return $el.find(\".move-to-sprint\").hide();\n      };\n      moveToCurrentSprint = function(selectedUss) {\n        var sprint;\n        sprint = $scope.currentSprint ? $scope.currentSprint : $scope.sprints[0];\n        return moveUssToSprint(selectedUss, sprint);\n      };\n      moveToLatestSprint = function(selectedUss) {\n        return moveUssToSprint(selectedUss, $scope.sprints[0]);\n      };\n      $scope.$on(\"sprintform:create:success:callback\", function(e, ussToMove) {\n        if (ussToMove) {\n          return _.partial(moveToCurrentSprint, ussToMove)();\n        }\n      });\n      shiftPressed = false;\n      lastChecked = null;\n      checkSelected = function(target) {\n        var moveToSprintDom, selectedUsDom;\n        lastChecked = target.closest(\".us-item-row\");\n        target.closest('.us-item-row').toggleClass('ui-multisortable-multiple');\n        moveToSprintDom = $el.find(\".move-to-sprint\");\n        selectedUsDom = $el.find(\".backlog-table-body input:checkbox:checked\");\n        if (selectedUsDom.length > 0 && $scope.sprints.length > 0) {\n          return moveToSprintDom.css('display', 'flex');\n        } else {\n          return moveToSprintDom.hide();\n        }\n      };\n      $(window).on(\"keydown.shift-pressed keyup.shift-pressed\", function(event) {\n        shiftPressed = !!event.shiftKey;\n        return true;\n      });\n      $el.on(\"change\", \".backlog-table-body input:checkbox\", function(event) {\n        var current, elements, nextAll, prevAll, target;\n        if (lastChecked && shiftPressed) {\n          elements = [];\n          current = $(event.currentTarget).closest(\".us-item-row\");\n          nextAll = lastChecked.nextAll();\n          prevAll = lastChecked.prevAll();\n          if (_.some(nextAll, function(next) {\n            return next === current[0];\n          })) {\n            elements = lastChecked.nextUntil(current);\n          } else if (_.some(prevAll, function(prev) {\n            return prev === current[0];\n          })) {\n            elements = lastChecked.prevUntil(current);\n          }\n          _.map(elements, function(elm) {\n            var input;\n            input = $(elm).find(\"input:checkbox\");\n            input.prop('checked', true);\n            return checkSelected(input);\n          });\n        }\n        target = angular.element(event.currentTarget);\n        target.closest(\".us-item-row\").toggleClass('is-checked');\n        return checkSelected(target);\n      });\n      $el.on(\"click\", \"#move-to-latest-sprint\", (function(_this) {\n        return function(event) {\n          var ussToMove;\n          ussToMove = getUsToMove();\n          return $scope.$apply(_.partial(moveToLatestSprint, ussToMove));\n        };\n      })(this));\n      $el.on(\"click\", \"#move-to-current-sprint\", (function(_this) {\n        return function(event) {\n          var ussToMove;\n          ussToMove = getUsToMove();\n          return $scope.$apply(_.partial(moveToCurrentSprint, ussToMove));\n        };\n      })(this));\n      $el.on(\"change\", \"#show-tags > input\", function(event) {\n        event.preventDefault();\n        $ctrl.toggleShowTags();\n        return showHideTags($ctrl);\n      });\n      return $el.on(\"click\", \".forecasting-add-sprint\", function(event) {\n        var ussToMove, ussToMoveList;\n        ussToMoveList = $ctrl.forecastedStories;\n        if (!$scope.forecastNewSprint) {\n          ussToMove = _.map(ussToMoveList, function(us, index) {\n            us.milestone = $scope.sprints[0].id;\n            us.order = index;\n            return us;\n          });\n          return $scope.$apply(_.partial(moveToCurrentSprint, ussToMove));\n        } else {\n          ussToMove = _.map(ussToMoveList, function(us, index) {\n            us.order = index;\n            return us;\n          });\n          return $rootscope.$broadcast(\"sprintform:create\", $scope.projectId, ussToMove);\n        }\n      });\n    };\n    showHideTags = function($ctrl) {\n      var elm;\n      elm = angular.element(\"#show-tags\");\n      if ($ctrl.showTags) {\n        return elm.addClass(\"active\");\n      } else {\n        return elm.removeClass(\"active\");\n      }\n    };\n    openFilterInit = function($scope, $el, $ctrl) {\n      var sidebar;\n      sidebar = $el.find(\".backlog-filter\");\n      sidebar.addClass(\"active\");\n      return $ctrl.activeFilters = true;\n    };\n    showHideFilter = function($scope, $el, $ctrl) {\n      var filter, target;\n      filter = $el.find(\".backlog-filter\");\n      target = angular.element(\"#show-filters-button\");\n      filter.toggleClass(\"active\");\n      target.toggleClass(\"active\");\n      return $ctrl.toggleActiveFilters();\n    };\n    linkFilters = function($scope, $el, $attrs, $ctrl) {\n      $scope.filtersSearch = {};\n      return $el.on(\"click\", \"#show-filters-button\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          return showHideFilter($scope, $el, $ctrl);\n        });\n      });\n    };\n    link = function($scope, $el, $attrs, $rootscope) {\n      var $ctrl, filters;\n      $ctrl = $el.controller();\n      linkToolbar($scope, $el, $attrs, $ctrl);\n      linkFilters($scope, $el, $attrs, $ctrl);\n      linkDoomLine($scope, $el, $attrs, $ctrl);\n      filters = $ctrl.location.search();\n      if (filters.status || filters.tags || filters.assigned_to || filters.owner) {\n        openFilterInit($scope, $el, $ctrl);\n      }\n      $scope.$on(\"showTags\", function() {\n        return showHideTags($ctrl);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return $(window).off(\".shift-pressed\");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklog\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"$tgResources\", BacklogDirective]);\n\n  UsEditSelector = function($rootscope, $tgTemplate, $compile, $translate) {\n    var link, mainTemplate;\n    mainTemplate = $tgTemplate.get(\"backlog/us-edit-popover.html\", true);\n    link = function($scope, $el, $attrs) {\n      var $ctrl, removePopupOpenState;\n      $ctrl = $el.controller();\n      removePopupOpenState = function() {\n        $el.find(\".js-popup-button\").removeClass('popover-open');\n        return $(this).remove();\n      };\n      $el.on(\"click\", function(event) {\n        var html;\n        html = $compile(mainTemplate())($scope);\n        $el.find(\".js-popup-button\").addClass('popover-open');\n        $el.append(html);\n        $el.find(\".us-option-popup\").popover().open(function() {\n          return removePopupOpenState();\n        });\n        if (event.target.parentNode.classList.contains('first')) {\n          return $el.find(\".us-option-popup\").addClass('first');\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUsEditSelector\", [\"$rootScope\", \"$tgTemplate\", \"$compile\", \"$translate\", UsEditSelector]);\n\n  UsRolePointsSelectorDirective = function($rootscope, $template, $compile, $translate) {\n    var link, selectionTemplate;\n    selectionTemplate = $template.get(\"backlog/us-role-points-popover.html\", true);\n    link = function($scope, $el, $attrs) {\n      var removePopupOpenState;\n      removePopupOpenState = function() {\n        return $el.removeClass('popover-open');\n      };\n      bindOnce($scope, \"project\", function(project) {\n        var numberOfRoles, roles;\n        roles = _.filter(project.roles, \"computable\");\n        numberOfRoles = _.size(roles);\n        if (numberOfRoles > 1) {\n          return $el.append($compile(selectionTemplate({\n            \"roles\": roles\n          }))($scope));\n        } else {\n          $el.find(\".icon-arrow-down\").remove();\n          return $el.find(\".header-points\").addClass(\"not-clickable\");\n        }\n      });\n      $scope.$on(\"uspoints:select\", function(ctx, roleId, roleName) {\n        $el.find(\".popover\").popover().close();\n        return $el.find(\".header-points\").html(\"\" + roleName);\n      });\n      $scope.$on(\"uspoints:clear-selection\", function(ctx, roleId) {\n        var text;\n        $el.find(\".popover\").popover().close();\n        text = $translate.instant(\"COMMON.FIELDS.POINTS\");\n        return $el.find(\".header-points\").text(text);\n      });\n      $el.on(\"click\", function(event) {\n        var target;\n        target = angular.element(event.target);\n        if (target.is(\"span\") || target.is(\"div\")) {\n          event.stopPropagation();\n        }\n        $el.addClass('popover-open');\n        return $el.find(\".popover\").popover().open(function() {\n          return removePopupOpenState();\n        });\n      });\n      $el.on(\"click\", \".clear-selection\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        $rootscope.$broadcast(\"uspoints:clear-selection\");\n        $el.find('.active-popover').removeClass('active-popover');\n        return target.addClass('active-popover');\n      });\n      $el.on(\"click\", \".role\", function(event) {\n        var rolScope, target;\n        event.preventDefault();\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        $el.find('.active-popover').removeClass('active-popover');\n        target.addClass('active-popover');\n        rolScope = target.scope();\n        return $rootscope.$broadcast(\"uspoints:select\", target.data(\"role-id\"), target.text());\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUsRolePointsSelector\", [\"$rootScope\", \"$tgTemplate\", \"$compile\", \"$translate\", UsRolePointsSelectorDirective]);\n\n  UsPointsDirective = function($tgEstimationsService, $repo, $tgTemplate) {\n    var link, rolesTemplate;\n    rolesTemplate = $tgTemplate.get(\"common/estimation/us-points-roles-popover.html\", true);\n    link = function($scope, $el, $attrs) {\n      var $ctrl, bindClickElements, estimationProcess, filteringRoleId, renderRolesSelector, selectedRoleId, updatingSelectedRoleId;\n      $ctrl = $el.controller();\n      updatingSelectedRoleId = null;\n      selectedRoleId = null;\n      filteringRoleId = null;\n      estimationProcess = null;\n      $scope.$on(\"uspoints:select\", function(ctx, roleId, roleName) {\n        var us;\n        us = $scope.$eval($attrs.tgBacklogUsPoints);\n        selectedRoleId = roleId;\n        return estimationProcess.render();\n      });\n      $scope.$on(\"uspoints:clear-selection\", function(ctx) {\n        var us;\n        us = $scope.$eval($attrs.tgBacklogUsPoints);\n        selectedRoleId = null;\n        return estimationProcess.render();\n      });\n      $scope.$watch($attrs.tgBacklogUsPoints, function(us) {\n        var roles;\n        if (us) {\n          estimationProcess = $tgEstimationsService.create($el, us, $scope.project);\n          roles = estimationProcess.calculateRoles();\n          if (roles.length === 0) {\n            $el.find(\".icon-arrow-bottom\").remove();\n            $el.find(\"a.us-points\").addClass(\"not-clickable\");\n          } else if (roles.length === 1) {\n            selectedRoleId = _.keys(us.points)[0];\n          }\n          if (estimationProcess.isEditable) {\n            bindClickElements();\n          }\n          estimationProcess.onSelectedPointForRole = function(roleId, pointId, points) {\n            us.points = points;\n            estimationProcess.render();\n            return this.save(roleId, pointId).then(function() {\n              return $ctrl.loadProjectStats();\n            });\n          };\n          estimationProcess.render = function() {\n            var ctx, html, mainTemplate, pointId, pointObj, template, text, title, totalPoints;\n            totalPoints = this.calculateTotalPoints();\n            if ((selectedRoleId == null) || roles.length === 1) {\n              text = totalPoints;\n              title = totalPoints;\n            } else {\n              pointId = this.us.points[selectedRoleId];\n              pointObj = this.pointsById[pointId];\n              text = pointObj.name + \" / <span>\" + totalPoints + \"</span>\";\n              title = pointObj.name + \" / \" + totalPoints;\n            }\n            ctx = {\n              totalPoints: totalPoints,\n              roles: this.calculateRoles(),\n              editable: this.isEditable,\n              text: text,\n              title: title\n            };\n            mainTemplate = \"common/estimation/us-estimation-total.html\";\n            template = $tgTemplate.get(mainTemplate, true);\n            html = template(ctx);\n            return this.$el.html(html);\n          };\n          return estimationProcess.render();\n        }\n      });\n      renderRolesSelector = function() {\n        var html, roles;\n        roles = estimationProcess.calculateRoles();\n        html = rolesTemplate({\n          \"roles\": roles\n        });\n        $el.append(html);\n        return $el.find(\".pop-role\").popover().open(function() {\n          return $(this).remove();\n        });\n      };\n      bindClickElements = function() {\n        $el.on(\"click\", \".us-points\", function(event) {\n          var us;\n          event.preventDefault();\n          event.stopPropagation();\n          us = $scope.$eval($attrs.tgBacklogUsPoints);\n          updatingSelectedRoleId = selectedRoleId;\n          if (selectedRoleId != null) {\n            return estimationProcess.renderPointsSelector(selectedRoleId);\n          } else {\n            return renderRolesSelector();\n          }\n        });\n        return $el.on(\"click\", \".role\", function(event) {\n          var popRolesDom, target, us;\n          event.preventDefault();\n          event.stopPropagation();\n          target = angular.element(event.currentTarget);\n          us = $scope.$eval($attrs.tgBacklogUsPoints);\n          updatingSelectedRoleId = target.data(\"role-id\");\n          popRolesDom = $el.find(\".pop-role\");\n          popRolesDom.find(\"a\").removeClass(\"active\");\n          popRolesDom.find(\"a[data-role-id='\" + updatingSelectedRoleId + \"']\").addClass(\"active\");\n          return estimationProcess.renderPointsSelector(updatingSelectedRoleId);\n        });\n      };\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogUsPoints\", [\"$tgEstimationsService\", \"$tgRepo\", \"$tgTemplate\", UsPointsDirective]);\n\n  ToggleBurndownVisibility = function($storage) {\n    var hide, link, show;\n    hide = function() {\n      $(\".js-burndown-graph\").removeClass(\"shown\");\n      $(\".js-toggle-burndown-visibility-button\").removeClass(\"active\");\n      return $(\".js-burndown-graph\").removeClass(\"open\");\n    };\n    show = function(firstLoad) {\n      $(\".js-toggle-burndown-visibility-button\").addClass(\"active\");\n      if (firstLoad) {\n        return $(\".js-burndown-graph\").addClass(\"shown\");\n      } else {\n        return $(\".js-burndown-graph\").addClass(\"open\");\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var firstLoad, hash, toggleGraph;\n      firstLoad = true;\n      hash = generateHash([\"is-burndown-grpahs-collapsed\"]);\n      $scope.isBurndownGraphCollapsed = $storage.get(hash) || false;\n      toggleGraph = function() {\n        if ($scope.isBurndownGraphCollapsed) {\n          hide(firstLoad);\n        } else {\n          show(firstLoad);\n        }\n        return firstLoad = false;\n      };\n      $scope.$watch(\"showGraphPlaceholder\", function() {\n        if ($scope.showGraphPlaceholder != null) {\n          $scope.isBurndownGraphCollapsed = $scope.isBurndownGraphCollapsed || $scope.showGraphPlaceholder;\n          return toggleGraph();\n        }\n      });\n      $el.on(\"click\", \".js-toggle-burndown-visibility-button\", function() {\n        $scope.isBurndownGraphCollapsed = !$scope.isBurndownGraphCollapsed;\n        $storage.set(hash, $scope.isBurndownGraphCollapsed);\n        return toggleGraph();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgToggleBurndownVisibility\", [\"$tgStorage\", ToggleBurndownVisibility]);\n\n  BurndownBacklogGraphDirective = function($translate) {\n    var link, redrawChart;\n    redrawChart = function(element, dataToDraw) {\n      var client_increment_line, colors, data, evolution_line, j, milestonesRange, optimal_line, options, ref1, results, team_increment_line, width, zero_line;\n      width = element.width();\n      element.height(width / 6);\n      milestonesRange = (function() {\n        results = [];\n        for (var j = 0, ref1 = dataToDraw.milestones.length - 1; 0 <= ref1 ? j <= ref1 : j >= ref1; 0 <= ref1 ? j++ : j--){ results.push(j); }\n        return results;\n      }).apply(this);\n      data = [];\n      zero_line = _.map(dataToDraw.milestones, function(ml) {\n        return 0;\n      });\n      data.push({\n        data: _.zip(milestonesRange, zero_line),\n        lines: {\n          fillColor: \"rgba(0,0,0,0)\"\n        },\n        points: {\n          show: false\n        }\n      });\n      optimal_line = _.map(dataToDraw.milestones, function(ml) {\n        return ml.optimal;\n      });\n      data.push({\n        data: _.zip(milestonesRange, optimal_line),\n        lines: {\n          fillColor: \"rgba(200,201,196,0.2)\"\n        }\n      });\n      evolution_line = _.filter(_.map(dataToDraw.milestones, function(ml) {\n        return ml.evolution;\n      }), function(evolution) {\n        return evolution != null;\n      });\n      data.push({\n        data: _.zip(milestonesRange, evolution_line),\n        lines: {\n          fillColor: \"rgba(147,196,0,0.2)\"\n        }\n      });\n      client_increment_line = _.map(dataToDraw.milestones, function(ml) {\n        return -ml[\"team-increment\"] - ml[\"client-increment\"];\n      });\n      data.push({\n        data: _.zip(milestonesRange, client_increment_line),\n        lines: {\n          fillColor: \"rgba(200,201,196,0.2)\"\n        }\n      });\n      team_increment_line = _.map(dataToDraw.milestones, function(ml) {\n        return -ml[\"team-increment\"];\n      });\n      data.push({\n        data: _.zip(milestonesRange, team_increment_line),\n        lines: {\n          fillColor: \"rgba(255,160,160,0.2)\"\n        }\n      });\n      colors = [\"rgba(200,201,196,0.2)\", \"rgba(216,222,233,1)\", \"rgba(168,228,64,1)\", \"rgba(216,222,233,1)\", \"rgba(255,160,160,1)\"];\n      options = {\n        grid: {\n          borderWidth: {\n            top: 0,\n            right: 1,\n            left: 0,\n            bottom: 0\n          },\n          borderColor: \"#D8DEE9\",\n          color: \"#D8DEE9\",\n          hoverable: true,\n          margin: {\n            top: 0,\n            right: 20,\n            left: 5,\n            bottom: 0\n          }\n        },\n        xaxis: {\n          ticks: dataToDraw.milestones.length,\n          axisLabel: $translate.instant(\"BACKLOG.CHART.XAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: \"Verdana, Arial, Helvetica, Tahoma, sans-serif\",\n          axisLabelPadding: 5,\n          tickFormatter: function(val, axis) {\n            return \"\";\n          }\n        },\n        yaxis: {\n          axisLabel: $translate.instant(\"BACKLOG.CHART.YAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: \"Verdana, Arial, Helvetica, Tahoma, sans-serif\",\n          axisLabelPadding: 5\n        },\n        series: {\n          shadowSize: 0,\n          lines: {\n            show: true,\n            fill: true\n          },\n          points: {\n            show: true,\n            fill: true,\n            radius: 4,\n            lineWidth: 2\n          }\n        },\n        colors: colors,\n        tooltip: true,\n        tooltipOpts: {\n          content: function(label, xval, yval, flotItem) {\n            var ctx;\n            if (flotItem.seriesIndex === 1) {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.OPTIMAL\", ctx);\n            } else if (flotItem.seriesIndex === 2) {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.REAL\", ctx);\n            } else if (flotItem.seriesIndex === 3) {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.INCREMENT_CLIENT\", ctx);\n            } else {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.INCREMENT_TEAM\", ctx);\n            }\n          }\n        }\n      };\n      element.empty();\n      return element.plot(data, options).data(\"plot\");\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$watch(\"stats\", function(value) {\n        if ($scope.stats != null) {\n          redrawChart(element, $scope.stats);\n          return $scope.$on(\"resize\", function() {\n            return redrawChart(element, $scope.stats);\n          });\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBurndownBacklogGraph\", [\"$translate\", BurndownBacklogGraphDirective]);\n\n  TgBacklogProgressBarDirective = function($template, $compile) {\n    var adjustPercentaje, link, render, template;\n    template = $template.get(\"backlog/progress-bar.html\", true);\n    render = function(scope, el, projectPointsPercentaje, closedPointsPercentaje) {\n      var html;\n      html = template({\n        projectPointsPercentaje: projectPointsPercentaje,\n        closedPointsPercentaje: closedPointsPercentaje\n      });\n      html = $compile(html)(scope);\n      return el.html(html);\n    };\n    adjustPercentaje = function(percentage) {\n      var adjusted;\n      adjusted = _.max([0, percentage]);\n      adjusted = _.min([100, adjusted]);\n      return Math.round(adjusted);\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$watch($attrs.tgBacklogProgressBar, function(stats) {\n        var closedPoints, closedPointsPercentaje, definedPoints, projectPointsPercentaje, totalPoints;\n        if (stats != null) {\n          totalPoints = stats.total_points ? stats.total_points : stats.defined_points;\n          definedPoints = stats.defined_points;\n          closedPoints = stats.closed_points;\n          if (definedPoints > totalPoints) {\n            projectPointsPercentaje = totalPoints * 100 / definedPoints;\n            closedPointsPercentaje = closedPoints * 100 / definedPoints;\n          } else {\n            projectPointsPercentaje = 100;\n            closedPointsPercentaje = closedPoints * 100 / totalPoints;\n          }\n          projectPointsPercentaje = adjustPercentaje(projectPointsPercentaje - 3);\n          closedPointsPercentaje = adjustPercentaje(closedPointsPercentaje - 3);\n          return render($scope, $el, projectPointsPercentaje, closedPointsPercentaje);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogProgressBar\", [\"$tgTemplate\", \"$compile\", TgBacklogProgressBarDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var BacklogSortableDirective, bindOnce, deleteElement, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaBacklog\");\n\n  deleteElement = function(el) {\n    $(el).scope().$destroy();\n    $(el).off();\n    return $(el).remove();\n  };\n\n  BacklogSortableDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      if (!$scope.ctrl) {\n        console.error('BacklogSortableDirective must have access to to BacklogCtrl');\n      }\n      return bindOnce($scope, \"project\", function(project) {\n        var drake, emptyBacklog, initIsBacklog, nextUs, oldIndex, previousUs, scroll;\n        if (!(project.my_permissions.indexOf(\"modify_us\") > -1)) {\n          return;\n        }\n        initIsBacklog = false;\n        emptyBacklog = $('.js-empty-backlog');\n        previousUs = null;\n        nextUs = null;\n        oldIndex = null;\n        drake = dragula([$el[0], emptyBacklog[0], emptyBacklog[1]], {\n          copySortSource: false,\n          copy: false,\n          isContainer: function(el) {\n            return el.classList.contains('sprint-table');\n          },\n          moves: function(item) {\n            if (!$(item).hasClass('row')) {\n              return false;\n            }\n            return true;\n          }\n        });\n        drake.on('drop', function(item, target, source, sibling) {\n          var next, prev;\n          previousUs = null;\n          nextUs = null;\n          prev = $(item).prevAll('.row:not(.gu-transit)');\n          next = $(item).nextAll('.row:not(.gu-transit)');\n          previousUs = null;\n          if (prev.length && prev[0].dataset.id) {\n            previousUs = Number(prev[0].dataset.id);\n          }\n          nextUs = null;\n          if (!previousUs && next.length && next[0].dataset.id) {\n            return nextUs = Number(next[0].dataset.id);\n          }\n        });\n        drake.on('drag', function(item, container) {\n          var dragMultipleItems, firstElement, isChecked, parent, parentEl;\n          if ($scope.ctrl.displayVelocity) {\n            $scope.ctrl.toggleVelocityForecasting();\n          }\n          parent = $(item).parent();\n          initIsBacklog = parent.hasClass('backlog-table-body');\n          $(document.body).addClass(\"drag-active\");\n          isChecked = $(item).find(\"input[type='checkbox']\").is(\":checked\");\n          window.dragMultiple.start(item, container);\n          dragMultipleItems = window.dragMultiple.getElements();\n          firstElement = dragMultipleItems.length ? dragMultipleItems[0] : item;\n          parentEl = item.parentNode;\n          oldIndex = $(parentEl).find('tg-card').index(firstElement);\n          if (initIsBacklog) {\n            return oldIndex = $(firstElement).index(\".backlog-table-body .row\");\n          } else {\n            return oldIndex = $(firstElement).index();\n          }\n        });\n        drake.on('cloned', function(item) {\n          return $(item).addClass('multiple-drag-mirror');\n        });\n        drake.on('dragend', function(item) {\n          var dragMultipleItems, firstElement, index, isBacklog, parent, ref, sameContainer, sprint, usList;\n          $('.doom-line').remove();\n          parent = $(item).parent();\n          isBacklog = parent.hasClass('backlog-table-body') || parent.hasClass('js-empty-backlog');\n          if (initIsBacklog || isBacklog) {\n            sameContainer = initIsBacklog === isBacklog;\n          } else {\n            sameContainer = parent && $(item).scope().sprint.id === parent.scope().sprint.id;\n          }\n          dragMultipleItems = window.dragMultiple.stop();\n          $(document.body).removeClass(\"drag-active\");\n          sprint = null;\n          firstElement = dragMultipleItems.length ? dragMultipleItems[0] : item;\n          if (isBacklog) {\n            index = $(firstElement).index(\".backlog-table-body .row\");\n          } else {\n            index = $(firstElement).index();\n            sprint = (ref = parent.scope()) != null ? ref.sprint.id : void 0;\n          }\n          if (index === oldIndex && sameContainer) {\n            return;\n          }\n          if (!sameContainer) {\n            if (dragMultipleItems.length) {\n              usList = _.map(dragMultipleItems, function(item) {\n                return item = $(item).scope().us;\n              });\n            } else if ($(item).scope()) {\n              usList = [$(item).scope().us];\n            }\n            if (dragMultipleItems.length) {\n              _.each(dragMultipleItems, function(item) {\n                return deleteElement(item);\n              });\n            } else {\n              deleteElement(item);\n            }\n          } else {\n            if (dragMultipleItems.length) {\n              usList = _.map(dragMultipleItems, function(item) {\n                return item = $(item).scope().us;\n              });\n            } else if ($(item).scope()) {\n              usList = [$(item).scope().us];\n            }\n          }\n          return $scope.$applyAsync((function(_this) {\n            return function() {\n              return $scope.ctrl.moveUs(\"sprint:us:move\", usList, index, sprint, previousUs, nextUs);\n            };\n          })(this));\n        });\n        scroll = autoScroll([window], {\n          margin: 20,\n          pixels: 30,\n          scrollWhenOutside: true,\n          autoScroll: function() {\n            return this.down && drake.dragging;\n          }\n        });\n        return $scope.$on(\"$destroy\", function() {\n          $el.off();\n          return drake.destroy();\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogSortable\", BacklogSortableDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var BacklogSprintDirective, BacklogSprintHeaderDirective, SprintDirective, ToggleExcludeClosedSprintsVisualization, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaBacklog\");\n\n  BacklogSprintDirective = function($repo, $rootscope) {\n    var link, slideOptions, sprintTableMinHeight, toggleSprint;\n    sprintTableMinHeight = 50;\n    slideOptions = {\n      duration: 500,\n      easing: 'linear'\n    };\n    toggleSprint = (function(_this) {\n      return function($el) {\n        var sprintArrow, sprintTable;\n        sprintTable = $el.find(\".sprint-table\");\n        sprintArrow = $el.find(\".compact-sprint\");\n        sprintArrow.toggleClass('active');\n        return sprintTable.toggleClass('open');\n      };\n    })(this);\n    link = function($scope, $el, $attrs) {\n      $scope.$watch($attrs.tgBacklogSprint, function(sprint) {\n        sprint = $scope.$eval($attrs.tgBacklogSprint);\n        if (sprint.closed) {\n          return $el.addClass(\"sprint-closed\");\n        } else {\n          return toggleSprint($el);\n        }\n      });\n      $el.on(\"click\", \".sprint-name > .compact-sprint\", function(event) {\n        event.preventDefault();\n        toggleSprint($el);\n        return $el.find(\".sprint-table\").slideToggle(slideOptions);\n      });\n      $el.on(\"click\", \".edit-sprint\", function(event) {\n        var sprint;\n        event.preventDefault();\n        sprint = $scope.$eval($attrs.tgBacklogSprint);\n        return $rootscope.$broadcast(\"sprintform:edit\", sprint);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogSprint\", [\"$tgRepo\", \"$rootScope\", BacklogSprintDirective]);\n\n  BacklogSprintHeaderDirective = function($navUrls, $template, $compile, $translate) {\n    var link, template;\n    template = $template.get(\"backlog/sprint-header.html\");\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, isVisible, prettyDate, render;\n      prettyDate = $translate.instant(\"BACKLOG.SPRINTS.DATE\");\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_milestone\") !== -1;\n      };\n      isVisible = function() {\n        return $scope.project.my_permissions.indexOf(\"view_milestones\") !== -1;\n      };\n      render = function(sprint) {\n        var compiledTemplate, ctx, estimatedDateRange, finish, start, taskboardUrl, templateScope;\n        taskboardUrl = $navUrls.resolve(\"project-taskboard\", {\n          project: $scope.project.slug,\n          sprint: sprint.slug\n        });\n        start = moment(sprint.estimated_start).format(prettyDate);\n        finish = moment(sprint.estimated_finish).format(prettyDate);\n        estimatedDateRange = start + \"-\" + finish;\n        ctx = {\n          name: sprint.name,\n          taskboardUrl: taskboardUrl,\n          estimatedDateRange: estimatedDateRange,\n          closedPoints: sprint.closed_points || 0,\n          totalPoints: sprint.total_points || 0,\n          isVisible: isVisible(),\n          isEditable: isEditable()\n        };\n        templateScope = $scope.$new();\n        _.assign(templateScope, ctx);\n        compiledTemplate = $compile(template)(templateScope);\n        return $el.html(compiledTemplate);\n      };\n      $scope.$watch(\"sprint\", function(sprint) {\n        return render(sprint);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\"\n    };\n  };\n\n  module.directive(\"tgBacklogSprintHeader\", [\"$tgNavUrls\", \"$tgTemplate\", \"$compile\", \"$translate\", BacklogSprintHeaderDirective]);\n\n  ToggleExcludeClosedSprintsVisualization = function($rootscope, $loading, $translate) {\n    var excludeClosedSprints, link;\n    excludeClosedSprints = true;\n    link = function($scope, $el, $attrs) {\n      var currentLoading, loadingElm;\n      loadingElm = $(\"<div>\");\n      $el.after(loadingElm);\n      currentLoading = null;\n      $el.on(\"click\", function(event) {\n        event.preventDefault();\n        excludeClosedSprints = !excludeClosedSprints;\n        currentLoading = $loading().target(loadingElm).start();\n        if (excludeClosedSprints) {\n          return $rootscope.$broadcast(\"backlog:unload-closed-sprints\");\n        } else {\n          return $rootscope.$broadcast(\"backlog:load-closed-sprints\");\n        }\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return $scope.$on(\"closed-sprints:reloaded\", function(ctx, sprints) {\n        var key, text;\n        if (currentLoading) {\n          currentLoading.finish();\n        }\n        if (sprints.length > 0) {\n          key = \"BACKLOG.SPRINTS.ACTION_HIDE_CLOSED_SPRINTS\";\n        } else {\n          key = \"BACKLOG.SPRINTS.ACTION_SHOW_CLOSED_SPRINTS\";\n        }\n        text = $translate.instant(key);\n        return $el.find(\".text\").text(text);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogToggleClosedSprintsVisualization\", [\"$rootScope\", \"$tgLoading\", \"$translate\", ToggleExcludeClosedSprintsVisualization]);\n\n  SprintDirective = function(avatarService) {\n    return {\n      templateUrl: 'backlog/sprint.html',\n      scope: {\n        sprint: '=',\n        project: '='\n      }\n    };\n  };\n\n  SprintDirective.$inject = [];\n\n  module.directive(\"tgSprint\", SprintDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var SprintChartDirective, bindOnce, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaTaskboard\");\n\n  SprintChartDirective = function($translate) {\n    var link, redrawChart;\n    redrawChart = function(element, dataToDraw) {\n      var data, days, options, width;\n      width = element.width();\n      element.height(240);\n      days = _.map(dataToDraw, function(x) {\n        return moment.utc(x.day);\n      });\n      data = [];\n      data.unshift({\n        data: _.zip(days, _.map(dataToDraw, function(d) {\n          return d.open_points;\n        })),\n        lines: {\n          fillColor: \"rgba(147,196,0,0.2)\"\n        }\n      });\n      data.unshift({\n        data: _.zip(days, _.map(dataToDraw, function(d) {\n          return d.optimal_points;\n        })),\n        lines: {\n          fillColor: \"rgba(200,201,196,0.2)\"\n        }\n      });\n      options = {\n        grid: {\n          borderWidth: {\n            top: 0,\n            right: 1,\n            left: 0,\n            bottom: 0\n          },\n          borderColor: \"#D8DEE9\",\n          color: \"#D8DEE9\",\n          hoverable: true,\n          margin: {\n            top: 0,\n            right: 30,\n            left: 5,\n            bottom: 5\n          }\n        },\n        xaxis: {\n          tickSize: [1, \"day\"],\n          min: days[0],\n          max: _.last(days),\n          mode: \"time\",\n          daysNames: days,\n          axisLabel: $translate.instant(\"TASKBOARD.CHARTS.XAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif',\n          axisLabelPadding: 5\n        },\n        yaxis: {\n          min: 0,\n          axisLabel: $translate.instant(\"TASKBOARD.CHARTS.YAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif',\n          axisLabelPadding: 5\n        },\n        series: {\n          shadowSize: 0,\n          lines: {\n            show: true,\n            fill: true\n          },\n          points: {\n            show: true,\n            fill: true,\n            radius: 4,\n            lineWidth: 2\n          }\n        },\n        colors: [\"rgba(216,222,233,1)\", \"rgba(168,228,64,1)\"],\n        tooltip: true,\n        tooltipOpts: {\n          content: function(label, xval, yval, flotItem) {\n            var formattedDate, roundedValue;\n            formattedDate = moment(xval).format($translate.instant(\"TASKBOARD.CHARTS.DATE\"));\n            roundedValue = Math.round(yval * 10) / 10;\n            if (flotItem.seriesIndex === 1) {\n              return $translate.instant(\"TASKBOARD.CHARTS.REAL\", {\n                formattedDate: formattedDate,\n                roundedValue: roundedValue\n              });\n            } else {\n              return $translate.instant(\"TASKBOARD.CHARTS.OPTIMAL\", {\n                formattedDate: formattedDate,\n                roundedValue: roundedValue\n              });\n            }\n          }\n        }\n      };\n      element.empty();\n      return element.plot(data, options).data(\"plot\");\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$on(\"resize\", function() {\n        if ($scope.stats) {\n          return redrawChart(element, $scope.stats.days);\n        }\n      });\n      $scope.$on(\"taskboard:graph:toggle-visibility\", function() {\n        $el.parent().toggleClass('open');\n        return timeout(100, function() {\n          if ($scope.stats) {\n            return redrawChart(element, $scope.stats.days);\n          }\n        });\n      });\n      $scope.$watch('stats', function(value) {\n        if ($scope.stats == null) {\n          return;\n        }\n        return redrawChart(element, $scope.stats.days);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSprintChart\", [\"$translate\", SprintChartDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CreateBulkTasksDirective, bindOnce, debounce, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  trim = this.taiga.trim;\n\n  module = angular.module(\"taigaTaskboard\");\n\n  CreateBulkTasksDirective = function($repo, $rs, $rootscope, $loading, lightboxService, $model) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var submit, submitButton;\n      $scope.form = {\n        data: \"\",\n        usId: null\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, data, form, projectId, promise, sprintId, usId;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          data = $scope.form.data;\n          projectId = $scope.projectId;\n          sprintId = $scope.form.sprintId;\n          usId = $scope.form.usId;\n          promise = $rs.tasks.bulkCreate(projectId, sprintId, usId, data);\n          promise.then(function(result) {\n            result = _.map(result, (function(_this) {\n              return function(x) {\n                return $model.make_model('tasks', x);\n              };\n            })(this));\n            currentLoading.finish();\n            $rootscope.$broadcast(\"taskform:bulk:success\", result);\n            return lightboxService.close($el);\n          });\n          return promise.then(null, function() {\n            return currentLoading.finish();\n          });\n        };\n      })(this));\n      $scope.$on(\"taskform:bulk\", function(ctx, sprintId, usId) {\n        lightboxService.open($el);\n        return $scope.form = {\n          data: \"\",\n          sprintId: sprintId,\n          usId: usId\n        };\n      });\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateBulkTasks\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"$tgLoading\", \"lightboxService\", \"$tgModel\", CreateBulkTasksDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TaskboardController, TaskboardDirective, TaskboardSquishColumnDirective, bindMethods, bindOnce, debounceLeading, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  toggleText = this.taiga.toggleText;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  timeout = this.taiga.timeout;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  module = angular.module(\"taigaTaskboard\");\n\n  TaskboardController = (function(superClass) {\n    extend(TaskboardController, superClass);\n\n    TaskboardController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"$routeParams\", \"$q\", \"tgAppMetaService\", \"$tgLocation\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"tgTaskboardTasks\", \"tgTaskboardIssues\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgLightboxFactory\", \"$timeout\", \"tgProjectService\"];\n\n    TaskboardController.prototype.excludePrefix = \"exclude_\";\n\n    TaskboardController.prototype.filterCategories = [\"status\", \"assigned_to\", \"owner\", \"role\", \"tags\"];\n\n    TaskboardController.prototype.validQueryParams = ['exclude_status', 'status', 'exclude_assigned_to', 'assigned_to', 'exclude_role', 'role', 'exclude_owner', 'owner', 'order_by', 'tags'];\n\n    function TaskboardController(scope, rootscope, repo, confirm, rs1, rs2, params1, q1, appMetaService, location, navUrls, events, analytics, translate, errorHandlingService, taskboardTasksService, taskboardIssuesService, storage, filterRemoteStorageService, lightboxFactory, timeout1, projectService) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs1;\n      this.rs2 = rs2;\n      this.params = params1;\n      this.q = q1;\n      this.appMetaService = appMetaService;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.taskboardTasksService = taskboardTasksService;\n      this.taskboardIssuesService = taskboardIssuesService;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.lightboxFactory = lightboxFactory;\n      this.timeout = timeout1;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.taskboardTasksService.reset();\n      this.scope.userstories = [];\n      this.openFilter = false;\n      this.filterQ = '';\n      this.backToBacklogUrl = this.navUrls.resolve('project-backlog', {\n        project: this.projectService.project.get('slug'),\n        ref: this.params.ref\n      });\n      if (this.applyStoredFilters(this.params.pslug, \"tasks-filters\", this.validQueryParams)) {\n        return;\n      }\n      this.scope.sectionName = this.translate.instant(\"TASKBOARD.SECTION_NAME\");\n      this.initializeEventHandlers();\n      taiga.defineImmutableProperty(this.scope, \"usTasks\", (function(_this) {\n        return function() {\n          return _this.taskboardTasksService.usTasks;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"taskMap\", (function(_this) {\n        return function() {\n          return _this.taskboardTasksService.taskMap;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"milestoneIssues\", (function(_this) {\n        return function() {\n          return _this.taskboardIssuesService.milestoneIssues;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"tasksByUs\", (function(_this) {\n        return function() {\n          return _this.taskboardTasksService.tasksByUs;\n        };\n      })(this));\n      this.scope.issues = [];\n      this.scope.showTags = true;\n      this.scope.$watch('milestoneIssues', (function(_this) {\n        return function() {\n          if (_this.scope.milestoneIssues) {\n            return _this.scope.issues = _this.scope.milestoneIssues.toJS().map(function(milestoneIssue) {\n              return _this.taskboardIssuesService.issuesRaw.find(function(rawIssue) {\n                return milestoneIssue.model.id === rawIssue.id;\n              });\n            });\n          } else {\n            return _this.scope.issues = [];\n          }\n        };\n      })(this));\n    }\n\n    TaskboardController.prototype.getQueryParams = function() {\n      return _.pick(_.clone(this.location.search()), this.validQueryParams);\n    };\n\n    TaskboardController.prototype.firstLoad = function() {\n      var promise;\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          return _this._setMeta();\n        };\n      })(this));\n      return promise.then(null, this.onInitialDataError.bind(this));\n    };\n\n    TaskboardController.prototype.setZoom = function(zoomLevel, zoom) {\n      var previousZoomLevel;\n      if (this.zoomLevel === Number(zoomLevel)) {\n        return null;\n      }\n      this.isFirstLoad = !this.zoomLevel;\n      previousZoomLevel = this.zoomLevel;\n      this.zoomLevel = zoomLevel;\n      this.zoom = zoom;\n      if (this.isFirstLoad) {\n        return this.firstLoad().then((function(_this) {\n          return function() {\n            _this.isFirstLoad = false;\n            return _this.taskboardTasksService.resetFolds();\n          };\n        })(this));\n      } else if (this.zoomLevel > 1 && previousZoomLevel <= 1) {\n        this.zoomLoading = true;\n        return this.q.all([this.loadTasks(), this.loadIssues()]).then((function(_this) {\n          return function() {\n            _this.zoomLoading = false;\n            return _this.taskboardTasksService.resetFolds();\n          };\n        })(this));\n      }\n    };\n\n    TaskboardController.prototype.changeQ = function(q) {\n      this.filterQ = q;\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.removeFilter = function(filter) {\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.addFilter = function(newFilter) {\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.selectCustomFilter = function(customFilter) {\n      this.replaceAllFilters(customFilter.filter);\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.removeCustomFilter = function(customFilter) {\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, 'tasks-custom-filters').then((function(_this) {\n        return function(userFilters) {\n          delete userFilters[customFilter.id];\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, 'tasks-custom-filters').then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.isFilterDataTypeSelected = function(filterDataType) {\n      var filter, i, len, ref;\n      ref = this.selectedFilters;\n      for (i = 0, len = ref.length; i < len; i++) {\n        filter = ref[i];\n        if (filter['dataType'] === filterDataType) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    TaskboardController.prototype.saveCustomFilter = function(name) {\n      var excludeKey, filters, i, key, len, ref, urlfilters;\n      filters = {};\n      urlfilters = this.getQueryParams();\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        filters[key] = urlfilters[key];\n        filters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, 'tasks-custom-filters').then((function(_this) {\n        return function(userFilters) {\n          userFilters[name] = filters;\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, 'tasks-custom-filters').then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.generateFilters = function() {\n      var excludeKey, i, key, len, loadFilters, ref, urlfilters;\n      urlfilters = this.getQueryParams();\n      this.storeFilters(this.params.pslug, urlfilters, \"tasks-filters\");\n      loadFilters = {};\n      loadFilters.project = this.scope.projectId;\n      loadFilters.milestone = this.scope.sprintId;\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        loadFilters[key] = urlfilters[key];\n        loadFilters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.q.all([this.rs.tasks.filtersData(loadFilters), this.filterRemoteStorageService.getFilters(this.scope.projectId, 'tasks-custom-filters')]).then((function(_this) {\n        return function(result) {\n          var customFiltersRaw, data, dataCollection, j, len1, ref1, selected, tagsWithAtLeastOneElement;\n          data = result[0];\n          customFiltersRaw = result[1];\n          dataCollection = {};\n          dataCollection.status = _.map(data.statuses, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.tags = _.map(data.tags, function(it) {\n            it.id = it.name;\n            return it;\n          });\n          tagsWithAtLeastOneElement = _.filter(dataCollection.tags, function(tag) {\n            return tag.count > 0;\n          });\n          dataCollection.assigned_to = _.map(data.assigned_to, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.role = _.map(data.roles, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.owner = _.map(data.owners, function(it) {\n            it.id = it.id.toString();\n            it.name = it.full_name;\n            return it;\n          });\n          _this.selectedFilters = [];\n          ref1 = _this.filterCategories;\n          for (j = 0, len1 = ref1.length; j < len1; j++) {\n            key = ref1[j];\n            excludeKey = _this.excludePrefix.concat(key);\n            if (loadFilters[key]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[key]);\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n            if (loadFilters[excludeKey]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\");\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n          }\n          _this.filters = [\n            {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\n              dataType: \"status\",\n              content: dataCollection.status\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\n              dataType: \"tags\",\n              content: dataCollection.tags,\n              hideEmpty: true,\n              totalTaggedElements: tagsWithAtLeastOneElement.length\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\n              dataType: \"assigned_to\",\n              content: dataCollection.assigned_to\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\n              dataType: \"role\",\n              content: dataCollection.role\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\n              dataType: \"owner\",\n              content: dataCollection.owner\n            }\n          ];\n          _this.customFilters = [];\n          return _.forOwn(customFiltersRaw, function(value, key) {\n            return _this.customFilters.push({\n              id: key,\n              name: key,\n              filter: value\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype._setMeta = function() {\n      var description, prettyDate, title;\n      prettyDate = this.translate.instant(\"BACKLOG.SPRINTS.DATE\");\n      title = this.translate.instant(\"TASKBOARD.PAGE_TITLE\", {\n        projectName: this.scope.project.name,\n        sprintName: this.scope.sprint.name\n      });\n      description = this.translate.instant(\"TASKBOARD.PAGE_DESCRIPTION\", {\n        projectName: this.scope.project.name,\n        sprintName: this.scope.sprint.name,\n        startDate: moment(this.scope.sprint.estimated_start).format(prettyDate),\n        endDate: moment(this.scope.sprint.estimated_finish).format(prettyDate),\n        completedPercentage: this.scope.stats.completedPercentage || \"0\",\n        completedPoints: this.scope.stats.completedPointsSum || \"--\",\n        totalPoints: this.scope.stats.totalPointsSum || \"--\",\n        openTasks: this.scope.stats.openTasks || \"--\",\n        totalTasks: this.scope.stats.total_tasks || \"--\"\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    TaskboardController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"taskform:bulk:success\", (function(_this) {\n        return function(event, tasks) {\n          _this.refreshTagsColors().then(function() {\n            return _this.taskboardTasksService.add(tasks);\n          });\n          return _this.analytics.trackEvent(\"task\", \"create\", \"bulk create task on taskboard\", 1);\n        };\n      })(this));\n      this.scope.$on(\"taskform:new:success\", (function(_this) {\n        return function(event, task) {\n          _this.refreshTagsColors().then(function() {\n            return _this.taskboardTasksService.add(task);\n          });\n          return _this.analytics.trackEvent(\"task\", \"create\", \"create task on taskboard\", 1);\n        };\n      })(this));\n      this.scope.$on(\"taskform:edit:success\", (function(_this) {\n        return function(event, task) {\n          return _this.refreshTagsColors().then(function() {\n            return _this.taskboardTasksService.replaceModel(task);\n          });\n        };\n      })(this));\n      this.scope.$on(\"issueform:new:success\", (function(_this) {\n        return function(event, issue) {\n          _this.refreshTagsColors().then(function() {\n            return _this.taskboardIssuesService.add(issue);\n          });\n          return _this.analytics.trackEvent(\"issue\", \"create\", \"create issue on taskboard\", 1);\n        };\n      })(this));\n      this.scope.$on(\"issueform:add:success\", (function(_this) {\n        return function(event, issue) {\n          return _this.refreshTagsColors().then(function() {\n            return _this.taskboardIssuesService.add(issue);\n          });\n        };\n      })(this));\n      this.scope.$on(\"issueform:edit:success\", (function(_this) {\n        return function(event, issue) {\n          return _this.refreshTagsColors().then(function() {\n            return _this.taskboardIssuesService.replaceModel(issue);\n          });\n        };\n      })(this));\n      this.scope.$on(\"taskboard:task:deleted\", (function(_this) {\n        return function(event, task) {\n          return _this.loadTasks();\n        };\n      })(this));\n      this.scope.$on(\"taskboard:issue:deleted\", (function(_this) {\n        return function(event, issue) {\n          return _this.loadIssues();\n        };\n      })(this));\n      this.scope.$on(\"taskboard:task:move\", this.taskMove);\n      this.scope.$on(\"assigned-to:added\", this.onAssignedToChanged);\n      return this.scope.$on(\"taskboard:items:move\", (function(_this) {\n        return function(event, itemsMoved) {\n          if (itemsMoved.uss) {\n            return _this.firstLoad();\n          } else {\n            if (itemsMoved.tasks) {\n              _this.loadTasks();\n            }\n            if (itemsMoved.issues) {\n              return _this.loadIssues();\n            }\n          }\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.onAssignedToChanged = function(ctx, userid, model) {\n      if (model.getName() === 'tasks') {\n        model.assigned_to = userid;\n        this.taskboardTasksService.replaceModel(model);\n        this.repo.save(model).then((function(_this) {\n          return function() {\n            _this.generateFilters();\n            if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n              return _this.loadTasks();\n            }\n          };\n        })(this));\n      }\n      if (model.getName() === 'issues') {\n        model.assigned_to = userid;\n        this.taskboardIssuesService.replaceModel(model);\n        return this.repo.save(model).then((function(_this) {\n          return function() {\n            _this.generateFilters();\n            if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n              return _this.loadIssues();\n            }\n          };\n        })(this));\n      }\n    };\n\n    TaskboardController.prototype.initializeSubscription = function() {\n      var routingKey, routingKey1;\n      routingKey = \"changes.project.\" + this.scope.projectId + \".tasks\";\n      this.events.subscribe(this.scope, routingKey, debounceLeading(500, (function(_this) {\n        return function(message) {\n          return _this.loadTaskboard();\n        };\n      })(this)));\n      routingKey = \"changes.project.\" + this.scope.projectId + \".issues\";\n      this.events.subscribe(this.scope, routingKey, debounceLeading(500, (function(_this) {\n        return function(message) {\n          return _this.loadIssues();\n        };\n      })(this)));\n      routingKey1 = \"changes.project.\" + this.scope.projectId + \".userstories\";\n      return this.events.subscribe(this.scope, routingKey1, (function(_this) {\n        return function(message) {\n          _this.refreshTagsColors();\n          _this.loadSprintStats();\n          return _this.loadSprint();\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadProject = function() {\n      return this.rs.projects.get(this.scope.projectId).then((function(_this) {\n        return function(project) {\n          if (!project.is_backlog_activated) {\n            _this.errorHandlingService.permissionDenied();\n          }\n          _this.scope.project = project;\n          _this.scope.pointsList = _.sortBy(project.points, \"order\");\n          _this.scope.pointsById = groupBy(project.points, function(e) {\n            return e.id;\n          });\n          _this.scope.roleById = groupBy(project.roles, function(e) {\n            return e.id;\n          });\n          _this.scope.taskStatusList = _.sortBy(project.task_statuses, \"order\");\n          _this.scope.usStatusList = _.sortBy(project.us_statuses, \"order\");\n          _this.scope.usStatusById = groupBy(project.us_statuses, function(e) {\n            return e.id;\n          });\n          _this.scope.issueStatusById = groupBy(project.issue_statuses, function(e) {\n            return e.id;\n          });\n          _this.scope.$emit('project:loaded', project);\n          _this.fillUsersAndRoles(project.members, project.roles);\n          return project;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadSprintStats = function() {\n      return this.rs.sprints.stats(this.scope.projectId, this.scope.sprintId).then((function(_this) {\n        return function(stats) {\n          var completedPointsSum, remainingPointsSum, remainingTasks, totalPointsSum;\n          totalPointsSum = _.reduce(_.values(stats.total_points), (function(res, n) {\n            return res + n;\n          }), 0);\n          completedPointsSum = _.reduce(_.values(stats.completed_points), (function(res, n) {\n            return res + n;\n          }), 0);\n          remainingPointsSum = totalPointsSum - completedPointsSum;\n          remainingTasks = stats.total_tasks - stats.completed_tasks;\n          _this.scope.stats = stats;\n          _this.scope.stats.totalPointsSum = totalPointsSum;\n          _this.scope.stats.completedPointsSum = completedPointsSum;\n          _this.scope.stats.remainingPointsSum = remainingPointsSum;\n          _this.scope.stats.remainingTasks = remainingTasks;\n          if (stats.totalPointsSum) {\n            _this.scope.stats.completedPercentage = Math.round(100 * stats.completedPointsSum / stats.totalPointsSum);\n          } else {\n            _this.scope.stats.completedPercentage = 0;\n          }\n          _this.scope.stats.openTasks = stats.total_tasks - stats.completed_tasks;\n          return stats;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.refreshTagsColors = function() {\n      return this.rs.projects.tagsColors(this.scope.projectId).then((function(_this) {\n        return function(tags_colors) {\n          return _this.scope.project.tags_colors = tags_colors._attrs;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadSprint = function() {\n      return this.rs.sprints.get(this.scope.projectId, this.scope.sprintId).then((function(_this) {\n        return function(sprint) {\n          _this.scope.sprint = sprint;\n          _this.scope.userstories = _.sortBy(sprint.user_stories, \"sprint_order\");\n          _this.taskboardTasksService.setUserstories(_this.scope.userstories);\n          _this.rootscope.$broadcast(\"taskboard:userstories:loaded\", _this.scope.userstories);\n          return sprint;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadIssues = function() {\n      var locationParams, params;\n      params = {};\n      if (this.zoomLevel > 1) {\n        params.include_attachments = 1;\n      }\n      locationParams = this.getQueryParams();\n      params = _.merge(params, locationParams);\n      return this.rs.issues.listInProject(this.scope.projectId, this.scope.sprintId, params).then((function(_this) {\n        return function(issues) {\n          _this.taskboardIssuesService.init(_this.scope.project, _this.scope.usersById, _this.scope.issueStatusById);\n          _this.taskboardIssuesService.set(issues);\n          return _this.initIssues = true;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadTasks = function() {\n      var locationParams, params;\n      params = {};\n      if (this.zoomLevel > 1) {\n        params.include_attachments = 1;\n      }\n      locationParams = this.getQueryParams();\n      params = _.merge(params, locationParams);\n      params.q = this.filterQ;\n      return this.rs.tasks.list(this.scope.projectId, this.scope.sprintId, null, params).then((function(_this) {\n        return function(tasks) {\n          _this.notFoundTasks = false;\n          if (!tasks.length && ((_this.filterQ && _this.filterQ.length) || Object.keys(locationParams).length)) {\n            _this.notFoundTasks = true;\n          }\n          _this.taskboardTasksService.init(_this.scope.project, _this.scope.usersById);\n          return _this.taskboardTasksService.set(tasks);\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadTaskboard = function() {\n      return this.q.all([\n        this.refreshTagsColors(), this.loadSprintStats(), this.loadSprint().then((function(_this) {\n          return function() {\n            _this.loadTasks();\n            return _this.loadIssues();\n          };\n        })(this))\n      ]);\n    };\n\n    TaskboardController.prototype.loadInitialData = function() {\n      var params, promise;\n      this.initialLoad = false;\n      this.initIssues = false;\n      params = {\n        pslug: this.params.pslug,\n        sslug: this.params.sslug\n      };\n      promise = this.repo.resolve(params).then((function(_this) {\n        return function(data) {\n          _this.scope.projectId = data.project;\n          _this.scope.sprintId = data.milestone;\n          _this.initializeSubscription();\n          return data;\n        };\n      })(this));\n      return promise.then((function(_this) {\n        return function() {\n          return _this.loadProject();\n        };\n      })(this)).then((function(_this) {\n        return function() {\n          _this.generateFilters();\n          if (_this.rs.issues.getSprintShowTags(_this.scope.projectId) === false) {\n            _this.scope.showTags = false;\n          }\n          return _this.loadTaskboard().then(function() {\n            _this.timeout(function() {\n              return _this.initialLoad = true;\n            }, 0, false);\n            return _this.setRolePoints();\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.toggleTags = function(tags) {\n      return this.rs.issues.storeSprintShowTags(this.scope.projectId, tags);\n    };\n\n    TaskboardController.prototype.showPlaceHolder = function(statusId, usId) {\n      if (!this.taskboardTasksService.tasksRaw.length) {\n        if (this.scope.taskStatusList[0].id === statusId && (!this.scope.userstories.length || this.scope.userstories[0].id === usId)) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    TaskboardController.prototype.editTask = function(id) {\n      var task;\n      task = this.taskboardTasksService.getTask(id);\n      task = task.set('loading-edit', true);\n      this.taskboardTasksService.replace(task);\n      return this.rs.tasks.getByRef(task.getIn(['model', 'project']), task.getIn(['model', 'ref'])).then((function(_this) {\n        return function(editingTask) {\n          return _this.rs2.attachments.list(\"task\", task.get('id'), task.getIn(['model', 'project'])).then(function(attachments) {\n            _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'task',\n              'obj': editingTask,\n              'project': _this.scope.project,\n              'sprintId': _this.scope.sprintId,\n              'attachments': attachments.toJS()\n            });\n            task = task.set('loading-edit', false);\n            return _this.taskboardTasksService.replace(task);\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.editIssue = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssue(id);\n      issue = issue.set('loading-edit', true);\n      return this.rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref'])).then((function(_this) {\n        return function(editingIssue) {\n          return _this.rs2.attachments.list(\"issue\", issue.get('id'), issue.getIn(['model', 'project'])).then(function(attachments) {\n            _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'issue',\n              'obj': editingIssue,\n              'project': _this.scope.project,\n              'sprintId': _this.scope.sprintId,\n              'attachments': attachments.toJS()\n            });\n            return issue = issue.set('loading-edit', false);\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.deleteTask = function(id) {\n      var task;\n      task = this.taskboardTasksService.getTask(id);\n      task = task.set('loading-delete', true);\n      return this.rs.tasks.getByRef(task.getIn(['model', 'project']), task.getIn(['model', 'ref'])).then((function(_this) {\n        return function(deletingTask) {\n          var message, title;\n          task = task.set('loading-delete', false);\n          title = _this.translate.instant(\"TASK.TITLE_DELETE_ACTION\");\n          message = deletingTask.subject;\n          return _this.confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = _this.repo.remove(deletingTask);\n            promise.then(function() {\n              _this.scope.$broadcast(\"taskboard:task:deleted\");\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.deleteIssue = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssue(id);\n      issue = issue.set('loading-delete', true);\n      return this.rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref'])).then((function(_this) {\n        return function(deletingIssue) {\n          var message, title;\n          issue = issue.set('loading-delete', false);\n          title = _this.translate.instant(\"ISSUES.ACTION_DELETE\");\n          message = deletingIssue.subject;\n          return _this.confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = _this.repo.remove(deletingIssue);\n            promise.then(function() {\n              _this.scope.$broadcast(\"taskboard:issue:deleted\");\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.removeIssueFromSprint = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssue(id);\n      issue = issue.set('loading-delete', true);\n      return this.rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref'])).then((function(_this) {\n        return function(removingIssue) {\n          var message, title;\n          issue = issue.set('loading-delete', false);\n          title = _this.translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.TITLE\");\n          message = _this.translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\");\n          message = _this.translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\", {\n            sprintName: _this.scope.sprint.name\n          });\n          return _this.confirm.ask(title, null, message).then(function(askResponse) {\n            var promise;\n            removingIssue.milestone = null;\n            promise = _this.repo.save(removingIssue);\n            promise.then(function() {\n              _this.taskboardIssuesService.remove(removingIssue);\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.taskMove = function(ctx, task, oldStatusId, usId, statusId, order) {\n      var moveUpdateData, options, params, promise;\n      this.scope.movingTask = true;\n      task = this.taskboardTasksService.getTaskModel(task.get('id'));\n      moveUpdateData = this.taskboardTasksService.move(task.id, usId, statusId, order);\n      params = {\n        status__is_archived: false,\n        include_attachments: true\n      };\n      options = {\n        headers: {\n          \"set-orders\": JSON.stringify(moveUpdateData.set_orders)\n        }\n      };\n      return promise = this.repo.save(task, true, params, options, true).then((function(_this) {\n        return function(result) {\n          var headers;\n          if (result[0] && result[0].user_story) {\n            _this.reloadUserStory(result[0].user_story);\n          }\n          _this.scope.movingTask = false;\n          headers = result[1];\n          if (headers && headers['taiga-info-order-updated']) {\n            order = JSON.parse(headers['taiga-info-order-updated']);\n            _this.taskboardTasksService.assignOrders(order);\n          }\n          _this.loadSprintStats();\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('status')) {\n            return _this.loadTasks();\n          }\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.reloadUserStory = function(userStoryId) {\n      return this.rs.userstories.get(this.scope.project.id, userStoryId).then((function(_this) {\n        return function(us) {\n          return _this.scope.userstories = _.map(_this.scope.userstories, function(x) {\n            if (x.id === us.id) {\n              return us;\n            } else {\n              return x;\n            }\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.addNewTask = function(type, us) {\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new\", {\n            'objType': 'task',\n            'project': this.scope.project,\n            'sprintId': this.scope.sprintId,\n            'usId': us != null ? us.id : void 0\n          });\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"taskform:bulk\", this.scope.sprintId, us != null ? us.id : void 0);\n      }\n    };\n\n    TaskboardController.prototype.addNewIssue = function(type, us) {\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new-or-existing\", {\n            objType: 'issue',\n            project: this.scope.project,\n            sprintId: this.scope.sprintId,\n            relatedField: 'milestone',\n            relatedObjectId: this.scope.sprintId,\n            targetName: this.scope.sprint.name\n          });\n        case \"standard\":\n          return this.rootscope.$broadcast(\"taskform:new\", this.scope.sprintId, us != null ? us.id : void 0);\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"issueform:bulk\", this.scope.projectId, this.scope.sprintId);\n      }\n    };\n\n    TaskboardController.prototype.toggleFold = function(id, modelName) {\n      if (modelName === 'issues') {\n        return this.taskboardIssuesService.toggleFold(id);\n      } else if (modelName === 'tasks') {\n        return this.taskboardTasksService.toggleFold(id);\n      }\n    };\n\n    TaskboardController.prototype.openUsersSelection = function(item) {\n      var onClose;\n      onClose = (function(_this) {\n        return function(assignedUsers) {\n          var userId;\n          userId = assignedUsers.pop() || null;\n          if (item.getName() === 'tasks') {\n            item.assigned_to = userId;\n            _this.taskboardTasksService.replaceModel(item);\n            _this.repo.save(item).then(function() {\n              _this.generateFilters();\n              if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n                return _this.loadTasks();\n              }\n            });\n          }\n          if (item.getName() === 'issues') {\n            item.assigned_to = userId;\n            _this.taskboardIssuesService.replaceModel(item);\n            return _this.repo.save(item).then(function() {\n              _this.generateFilters();\n              if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n                return _this.loadIssues();\n              }\n            });\n          }\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-lb-select-user', {\n        \"class\": \"lightbox lightbox-select-user\"\n      }, {\n        \"currentUsers\": [item.assigned_to],\n        \"activeUsers\": this.scope.activeUsers,\n        \"onClose\": onClose,\n        \"single\": true,\n        \"lbTitle\": this.translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n      });\n    };\n\n    TaskboardController.prototype.changeTaskAssignedTo = function(id) {\n      var task;\n      task = this.taskboardTasksService.getTaskModel(id);\n      return this.openUsersSelection(task);\n    };\n\n    TaskboardController.prototype.changeIssueAssignedTo = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssueModel(id);\n      return this.openUsersSelection(issue);\n    };\n\n    TaskboardController.prototype.setRolePoints = function() {\n      var computableRoles, getPoint, getRole, pointsByRole;\n      computableRoles = _.filter(this.scope.project.roles, \"computable\");\n      getRole = (function(_this) {\n        return function(roleId) {\n          roleId = parseInt(roleId, 10);\n          return _.find(computableRoles, function(role) {\n            return role.id === roleId;\n          });\n        };\n      })(this);\n      getPoint = (function(_this) {\n        return function(pointId) {\n          var poitnId;\n          poitnId = parseInt(pointId, 10);\n          return _.find(_this.scope.project.points, function(point) {\n            return point.id === pointId;\n          });\n        };\n      })(this);\n      pointsByRole = _.reduce(this.scope.userstories, (function(_this) {\n        return function(result, us, key) {\n          _.forOwn(us.points, function(pointId, roleId) {\n            var point, role;\n            role = getRole(roleId);\n            point = getPoint(pointId) || {\n              value: 0\n            };\n            if (role) {\n              if (!result[role.id]) {\n                result[role.id] = role;\n                result[role.id].points = 0;\n              }\n              return result[role.id].points += point.value;\n            }\n          });\n          return result;\n        };\n      })(this), {});\n      return this.scope.pointsByRole = Object.keys(pointsByRole).map(function(key) {\n        return pointsByRole[key];\n      });\n    };\n\n    TaskboardController.prototype.getIssuesOrderBy = function() {\n      if (_.isString(this.location.search().order_by)) {\n        return this.location.search().order_by;\n      } else {\n        return \"created_date\";\n      }\n    };\n\n    return TaskboardController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"TaskboardController\", TaskboardController);\n\n  TaskboardDirective = function($rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, tableBodyDom;\n      $ctrl = $el.controller();\n      $el.on(\"click\", \".toggle-analytics-visibility\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        target.toggleClass('active');\n        return $rootscope.$broadcast(\"taskboard:graph:toggle-visibility\");\n      });\n      tableBodyDom = $el.find('[data-js=\"taskboard-table-hscroll\"]');\n      tableBodyDom.on(\"scroll\", function(event) {\n        var tableHeaderDom, target;\n        target = angular.element(event.currentTarget);\n        tableHeaderDom = $el.find(\".taskboard-table-inner\");\n        return tableHeaderDom.css(\"left\", -1 * target.scrollLeft());\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgTaskboard\", [\"$rootScope\", TaskboardDirective]);\n\n  TaskboardSquishColumnDirective = function(rs) {\n    var avatarWidth, firstLoad, gridGap, horizontalPadding, link, maxColumnWidth, maxRows, minWidth, zoom0ColumnWidth;\n    gridGap = 5;\n    horizontalPadding = 32;\n    avatarWidth = 30;\n    maxColumnWidth = 292;\n    zoom0ColumnWidth = 182;\n    minWidth = avatarWidth + horizontalPadding;\n    maxRows = 3;\n    firstLoad = false;\n    link = function($scope, $el, $attrs) {\n      var $foldStatusArchived, getCeilWidth, recalculateStatusColumnWidth, recalculateTaskboardWidth, setStatusColumnWidth;\n      $scope.$watch(\"ctrl.zoom\", (function(_this) {\n        return function() {\n          if (firstLoad) {\n            return recalculateTaskboardWidth();\n          }\n        };\n      })(this));\n      $scope.$on(\"sprint:task:moved\", (function(_this) {\n        return function() {\n          return recalculateTaskboardWidth();\n        };\n      })(this));\n      $scope.$watch(\"usTasks\", function() {\n        if ($scope.project) {\n          $scope.statusesFolded = rs.tasks.getStatusColumnModes($scope.project.id);\n          $scope.usFolded = rs.tasks.getUsRowModes($scope.project.id, $scope.sprintId);\n          return recalculateTaskboardWidth();\n        }\n      });\n      $scope.foldStatus = function(status) {\n        $scope.statusesFolded[status.id] = !!!$scope.statusesFolded[status.id];\n        rs.tasks.storeStatusColumnModes($scope.projectId, $scope.statusesFolded);\n        return recalculateTaskboardWidth();\n      };\n      $foldStatusArchived = function(status) {\n        return $scope.foldStatus(status);\n      };\n      $scope.foldUs = function(rowId) {\n        $scope.usFolded[rowId] = !!!$scope.usFolded[rowId];\n        rs.tasks.storeUsRowModes($scope.projectId, $scope.sprintId, $scope.usFolded);\n        return recalculateTaskboardWidth();\n      };\n      getCeilWidth = (function(_this) {\n        return function(usId, statusId) {\n          var columns, isStatusFolded, isUSFolded, tasks, width;\n          isStatusFolded = !!$scope.statusesFolded[statusId];\n          isUSFolded = !!$scope.usFolded[usId];\n          if (usId) {\n            tasks = $scope.usTasks.getIn([usId.toString(), statusId.toString()]).size;\n          } else {\n            tasks = $scope.usTasks.getIn(['null', statusId.toString()]).size;\n          }\n          if (tasks && (isUSFolded || isStatusFolded)) {\n            if (isUSFolded) {\n              columns = Math.ceil(tasks / maxRows);\n              width = avatarWidth * columns + ((columns - 1) * gridGap) + horizontalPadding;\n            } else if (isStatusFolded) {\n              width = avatarWidth;\n            }\n          } else {\n            width = 0;\n          }\n          return width;\n        };\n      })(this);\n      setStatusColumnWidth = (function(_this) {\n        return function(statusId, width) {\n          var column;\n          column = $el.find(\".squish-status-\" + statusId);\n          if (width < minWidth) {\n            width = minWidth;\n          }\n          column.css('max-width', width);\n          return width;\n        };\n      })(this);\n      recalculateStatusColumnWidth = (function(_this) {\n        return function(statusId) {\n          var folded, initialWidth, isStatusFolded, statusFoldedWidth;\n          isStatusFolded = !!$scope.statusesFolded[statusId];\n          initialWidth = 0;\n          if (isStatusFolded) {\n            initialWidth = avatarWidth;\n          } else {\n            initialWidth = maxColumnWidth;\n            if (Number($scope.ctrl.zoomLevel) === 0) {\n              initialWidth = zoom0ColumnWidth;\n            }\n          }\n          folded = !!$scope.statusesFolded[statusId];\n          statusFoldedWidth = getCeilWidth(null, statusId);\n          if (statusFoldedWidth < initialWidth) {\n            statusFoldedWidth = initialWidth;\n          }\n          _.forEach($scope.userstories, function(us) {\n            var isUSFolded, width;\n            isUSFolded = !!$scope.usFolded[us.id];\n            width = getCeilWidth(us.id, statusId);\n            if (width > statusFoldedWidth) {\n              return statusFoldedWidth = width;\n            }\n          });\n          return setStatusColumnWidth(statusId, statusFoldedWidth);\n        };\n      })(this);\n      return recalculateTaskboardWidth = (function(_this) {\n        return function() {\n          var total;\n          total = _.reduce($scope.taskStatusList, function(acc, status) {\n            return acc + recalculateStatusColumnWidth(status.id) + 5;\n          }, 0);\n          $el.find('.taskboard-table-inner').css(\"width\", maxColumnWidth + total);\n          if (!firstLoad) {\n            requestAnimationFrame(function() {\n              return $el.addClass('animations');\n            });\n          }\n          firstLoad = true;\n        };\n      })(this);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgTaskboardSquishColumn\", [\"$tgResources\", TaskboardSquishColumnDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TaskboardSortableDirective, bindOnce, groupBy, mixOf, module, scopeDefer, taiga, toggleText;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  module = angular.module(\"taigaBacklog\");\n\n  TaskboardSortableDirective = function($repo, $rs, $rootscope, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      return unwatch = $scope.$watch(\"usTasks\", function(usTasks) {\n        var containers, deleteElement, drake, filterError, initialContainer, itemEl, newParentScope, oldParentScope, scroll, tdom;\n        if (!usTasks || !usTasks.size) {\n          return;\n        }\n        unwatch();\n        if (!($scope.project.my_permissions.indexOf(\"modify_task\") > -1)) {\n          return;\n        }\n        oldParentScope = null;\n        newParentScope = null;\n        itemEl = null;\n        tdom = $el;\n        filterError = function() {\n          var text;\n          text = $translate.instant(\"BACKLOG.SORTABLE_FILTER_ERROR\");\n          return $tgConfirm.notify(\"error\", text);\n        };\n        deleteElement = function(itemEl) {\n          itemEl.off();\n          return itemEl.remove();\n        };\n        containers = _.map($el.find('.taskboard-column'), function(item) {\n          return item;\n        });\n        drake = dragula(containers, {\n          copySortSource: false,\n          copy: false,\n          accepts: function(el, target) {\n            return !$(target).hasClass('taskboard-row-title-box');\n          },\n          moves: function(item) {\n            return $(item).is('tg-card');\n          }\n        });\n        initialContainer = null;\n        drake.on('shadow', function(item) {\n          return $(item).removeClass('folded-dragging');\n        });\n        drake.on('over', function(item, container) {\n          if (!initialContainer) {\n            return initialContainer = container;\n          } else if (container !== initialContainer) {\n            return $(container).addClass('target-drop');\n          }\n        });\n        drake.on('out', function(item, container) {\n          if (container !== initialContainer) {\n            return $(container).removeClass('target-drop');\n          }\n        });\n        drake.on('drag', function(item) {\n          oldParentScope = $(item).parent().scope();\n          if ($(item).width() === 30) {\n            $(item).addClass('folded-dragging');\n          }\n          if ($el.hasClass(\"active-filters\")) {\n            filterError();\n            setTimeout((function() {\n              return drake.cancel(true);\n            }), 0);\n            return false;\n          }\n        });\n        drake.on('dragend', function(item) {\n          var itemIndex, itemTask, newStatusId, newUsId, oldStatusId, oldUsId, parentEl;\n          parentEl = $(item).parent();\n          itemEl = $(item);\n          itemTask = $scope.taskMap.get(Number(item.dataset.id));\n          itemIndex = itemEl.index();\n          newParentScope = parentEl.scope();\n          oldUsId = oldParentScope.us ? oldParentScope.us.id : null;\n          oldStatusId = oldParentScope.st.id;\n          newUsId = newParentScope.us ? newParentScope.us.id : null;\n          newStatusId = newParentScope.st.id;\n          if (initialContainer !== parentEl) {\n            $(parentEl).addClass('new');\n            $(parentEl).one('animationend', function() {\n              return $(parentEl).removeClass('new');\n            });\n          }\n          if (newStatusId !== oldStatusId || newUsId !== oldUsId) {\n            deleteElement(itemEl);\n          }\n          return $scope.$apply(function() {\n            var tableBody;\n            tableBody = $('.taskboard-table-body');\n            tableBody.addClass('moving');\n            setTimeout(function() {\n              return tableBody.removeClass('moving');\n            }, 1000);\n            return $rootscope.$broadcast(\"taskboard:task:move\", itemTask, itemTask.getIn(['model', 'status']), newUsId, newStatusId, itemIndex);\n          });\n        });\n        scroll = autoScroll([$('.taskboard-table-body')[0]], {\n          margin: 100,\n          pixels: 30,\n          scrollWhenOutside: true,\n          autoScroll: function() {\n            return this.down && drake.dragging;\n          }\n        });\n        return $scope.$on(\"$destroy\", function() {\n          $el.off();\n          return drake.destroy();\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgTaskboardSortable\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"$translate\", TaskboardSortableDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TaskboardIssuesService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  TaskboardIssuesService = (function(superClass) {\n    extend(TaskboardIssuesService, superClass);\n\n    TaskboardIssuesService.$inject = [];\n\n    function TaskboardIssuesService() {\n      this.reset();\n    }\n\n    TaskboardIssuesService.prototype.reset = function() {\n      this.foldStatusChanged = {};\n      return this.issuesRaw = [];\n    };\n\n    TaskboardIssuesService.prototype.init = function(project, usersById, issueStatusById) {\n      this.issueStatusById = issueStatusById;\n      this.project = project;\n      return this.usersById = usersById;\n    };\n\n    TaskboardIssuesService.prototype.resetFolds = function() {\n      this.foldStatusChanged = {};\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.toggleFold = function(issueId) {\n      this.foldStatusChanged[issueId] = !this.foldStatusChanged[issueId];\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.add = function(issue) {\n      this.issuesRaw = this.issuesRaw.concat(issue);\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.remove = function(issue) {\n      var item, key, ref;\n      ref = this.issuesRaw;\n      for (key in ref) {\n        item = ref[key];\n        if (issue.id === item.id) {\n          this.issuesRaw.splice(key, 1);\n          this.refresh();\n          return;\n        }\n      }\n    };\n\n    TaskboardIssuesService.prototype.set = function(issues) {\n      this.issuesRaw = issues;\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.getIssue = function(id) {\n      return this.milestoneIssues.find(function(issue) {\n        return issue.get('id') === id;\n      });\n    };\n\n    TaskboardIssuesService.prototype.getIssueModel = function(id) {\n      return _.find(this.issuesRaw, function(issue) {\n        return issue.id === id;\n      });\n    };\n\n    TaskboardIssuesService.prototype.replaceModel = function(issue) {\n      this.issuesRaw = _.map(this.issuesRaw, function(item) {\n        if (issue.id === item.id) {\n          return issue;\n        } else {\n          return item;\n        }\n      });\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.refresh = function() {\n      var i, issue, issueModel, issues, len, ref;\n      issues = [];\n      ref = this.issuesRaw;\n      for (i = 0, len = ref.length; i < len; i++) {\n        issueModel = ref[i];\n        issue = {};\n        issue.foldStatusChanged = this.foldStatusChanged[issueModel.id];\n        issue.model = issueModel.getAttrs();\n        issue.modelName = issueModel.getName();\n        issue.id = issueModel.id;\n        issue.status = this.issueStatusById[issueModel.status];\n        issue.images = _.filter(issue.model.attachments, function(it) {\n          return !!it.thumbnail_card_url;\n        });\n        issue.assigned_to = this.usersById[issueModel.assigned_to];\n        issue.colorized_tags = _.map(issue.model.tags, function(tag) {\n          return {\n            name: tag[0],\n            color: tag[1]\n          };\n        });\n        issues.push(issue);\n      }\n      return this.milestoneIssues = Immutable.fromJS(issues);\n    };\n\n    return TaskboardIssuesService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaKanban\").service(\"tgTaskboardIssues\", TaskboardIssuesService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TaskboardTasksService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  TaskboardTasksService = (function(superClass) {\n    extend(TaskboardTasksService, superClass);\n\n    TaskboardTasksService.$inject = [];\n\n    function TaskboardTasksService() {\n      this.reset();\n    }\n\n    TaskboardTasksService.prototype.reset = function() {\n      this.tasksRaw = [];\n      this.foldStatusChanged = {};\n      this.usTasks = Immutable.Map();\n      this.tasksByUs = Immutable.Map();\n      return this.taskMap = Immutable.Map();\n    };\n\n    TaskboardTasksService.prototype.init = function(project, usersById) {\n      this.project = project;\n      return this.usersById = usersById;\n    };\n\n    TaskboardTasksService.prototype.resetFolds = function() {\n      this.foldStatusChanged = {};\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.toggleFold = function(taskId) {\n      this.foldStatusChanged[taskId] = !this.foldStatusChanged[taskId];\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.add = function(task) {\n      this.tasksRaw = this.tasksRaw.concat(task);\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.set = function(tasks) {\n      this.tasksRaw = tasks;\n      this.refreshRawOrder();\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.setUserstories = function(userstories) {\n      return this.userstories = userstories;\n    };\n\n    TaskboardTasksService.prototype.refreshRawOrder = function() {\n      var i, len, ref, results, task;\n      this.order = {};\n      ref = this.tasksRaw;\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        task = ref[i];\n        results.push(this.order[task.id] = task.taskboard_order);\n      }\n      return results;\n    };\n\n    TaskboardTasksService.prototype.assignOrders = function(order) {\n      order = _.invert(order);\n      this.order = _.assign(this.order, order);\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.getTask = function(id) {\n      return this.taskMap.get(id);\n    };\n\n    TaskboardTasksService.prototype.replace = function(task) {\n      return this.taskMap = this.taskMap.set(task.get('id'), task);\n    };\n\n    TaskboardTasksService.prototype.getTaskModel = function(id) {\n      return _.find(this.tasksRaw, function(task) {\n        return task.id === id;\n      });\n    };\n\n    TaskboardTasksService.prototype.replaceModel = function(task) {\n      this.tasksRaw = _.map(this.tasksRaw, function(it) {\n        if (task.id === it.id) {\n          return task;\n        } else {\n          return it;\n        }\n      });\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.move = function(id, usId, statusId, index) {\n      var afterDestination, beforeDestination, i, it, j, key, len, len1, previous, previousWithTheSameOrder, setOrders, taksWithoutMoved, task, taskByUsStatus;\n      task = this.getTaskModel(id);\n      taskByUsStatus = _.filter(this.tasksRaw, (function(_this) {\n        return function(task) {\n          return task.status === statusId && task.user_story === usId;\n        };\n      })(this));\n      taskByUsStatus = _.sortBy(taskByUsStatus, (function(_this) {\n        return function(it) {\n          return _this.order[it.id];\n        };\n      })(this));\n      taksWithoutMoved = _.filter(taskByUsStatus, (function(_this) {\n        return function(it) {\n          return it.id !== id;\n        };\n      })(this));\n      beforeDestination = _.slice(taksWithoutMoved, 0, index);\n      afterDestination = _.slice(taksWithoutMoved, index);\n      setOrders = {};\n      previous = beforeDestination[beforeDestination.length - 1];\n      previousWithTheSameOrder = _.filter(beforeDestination, (function(_this) {\n        return function(it) {\n          return _this.order[it.id] === _this.order[previous.id];\n        };\n      })(this));\n      if (previousWithTheSameOrder.length > 1) {\n        for (i = 0, len = previousWithTheSameOrder.length; i < len; i++) {\n          it = previousWithTheSameOrder[i];\n          setOrders[it.id] = this.order[it.id];\n        }\n      }\n      if (!previous) {\n        this.order[task.id] = 0;\n      } else if (previous) {\n        this.order[task.id] = this.order[previous.id] + 1;\n      }\n      for (key = j = 0, len1 = afterDestination.length; j < len1; key = ++j) {\n        it = afterDestination[key];\n        this.order[it.id] = this.order[task.id] + key + 1;\n      }\n      task.status = statusId;\n      task.user_story = usId;\n      task.taskboard_order = this.order[task.id];\n      this.refresh();\n      return {\n        \"task_id\": task.id,\n        \"order\": this.order[task.id],\n        \"set_orders\": setOrders\n      };\n    };\n\n    TaskboardTasksService.prototype.refresh = function() {\n      var i, j, k, len, len1, len2, model, ref, status, task, taskModel, taskStatusList, tasks, us, usTasks;\n      if (!this.project) {\n        return;\n      }\n      this.tasksRaw = _.sortBy(this.tasksRaw, (function(_this) {\n        return function(it) {\n          return _this.order[it.id];\n        };\n      })(this));\n      tasks = this.tasksRaw;\n      taskStatusList = _.sortBy(this.project.task_statuses, \"order\");\n      usTasks = {};\n      ref = _.union(this.userstories, [\n        {\n          id: null\n        }\n      ]);\n      for (i = 0, len = ref.length; i < len; i++) {\n        us = ref[i];\n        usTasks[us.id] = {};\n        for (j = 0, len1 = taskStatusList.length; j < len1; j++) {\n          status = taskStatusList[j];\n          usTasks[us.id][status.id] = [];\n        }\n      }\n      for (k = 0, len2 = tasks.length; k < len2; k++) {\n        taskModel = tasks[k];\n        if ((usTasks[taskModel.user_story] != null) && (usTasks[taskModel.user_story][taskModel.status] != null)) {\n          task = {};\n          if (!this.tasksByUs.get(taskModel.user_story)) {\n            this.tasksByUs = this.tasksByUs.set(taskModel.user_story, Immutable.fromJS([taskModel.id]));\n          } else {\n            this.tasksByUs = this.tasksByUs.set(taskModel.user_story, this.tasksByUs.get(taskModel.user_story).push(taskModel.id));\n          }\n          model = taskModel.getAttrs();\n          task.foldStatusChanged = this.foldStatusChanged[taskModel.id];\n          task.model = model;\n          task.images = _.filter(model.attachments, function(it) {\n            return !!it.thumbnail_card_url;\n          });\n          task.id = taskModel.id;\n          task.assigned_to = this.usersById[taskModel.assigned_to];\n          task.colorized_tags = _.map(task.model.tags, (function(_this) {\n            return function(tag) {\n              return {\n                name: tag[0],\n                color: tag[1]\n              };\n            };\n          })(this));\n          this.taskMap = this.taskMap.set(task.id, Immutable.fromJS(task));\n          usTasks[taskModel.user_story][taskModel.status].push(task.id);\n        }\n      }\n      return this.usTasks = Immutable.fromJS(usTasks);\n    };\n\n    return TaskboardTasksService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaKanban\").service(\"tgTaskboardTasks\", TaskboardTasksService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var KanbanUserstoriesService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  KanbanUserstoriesService = (function(superClass) {\n    extend(KanbanUserstoriesService, superClass);\n\n    KanbanUserstoriesService.$inject = [\"$translate\"];\n\n    function KanbanUserstoriesService(translate) {\n      this.translate = translate;\n      this.reset();\n    }\n\n    KanbanUserstoriesService.prototype.reset = function(resetSwimlanesList, resetArchivedStatus, resetHideStatud) {\n      if (resetSwimlanesList == null) {\n        resetSwimlanesList = true;\n      }\n      if (resetArchivedStatus == null) {\n        resetArchivedStatus = true;\n      }\n      if (resetHideStatud == null) {\n        resetHideStatud = true;\n      }\n      this.userstoriesRaw = [];\n      this.swimlanes = [];\n      this.foldStatusChanged = {};\n      this.usByStatus = Immutable.Map();\n      this.usMap = Immutable.Map();\n      this.usByStatusSwimlanes = Immutable.Map();\n      if (resetHideStatud) {\n        this.statusHide = [];\n      }\n      if (resetArchivedStatus) {\n        this.archivedStatus = [];\n      }\n      if (resetSwimlanesList) {\n        return this.swimlanesList = Immutable.List();\n      }\n    };\n\n    KanbanUserstoriesService.prototype.init = function(project, swimlanes, usersById) {\n      this.project = project;\n      this.swimlanes = swimlanes;\n      return this.usersById = usersById;\n    };\n\n    KanbanUserstoriesService.prototype.resetFolds = function() {\n      return this.foldStatusChanged = {};\n    };\n\n    KanbanUserstoriesService.prototype.toggleFold = function(usId) {\n      this.foldStatusChanged[usId] = !this.foldStatusChanged[usId];\n      return this.refreshUserStory(usId);\n    };\n\n    KanbanUserstoriesService.prototype.set = function(userstories) {\n      this.userstoriesRaw = userstories;\n      this.refreshRawOrder();\n      return this.refresh();\n    };\n\n    KanbanUserstoriesService.prototype.initUsByStatusList = function(userstories) {\n      var key, results, status, usModel;\n      results = [];\n      for (key in userstories) {\n        usModel = userstories[key];\n        status = String(usModel.status);\n        if (!this.usByStatus.has(status)) {\n          results.push(this.usByStatus = this.usByStatus.set(status, Immutable.List()));\n        } else {\n          results.push(void 0);\n        }\n      }\n      return results;\n    };\n\n    KanbanUserstoriesService.prototype.remove = function(usModel) {\n      var status;\n      this.userstoriesRaw = this.userstoriesRaw.filter((function(_this) {\n        return function(it) {\n          return it.id !== usModel.id;\n        };\n      })(this));\n      delete this.order[usModel.id];\n      status = String(usModel.status);\n      this.usMap = this.usMap[\"delete\"](usModel.id);\n      this.usByStatus = this.usByStatus.set(status, this.usByStatus.get(status).filter((function(_this) {\n        return function(id) {\n          return id !== usModel.id;\n        };\n      })(this)));\n      return this.refreshSwimlanes();\n    };\n\n    KanbanUserstoriesService.prototype.add = function(usList) {\n      var key, status, us, usModel;\n      if (!Array.isArray(usList)) {\n        usList = [usList];\n      }\n      usList = _.sortBy(usList, ['kanban_order']);\n      this.userstoriesRaw = this.userstoriesRaw.filter((function(_this) {\n        return function(us) {\n          return !usList.find(function(it) {\n            return it.id === us.id;\n          });\n        };\n      })(this));\n      this.userstoriesRaw = this.userstoriesRaw.concat(usList);\n      this.userstoriesRaw = this.userstoriesRaw.map((function(_this) {\n        return function(us) {\n          return us;\n        };\n      })(this));\n      this.refreshRawOrder();\n      this.userstoriesRaw = _.sortBy(this.userstoriesRaw, [\n        (function(_this) {\n          return function(it) {\n            return _this.order[it.id];\n          };\n        })(this)\n      ]);\n      for (key in usList) {\n        usModel = usList[key];\n        us = this.retrieveUserStoryData(usModel);\n        status = String(usModel.status);\n        if (!this.usByStatus.has(status)) {\n          this.usByStatus = this.usByStatus.set(status, Immutable.List());\n        }\n        if (!this.usMap.get(usModel.id)) {\n          this.usMap = this.usMap.set(usModel.id, Immutable.fromJS(us));\n          this.usByStatus = this.usByStatus.set(status, this.usByStatus.get(status).filter((function(_this) {\n            return function(id) {\n              return id !== usModel.id;\n            };\n          })(this)).push(usModel.id));\n        }\n      }\n      return this.refreshSwimlanes();\n    };\n\n    KanbanUserstoriesService.prototype.addArchivedStatus = function(statusId) {\n      return this.archivedStatus.push(statusId);\n    };\n\n    KanbanUserstoriesService.prototype.isUsInArchivedHiddenStatus = function(usId) {\n      var status, us;\n      us = this.usMap.get(usId);\n      status = us != null ? us.getIn(['model', 'status']) : void 0;\n      return this.archivedStatus.indexOf(status) !== -1 && this.statusHide.indexOf(status) !== -1;\n    };\n\n    KanbanUserstoriesService.prototype.hideStatus = function(statusId) {\n      this.deleteStatus(statusId);\n      return this.statusHide.push(statusId);\n    };\n\n    KanbanUserstoriesService.prototype.showStatus = function(statusId) {\n      return _.remove(this.statusHide, function(it) {\n        return it === statusId;\n      });\n    };\n\n    KanbanUserstoriesService.prototype.getStatus = function(statusId, swimlaneId) {\n      return _.filter(this.userstoriesRaw, (function(_this) {\n        return function(it) {\n          return it.status === statusId && (!swimlaneId || it.swimlane === swimlaneId);\n        };\n      })(this));\n    };\n\n    KanbanUserstoriesService.prototype.deleteStatus = function(statusId) {\n      var toDelete;\n      toDelete = _.filter(this.userstoriesRaw, function(us) {\n        return us.status === statusId;\n      });\n      toDelete = _.map(function(it) {\n        return it.id;\n      });\n      return this.archived = _.difference(this.archived, toDelete);\n    };\n\n    KanbanUserstoriesService.prototype.refreshRawOrder = function() {\n      var i, it, len, ref, results;\n      this.order = {};\n      if (this.userstoriesRaw) {\n        ref = this.userstoriesRaw;\n        results = [];\n        for (i = 0, len = ref.length; i < len; i++) {\n          it = ref[i];\n          results.push(this.order[it.id] = it.kanban_order);\n        }\n        return results;\n      }\n    };\n\n    KanbanUserstoriesService.prototype.assignOrders = function(order) {\n      this.order = _.assign(this.order, order);\n      return this.refresh(false);\n    };\n\n    KanbanUserstoriesService.prototype.move = function(usList, statusId, swimlaneId, index, previousCard, nextCard) {\n      var afterDestination, i, initialLength, j, key, len, len1, previousUsIndex, previousUsOrder, us, usByStatus, usByStatusWithoutMoved, usId, usModel;\n      usByStatus = this.getStatus(statusId, swimlaneId);\n      usByStatus = _.sortBy(usByStatus, [\n        (function(_this) {\n          return function(it) {\n            return _this.order[it.id];\n          };\n        })(this)\n      ]);\n      if (previousCard) {\n        previousUsOrder = this.order[previousCard] + 1;\n        previousUsIndex = (usByStatus.findIndex((function(_this) {\n          return function(it) {\n            return it.id === previousCard;\n          };\n        })(this))) + 1;\n      } else {\n        previousUsOrder = 0;\n        previousUsIndex = 0;\n      }\n      usByStatusWithoutMoved = _.filter(usByStatus, function(listIt) {\n        return !_.find(usList, function(moveIt) {\n          return listIt.id === moveIt;\n        });\n      });\n      afterDestination = _.slice(usByStatusWithoutMoved, previousUsIndex);\n      initialLength = usList.length + 1;\n      for (key = i = 0, len = afterDestination.length; i < len; key = ++i) {\n        usModel = afterDestination[key];\n        this.order[usModel.id] = previousUsOrder + initialLength + key;\n      }\n      for (key = j = 0, len1 = usList.length; j < len1; key = ++j) {\n        usId = usList[key];\n        usModel = this.getUsModel(usId);\n        usModel.status = statusId;\n        usModel.swimlane = swimlaneId;\n        this.order[usModel.id] = previousUsOrder + key;\n        us = this.retrieveUserStoryData(usModel);\n        this.usMap = this.usMap.set(us.id, Immutable.fromJS(us));\n      }\n      this.refresh(false);\n      return {\n        statusId: statusId,\n        swimlaneId: swimlaneId,\n        afterUserstoryId: previousCard,\n        beforeUserstoryId: nextCard,\n        bulkUserstories: usList\n      };\n    };\n\n    KanbanUserstoriesService.prototype.moveToEnd = function(id, statusId) {\n      var us;\n      us = this.getUsModel(id);\n      this.order[us.id] = -1;\n      us.status = statusId;\n      us.kanban_order = this.order[us.id];\n      this.refresh(false);\n      return {\n        \"us_id\": us.id,\n        \"order\": -1\n      };\n    };\n\n    KanbanUserstoriesService.prototype.replace = function(us) {\n      return this.usMap = this.usMap.set(us.get('id'), us);\n    };\n\n    KanbanUserstoriesService.prototype.replaceModel = function(usModel) {\n      var us;\n      this.userstoriesRaw = _.map(this.userstoriesRaw, function(usItem) {\n        if (usModel.id === usItem.id) {\n          return usModel;\n        } else {\n          return usItem;\n        }\n      });\n      us = this.retrieveUserStoryData(usModel);\n      return this.usMap = this.usMap.set(usModel.id, Immutable.fromJS(us));\n    };\n\n    KanbanUserstoriesService.prototype.getUs = function(id) {\n      return this.usMap.get(id);\n    };\n\n    KanbanUserstoriesService.prototype.getUsModel = function(id) {\n      return _.find(this.userstoriesRaw, function(us) {\n        return us.id === id;\n      });\n    };\n\n    KanbanUserstoriesService.prototype.refreshUserStory = function(usId) {\n      var us, usModel;\n      usModel = this.getUsModel(usId);\n      us = this.retrieveUserStoryData(usModel);\n      return this.usMap = this.usMap.set(usId, Immutable.fromJS(us));\n    };\n\n    KanbanUserstoriesService.prototype.retrieveUserStoryData = function(usModel) {\n      var model, us;\n      us = {};\n      model = usModel.getAttrs();\n      us.foldStatusChanged = this.foldStatusChanged[usModel.id];\n      us.model = model;\n      us.images = _.filter(model.attachments, function(it) {\n        return !!it.thumbnail_card_url;\n      });\n      us.id = usModel.id;\n      us.swimlane = usModel.swimlane;\n      us.assigned_to = this.usersById[usModel.assigned_to];\n      us.assigned_users = [];\n      usModel.assigned_users.forEach((function(_this) {\n        return function(assignedUserId) {\n          var assignedUserData;\n          assignedUserData = _this.usersById[assignedUserId];\n          if (assignedUserData) {\n            return us.assigned_users.push(assignedUserData);\n          }\n        };\n      })(this));\n      us.assigned_users_preview = us.assigned_users.slice(0, 3);\n      us.colorized_tags = _.map(us.model.tags, (function(_this) {\n        return function(tag) {\n          return {\n            name: tag[0],\n            color: tag[1]\n          };\n        };\n      })(this));\n      return us;\n    };\n\n    KanbanUserstoriesService.prototype.refresh = function(refreshUsMap, refreshSwimlanes) {\n      var collection, key, ref, us, usModel;\n      if (refreshUsMap == null) {\n        refreshUsMap = true;\n      }\n      if (refreshSwimlanes == null) {\n        refreshSwimlanes = true;\n      }\n      this.userstoriesRaw = _.sortBy(this.userstoriesRaw, [\n        (function(_this) {\n          return function(it) {\n            return _this.order[it.id];\n          };\n        })(this)\n      ]);\n      collection = {};\n      ref = this.userstoriesRaw;\n      for (key in ref) {\n        usModel = ref[key];\n        us = this.retrieveUserStoryData(usModel);\n        if (!collection[usModel.status]) {\n          collection[usModel.status] = [];\n        }\n        collection[usModel.status] = collection[usModel.status].filter((function(_this) {\n          return function(id) {\n            return id !== usModel.id;\n          };\n        })(this));\n        collection[usModel.status].push(usModel.id);\n        if (refreshUsMap) {\n          this.usMap = this.usMap.set(usModel.id, Immutable.fromJS(us));\n        }\n      }\n      this.usByStatus = Immutable.fromJS(collection);\n      if (refreshSwimlanes) {\n        return this.refreshSwimlanes();\n      }\n    };\n\n    KanbanUserstoriesService.prototype.refreshSwimlanes = function() {\n      var emptySwimlane, emptySwimlaneExists, userstoriesNoSwimlane;\n      if (!this.swimlanes || !this.swimlanes.length) {\n        return;\n      }\n      this.swimlanesList = Immutable.List();\n      this.usByStatusSwimlanes = Immutable.Map();\n      userstoriesNoSwimlane = this.userstoriesRaw.filter((function(_this) {\n        return function(us) {\n          return us.swimlane === null;\n        };\n      })(this));\n      emptySwimlaneExists = this.swimlanesList.filter((function(_this) {\n        return function(swimlane) {\n          return swimlane.id === null;\n        };\n      })(this));\n      if (userstoriesNoSwimlane.length && !emptySwimlaneExists.size) {\n        this.swimlanes.forEach((function(_this) {\n          return function(swimlane) {\n            if (!_this.swimlanesList.includes(swimlane)) {\n              return _this.swimlanesList = _this.swimlanesList.push(swimlane);\n            }\n          };\n        })(this));\n        emptySwimlane = {\n          id: -1,\n          kanban_order: 1,\n          name: this.translate.instant(\"KANBAN.UNCLASSIFIED_USER_STORIES\")\n        };\n        this.swimlanesList = this.swimlanesList.insert(0, emptySwimlane);\n      } else {\n        this.swimlanes.forEach((function(_this) {\n          return function(swimlane) {\n            if (!_this.swimlanesList.includes(swimlane)) {\n              return _this.swimlanesList = _this.swimlanesList.push(swimlane);\n            }\n          };\n        })(this));\n      }\n      return this.swimlanesList.forEach((function(_this) {\n        return function(swimlane) {\n          var swimlaneUsByStatus;\n          swimlaneUsByStatus = Immutable.Map();\n          _this.usByStatus.forEach(function(usList, statusId) {\n            var usListSwimlanes;\n            usListSwimlanes = usList.filter(function(usId) {\n              var swimlaneId, us;\n              us = _this.usMap.get(usId);\n              swimlaneId = swimlane.id === -1 ? null : swimlane.id;\n              return us.getIn(['model', 'swimlane']) === swimlaneId;\n            });\n            return swimlaneUsByStatus = swimlaneUsByStatus.set(Number(statusId), usListSwimlanes);\n          });\n          return _this.usByStatusSwimlanes = _this.usByStatusSwimlanes.set(swimlane.id, swimlaneUsByStatus);\n        };\n      })(this));\n    };\n\n    return KanbanUserstoriesService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaKanban\").service(\"tgKanbanUserstories\", KanbanUserstoriesService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CardActionsDirective, CardAssignedToDirective, CardDataDirective, CardSvgTemplate, KanbanArchivedShowStatusHeaderDirective, KanbanArchivedStatusIntroDirective, KanbanController, KanbanDirective, KanbanSquishColumnDirective, KanbanSwimlaneDirective, KanbanTaskboardColumnDirective, KanbanWipLimitDirective, bindMethods, bindOnce, debounceLeading, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  module = angular.module(\"taigaKanban\");\n\n  KanbanController = (function(superClass) {\n    extend(KanbanController, superClass);\n\n    KanbanController.prototype.excludeFilters = [\"status\"];\n\n    KanbanController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"$tgModel\", \"tgKanbanUserstories\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgProjectService\", \"tgLightboxFactory\", \"tgLoader\", \"$timeout\"];\n\n    KanbanController.prototype.storeCustomFiltersName = 'kanban-custom-filters';\n\n    KanbanController.prototype.storeFiltersName = 'kanban-filters';\n\n    KanbanController.prototype.validQueryParams = ['exclude_tags', 'tags', 'exclude_assigned_users', 'assigned_users', 'exclude_role', 'role', 'exclude_epic', 'epic', 'exclude_owner', 'owner'];\n\n    function KanbanController(scope, rootscope, repo, confirm, rs1, rs2, params1, q, location, appMetaService, navUrls, events, analytics, translate, errorHandlingService, model1, kanbanUserstoriesService1, storage, filterRemoteStorageService, projectService1, lightboxFactory, tgLoader, timeout1) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs1;\n      this.rs2 = rs2;\n      this.params = params1;\n      this.q = q;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.model = model1;\n      this.kanbanUserstoriesService = kanbanUserstoriesService1;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.projectService = projectService1;\n      this.lightboxFactory = lightboxFactory;\n      this.tgLoader = tgLoader;\n      this.timeout = timeout1;\n      this.renderUserStories = bind(this.renderUserStories, this);\n      this.changeUsAssignedUsers = bind(this.changeUsAssignedUsers, this);\n      bindMethods(this);\n      this.kanbanUserstoriesService.reset();\n      this.openFilter = false;\n      this.selectedUss = {};\n      this.movedUs = [];\n      this.foldedSwimlane = Immutable.Map();\n      this.isFirstLoad = true;\n      this.renderBatching = true;\n      this.isLightboxOpened = false;\n      this.isRefreshNeeded = false;\n      if (this.applyStoredFilters(this.params.pslug, \"kanban-filters\", this.validQueryParams)) {\n        return;\n      }\n      this.scope.sectionName = this.translate.instant(\"KANBAN.SECTION_NAME\");\n      this.initializeEventHandlers();\n      taiga.defineImmutableProperty(this.scope, \"usByStatus\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.usByStatus;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"usMap\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.usMap;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"usByStatusSwimlanes\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.usByStatusSwimlanes;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"swimlanesList\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.swimlanesList;\n        };\n      })(this));\n    }\n\n    KanbanController.prototype.cleanSelectedUss = function() {\n      var key, results;\n      results = [];\n      for (key in this.selectedUss) {\n        results.push(this.selectedUss[key] = false);\n      }\n      return results;\n    };\n\n    KanbanController.prototype.toggleSelectedUs = function(usId) {\n      return this.selectedUss[usId] = !this.selectedUss[usId];\n    };\n\n    KanbanController.prototype.firstLoad = function() {\n      var promise;\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"KANBAN.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"KANBAN.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      return promise.then(null, this.onInitialDataError.bind(this));\n    };\n\n    KanbanController.prototype.setZoom = function(zoomLevel, zoom) {\n      var previousZoomLevel;\n      zoomLevel = Number(zoomLevel);\n      if (this.zoomLevel === zoomLevel) {\n        return null;\n      }\n      previousZoomLevel = this.zoomLevel;\n      this.zoomLevel = zoomLevel;\n      this.zoom = zoom;\n      if (this.isFirstLoad) {\n        return this.firstLoad().then((function(_this) {\n          return function() {\n            _this.isFirstLoad = false;\n            return _this.kanbanUserstoriesService.resetFolds();\n          };\n        })(this));\n      } else if (this.zoomLevel > 2 && previousZoomLevel <= 2) {\n        this.zoomLoading = true;\n        return this.loadUserstories().then((function(_this) {\n          return function() {\n            _this.zoomLoading = false;\n            return _this.kanbanUserstoriesService.resetFolds();\n          };\n        })(this));\n      }\n    };\n\n    KanbanController.prototype.filtersReloadContent = debounceLeading(100, function() {\n      return this.loadUserstories().then((function(_this) {\n        return function(result) {\n          if (!result) {\n            return;\n          }\n          if (_this.scope.swimlanesList.size && !result.length) {\n            return _this.foldedSwimlane = _this.foldedSwimlane.set(_this.scope.swimlanesList.first().id.toString(), false);\n          }\n        };\n      })(this));\n    });\n\n    KanbanController.prototype.moveToTopDropdown = function(us) {\n      return this.moveUsToTop(us.toJS().model);\n    };\n\n    KanbanController.prototype.moveUsToTop = function(uss) {\n      var nextUsId, us, userstories;\n      if (!Array.isArray(uss)) {\n        uss = [uss];\n      }\n      us = uss[0];\n      nextUsId = null;\n      userstories = [];\n      this.movedUs.push(us.id);\n      this.timeout((function(_this) {\n        return function() {\n          return _this.movedUs = [];\n        };\n      })(this), 1000, false);\n      if (us.swimlane) {\n        userstories = this.scope.usByStatusSwimlanes.getIn([us.swimlane, us.status]);\n      } else {\n        userstories = this.scope.usByStatus.get(us.status.toString());\n      }\n      if (userstories && userstories.size) {\n        nextUsId = userstories.get(0);\n      }\n      if (nextUsId) {\n        return this.moveUs(null, uss, us.status, us.swimlane, 0, null, nextUsId);\n      }\n    };\n\n    KanbanController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"usform:new:success\", (function(_this) {\n        return function(event, us, position) {\n          if (position == null) {\n            position = 'bottom';\n          }\n          _this.refreshTagsColors().then(function() {\n            _this.kanbanUserstoriesService.add(us);\n            _this.scope.$broadcast(\"redraw:wip\");\n            if (position === 'top') {\n              return _this.moveUsToTop(us);\n            }\n          });\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"create userstory on kanban\", 1);\n        };\n      })(this));\n      this.scope.$on(\"usform:bulk:success\", (function(_this) {\n        return function(event, uss, position) {\n          if (position == null) {\n            position = 'bottom';\n          }\n          _this.confirm.notify(\"success\");\n          _this.refreshTagsColors().then(function() {\n            _this.kanbanUserstoriesService.add(uss);\n            _this.scope.$broadcast(\"redraw:wip\");\n            if (position === 'top') {\n              return _this.moveUsToTop(uss);\n            }\n          });\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"bulk create userstory on kanban\", 1);\n        };\n      })(this));\n      this.scope.$on(\"usform:edit:success\", (function(_this) {\n        return function(event, us) {\n          return _this.refreshTagsColors().then(function() {\n            var lastUsId, newOrder, oldStatus, status;\n            oldStatus = _this.kanbanUserstoriesService.getUsModel(us.id).status;\n            if (oldStatus !== us.status) {\n              status = _this.scope.usByStatus.get(us.status.toString());\n              if (status) {\n                lastUsId = status.last();\n                newOrder = _this.scope.usMap.get(lastUsId).getIn(['model', 'kanban_order']) + 1;\n                us.kanban_order = newOrder;\n              }\n            }\n            _this.kanbanUserstoriesService.replaceModel(us);\n            _this.kanbanUserstoriesService.refreshRawOrder();\n            return _this.kanbanUserstoriesService.refresh(false);\n          });\n        };\n      })(this));\n      this.scope.$on(\"kanban:us:deleted\", (function(_this) {\n        return function(event, us) {\n          return _this.kanbanUserstoriesService.remove(us);\n        };\n      })(this));\n      this.scope.$on(\"kanban:us:move\", this.moveUs);\n      this.scope.$on(\"kanban:show-userstories-for-status\", this.loadUserStoriesForStatus);\n      this.scope.$on(\"kanban:hide-userstories-for-status\", this.hideUserStoriesForStatus);\n      this.scope.$on(\"lightbox:opened\", (function(_this) {\n        return function() {\n          return _this.isLightboxOpened = true;\n        };\n      })(this));\n      return this.scope.$on(\"lightbox:closed\", (function(_this) {\n        return function() {\n          _this.isLightboxOpened = false;\n          if (_this.isRefreshNeeded) {\n            _this.refreshAfterSwimlanesOrUserstoryStatusesHaveChanged();\n            return _this.isRefreshNeeded = false;\n          }\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.refreshAfterSwimlanesOrUserstoryStatusesHaveChanged = function() {\n      this.tgLoader.start();\n      return this.projectService.fetchProject().then((function(_this) {\n        return function() {\n          return _this.loadInitialData();\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.initializeSubscription = function() {\n      var randomTimeout, routingKeyProject, routingKeyUserstories;\n      randomTimeout = taiga.randomInt(700, 1000);\n      routingKeyUserstories = \"changes.project.\" + this.scope.projectId + \".userstories\";\n      this.events.subscribe(this.scope, routingKeyUserstories, debounceLeading(randomTimeout, (function(_this) {\n        return function(message) {\n          return _this.eventsLoadUserstories(message);\n        };\n      })(this)));\n      routingKeyProject = \"changes.project.\" + this.scope.projectId + \".projects\";\n      return this.events.subscribe(this.scope, routingKeyProject, debounceLeading(randomTimeout, (function(_this) {\n        return function(message) {\n          var ref;\n          if ((ref = message.matches) === \"projects.swimlane\" || ref === \"projects.swimlaneuserstorystatus\" || ref === \"projects.userstorystatus\") {\n            if (_this.isLightboxOpened) {\n              return _this.isRefreshNeeded = true;\n            } else {\n              return _this.refreshAfterSwimlanesOrUserstoryStatusesHaveChanged();\n            }\n          }\n        };\n      })(this)));\n    };\n\n    KanbanController.prototype.addNewUs = function(type, statusId) {\n      var swimlane;\n      swimlane = null;\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new\", {\n            'objType': 'us',\n            'project': this.scope.project,\n            'statusId': statusId,\n            'swimlane': swimlane\n          });\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"usform:bulk\", this.scope.projectId, statusId, swimlane);\n      }\n    };\n\n    KanbanController.prototype.editUs = function(id) {\n      var us;\n      us = this.kanbanUserstoriesService.getUs(id);\n      us = us.set('loading-edit', true);\n      this.kanbanUserstoriesService.replace(us);\n      return this.rs.userstories.getByRef(us.getIn(['model', 'project']), us.getIn(['model', 'ref'])).then((function(_this) {\n        return function(editingUserStory) {\n          _this.rs2.attachments.list(\"us\", us.get('id'), us.getIn(['model', 'project'])).then(function(attachments) {\n            return _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'us',\n              'obj': editingUserStory,\n              'statusList': _this.scope.usStatusList,\n              'attachments': attachments.toJS()\n            });\n          });\n          us = us.set('loading-edit', false);\n          return _this.kanbanUserstoriesService.replace(us);\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.deleteUs = function(id) {\n      var us;\n      us = this.kanbanUserstoriesService.getUs(id);\n      us = us.set('loading-delete', true);\n      return this.rs.userstories.getByRef(us.getIn(['model', 'project']), us.getIn(['model', 'ref'])).then((function(_this) {\n        return function(deletingUserStory) {\n          var message, title;\n          us = us.set('loading-delete', false);\n          title = _this.translate.instant(\"US.TITLE_DELETE_ACTION\");\n          message = deletingUserStory.subject;\n          return _this.confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = _this.repo.remove(deletingUserStory);\n            promise.then(function() {\n              var model;\n              model = us.toJS().model;\n              _this.scope.$broadcast(\"kanban:us:deleted\", model);\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.showPlaceHolder = function(statusId, swimlaneId) {\n      var firstStatus, firstSwimlane;\n      firstStatus = this.scope.usStatusList[0].id === statusId && !this.kanbanUserstoriesService.userstoriesRaw.length;\n      if (swimlaneId) {\n        firstSwimlane = this.scope.swimlanesList.first().id === swimlaneId;\n        return firstStatus && firstSwimlane;\n      }\n      return firstStatus;\n    };\n\n    KanbanController.prototype.toggleFold = function(id) {\n      return this.kanbanUserstoriesService.toggleFold(id);\n    };\n\n    KanbanController.prototype.toggleSwimlane = function(id) {\n      this.foldedSwimlane = this.foldedSwimlane.set(id.toString(), !this.foldedSwimlane.get(id.toString()));\n      this.rs.kanban.storeSwimlanesModes(this.scope.projectId, this.foldedSwimlane.toJS());\n      return this.timeout((function(_this) {\n        return function() {\n          return _this.scope.$broadcast(\"redraw:wip\");\n        };\n      })(this), 100, false);\n    };\n\n    KanbanController.prototype.isUsInArchivedHiddenStatus = function(usId) {\n      return this.kanbanUserstoriesService.isUsInArchivedHiddenStatus(usId);\n    };\n\n    KanbanController.prototype.changeUsAssignedUsers = function(id) {\n      var item, onClose;\n      item = this.kanbanUserstoriesService.getUsModel(id);\n      onClose = (function(_this) {\n        return function(assignedUsersIds) {\n          var ref;\n          item.assigned_users = assignedUsersIds;\n          if ((ref = item.assigned_to, indexOf.call(assignedUsersIds, ref) < 0) && assignedUsersIds.length > 0) {\n            item.assigned_to = assignedUsersIds[0];\n          }\n          if (assignedUsersIds.length === 0) {\n            item.assigned_to = null;\n          }\n          _this.kanbanUserstoriesService.replaceModel(item);\n          return _this.repo.save(item).then(function() {\n            _this.generateFilters();\n            if (_this.isFilterDataTypeSelected('assigned_users') || _this.isFilterDataTypeSelected('role')) {\n              return _this.filtersReloadContent();\n            }\n          });\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-lb-select-user', {\n        \"class\": \"lightbox lightbox-select-user\"\n      }, {\n        \"currentUsers\": _.compact(_.union(item.assigned_users, [item.assigned_to])),\n        \"activeUsers\": this.scope.activeUsers,\n        \"onClose\": onClose,\n        \"lbTitle\": this.translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n      });\n    };\n\n    KanbanController.prototype.refreshTagsColors = function() {\n      return this.rs.projects.tagsColors(this.scope.projectId).then((function(_this) {\n        return function(tags_colors) {\n          return _this.scope.project.tags_colors = tags_colors._attrs;\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.renderBatch = function(clean) {\n      var newUs;\n      if (clean == null) {\n        clean = false;\n      }\n      this.renderInProgress = true;\n      newUs = _.take(this.queue, this.batchSize);\n      this.rendered = _.concat(this.rendered, newUs);\n      this.queue = _.drop(this.queue, this.batchSize);\n      if (clean) {\n        this.kanbanUserstoriesService.set(newUs);\n        this.batchTimings = [200, 100, 50];\n      } else {\n        this.kanbanUserstoriesService.add(newUs);\n      }\n      if (this.queue.length > 0) {\n        timeout = this.batchTimings.shift() || 20;\n        return this.timeout(this.renderBatch, timeout);\n      } else {\n        return scopeDefer(this.scope, (function(_this) {\n          return function() {\n            _this.rootscope.$broadcast(\"kanban:userstories:loaded\", _this.rendered);\n            _this.scope.$broadcast(\"userstories:loaded\", _this.rendered);\n            _this.renderInProgress = false;\n            return _this.timeout(function() {\n              return _this.scope.$broadcast(\"redraw:wip\");\n            }, 100, false);\n          };\n        })(this));\n      }\n    };\n\n    KanbanController.prototype.renderUserStories = function(userstories) {\n      var userstoriesMap;\n      userstories = _.sortBy(userstories, 'kanban_order');\n      this.kanbanUserstoriesService.initUsByStatusList(userstories);\n      if (this.renderBatching) {\n        userstoriesMap = _.groupBy(userstories, 'status');\n        this.rendered = [];\n        this.queue = [];\n        this.batchSize = 0;\n        while (this.queue.length < userstories.length) {\n          _.each(this.scope.project.us_statuses, (function(_this) {\n            return function(x) {\n              var ref;\n              if (((ref = userstoriesMap[x.id]) != null ? ref.length : void 0) > 0) {\n                _this.queue = _.concat(_this.queue, _.take(userstoriesMap[x.id], 10));\n                return userstoriesMap[x.id] = _.drop(userstoriesMap[x.id], 10);\n              }\n            };\n          })(this));\n          if (!this.batchSize) {\n            this.batchSize = 100;\n          }\n        }\n        return this.renderBatch(true);\n      } else {\n        return this.kanbanUserstoriesService.set(userstories);\n      }\n    };\n\n    KanbanController.prototype.loadUserstoriesParams = function() {\n      var locationParams, params;\n      params = {\n        status__is_archived: false\n      };\n      if (this.zoomLevel >= 2) {\n        params.include_attachments = 1;\n        params.include_tasks = 1;\n      }\n      locationParams = _.pick(_.clone(this.location.search()), this.validQueryParams);\n      params = _.merge(params, locationParams);\n      params.q = this.filterQ;\n      return params;\n    };\n\n    KanbanController.prototype.eventsLoadUserstories = function(data) {\n      var eventUserstories, modifiedUs, params;\n      eventUserstories = [];\n      if (!Array.isArray(data.pk)) {\n        eventUserstories = [data.pk];\n      } else {\n        eventUserstories = data.pk;\n      }\n      modifiedUs = eventUserstories.filter((function(_this) {\n        return function(us) {\n          return !!_this.kanbanUserstoriesService.userstoriesRaw.find(function(raw) {\n            return raw.id === us;\n          });\n        };\n      })(this));\n      params = this.loadUserstoriesParams();\n      return this.rs.userstories.listAll(this.scope.projectId, params).then((function(_this) {\n        return function(userstories) {\n          var newUss;\n          newUss = userstories.filter(function(us) {\n            return !_this.kanbanUserstoriesService.userstoriesRaw.find(function(raw) {\n              return raw.id === us.id;\n            });\n          });\n          userstories.filter(function(us) {\n            return modifiedUs.includes(us.id);\n          }).forEach(function(us) {\n            _this.kanbanUserstoriesService.replaceModel(us);\n            return _this.kanbanUserstoriesService.refreshRawOrder();\n          });\n          if (newUss.length) {\n            _this.kanbanUserstoriesService.add(newUss);\n          }\n          return _this.kanbanUserstoriesService.refresh(false);\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.loadUserstories = function() {\n      var archivedPromises, lastSearch, loadPromises, openArchived, params, promise;\n      params = this.loadUserstoriesParams();\n      this.lastSearch = this.filterQ;\n      lastSearch = this.filterQ;\n      this.lastLoadUserstoriesParams = params;\n      loadPromises = [this.rs.userstories.listAll(this.scope.projectId, params), this.loadSwimlanes()];\n      archivedPromises = [];\n      openArchived = _.difference(this.kanbanUserstoriesService.archivedStatus, this.kanbanUserstoriesService.statusHide);\n      if (openArchived.length) {\n        archivedPromises = openArchived.map((function(_this) {\n          return function(archivedStatusId) {\n            return _this.loadUserStoriesForStatus({}, archivedStatusId);\n          };\n        })(this));\n      }\n      loadPromises = loadPromises.concat(archivedPromises);\n      promise = this.q.all(loadPromises).then((function(_this) {\n        return function(result) {\n          var swimlanes, userstories;\n          if (lastSearch !== _this.lastSearch) {\n            return;\n          }\n          _this.kanbanUserstoriesService.reset(false, false, false);\n          userstories = result[0];\n          swimlanes = result[1];\n          if (result.length > 2) {\n            result.slice(2).forEach(function(archivedRedult) {\n              return userstories = userstories.concat(archivedRedult);\n            });\n          }\n          _this.notFoundUserstories = false;\n          if (!userstories.length && ((_this.filterQ && _this.filterQ.length) || Object.keys(_this.location.search()).length)) {\n            _this.notFoundUserstories = true;\n          }\n          _this.kanbanUserstoriesService.init(_this.scope.project, swimlanes, _this.scope.usersById);\n          _this.tgLoader.pageLoaded();\n          _this.renderUserStories(userstories);\n          return userstories;\n        };\n      })(this));\n      return promise;\n    };\n\n    KanbanController.prototype.loadUserStoriesForStatus = function(ctx, statusId) {\n      var filteredStatus, params;\n      filteredStatus = this.location.search().status;\n      if (filteredStatus) {\n        filteredStatus = filteredStatus.split(\",\").map(function(it) {\n          return parseInt(it, 10);\n        });\n        if (filteredStatus.indexOf(statusId) === -1) {\n          return;\n        }\n      }\n      params = {\n        status: statusId,\n        include_attachments: true,\n        include_tasks: true\n      };\n      if (this.filterQ) {\n        params.q = this.filterQ;\n      }\n      params = _.merge(params, this.location.search());\n      return this.rs.userstories.listAll(this.scope.projectId, params).then((function(_this) {\n        return function(userstories) {\n          _this.waitEmptyQuote(function() {\n            return _this.scope.$broadcast(\"kanban:shown-userstories-for-status\", statusId, userstories);\n          });\n          return userstories;\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.waitEmptyQuote = function(cb) {\n      if (this.queue.length > 0) {\n        return requestAnimationFrame((function(_this) {\n          return function() {\n            return _this.waitEmptyQuote(cb);\n          };\n        })(this));\n      } else {\n        return scopeDefer(this.scope, (function(_this) {\n          return function() {\n            return cb();\n          };\n        })(this));\n      }\n    };\n\n    KanbanController.prototype.hideUserStoriesForStatus = function(ctx, statusId) {\n      return this.scope.$broadcast(\"kanban:hidden-userstories-for-status\", statusId);\n    };\n\n    KanbanController.prototype.loadKanban = function() {\n      return this.q.all([this.refreshTagsColors(), this.loadUserstories()]);\n    };\n\n    KanbanController.prototype.loadSwimlanes = function() {\n      return this.rs.swimlanes.list(this.scope.projectId).then((function(_this) {\n        return function(swimlanes) {\n          _this.scope.swimlanes = swimlanes;\n          _this.scope.swimlanesStatuses = {};\n          _this.scope.swimlanes.forEach(function(swimlane) {\n            return _this.scope.swimlanesStatuses[swimlane.id] = swimlane.statuses;\n          });\n          _this.scope.swimlanesStatuses[-1] = _this.scope.project.us_statuses;\n          return _this.scope.swimlanes;\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_kanban_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.projectId = project.id;\n      this.scope.points = _.sortBy(project.points, \"order\");\n      this.scope.pointsById = groupBy(project.points, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusList = _.sortBy(project.us_statuses, \"order\");\n      this.scope.usCardVisibility = {};\n      this.scope.$emit(\"project:loaded\", project);\n      return project;\n    };\n\n    KanbanController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.foldedSwimlane = Immutable.fromJS(this.rs.kanban.getSwimlanesModes(project.id));\n      this.initialLoad = false;\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.initializeSubscription();\n      this.loadKanban().then((function(_this) {\n        return function() {\n          return _this.timeout(function() {\n            return _this.initialLoad = true;\n          }, 0, true);\n        };\n      })(this));\n      return this.generateFilters();\n    };\n\n    KanbanController.prototype.moveUs = function(ctx, usList, newStatusId, newSwimlaneId, index, previousCard, nextCard) {\n      var apiNewSwimlaneId, data, promise;\n      this.cleanSelectedUss();\n      usList = _.map(usList, (function(_this) {\n        return function(us) {\n          return _this.kanbanUserstoriesService.getUsModel(us.id);\n        };\n      })(this));\n      this.rootscope.$broadcast(\"kanban:userstories:loaded\", usList, newStatusId, newSwimlaneId, index);\n      apiNewSwimlaneId = newSwimlaneId;\n      if (newSwimlaneId === -1) {\n        apiNewSwimlaneId = null;\n      }\n      data = this.kanbanUserstoriesService.move(usList.map((function(_this) {\n        return function(it) {\n          return it.id;\n        };\n      })(this)), newStatusId, apiNewSwimlaneId, index, previousCard, nextCard);\n      promise = this.rs.userstories.bulkUpdateKanbanOrder(this.scope.projectId, newStatusId, apiNewSwimlaneId, data.afterUserstoryId, data.beforeUserstoryId, data.bulkUserstories);\n      return promise.then((function(_this) {\n        return function() {\n          _this.scope.$broadcast(\"redraw:wip\");\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('status')) {\n            return _this.filtersReloadContent();\n          }\n        };\n      })(this));\n    };\n\n    return KanbanController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin, taiga.UsFiltersMixin));\n\n  module.controller(\"KanbanController\", KanbanController);\n\n  KanbanDirective = function($repo, $rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var _tableBody, board, watchKanbanSize;\n      watchKanbanSize = (function(_this) {\n        return function() {\n          var columnMargin, columns, kanbanStyles, resizeCb, resizeObserver;\n          columns = $el.find(\".task-colum-name\");\n          kanbanStyles = getComputedStyle($el[0]);\n          columnMargin = Number(kanbanStyles.getPropertyValue('--kanban-column-margin').trim().replace('px', '').split(' ')[1]);\n          resizeCb = function(entries) {\n            var width;\n            width = columns.toArray().reduce(function(acc, column) {\n              if (document.body.contains(column)) {\n                return acc + column.offsetWidth + columnMargin;\n              }\n              resizeObserver.unobserve(column);\n              return acc;\n            }, 0);\n            if (width > 0) {\n              return document.body.style.setProperty('--kanban-width', (width - columnMargin) + 'px');\n            }\n          };\n          resizeObserver = new ResizeObserver(resizeCb);\n          return columns.each(function(index, column) {\n            return resizeObserver.observe(column);\n          });\n        };\n      })(this);\n      board = initBoard();\n      board.events((function(_this) {\n        return function(event, entries) {\n          var visibleEntries;\n          if (event === 'SHOW_CARD') {\n            visibleEntries = entries.filter(function(entry) {\n              return entry.visible && !$scope.usCardVisibility[entry.id];\n            });\n            if (visibleEntries.length) {\n              $scope.$evalAsync(function() {\n                return visibleEntries.forEach(function(entry) {\n                  return $scope.usCardVisibility[entry.id] = true;\n                });\n              });\n            }\n          }\n        };\n      })(this));\n      $scope.taskColumnLoaded = function(event, status, swimlane) {\n        var column;\n        column = event.target[0];\n        return board.addSwimlane(column, status, swimlane);\n      };\n      $scope.cardLoaded = function(event, status, swimlane) {\n        return board.addCard(event.target[0], status, swimlane);\n      };\n      _tableBody = null;\n      $scope.isTableLoaded = false;\n      $scope.kanbanTableLoaded = function(event, swimlaneId) {\n        var tableBody, tableHeaderDom;\n        $scope.$evalAsync((function(_this) {\n          return function() {\n            if (swimlaneId) {\n              $scope.openSwimlane(swimlaneId);\n            }\n            return $scope.isTableLoaded = true;\n          };\n        })(this));\n        tableBody = event.target;\n        _tableBody = tableBody;\n        tableHeaderDom = $el.find(\".kanban-table-header .kanban-table-inner\");\n        tableBody.on(\"scroll\", function(event) {\n          var scroll;\n          scroll = -1 * event.currentTarget.scrollLeft;\n          return tableHeaderDom.css(\"transform\", \"translateX(\" + scroll + \"px)\");\n        });\n        watchKanbanSize();\n      };\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        if (_tableBody) {\n          return _tableBody.off();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanban\", [\"$tgRepo\", \"$rootScope\", KanbanDirective]);\n\n  KanbanArchivedShowStatusHeaderDirective = function($rootscope, $translate, kanbanUserstoriesService) {\n    var link, showArchivedText;\n    showArchivedText = $translate.instant(\"KANBAN.ACTION_SHOW_ARCHIVED\");\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      unwatch = $scope.$watch('ctrl.initialLoad', (function(_this) {\n        return function(initialLoad) {\n          var status;\n          if (!initialLoad) {\n            return;\n          }\n          unwatch();\n          status = $scope.$eval($attrs.tgKanbanArchivedShowStatusHeader);\n          kanbanUserstoriesService.addArchivedStatus(status.id);\n          kanbanUserstoriesService.hideStatus(status.id);\n          return $el.on(\"click\", function(event) {\n            return $scope.$apply(function() {\n              if (kanbanUserstoriesService.statusHide.includes(status.id)) {\n                $rootscope.$broadcast(\"kanban:show-userstories-for-status\", status.id);\n                return kanbanUserstoriesService.showStatus(status.id);\n              }\n            });\n          });\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanArchivedShowStatusHeader\", [\"$rootScope\", \"$translate\", \"tgKanbanUserstories\", KanbanArchivedShowStatusHeaderDirective]);\n\n  KanbanArchivedStatusIntroDirective = function($translate, kanbanUserstoriesService) {\n    var link, userStories;\n    userStories = [];\n    link = function($scope, $el, $attrs) {\n      var status;\n      status = $scope.$eval($attrs.tgKanbanArchivedStatusIntro);\n      $scope.$on(\"kanban:shown-userstories-for-status\", function(ctx, statusId, userStoriesLoaded) {\n        if (statusId === status.id) {\n          kanbanUserstoriesService.deleteStatus(statusId);\n          return kanbanUserstoriesService.add(userStoriesLoaded);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanArchivedStatusIntro\", [\"$translate\", \"tgKanbanUserstories\", KanbanArchivedStatusIntroDirective]);\n\n  KanbanSquishColumnDirective = function(rs, projectService, kanbanUserstoriesService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      $scope.foldStatus = function(status) {\n        if (!$scope.folds) {\n          $scope.folds = rs.kanban.getStatusColumnModes(projectService.project.get('id'));\n        }\n        $scope.unfold = null;\n        $scope.folds[status.id] = !!!$scope.folds[status.id];\n        if (!$scope.folds[status.id]) {\n          $scope.unfold = status.id;\n        }\n        rs.kanban.storeStatusColumnModes($scope.projectId, $scope.folds);\n        if (kanbanUserstoriesService.archivedStatus.includes(status.id) && !kanbanUserstoriesService.statusHide.includes(status.id)) {\n          kanbanUserstoriesService.hideStatus(status.id);\n        }\n      };\n      return unwatch = $scope.$watch('ctrl.initialLoad', function(load) {\n        var archivedFolds, i, len, ref, status;\n        if (load && ((ref = $scope.usByStatus) != null ? ref.size : void 0)) {\n          $scope.folds = rs.kanban.getStatusColumnModes(projectService.project.get('id'));\n          archivedFolds = $scope.usStatusList.filter(function(status) {\n            return status.is_archived;\n          });\n          for (i = 0, len = archivedFolds.length; i < len; i++) {\n            status = archivedFolds[i];\n            $scope.folds[status.id] = true;\n          }\n          return unwatch();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanSquishColumn\", [\"$tgResources\", \"tgProjectService\", \"tgKanbanUserstories\", KanbanSquishColumnDirective]);\n\n  KanbanWipLimitDirective = function($timeout) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var redrawWipLimit, status;\n      status = $scope.$eval($attrs.tgKanbanWipLimit);\n      redrawWipLimit = (function(_this) {\n        return function() {\n          return $timeout(function() {\n            var cards, element, wipLimitClass;\n            cards = $el.find(\"tg-card\");\n            wipLimitClass = '';\n            element = null;\n            if (cards.length + 1 === status.wip_limit) {\n              wipLimitClass = 'one-left';\n              element = cards[cards.length - 1];\n            } else if (cards.length === status.wip_limit) {\n              wipLimitClass = 'reached';\n              element = cards[cards.length - 1];\n            } else if (cards.length > status.wip_limit) {\n              wipLimitClass = 'exceeded';\n              element = cards[status.wip_limit - 1];\n            }\n            $el.find(\".kanban-wip-limit\").remove();\n            if (element) {\n              return angular.element(element).after(\"<div class='kanban-wip-limit \" + wipLimitClass + \"'><span>WIP Limit</span></div>\");\n            }\n          }, 0, false);\n        };\n      })(this);\n      if (status && !status.is_archived) {\n        $scope.$on(\"redraw:wip\", redrawWipLimit);\n        $scope.$on(\"kanban:us:move\", redrawWipLimit);\n        $scope.$on(\"usform:new:success\", redrawWipLimit);\n        $scope.$on(\"usform:bulk:success\", redrawWipLimit);\n      }\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanWipLimit\", [\"$timeout\", KanbanWipLimitDirective]);\n\n  CardSvgTemplate = \"<tg-svg>\\n    <svg class=\\\"icon <%- svgIcon %>\\\" style=\\\"fill: <%- svgFill %>\\\">\\n        <use xlink:href=\\\"#<%- svgIcon %>\\\" attr-href=\\\"#<%- svgIcon %>\\\">\\n            <% if(svgTitle) { %>\\n            <title><%- svgTitle %></title>\\n            <% } %>\\n        </use>\\n    </svg>\\n</tg-svg>\";\n\n  CardAssignedToDirective = function($template, $translate, avatarService, projectService) {\n    var render, svgTemplate, template;\n    template = $template.get(\"components/card/card-templates/card-assigned-to.html\", true);\n    svgTemplate = _.template(CardSvgTemplate);\n    render = (function(_this) {\n      return function(vm) {\n        var avatars;\n        avatars = {};\n        (vm.item.get('assigned_users') || [vm.item.get('assigned_to')]).forEach(function(user) {\n          if (user) {\n            return avatars[user.get('id')] = avatarService.getAvatar(user, 'avatar');\n          }\n        });\n        return template({\n          vm: vm,\n          avatars: avatars,\n          translate: function(key, params) {\n            return $translate.instant(key, params);\n          },\n          checkPermission: function(permission) {\n            return projectService.project.get('my_permissions').indexOf(permission) > -1;\n          },\n          svg: function(svgData) {\n            return svgTemplate(Object.assign({\n              svgTitle: '',\n              svgFill: ''\n            }, svgData));\n          },\n          loading: \"<img\\n    class='loading-spinner'\\n    src='\" + window._version + \"/svg/spinner-circle.svg'\\n    alt='loading...'\\n/>\"\n        });\n      };\n    })(this);\n    return {\n      scope: {\n        zoomLevel: '<',\n        item: '<',\n        vm: '<'\n      },\n      link: function($scope, $el) {\n        var initializeZoom, onChange;\n        initializeZoom = false;\n        onChange = (function(_this) {\n          return function() {\n            var html;\n            html = render($scope.vm);\n            $el.off();\n            $el.html(html);\n            return $el.find('.card-user-avatar').on('click', function(event) {\n              if (!event.ctrlKey && !event.metaKey) {\n                return $scope.vm.onClickAssignedTo({\n                  id: $scope.vm.item.get('id')\n                });\n              }\n            });\n          };\n        })(this);\n        $scope.$watch('item', onChange);\n        $scope.$watch('zoomLevel', (function(_this) {\n          return function() {\n            if (initializeZoom) {\n              return onChange();\n            } else {\n              return initializeZoom = true;\n            }\n          };\n        })(this));\n        return $scope.$on(\"$destroy\", function() {\n          return $el.off();\n        });\n      }\n    };\n  };\n\n  module.directive(\"tgCardAssignedTo\", [\"$tgTemplate\", \"$translate\", \"tgAvatarService\", \"tgProjectService\", CardAssignedToDirective]);\n\n  CardDataDirective = function($template, $translate, avatarService, projectService, dueDateService) {\n    var render, svgTemplate, template;\n    template = $template.get(\"components/card/card-templates/card-data.html\", true);\n    svgTemplate = _.template(CardSvgTemplate);\n    render = (function(_this) {\n      return function(vm) {\n        var avatars;\n        avatars = {};\n        (vm.item.get('assigned_users') || []).forEach(function(user) {\n          if (user) {\n            return avatars[user.get('id')] = avatarService.getAvatar(user, 'avatar');\n          } else {\n            return console.error('invalid assigned_users', vm.item.get('assigned_users').toJS());\n          }\n        });\n        return template({\n          vm: vm,\n          avatars: avatars,\n          emptyTask: function() {\n            var tasks;\n            tasks = vm.item.getIn(['model', 'tasks']);\n            return !tasks || !tasks.size;\n          },\n          dueDateColor: function() {\n            return dueDateService.color({\n              dueDate: vm.item.getIn(['model', 'due_date']),\n              isClosed: vm.item.getIn(['model', 'is_closed']),\n              objType: vm.type\n            });\n          },\n          dueDateTitle: function() {\n            return dueDateService.title({\n              dueDate: vm.item.getIn(['model', 'due_date']),\n              isClosed: vm.item.getIn(['model', 'is_closed']),\n              objType: vm.type\n            });\n          },\n          totalAttachments: function() {\n            if (vm.type === 'task') {\n              return vm.item.getIn(['model', 'attachments']).size;\n            } else {\n              return vm.item.getIn(['model', 'total_attachments']);\n            }\n          },\n          translate: function(key, params) {\n            return $translate.instant(key, params);\n          },\n          svg: function(svgData) {\n            return svgTemplate(Object.assign({\n              svgTitle: '',\n              svgFill: ''\n            }, svgData));\n          }\n        });\n      };\n    })(this);\n    return {\n      scope: {\n        zoomLevel: '<',\n        item: '<',\n        vm: '<'\n      },\n      link: function($scope, $el) {\n        var initializeZoom, onChange;\n        initializeZoom = false;\n        onChange = (function(_this) {\n          return function() {\n            var html;\n            html = render($scope.vm);\n            $el.off();\n            return $el.html(html);\n          };\n        })(this);\n        $scope.$watch('item', onChange);\n        $scope.$watch('zoomLevel', (function(_this) {\n          return function() {\n            if (initializeZoom) {\n              return onChange();\n            } else {\n              return initializeZoom = true;\n            }\n          };\n        })(this));\n        return $scope.$on(\"$destroy\", function() {\n          return $el.off();\n        });\n      }\n    };\n  };\n\n  module.directive(\"tgCardData\", [\"$tgTemplate\", \"$translate\", \"tgAvatarService\", \"tgProjectService\", \"tgDueDateService\", CardDataDirective]);\n\n  CardActionsDirective = function($template, $translate, projectService) {\n    var render, svgTemplate, template;\n    template = $template.get(\"components/card/card-templates/card-actions.html\", true);\n    svgTemplate = _.template(CardSvgTemplate);\n    render = (function(_this) {\n      return function(vm) {\n        return template({\n          vm: vm,\n          translate: function(key, params) {\n            return $translate.instant(key, params);\n          },\n          checkPermission: function(permission) {\n            return projectService.project.get('my_permissions').indexOf(permission) > -1;\n          },\n          svg: function(svgData) {\n            return svgTemplate(Object.assign({\n              svgTitle: '',\n              svgFill: ''\n            }, svgData));\n          }\n        });\n      };\n    })(this);\n    return {\n      scope: {\n        zoomLevel: '<',\n        item: '<',\n        vm: '<'\n      },\n      link: function($scope, $el) {\n        var initializeZoom, onChange, openPopup, removePopupOpenState;\n        initializeZoom = false;\n        openPopup = false;\n        removePopupOpenState = function() {\n          openPopup = false;\n          return $el.find(\".js-popup-button\").removeClass('popover-open');\n        };\n        onChange = (function(_this) {\n          return function() {\n            var html;\n            html = render($scope.vm);\n            $el.off();\n            $el.html(html);\n            openPopup = false;\n            return $el.find('.js-popup-button').on('click', function(event) {\n              var actions;\n              if (openPopup) {\n                return;\n              }\n              openPopup = true;\n              $(event.currentTarget).addClass('popover-open');\n              actions = [];\n              if (projectService.project.get('my_permissions').includes($scope.vm.getModifyPermisionKey())) {\n                actions.push({\n                  text: $translate.instant('COMMON.CARD.EDIT'),\n                  icon: 'icon-edit',\n                  event: function() {\n                    return $scope.vm.onClickEdit({\n                      id: $scope.vm.item.get('id')\n                    });\n                  }\n                }, {\n                  text: $translate.instant('COMMON.CARD.ASSIGN_TO'),\n                  icon: 'icon-assign-to',\n                  event: function() {\n                    return $scope.vm.onClickAssignedTo({\n                      id: $scope.vm.item.get('id')\n                    });\n                  }\n                });\n              }\n              if (projectService.project.get('my_permissions').includes($scope.vm.getDeletePermisionKey())) {\n                actions.push({\n                  text: $translate.instant('COMMON.CARD.DELETE'),\n                  icon: 'icon-trash',\n                  event: function() {\n                    return $scope.vm.onClickDelete({\n                      id: $scope.vm.item.get('id')\n                    });\n                  }\n                });\n              }\n              if (projectService.project.get('my_permissions').includes($scope.vm.getModifyPermisionKey()) && !$scope.vm.isFirst) {\n                actions.push({\n                  text: $translate.instant('COMMON.CARD.MOVE_TO_TOP'),\n                  icon: 'icon-move-to-top',\n                  event: function() {\n                    return $scope.vm.onClickMoveToTop($scope.vm.item);\n                  }\n                });\n              }\n              return taiga.globalPopover(event.currentTarget, actions, {}, function() {\n                return removePopupOpenState();\n              });\n            });\n          };\n        })(this);\n        $scope.$watch('item', onChange);\n        $scope.$watch('zoomLevel', (function(_this) {\n          return function() {\n            if (initializeZoom) {\n              return onChange();\n            } else {\n              return initializeZoom = true;\n            }\n          };\n        })(this));\n        return $scope.$on(\"$destroy\", function() {\n          return $el.off();\n        });\n      }\n    };\n  };\n\n  module.directive(\"tgCardActions\", [\"$tgTemplate\", \"$translate\", \"tgProjectService\", CardActionsDirective]);\n\n  KanbanSwimlaneDirective = function($timeout) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var addSwimlane, className, ctrl, currentSwimlane, tableHeaderDom;\n      tableHeaderDom = [];\n      addSwimlane = null;\n      ctrl = $scope.$parent.ctrl;\n      if (!ctrl) {\n        throw new Error('KanbanSwimlaneDirective ctrl not found');\n      }\n      $el.on(\"scroll\", function(event) {\n        var scroll;\n        if (!tableHeaderDom.length) {\n          tableHeaderDom = $el.find(\".kanban-swimlane-title\");\n        }\n        if (!addSwimlane) {\n          addSwimlane = $el.find(\".kanban-swimlane-add\");\n        }\n        scroll = event.currentTarget.scrollLeft;\n        tableHeaderDom.css(\"transform\", \"translateX(\" + scroll + \"px)\");\n        return addSwimlane.css(\"transform\", \"translateX(\" + scroll + \"px)\");\n      });\n      currentSwimlane = null;\n      className = 'pending-to-open';\n      $scope.mouseleaveSwimlane = (function(_this) {\n        return function(event) {\n          if (currentSwimlane) {\n            $timeout.cancel(currentSwimlane.timeoutId);\n            currentSwimlane.el.classList.remove(className);\n            return currentSwimlane = null;\n          }\n        };\n      })(this);\n      $scope.mouseoverSwimlane = (function(_this) {\n        return function(event, swimlaneId) {\n          var isDragging, swimlane, timeoutId;\n          if (currentSwimlane && currentSwimlane.id === swimlaneId) {\n            return;\n          }\n          if (currentSwimlane) {\n            $timeout.cancel(currentSwimlane.timeoutId);\n            currentSwimlane.el.classList.remove(className);\n          }\n          swimlane = event.currentTarget;\n          if (swimlane.classList.contains('folded')) {\n            isDragging = !!document.querySelectorAll('tg-card.gu-mirror').length;\n            if (!isDragging) {\n              return;\n            }\n            swimlane.classList.add(className);\n            timeoutId = $timeout(function() {\n              swimlane.classList.remove(className);\n              return ctrl.toggleSwimlane(swimlaneId);\n            }, 1000);\n            return currentSwimlane = {\n              id: swimlaneId,\n              timeoutId: timeoutId,\n              el: swimlane\n            };\n          }\n        };\n      })(this);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanSwimlane\", ['$timeout', KanbanSwimlaneDirective]);\n\n  KanbanTaskboardColumnDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      $el.on(\"scroll\", function(event) {\n        var scroll, taskCounterDom;\n        scroll = event.currentTarget.scrollTop;\n        taskCounterDom = $el.find(\".kanban-task-counter\");\n        return taskCounterDom.css(\"transform\", \"translateY(\" + scroll + \"px)\");\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanTaskboardColumn\", [KanbanTaskboardColumnDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var KanbanSortableDirective, bindOnce, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaKanban\");\n\n  KanbanSortableDirective = function($repo, $rs, $rootscope, kanbanUserstoriesService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var drake, init, oldIndex, unwatch;\n      drake = null;\n      oldIndex = null;\n      $scope.openSwimlane = (function(_this) {\n        return function(id) {\n          var containers;\n          containers = _.map($('.kanban-swimlane[data-swimlane=\"' + id + '\"] .taskboard-column'), function(item) {\n            return item;\n          });\n          return init(containers);\n        };\n      })(this);\n      init = (function(_this) {\n        return function(containers) {\n          var deleteElement, initialContainer, itemEl, newParentScope, nextCard, previousCard, scroll, tdom;\n          if (!($scope.project.my_permissions.indexOf(\"modify_us\") > -1)) {\n            return;\n          }\n          if (drake) {\n            containers.forEach(function(container) {\n              return drake.containers.push(container);\n            });\n            return;\n          }\n          newParentScope = null;\n          itemEl = null;\n          tdom = $el;\n          deleteElement = function(itemEl) {\n            itemEl.off();\n            return itemEl.remove();\n          };\n          drake = dragula(containers, {\n            copySortSource: false,\n            copy: false,\n            moves: function(item) {\n              return $(item).is('tg-card');\n            }\n          });\n          initialContainer = null;\n          drake.on('over', function(item, container) {\n            if (!initialContainer) {\n              return initialContainer = container;\n            } else if (container !== initialContainer) {\n              return $(container).addClass('target-drop');\n            }\n          });\n          drake.on('out', function(item, container) {\n            if (container !== initialContainer) {\n              return $(container).removeClass('target-drop');\n            }\n          });\n          drake.on('drag', function(item) {\n            var dragMultipleItems, firstElement, parentEl;\n            dragMultipleItems = window.dragMultiple.getElements();\n            if (!dragMultipleItems.length) {\n              dragMultipleItems = [item];\n            }\n            firstElement = dragMultipleItems[0];\n            parentEl = item.parentNode;\n            oldIndex = $(parentEl).find('tg-card').index(firstElement);\n            initialContainer = null;\n            return window.dragMultiple.start(item, containers);\n          });\n          drake.on('cloned', function(item, dropTarget) {\n            return $(item).addClass('multiple-drag-mirror');\n          });\n          previousCard = null;\n          nextCard = null;\n          drake.on('drop', function(item, target, source, sibling) {\n            var next, prev;\n            previousCard = null;\n            nextCard = null;\n            prev = $(item).prevAll('tg-card:not(.gu-transit)');\n            next = $(item).nextAll('tg-card:not(.gu-transit)');\n            previousCard = null;\n            if (prev.length && prev[0].dataset.id) {\n              previousCard = Number(prev[0].dataset.id);\n            }\n            nextCard = null;\n            if (!previousCard && next.length && next[0].dataset.id) {\n              return nextCard = Number(next[0].dataset.id);\n            }\n          });\n          drake.on('dragend', function(item, target, source, sibling) {\n            var dragMultipleItems, finalUsList, firstElement, firstElementId, index, newStatus, newSwimlane, parentEl, usList;\n            parentEl = item.parentNode;\n            dragMultipleItems = window.dragMultiple.stop();\n            if (!dragMultipleItems.length) {\n              dragMultipleItems = [item];\n            }\n            firstElementId = dragMultipleItems[0].dataset.id;\n            firstElement = dragMultipleItems[0];\n            index = $(parentEl).find('tg-card').index(firstElement);\n            newStatus = Number(parentEl.dataset.status);\n            newSwimlane = Number(parentEl.dataset.swimlane);\n            if (index === oldIndex && initialContainer === parentEl) {\n              return;\n            }\n            if (initialContainer !== parentEl) {\n              $(parentEl).addClass('new');\n              $(parentEl).one('animationend', function() {\n                return $(parentEl).removeClass('new');\n              });\n            }\n            usList = _.map(dragMultipleItems, function(item) {\n              return kanbanUserstoriesService.usMap.get(Number(item.dataset.id));\n            });\n            finalUsList = _.map(usList, function(item) {\n              return {\n                id: item.get('id'),\n                oldStatusId: item.getIn(['model', 'status']),\n                oldSwimlaneId: item.getIn(['model', 'swimlane'])\n              };\n            });\n            return $scope.$apply(function() {\n              _.each(usList, (function(_this) {\n                return function(item, key) {\n                  var oldStatus, oldSwimlaneId, sameContainer;\n                  oldStatus = item.getIn(['model', 'status']);\n                  oldSwimlaneId = item.getIn(['model', 'swimlane']) || -1;\n                  sameContainer = newStatus === oldStatus && newSwimlane === oldSwimlaneId;\n                  if (!sameContainer) {\n                    itemEl = $(dragMultipleItems[key]);\n                    return deleteElement(itemEl);\n                  }\n                };\n              })(this));\n              return $rootscope.$broadcast(\"kanban:us:move\", finalUsList, newStatus, newSwimlane, index, previousCard, nextCard);\n            });\n          });\n          return scroll = autoScroll(containers, {\n            margin: 100,\n            scrollWhenOutside: true,\n            autoScroll: function() {\n              return this.down && drake.dragging;\n            }\n          });\n        };\n      })(this);\n      unwatch = $scope.$watch(\"isTableLoaded\", function(tableLoaded) {\n        var containers, isSwimlane;\n        if (!tableLoaded) {\n          return;\n        }\n        isSwimlane = $('.swimlane').length;\n        if (isSwimlane) {\n          return;\n        }\n        unwatch();\n        containers = _.map($el.find('.taskboard-column'), function(item) {\n          return item;\n        });\n        return init(containers);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        if (drake) {\n          return drake.destroy();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanSortable\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"tgKanbanUserstories\", KanbanSortableDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var EpicDetailController, EpicStatusButtonDirective, EpicStatusDisplayDirective, bindMethods, bindOnce, groupBy, joinStr, mixOf, module, taiga, toString,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaEpics\");\n\n  EpicDetailController = (function(superClass) {\n    extend(EpicDetailController, superClass);\n\n    EpicDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgAnalytics\", \"$tgNavUrls\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function EpicDetailController(scope, rootscope, repo, confirm, rs, rs2, params, q, location, log, appMetaService, analytics, navUrls, translate, modelTransform, errorHandlingService, projectService, attachmentsFullService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.rs2 = rs2;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.analytics = analytics;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      bindMethods(this);\n      this.scope.epicRef = this.params.epicref;\n      this.scope.sectionName = this.translate.instant(\"EPIC.SECTION_NAME\");\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    EpicDetailController.prototype._setMeta = function() {\n      var description, ref, title;\n      title = this.translate.instant(\"EPIC.PAGE_TITLE\", {\n        epicRef: \"#\" + this.scope.epic.ref,\n        epicSubject: this.scope.epic.subject,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"EPIC.PAGE_DESCRIPTION\", {\n        epicStatus: ((ref = this.scope.statusById[this.scope.epic.status]) != null ? ref.name : void 0) || \"--\",\n        epicDescription: angular.element(this.scope.epic.description_html || \"\").text()\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    EpicDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('epic', this.scope.epicId, this.scope.projectId);\n    };\n\n    EpicDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on epic\", 1);\n        };\n      })(this));\n      this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadEpic();\n        };\n      })(this));\n      return this.scope.$on(\"custom-attributes-values:edit\", (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this));\n    };\n\n    EpicDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-epics\", ctx);\n    };\n\n    EpicDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.immutableProject = this.projectService.project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.epic_statuses;\n      this.scope.statusById = groupBy(project.epic_statuses, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    EpicDetailController.prototype.loadEpic = function() {\n      return this.rs.epics.getByRef(this.scope.projectId, this.params.epicref).then((function(_this) {\n        return function(epic) {\n          var ctx, ref, ref1;\n          _this.scope.epic = epic;\n          _this.scope.immutableEpic = Immutable.fromJS(epic._attrs);\n          _this.scope.epicId = epic.id;\n          _this.scope.commentModel = epic;\n          _this.loadAttachments();\n          _this.modelTransform.setObject(_this.scope, 'epic');\n          if (((ref = _this.scope.epic.neighbors.previous) != null ? ref.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.epic.neighbors.previous.ref\n            };\n            _this.scope.previousUrl = _this.navUrls.resolve(\"project-epics-detail\", ctx);\n          }\n          if (((ref1 = _this.scope.epic.neighbors.next) != null ? ref1.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.epic.neighbors.next.ref\n            };\n            return _this.scope.nextUrl = _this.navUrls.resolve(\"project-epics-detail\", ctx);\n          }\n        };\n      })(this));\n    };\n\n    EpicDetailController.prototype.loadUserstories = function() {\n      return this.rs2.userstories.listInEpic(this.scope.epicId).then((function(_this) {\n        return function(data) {\n          return _this.scope.userstories = data;\n        };\n      })(this));\n    };\n\n    EpicDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadEpic().then((function(_this) {\n        return function() {\n          return _this.loadUserstories();\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    EpicDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.upvote(this.scope.epicId).then(onSuccess, onError);\n    };\n\n    EpicDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.downvote(this.scope.epicId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    EpicDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.watch(this.scope.epicId).then(onSuccess, onError);\n    };\n\n    EpicDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.unwatch(this.scope.epicId).then(onSuccess, onError);\n    };\n\n    EpicDetailController.prototype.onSelectColor = function(color) {\n      var onSelectColorError, onSelectColorSuccess, transform;\n      onSelectColorSuccess = (function(_this) {\n        return function() {\n          _this.rootscope.$broadcast(\"object:updated\");\n          return _this.confirm.notify('success');\n        };\n      })(this);\n      onSelectColorError = (function(_this) {\n        return function() {\n          return _this.confirm.notify('error');\n        };\n      })(this);\n      transform = this.modelTransform.save(function(epic) {\n        epic.color = color;\n        return epic;\n      });\n      return transform.then(onSelectColorSuccess, onSelectColorError);\n    };\n\n    return EpicDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"EpicDetailController\", EpicDetailController);\n\n  EpicStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(epic) {\n        var html, status;\n        status = $scope.statusById[epic.status];\n        html = template({\n          is_closed: status.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(epic) {\n        if (epic != null) {\n          return render(epic);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgEpicStatusDisplay\", [\"$tgTemplate\", \"$compile\", EpicStatusDisplayDirective]);\n\n  EpicStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $compile, $translate, $template) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_epic\") !== -1;\n      };\n      render = (function(_this) {\n        return function(epic) {\n          var html, status;\n          status = $scope.statusById[epic.status];\n          html = $compile(template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          }))($scope);\n          return $el.html(html);\n        };\n      })(this);\n      save = function(status) {\n        var currentLoading, onError, onSuccess, transform;\n        currentLoading = $loading().target($el).start();\n        transform = $modelTransform.save(function(epic) {\n          epic.status = status;\n          return epic;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        $.fn.popover().closeAll();\n        return save(target.data(\"status-id\"));\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.status : void 0;\n      }, function() {\n        var epic;\n        epic = $model.$modelValue;\n        if (epic) {\n          return render(epic);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgEpicStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$compile\", \"$translate\", \"$tgTemplate\", EpicStatusButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AssignSprintToIssueButtonDirective, IssueDetailController, IssuePriorityButtonDirective, IssueSeverityButtonDirective, IssueStatusButtonDirective, IssueStatusDisplayDirective, IssueTypeButtonDirective, bindMethods, bindOnce, groupBy, joinStr, mixOf, module, normalizeString, taiga, toString,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  normalizeString = this.taiga.normalizeString;\n\n  module = angular.module(\"taigaIssues\");\n\n  IssueDetailController = (function(superClass) {\n    extend(IssueDetailController, superClass);\n\n    IssueDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgAnalytics\", \"$tgNavUrls\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function IssueDetailController(scope, rootscope, repo, confirm, rs, params, q, location, log, appMetaService, analytics, navUrls, translate, modelTransform, errorHandlingService, projectService, attachmentsFullService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.analytics = analytics;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      bindMethods(this);\n      this.scope.issueRef = this.params.issueref;\n      this.scope.sectionName = this.translate.instant(\"ISSUES.SECTION_NAME\");\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    IssueDetailController.prototype._setMeta = function() {\n      var description, ref, ref1, ref2, ref3, title;\n      title = this.translate.instant(\"ISSUE.PAGE_TITLE\", {\n        issueRef: \"#\" + this.scope.issue.ref,\n        issueSubject: this.scope.issue.subject,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"ISSUE.PAGE_DESCRIPTION\", {\n        issueStatus: ((ref = this.scope.statusById[this.scope.issue.status]) != null ? ref.name : void 0) || \"--\",\n        issueType: ((ref1 = this.scope.typeById[this.scope.issue.type]) != null ? ref1.name : void 0) || \"--\",\n        issueSeverity: ((ref2 = this.scope.severityById[this.scope.issue.severity]) != null ? ref2.name : void 0) || \"--\",\n        issuePriority: ((ref3 = this.scope.priorityById[this.scope.issue.priority]) != null ? ref3.name : void 0) || \"--\",\n        issueDescription: angular.element(this.scope.issue.description_html || \"\").text()\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    IssueDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('issue', this.scope.issueId, this.scope.projectId);\n    };\n\n    IssueDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on issue\", 1);\n        };\n      })(this));\n      this.scope.$on(\"promote-issue-to-us:success\", (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"issue\", \"promoteToUserstory\", \"promote issue to userstory\", 1);\n          _this.rootscope.$broadcast(\"object:updated\");\n          return _this.loadIssue();\n        };\n      })(this));\n      this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadIssue();\n        };\n      })(this));\n      this.scope.$on(\"custom-attributes-values:edit\", (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this));\n      return this.scope.$on(\"assign-sprint-to-issue:success\", (function(_this) {\n        return function(ctx, milestoneId) {\n          _this.scope.issue.milestone = milestoneId;\n          _this.rootscope.$broadcast(\"object:updated\");\n          if (milestoneId) {\n            return _this.loadSprint();\n          } else {\n            return _this.scope.sprint = null;\n          }\n        };\n      })(this));\n    };\n\n    IssueDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      if (this.scope.project.is_issues_activated) {\n        return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-issues\", ctx);\n      } else {\n        return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project\", ctx);\n      }\n    };\n\n    IssueDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.issue_statuses;\n      this.scope.statusById = groupBy(project.issue_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.typeById = groupBy(project.issue_types, function(x) {\n        return x.id;\n      });\n      this.scope.typeList = _.sortBy(project.issue_types, \"order\");\n      this.scope.severityList = project.severities;\n      this.scope.severityById = groupBy(project.severities, function(x) {\n        return x.id;\n      });\n      this.scope.priorityList = project.priorities;\n      this.scope.priorityById = groupBy(project.priorities, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    IssueDetailController.prototype.loadIssue = function() {\n      return this.rs.issues.getByRef(this.scope.projectId, this.params.issueref).then((function(_this) {\n        return function(issue) {\n          var ctx, ref, ref1;\n          _this.scope.issue = issue;\n          _this.scope.issueId = issue.id;\n          _this.scope.commentModel = issue;\n          _this.loadAttachments();\n          _this.modelTransform.setObject(_this.scope, 'issue');\n          if (((ref = _this.scope.issue.neighbors.previous) != null ? ref.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.issue.neighbors.previous.ref\n            };\n            _this.scope.previousUrl = _this.navUrls.resolve(\"project-issues-detail\", ctx);\n          }\n          if (((ref1 = _this.scope.issue.neighbors.next) != null ? ref1.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.issue.neighbors.next.ref\n            };\n            return _this.scope.nextUrl = _this.navUrls.resolve(\"project-issues-detail\", ctx);\n          }\n        };\n      })(this));\n    };\n\n    IssueDetailController.prototype.loadSprint = function() {\n      if (this.scope.issue.milestone) {\n        return this.rs.sprints.get(this.scope.issue.project, this.scope.issue.milestone).then((function(_this) {\n          return function(sprint) {\n            _this.scope.sprint = sprint;\n            return sprint;\n          };\n        })(this));\n      }\n    };\n\n    IssueDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadIssue().then((function(_this) {\n        return function() {\n          if (_this.scope.project.my_permissions.indexOf(\"view_milestones\") !== -1) {\n            return _this.loadSprint();\n          }\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    IssueDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.upvote(this.scope.issueId).then(onSuccess, onError);\n    };\n\n    IssueDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.downvote(this.scope.issueId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    IssueDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.watch(this.scope.issueId).then(onSuccess, onError);\n    };\n\n    IssueDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.unwatch(this.scope.issueId).then(onSuccess, onError);\n    };\n\n    return IssueDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"IssueDetailController\", IssueDetailController);\n\n  IssueStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(issue) {\n        var html, status;\n        status = $scope.statusById[issue.status];\n        html = template({\n          is_closed: status.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(issue) {\n        if (issue != null) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueStatusDisplay\", [\"$tgTemplate\", \"$compile\", IssueStatusDisplayDirective]);\n\n  IssueStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = (function(_this) {\n        return function(issue) {\n          var html, status;\n          status = $scope.statusById[issue.status];\n          html = template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          });\n          html = $compile(html)($scope);\n          return $el.html(html);\n        };\n      })(this);\n      save = function(statusId) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        currentLoading = $loading().target($el).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.status = statusId;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        return save(target.data(\"status-id\"));\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.status : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueStatusButtonDirective]);\n\n  IssueTypeButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"issue/issue-type-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, notAutoSave, render, save;\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = function(issue) {\n        var html, type;\n        type = $scope.typeById[issue.type];\n        html = template({\n          type: type,\n          typees: $scope.typeList,\n          editable: isEditable()\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(type) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        if (notAutoSave) {\n          $model.$modelValue.type = type;\n          $scope.$apply();\n          return;\n        }\n        currentLoading = $loading().target($el.find(\".level-name\")).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.type = type;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".type-data\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-type\").popover().open();\n      });\n      $el.on(\"click\", \".type\", function(event) {\n        var target, type;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        type = target.data(\"type-id\");\n        return save(type);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.type : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueTypeButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueTypeButtonDirective]);\n\n  IssueSeverityButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"issue/issue-severity-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, notAutoSave, render, save;\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = function(issue) {\n        var html, severity;\n        severity = $scope.severityById[issue.severity];\n        html = template({\n          severity: severity,\n          severityes: $scope.severityList,\n          editable: isEditable()\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(severity) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        if (notAutoSave) {\n          $model.$modelValue.severity = severity;\n          $scope.$apply();\n          return;\n        }\n        currentLoading = $loading().target($el.find(\".level-name\")).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.severity = severity;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".severity-data\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-severity\").popover().open();\n      });\n      $el.on(\"click\", \".severity\", function(event) {\n        var severity, target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        severity = target.data(\"severity-id\");\n        return save(severity);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.severity : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueSeverityButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueSeverityButtonDirective]);\n\n  IssuePriorityButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"issue/issue-priority-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, notAutoSave, render, save;\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = function(issue) {\n        var html, priority;\n        priority = $scope.priorityById[issue.priority];\n        html = template({\n          priority: priority,\n          priorityes: $scope.priorityList,\n          editable: isEditable()\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(priority) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        if (notAutoSave) {\n          $model.$modelValue.priority = priority;\n          $scope.$apply();\n          return;\n        }\n        currentLoading = $loading().target($el.find(\".level-name\")).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.priority = priority;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".priority-data\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-priority\").popover().open();\n      });\n      $el.on(\"click\", \".priority\", function(event) {\n        var priority, target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        priority = target.data(\"priority-id\");\n        return save(priority);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.priority : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssuePriorityButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssuePriorityButtonDirective]);\n\n  AssignSprintToIssueButtonDirective = function($rootscope, $rs, $repo, $loading, $translate, lightboxService, $modelTransform, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var avaliableMilestones, existsMilestone, issue;\n      avaliableMilestones = [];\n      issue = null;\n      $scope.$watch($attrs.ngModel, function(item) {\n        if (!item) {\n          return;\n        }\n        if (item.milestone) {\n          $el.find('.assign-issue-button.button-unset').removeClass('is-active');\n          return $el.find('.assign-issue-button.button-set').addClass('is-active');\n        } else {\n          $el.find('.assign-issue-button.button-set').removeClass('is-active');\n          return $el.find('.assign-issue-button.button-unset').addClass('is-active');\n        }\n      });\n      $el.on(\"click\", \".assign-issue-button.button-unset\", function(event) {\n        var title;\n        event.preventDefault();\n        event.stopPropagation();\n        title = $translate.instant(\"ISSUES.ACTION_ATTACH_SPRINT\");\n        issue = $model.$modelValue;\n        return $rs.sprints.list($scope.projectId, null).then(function(data) {\n          $scope.milestones = data.milestones;\n          $scope.selectedSprint = issue.milestone;\n          avaliableMilestones = angular.copy($scope.milestones);\n          return lightboxService.open($el.find(\".lightbox-assign-sprint-to-issue\"));\n        });\n      });\n      $el.on(\"click\", \".assign-issue-button.button-set\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        issue = $model.$modelValue;\n        return $rs.sprints.list($scope.projectId, null).then(function(data) {\n          var currentSprint, message, title;\n          currentSprint = _.find(data.milestones, {\n            \"id\": issue.milestone\n          });\n          title = $translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.TITLE\");\n          message = $translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\", {\n            sprintName: currentSprint.name\n          });\n          return $confirm.ask(title, null, message).then(function(askResponse) {\n            var onError, onSuccess, transform;\n            onSuccess = function() {\n              $rootscope.$broadcast(\"assign-sprint-to-issue:success\", null);\n              askResponse.finish();\n              return lightboxService.close($el);\n            };\n            onError = function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            };\n            transform = $modelTransform.save(function(issue) {\n              issue.setAttr('milestone', null);\n              return issue;\n            });\n            return transform.then(onSuccess, onError);\n          });\n        });\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      existsMilestone = function(needle, haystack) {\n        haystack = normalizeString(haystack.toUpperCase());\n        needle = normalizeString(needle.toUpperCase());\n        return _.includes(haystack, needle);\n      };\n      $scope.filterMilestones = function(filterText) {\n        return $scope.milestones = avaliableMilestones.filter(function(milestone) {\n          return existsMilestone(filterText, milestone.name);\n        });\n      };\n      return $scope.saveIssueToSprint = function(selectedSprint, event) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($(event.currentTarget)).start();\n        issue.setAttr('milestone', selectedSprint.id);\n        transform = $modelTransform.save(function(item) {\n          issue.setAttr('milestone', selectedSprint.id);\n          return item;\n        });\n        return transform.then(function() {\n          currentLoading.finish();\n          lightboxService.close($el.find(\".lightbox-assign-sprint-to-issue\"));\n          return $rootscope.$broadcast(\"assign-sprint-to-issue:success\", selectedSprint.id);\n        });\n      };\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      templateUrl: \"issue/assign-sprint-to-issue-button.html\"\n    };\n  };\n\n  module.directive(\"tgAssignSprintToIssueButton\", [\"$rootScope\", \"$tgResources\", \"$tgRepo\", \"$tgLoading\", \"$translate\", \"lightboxService\", \"$tgQueueModelTransformation\", \"$tgConfirm\", AssignSprintToIssueButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CreateBulkIssuesDirective, bindOnce, debounce, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  trim = this.taiga.trim;\n\n  module = angular.module(\"taigaIssues\");\n\n  CreateBulkIssuesDirective = function($repo, $rs, $confirm, $rootscope, $loading, lightboxService, $model) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var form, submit, submitButton;\n      form = null;\n      $scope.$on(\"issueform:bulk\", function(ctx, projectId, milestoneId, status) {\n        if (form) {\n          form.reset();\n        }\n        lightboxService.open($el);\n        return $scope[\"new\"] = {\n          projectId: projectId,\n          milestoneId: milestoneId,\n          bulk: \"\"\n        };\n      });\n      submit = debounce(2000, function(event) {\n        var currentLoading, data, milestoneId, projectId, promise;\n        event.preventDefault();\n        form = $el.find(\"form\").checksley();\n        if (!form.validate()) {\n          return;\n        }\n        currentLoading = $loading().target(submitButton).start();\n        if (currentLoading.isLoading()) {\n          return;\n        }\n        data = $scope[\"new\"].bulk;\n        projectId = $scope[\"new\"].projectId;\n        milestoneId = $scope[\"new\"].milestoneId;\n        promise = $rs.issues.bulkCreate(projectId, milestoneId, data);\n        promise.then(function(result) {\n          result = _.map(result.data, function(x) {\n            return $model.make_model('issues', x);\n          });\n          currentLoading.finish();\n          $rootscope.$broadcast(\"issueform:new:success\", result);\n          lightboxService.close($el);\n          return $confirm.notify(\"success\");\n        });\n        return promise.then(null, function() {\n          currentLoading.finish();\n          return $confirm.notify(\"error\");\n        });\n      });\n      submitButton = $el.find(\"button[type='submit']\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateBulkIssues\", [\"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$rootScope\", \"$tgLoading\", \"lightboxService\", \"$tgModel\", CreateBulkIssuesDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var IssueAssignedToInlineEditionDirective, IssueStatusInlineEditionDirective, IssuesController, IssuesOrderingDirective, IssuesPaginationDirective, bindMethods, bindOnce, debounceLeading, groupBy, joinStr, mixOf, module, startswith, taiga, toString, trim,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  startswith = this.taiga.startswith;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  module = angular.module(\"taigaIssues\");\n\n  IssuesController = (function(superClass) {\n    extend(IssuesController, superClass);\n\n    IssuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$tgUrls\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgProjectService\", \"tgUserActivityService\"];\n\n    IssuesController.prototype.filtersHashSuffix = \"issues-filters\";\n\n    IssuesController.prototype.myFiltersHashSuffix = \"issues-my-filters\";\n\n    IssuesController.prototype.excludePrefix = \"exclude_\";\n\n    IssuesController.prototype.filterCategories = [\"tags\", \"status\", \"type\", \"severity\", \"priority\", \"assigned_to\", \"owner\", \"role\"];\n\n    IssuesController.prototype.validQueryParams = ['exclude_tags', 'tags', 'exclude_status', 'status', 'exclude_type', 'type', 'exclude_severity', 'severity', 'exclude_priority', 'priority', 'exclude_assigned_to', 'assigned_to', 'exclude_role', 'role', 'exclude_owner', 'owner', 'order_by'];\n\n    function IssuesController(scope, rootscope, repo, confirm, rs, urls, params1, q1, location, appMetaService, navUrls, events, analytics, translate, errorHandlingService, storage, filterRemoteStorageService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.urls = urls;\n      this.params = params1;\n      this.q = q1;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.projectService = projectService;\n      this.loadIssues = bind(this.loadIssues, this);\n      bindMethods(this);\n      this.showTags = true;\n      this.scope.sectionName = this.translate.instant(\"PROJECT.SECTION.ISSUES\");\n      this.voting = false;\n      this.openFilter = false;\n      if (this.applyStoredFilters(this.params.pslug, this.filtersHashSuffix, this.validQueryParams)) {\n        return;\n      }\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ISSUES.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"ISSUES.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"issueform:new:success\", (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"issue\", \"create\", \"create issue on issues list\", 1);\n          return _this.loadIssues();\n        };\n      })(this));\n      this.scope.$on(\"assigned-to:changed\", (function(_this) {\n        return function() {\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role') || _this.isOrderedBy('assigned_to') || _this.isOrderedBy('modified')) {\n            return _this.loadIssues();\n          }\n        };\n      })(this));\n      this.scope.$on(\"status:changed\", (function(_this) {\n        return function() {\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('status') || _this.isOrderedBy('status') || _this.isOrderedBy('modified')) {\n            return _this.loadIssues();\n          }\n        };\n      })(this));\n    }\n\n    IssuesController.prototype.toggleShowTags = function() {\n      return this.rs.issues.storeIssuesShowTags(this.scope.projectId, this.showTags);\n    };\n\n    IssuesController.prototype.isOrderedBy = function(fieldName) {\n      var pattern;\n      pattern = new RegExp(\"-*\" + fieldName);\n      return pattern.test(this.location.search().order_by);\n    };\n\n    IssuesController.prototype.changeQ = function(q) {\n      this.unselectFilter(\"page\");\n      this.replaceFilter(\"q\", q);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.removeFilter = function(filter) {\n      this.unselectFilter(\"page\");\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.addFilter = function(newFilter) {\n      this.unselectFilter(\"page\");\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.selectCustomFilter = function(customFilter) {\n      var orderBy;\n      orderBy = this.location.search().order_by;\n      if (orderBy) {\n        customFilter.filter.order_by = orderBy;\n      }\n      this.unselectFilter(\"page\");\n      this.replaceAllFilters(customFilter.filter);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.removeCustomFilter = function(customFilter) {\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.myFiltersHashSuffix).then((function(_this) {\n        return function(userFilters) {\n          delete userFilters[customFilter.id];\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.myFiltersHashSuffix).then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    IssuesController.prototype.isFilterDataTypeSelected = function(filterDataType) {\n      var filter, j, len, ref;\n      ref = this.selectedFilters;\n      for (j = 0, len = ref.length; j < len; j++) {\n        filter = ref[j];\n        if (filter['dataType'] === filterDataType) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    IssuesController.prototype.saveCustomFilter = function(name) {\n      var excludeKey, filters, j, key, len, ref, urlfilters;\n      filters = {};\n      urlfilters = this.location.search();\n      ref = this.filterCategories;\n      for (j = 0, len = ref.length; j < len; j++) {\n        key = ref[j];\n        excludeKey = this.excludePrefix.concat(key);\n        filters[key] = urlfilters[key];\n        filters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.myFiltersHashSuffix).then((function(_this) {\n        return function(userFilters) {\n          userFilters[name] = filters;\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.myFiltersHashSuffix).then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    IssuesController.prototype.getQueryParams = function() {\n      return _.pick(_.clone(this.location.search()), this.validQueryParams);\n    };\n\n    IssuesController.prototype.generateFilters = function() {\n      var excludeKey, j, key, len, loadFilters, ref, urlfilters;\n      urlfilters = this.getQueryParams();\n      this.storeFilters(this.params.pslug, urlfilters, this.filtersHashSuffix);\n      loadFilters = {};\n      loadFilters.project = this.scope.projectId;\n      loadFilters.q = urlfilters.q;\n      ref = this.filterCategories;\n      for (j = 0, len = ref.length; j < len; j++) {\n        key = ref[j];\n        excludeKey = this.excludePrefix.concat(key);\n        loadFilters[key] = urlfilters[key];\n        loadFilters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.q.all([this.rs.issues.filtersData(loadFilters), this.filterRemoteStorageService.getFilters(this.scope.projectId, this.myFiltersHashSuffix)]).then((function(_this) {\n        return function(result) {\n          var customFiltersRaw, data, dataCollection, k, len1, ref1, selected, tagsWithAtLeastOneElement;\n          data = result[0];\n          customFiltersRaw = result[1];\n          dataCollection = {};\n          dataCollection.status = _.map(data.statuses, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.type = _.map(data.types, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.severity = _.map(data.severities, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.priority = _.map(data.priorities, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.tags = _.map(data.tags, function(it) {\n            it.id = it.name;\n            return it;\n          });\n          tagsWithAtLeastOneElement = _.filter(dataCollection.tags, function(tag) {\n            return tag.count > 0;\n          });\n          dataCollection.assigned_to = _.map(data.assigned_to, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.owner = _.map(data.owners, function(it) {\n            it.id = it.id.toString();\n            it.name = it.full_name;\n            return it;\n          });\n          dataCollection.role = _.map(data.roles, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.name || \"Unassigned\";\n            return it;\n          });\n          _this.selectedFilters = [];\n          ref1 = _this.filterCategories;\n          for (k = 0, len1 = ref1.length; k < len1; k++) {\n            key = ref1[k];\n            excludeKey = _this.excludePrefix.concat(key);\n            if (loadFilters[key]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[key]);\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n            if (loadFilters[excludeKey]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\");\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n          }\n          _this.filterQ = loadFilters.q;\n          _this.filters = [\n            {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TYPE\"),\n              dataType: \"type\",\n              content: dataCollection.type\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.SEVERITY\"),\n              dataType: \"severity\",\n              content: dataCollection.severity\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.PRIORITIES\"),\n              dataType: \"priority\",\n              content: dataCollection.priority\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\n              dataType: \"status\",\n              content: dataCollection.status\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\n              dataType: \"tags\",\n              content: dataCollection.tags,\n              hideEmpty: true,\n              totalTaggedElements: tagsWithAtLeastOneElement.length\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\n              dataType: \"assigned_to\",\n              content: dataCollection.assigned_to\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\n              dataType: \"role\",\n              content: dataCollection.role\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\n              dataType: \"owner\",\n              content: dataCollection.owner\n            }\n          ];\n          _this.customFilters = [];\n          return _.forOwn(customFiltersRaw, function(value, key) {\n            return _this.customFilters.push({\n              id: key,\n              name: key,\n              filter: value\n            });\n          });\n        };\n      })(this));\n    };\n\n    IssuesController.prototype.initializeSubscription = function() {\n      var routingKey;\n      routingKey = \"changes.project.\" + this.scope.projectId + \".issues\";\n      return this.events.subscribe(this.scope, routingKey, debounceLeading(500, (function(_this) {\n        return function(message) {\n          return _this.loadIssues();\n        };\n      })(this)));\n    };\n\n    IssuesController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_issues_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.issueStatusById = groupBy(project.issue_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.issueStatusList = _.sortBy(project.issue_statuses, \"order\");\n      this.scope.severityById = groupBy(project.severities, function(x) {\n        return x.id;\n      });\n      this.scope.severityList = _.sortBy(project.severities, \"order\");\n      this.scope.priorityById = groupBy(project.priorities, function(x) {\n        return x.id;\n      });\n      this.scope.priorityList = _.sortBy(project.priorities, \"order\");\n      this.scope.issueTypes = _.sortBy(project.issue_types, \"order\");\n      this.scope.issueTypeById = groupBy(project.issue_types, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    IssuesController.prototype.loadIssuesRequests = 0;\n\n    IssuesController.prototype.loadIssues = function() {\n      var params, promise;\n      params = this.location.search();\n      promise = this.rs.issues.list(this.scope.projectId, params);\n      this.loadIssuesRequests += 1;\n      promise.index = this.loadIssuesRequests;\n      promise.then((function(_this) {\n        return function(data) {\n          if (promise.index === _this.loadIssuesRequests) {\n            _this.scope.issues = data.models;\n            _this.scope.page = data.current;\n            _this.scope.count = data.count;\n            _this.scope.paginatedBy = data.paginatedBy;\n          }\n          return data;\n        };\n      })(this));\n      return promise;\n    };\n\n    IssuesController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.initializeSubscription();\n      this.generateFilters();\n      if (this.rs.issues.getIssuesShowTags(this.scope.projectId) === false) {\n        this.showTags = false;\n      }\n      return this.loadIssues();\n    };\n\n    IssuesController.prototype.addNewIssue = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rootscope.$broadcast(\"genericform:new\", {\n        'objType': 'issue',\n        'project': project\n      });\n    };\n\n    IssuesController.prototype.addIssuesInBulk = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rootscope.$broadcast(\"issueform:bulk\", project.id);\n    };\n\n    IssuesController.prototype.getIssuesOrderBy = function() {\n      if (_.isString(this.location.search().order_by)) {\n        return this.location.search().order_by;\n      } else {\n        return \"created_date\";\n      }\n    };\n\n    return IssuesController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"IssuesController\", IssuesController);\n\n  IssuesPaginationDirective = function($log, $location, $template, $compile) {\n    var link, linkPagination, template;\n    template = $template.get(\"issue/issue-paginator.html\", true);\n    linkPagination = function($scope, $el, $attrs, $ctrl) {\n      var $pagEl, afterCurrent, atBegin, atEnd, beforeCurrent, getNumPages, renderPagination;\n      afterCurrent = 2;\n      beforeCurrent = 4;\n      atBegin = 2;\n      atEnd = 2;\n      $pagEl = $el.find(\".issues-paginator\");\n      getNumPages = function() {\n        var numPages;\n        numPages = $scope.count / $scope.paginatedBy;\n        if (parseInt(numPages, 10) < numPages) {\n          numPages = parseInt(numPages, 10) + 1;\n        } else {\n          numPages = parseInt(numPages, 10);\n        }\n        return numPages;\n      };\n      renderPagination = function() {\n        var cpage, html, i, j, numPages, options, pages, ref;\n        numPages = getNumPages();\n        if (numPages <= 1) {\n          $pagEl.hide();\n          return;\n        }\n        $pagEl.show();\n        pages = [];\n        options = {};\n        options.pages = pages;\n        options.showPrevious = $scope.page > 1;\n        options.showNext = !($scope.page === numPages);\n        cpage = $scope.page;\n        for (i = j = 1, ref = numPages; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n          if (i === (cpage + afterCurrent) && numPages > (cpage + afterCurrent + atEnd)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i === (cpage - beforeCurrent) && cpage > (atBegin + beforeCurrent)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i > (cpage + afterCurrent) && i <= (numPages - atEnd)) {\n\n          } else if (i < (cpage - beforeCurrent) && i > atBegin) {\n\n          } else if (i === cpage) {\n            pages.push({\n              classes: \"active\",\n              num: i,\n              type: \"page-active\"\n            });\n          } else {\n            pages.push({\n              classes: \"page\",\n              num: i,\n              type: \"page\"\n            });\n          }\n        }\n        html = template(options);\n        html = $compile(html)($scope);\n        return $pagEl.html(html);\n      };\n      $scope.$watch(\"issues\", function(value) {\n        if (!value) {\n          return;\n        }\n        return renderPagination();\n      });\n      $el.on(\"click\", \".issues-paginator a.next\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page + 1);\n          return $ctrl.loadIssues();\n        });\n      });\n      $el.on(\"click\", \".issues-paginator a.previous\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page - 1);\n          return $ctrl.loadIssues();\n        });\n      });\n      return $el.on(\"click\", \".issues-paginator li.page > a\", function(event) {\n        var pagenum, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        pagenum = target.data(\"pagenum\");\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", pagenum);\n          return $ctrl.loadIssues();\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      linkPagination($scope, $el, $attrs, $ctrl);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssuesPagination\", [\"$log\", \"$tgLocation\", \"$tgTemplate\", \"$compile\", IssuesPaginationDirective]);\n\n  IssuesOrderingDirective = function($log, $location, $template, $compile) {\n    var link, linkOrdering;\n    linkOrdering = function($scope, $el, $attrs, $ctrl) {\n      var colHeadElement, currentOrder, icon, svg;\n      currentOrder = $ctrl.getIssuesOrderBy();\n      if (currentOrder) {\n        icon = startswith(currentOrder, \"-\") ? \"icon-arrow-up\" : \"icon-arrow-down\";\n        colHeadElement = $el.find(\".row.title > div[data-fieldname='\" + (trim(currentOrder, \"-\")) + \"']\");\n        svg = colHeadElement.find('svg');\n        svg.addClass(icon);\n        $compile(colHeadElement.contents())($scope);\n      }\n      return $el.on(\"click\", \".row.title > div:not(.skip-order)\", function(event) {\n        var finalOrder, newOrder, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        currentOrder = $ctrl.getIssuesOrderBy();\n        newOrder = target.data(\"fieldname\");\n        if (newOrder === 'total_voters' && currentOrder !== \"-total_voters\") {\n          currentOrder = \"total_voters\";\n        }\n        finalOrder = currentOrder === newOrder ? \"-\" + newOrder : newOrder;\n        return $scope.$apply(function() {\n          var urlfilters;\n          $ctrl.replaceFilter(\"order_by\", finalOrder);\n          if ($ctrl.filtersHashSuffix) {\n            urlfilters = $ctrl.getQueryParams();\n            $ctrl.storeFilters($ctrl.params.pslug, urlfilters, $ctrl.filtersHashSuffix);\n          }\n          return $ctrl.loadIssues().then(function() {\n            $el.find('.row.title svg').removeClass();\n            colHeadElement = $el.find(\".row.title > div[data-fieldname='\" + (trim(finalOrder, \"-\")) + \"']\");\n            icon = startswith(finalOrder, \"-\") ? \"icon-arrow-up\" : \"icon-arrow-down\";\n            colHeadElement.find('svg').addClass(icon);\n            return $compile(target.contents())($scope);\n          });\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      linkOrdering($scope, $el, $attrs, $ctrl);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssuesOrdering\", [\"$log\", \"$tgLocation\", \"$tgTemplate\", \"$compile\", IssuesOrderingDirective]);\n\n  IssueStatusInlineEditionDirective = function($repo, $template, $rootscope) {\n\n    /*\n    Print the status of an Issue and a popover to change it.\n    - tg-issue-status-inline-edition: The issue\n    \n    Example:\n    \n      div.status(tg-issue-status-inline-edition=\"issue\")\n        a.issue-status(href=\"\")\n    \n    NOTE: This directive need 'issueStatusById' and 'project'.\n     */\n    var link, selectionTemplate, updateIssueStatus;\n    selectionTemplate = $template.get(\"issue/issue-status-inline-edition-selection.html\", true);\n    updateIssueStatus = function($el, issue, issueStatusById) {\n      var issueStatusDom, issueStatusDomParent, status;\n      issueStatusDomParent = $el.find(\".issue-status\");\n      issueStatusDom = $el.find(\".issue-status .issue-status-bind\");\n      status = issueStatusById[issue.status];\n      if (status) {\n        issueStatusDom.text(status.name);\n        issueStatusDom.prop(\"title\", status.name);\n        return issueStatusDomParent.css('color', status.color);\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl, issue;\n      $ctrl = $el.controller();\n      issue = $scope.$eval($attrs.tgIssueStatusInlineEdition);\n      $el.on(\"click\", \".issue-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var attachments, target;\n        event.preventDefault();\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        issue.status = target.data(\"status-id\");\n        $el.find(\".pop-status\").popover().close();\n        updateIssueStatus($el, issue, $scope.issueStatusById);\n        attachments = issue.attachments;\n        return $scope.$apply(function() {\n          return $repo.save(issue).then(function(response) {\n            issue.attachments = attachments;\n            issue._isModified = false;\n            issue._attrs = _.extend(issue.getAttrs(), issue);\n            issue._modifiedAttrs = {};\n            return $rootscope.$broadcast(\"status:changed\", response);\n          });\n        });\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        $el.append(selectionTemplate({\n          'statuses': project.issue_statuses\n        }));\n        updateIssueStatus($el, issue, $scope.issueStatusById);\n        if (project.my_permissions.indexOf(\"modify_issue\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      $scope.$watch($attrs.tgIssueStatusInlineEdition, (function(_this) {\n        return function(val) {\n          return updateIssueStatus($el, val, $scope.issueStatusById);\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssueStatusInlineEdition\", [\"$tgRepo\", \"$tgTemplate\", \"$rootScope\", IssueStatusInlineEditionDirective]);\n\n  IssueAssignedToInlineEditionDirective = function($repo, $rootscope, $translate, avatarService, $lightboxFactory) {\n    var link, template;\n    template = _.template(\"<img style=\\\"background-color: <%- bg %>\\\" src=\\\"<%- imgurl %>\\\" alt=\\\"<%- name %>\\\"/>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, issue, updateIssue;\n      updateIssue = function(issue) {\n        var avatar, ctx, member;\n        ctx = {\n          name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\"),\n          imgurl: \"/\" + window._version + \"/images/unnamed.png\"\n        };\n        member = $scope.usersById[issue.assigned_to];\n        avatar = avatarService.getAvatar(member);\n        ctx.imgurl = avatar.url;\n        ctx.bg = null;\n        if (member) {\n          ctx.name = member.full_name_display;\n          ctx.bg = avatar.bg;\n        }\n        $el.find(\".avatar\").html(template(ctx));\n        return $el.find(\".issue-assignedto\").attr('title', ctx.name);\n      };\n      $ctrl = $el.controller();\n      issue = $scope.$eval($attrs.tgIssueAssignedToInlineEdition);\n      updateIssue(issue);\n      $el.on(\"click\", \".issue-assignedto\", function(event) {\n        var onClose;\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            var attachments;\n            issue.assigned_to = assignedUsers.pop() || null;\n            attachments = issue.attachments;\n            return $repo.save(issue).then(function() {\n              issue.attachments = attachments;\n              issue._isModified = false;\n              issue._attrs = _.extend(issue.getAttrs(), issue);\n              issue._modifiedAttrs = {};\n              updateIssue(issue);\n              return $rootscope.$broadcast(\"assigned-to:changed\", issue);\n            });\n          };\n        })(this);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": [issue.assigned_to],\n          \"activeUsers\": $scope.activeUsers,\n          \"onClose\": onClose,\n          \"single\": true,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        if (project.my_permissions.indexOf(\"modify_issue\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      $scope.$watch($attrs.tgIssueAssignedToInlineEdition, function(val) {\n        return updateIssue(val);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssueAssignedToInlineEdition\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"tgAvatarService\", \"tgLightboxFactory\", IssueAssignedToInlineEditionDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UsClientRequirementButtonDirective, UsStatusButtonDirective, UsStatusDisplayDirective, UsTeamRequirementButtonDirective, UserStoryDetailController, bindMethods, bindOnce, groupBy, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaUserStories\");\n\n  UserStoryDetailController = (function(superClass) {\n    extend(UserStoryDetailController, superClass);\n\n    UserStoryDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"$tgConfig\", \"tgProjectService\", \"tgWysiwygService\", \"tgAttachmentsFullService\", \"$tgModel\", \"$sce\"];\n\n    function UserStoryDetailController(scope, rootscope, repo, confirm, rs, params, q, location, log, appMetaService, navUrls, analytics, translate, modelTransform, errorHandlingService, configService, projectService, wysiwigService, attachmentsFullService, tgmodel, sce) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.configService = configService;\n      this.projectService = projectService;\n      this.wysiwigService = wysiwigService;\n      this.attachmentsFullService = attachmentsFullService;\n      this.tgmodel = tgmodel;\n      this.sce = sce;\n      bindMethods(this);\n      this.scope.usRef = this.params.usref;\n      this.scope.sectionName = this.translate.instant(\"US.SECTION_NAME\");\n      this.scope.tribeEnabled = this.configService.config.tribeHost;\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserStoryDetailController.prototype._setMeta = function() {\n      var closedTasks, description, descriptionHtml, progressPercentage, ref, title, totalTasks;\n      totalTasks = this.scope.tasks.length;\n      closedTasks = _.filter(this.scope.tasks, (function(_this) {\n        return function(t) {\n          return _this.scope.taskStatusById[t.status].is_closed;\n        };\n      })(this)).length;\n      progressPercentage = totalTasks > 0 ? Math.round(100 * closedTasks / totalTasks) : 0;\n      title = this.translate.instant(\"US.PAGE_TITLE\", {\n        userStoryRef: \"#\" + this.scope.us.ref,\n        userStorySubject: this.scope.us.subject,\n        projectName: this.scope.project.name\n      });\n      descriptionHtml = this.sce.getTrustedHtml(this.wysiwigService.getHTML(this.scope.us.description) || \"\");\n      description = this.translate.instant(\"US.PAGE_DESCRIPTION\", {\n        userStoryStatus: ((ref = this.scope.statusById[this.scope.us.status]) != null ? ref.name : void 0) || \"--\",\n        userStoryPoints: this.scope.us.total_points,\n        userStoryDescription: angular.element(descriptionHtml).text(),\n        userStoryClosedTasks: closedTasks,\n        userStoryTotalTasks: totalTasks,\n        userStoryProgressPercentage: progressPercentage\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    UserStoryDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('us', this.scope.usId, this.scope.projectId);\n    };\n\n    UserStoryDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.relateToEpic = (function(_this) {\n        return function(us) {\n          return _this.scope.$broadcast(\"relate-to-epic:add\", us);\n        };\n      })(this);\n      this.scope.$on(\"related-tasks:update\", (function(_this) {\n        return function() {\n          var allClosed;\n          _this.loadTasks();\n          _this.scope.tasks = _.clone(_this.scope.tasks, false);\n          allClosed = _.every(_this.scope.tasks, function(task) {\n            return task.is_closed;\n          });\n          if (_this.scope.us.is_closed !== allClosed) {\n            return _this.loadUs();\n          }\n        };\n      })(this));\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on userstory\", 1);\n        };\n      })(this));\n      this.scope.$on(\"task:reorder\", (function(_this) {\n        return function(event, task, newIndex) {\n          return _this.reorderTask(task, newIndex);\n        };\n      })(this));\n      return this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadUs();\n        };\n      })(this));\n    };\n\n    UserStoryDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project\", ctx);\n      if (this.params[\"kanban-status\"] && this.scope.project.is_kanban_activated) {\n        return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-kanban\", ctx);\n      } else {\n        if (this.scope.project.is_backlog_activated) {\n          if (this.scope.us.milestone) {\n            ctx.sprint = this.scope.sprint.slug;\n            return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-taskboard\", ctx);\n          } else {\n            return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-backlog\", ctx);\n          }\n        }\n      }\n    };\n\n    UserStoryDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.us_statuses;\n      this.scope.statusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.taskStatusById = groupBy(project.task_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.pointsList = _.sortBy(project.points, \"order\");\n      this.scope.pointsById = groupBy(this.scope.pointsList, function(e) {\n        return e.id;\n      });\n      return project;\n    };\n\n    UserStoryDetailController.prototype.loadUs = function() {\n      var backlogHttpParams, kanbanHttpParams, kanbanStaus, locationSearch, milestone, noMilestone;\n      kanbanHttpParams = {};\n      locationSearch = this.location.search();\n      backlogHttpParams = _.pick(locationSearch, \"milestone\", \"no-milestone\");\n      Object.keys(locationSearch).forEach(function(key) {\n        if (key.startsWith('kanban-')) {\n          return kanbanHttpParams[key.replace('kanban-', '')] = locationSearch[key];\n        }\n      });\n      Object.keys(locationSearch).forEach(function(key) {\n        if (key.startsWith('backlog-')) {\n          return backlogHttpParams[key.replace('backlog-', '')] = locationSearch[key];\n        }\n      });\n      milestone = backlogHttpParams.milestone;\n      if (milestone) {\n        this.rs.userstories.storeQueryParams(this.scope.projectId, _.merge(backlogHttpParams, {\n          milestone: milestone,\n          order_by: \"sprint_order\"\n        }));\n      }\n      noMilestone = backlogHttpParams[\"no-milestone\"];\n      if (noMilestone) {\n        this.rs.userstories.storeQueryParams(this.scope.projectId, _.merge(backlogHttpParams, {\n          milestone: \"null\",\n          order_by: \"backlog_order\"\n        }));\n      }\n      kanbanStaus = kanbanHttpParams[\"status\"];\n      if (kanbanStaus) {\n        this.rs.userstories.storeQueryParams(this.scope.projectId, _.merge(kanbanHttpParams, {\n          order_by: \"kanban_order\"\n        }));\n      }\n      return this.rs.userstories.getByRef(this.scope.projectId, this.params.usref).then((function(_this) {\n        return function(us) {\n          _this.rootscope.$broadcast(\"userstory:loaded\", us);\n          _this.scope.us = us;\n          _this.scope.usId = us.id;\n          _this.scope.commentModel = us;\n          _this.loadAttachments();\n          window.legacyChannel.next({\n            type: 'SET_DETAIL_OBJ',\n            value: us._attrs\n          });\n          _this.modelTransform.setObject(_this.scope, 'us');\n          return us;\n        };\n      })(this));\n    };\n\n    UserStoryDetailController.prototype.loadSprint = function() {\n      if (this.scope.us.milestone) {\n        return this.rs.sprints.get(this.scope.us.project, this.scope.us.milestone).then((function(_this) {\n          return function(sprint) {\n            _this.scope.sprint = sprint;\n            return sprint;\n          };\n        })(this));\n      }\n    };\n\n    UserStoryDetailController.prototype.loadTasks = function() {\n      return this.rs.tasks.list(this.scope.projectId, null, this.scope.usId).then((function(_this) {\n        return function(tasks) {\n          _this.scope.tasks = tasks;\n          return tasks;\n        };\n      })(this));\n    };\n\n    UserStoryDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadUs().then((function(_this) {\n        return function() {\n          return _this.q.all([_this.loadSprint(), _this.loadTasks()]);\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    UserStoryDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.upvote(this.scope.usId).then(onSuccess, onError);\n    };\n\n    UserStoryDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.downvote(this.scope.usId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    UserStoryDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.watch(this.scope.usId).then(onSuccess, onError);\n    };\n\n    UserStoryDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.unwatch(this.scope.usId).then(onSuccess, onError);\n    };\n\n    UserStoryDetailController.prototype.onTribeInfo = function() {\n      var image, publishDesc, publishTitle, text;\n      publishTitle = this.translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TITLE\");\n      image = $('<img />').attr({\n        'src': \"/\" + window._version + \"/images/monster-fight.png\",\n        'alt': this.translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TITLE\")\n      });\n      text = this.translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TEXT\");\n      publishDesc = $('<div></div>').append(image).append(text);\n      return this.confirm.success(publishTitle, publishDesc);\n    };\n\n    UserStoryDetailController.prototype.reorderTask = function(task, newIndex) {\n      var afterDestination, beforeDestination, data, newOrder, orderList, previous, previousWithTheSameOrder, setOrders, withoutMoved;\n      orderList = {};\n      this.scope.tasks.forEach(function(it) {\n        return orderList[it.id] = it.us_order;\n      });\n      withoutMoved = this.scope.tasks.filter(function(it) {\n        return it.id !== task.id;\n      });\n      beforeDestination = withoutMoved.slice(0, newIndex);\n      afterDestination = withoutMoved.slice(newIndex);\n      previous = beforeDestination[beforeDestination.length - 1];\n      newOrder = !previous ? 0 : previous.us_order + 1;\n      orderList[task.id] = newOrder;\n      previousWithTheSameOrder = beforeDestination.filter(function(it) {\n        return it.us_order === previous.us_order;\n      });\n      setOrders = _.fromPairs(previousWithTheSameOrder.map(function(it) {\n        return [it.id, it.us_order];\n      }));\n      afterDestination.forEach(function(it) {\n        return orderList[it.id] = it.us_order + 1;\n      });\n      this.scope.tasks = _.map(this.scope.tasks, function(it) {\n        it.us_order = orderList[it.id];\n        return it;\n      });\n      this.scope.tasks = _.sortBy(this.scope.tasks, \"us_order\");\n      data = {\n        us_order: newOrder,\n        version: task.version\n      };\n      return this.rs.tasks.reorder(task.id, data, setOrders).then((function(_this) {\n        return function(newTask) {\n          newTask = _this.tgmodel.make_model(\"tasks\", newTask);\n          _this.scope.tasks = _.map(_this.scope.tasks, function(it) {\n            if (it.id === newTask.id) {\n              return newTask;\n            } else {\n              return it;\n            }\n          });\n          return _this.rootscope.$broadcast(\"related-tasks:reordered\");\n        };\n      })(this));\n    };\n\n    return UserStoryDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserStoryDetailController\", UserStoryDetailController);\n\n  UsStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(us) {\n        var html, status;\n        status = $scope.statusById[us.status];\n        html = template({\n          is_closed: us.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(us) {\n        if (us != null) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsStatusDisplay\", [\"$tgTemplate\", \"$compile\", UsStatusDisplayDirective]);\n\n  UsStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      render = (function(_this) {\n        return function(us) {\n          var html, status;\n          status = $scope.statusById[us.status];\n          html = template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          });\n          $el.html(html);\n          return $compile($el.contents())($scope);\n        };\n      })(this);\n      save = (function(_this) {\n        return function(status) {\n          var currentLoading, onError, onSuccess, transform;\n          $el.find(\".pop-status\").popover().close();\n          currentLoading = $loading().target($el.find('.js-edit-status')).start();\n          transform = $modelTransform.save(function(us) {\n            us.status = status;\n            return us;\n          });\n          onSuccess = function() {\n            $rootScope.$broadcast(\"object:updated\");\n            return currentLoading.finish();\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            return currentLoading.finish();\n          };\n          return transform.then(onSuccess, onError);\n        };\n      })(this);\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var status, target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        status = target.data(\"status-id\");\n        return save(status);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.status : void 0;\n      }, function() {\n        var us;\n        us = $model.$modelValue;\n        if (us) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", UsStatusButtonDirective]);\n\n  UsTeamRequirementButtonDirective = function($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"us/us-team-requirement-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var canEdit, render, save;\n      canEdit = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      render = function(us) {\n        var ctx, html;\n        ctx = {\n          canEdit: canEdit(),\n          isRequired: us.team_requirement\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(team_requirement) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find(\"label\")).start();\n        transform = $modelTransform.save(function(us) {\n          us.team_requirement = team_requirement;\n          return us;\n        });\n        transform.then((function(_this) {\n          return function() {\n            currentLoading.finish();\n            return $rootscope.$broadcast(\"object:updated\");\n          };\n        })(this));\n        return transform.then(null, function() {\n          currentLoading.finish();\n          return $confirm.notify(\"error\");\n        });\n      };\n      $el.on(\"click\", \".team-requirement\", function(event) {\n        var team_requirement;\n        if (!canEdit()) {\n          return;\n        }\n        team_requirement = !$model.$modelValue.team_requirement;\n        return save(team_requirement);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.team_requirement : void 0;\n      }, function() {\n        var us;\n        us = $model.$modelValue;\n        if (us) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsTeamRequirementButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", UsTeamRequirementButtonDirective]);\n\n  UsClientRequirementButtonDirective = function($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"us/us-client-requirement-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var canEdit, render, save;\n      canEdit = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      render = function(us) {\n        var ctx, html;\n        ctx = {\n          canEdit: canEdit(),\n          isRequired: us.client_requirement\n        };\n        html = $compile(template(ctx))($scope);\n        return $el.html(html);\n      };\n      save = function(client_requirement) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find(\"label\")).start();\n        transform = $modelTransform.save(function(us) {\n          us.client_requirement = client_requirement;\n          return us;\n        });\n        transform.then((function(_this) {\n          return function() {\n            currentLoading.finish();\n            return $rootscope.$broadcast(\"object:updated\");\n          };\n        })(this));\n        return transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n      };\n      $el.on(\"click\", \".client-requirement\", function(event) {\n        var client_requirement;\n        if (!canEdit()) {\n          return;\n        }\n        client_requirement = !$model.$modelValue.client_requirement;\n        return save(client_requirement);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.client_requirement : void 0;\n      }, function() {\n        var us;\n        us = $model.$modelValue;\n        if (us) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsClientRequirementButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", UsClientRequirementButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TaskDetailController, TaskIsIocaineButtonDirective, TaskStatusButtonDirective, TaskStatusDisplayDirective, bindMethods, groupBy, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaTasks\");\n\n  TaskDetailController = (function(superClass) {\n    extend(TaskDetailController, superClass);\n\n    TaskDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function TaskDetailController(scope, rootscope, repo, confirm, rs, params, q, location, log, appMetaService, navUrls, analytics, translate, modelTransform, errorHandlingService, projectService, attachmentsFullService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      bindMethods(this);\n      this.scope.taskRef = this.params.taskref;\n      this.scope.sectionName = this.translate.instant(\"TASK.SECTION_NAME\");\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    TaskDetailController.prototype._setMeta = function() {\n      var description, ref1, title;\n      title = this.translate.instant(\"TASK.PAGE_TITLE\", {\n        taskRef: \"#\" + this.scope.task.ref,\n        taskSubject: this.scope.task.subject,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"TASK.PAGE_DESCRIPTION\", {\n        taskStatus: ((ref1 = this.scope.statusById[this.scope.task.status]) != null ? ref1.name : void 0) || \"--\",\n        taskDescription: angular.element(this.scope.task.description_html || \"\").text()\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    TaskDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('task', this.scope.taskId, this.scope.projectId);\n    };\n\n    TaskDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"promote-task-to-us:success\", (function(_this) {\n        return function(e, ref) {\n          var ctx;\n          _this.analytics.trackEvent(\"task\", \"promoteToUserstory\", \"promote task to userstory\", 1);\n          ctx = {\n            project: _this.scope.project.slug,\n            ref: ref\n          };\n          return _this.location.path(_this.navUrls.resolve(\"project-userstories-detail\", ctx));\n        };\n      })(this));\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on task\", 1);\n        };\n      })(this));\n      this.scope.$on(\"custom-attributes-values:edit\", (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this));\n      return this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadTask();\n        };\n      })(this));\n    };\n\n    TaskDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project\", ctx);\n      if (this.scope.project.is_backlog_activated) {\n        if (this.scope.task.milestone) {\n          ctx.sprint = this.scope.sprint.slug;\n          return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-taskboard\", ctx);\n        } else if (this.scope.task.us) {\n          ctx.ref = this.scope.us.ref;\n          return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-userstories-detail\", ctx);\n        }\n      } else if (this.scope.project.is_kanban_activated) {\n        if (this.scope.us) {\n          ctx.ref = this.scope.us.ref;\n          return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-userstories-detail\", ctx);\n        }\n      }\n    };\n\n    TaskDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.task_statuses;\n      this.scope.statusById = groupBy(project.task_statuses, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    TaskDetailController.prototype.loadTask = function() {\n      return this.rs.tasks.getByRef(this.scope.projectId, this.params.taskref).then((function(_this) {\n        return function(task) {\n          var ctx, ref1, ref2;\n          _this.scope.task = task;\n          _this.scope.taskId = task.id;\n          _this.scope.commentModel = task;\n          _this.loadAttachments();\n          window.legacyChannel.next({\n            type: 'SET_DETAIL_OBJ',\n            value: task._attrs\n          });\n          _this.modelTransform.setObject(_this.scope, 'task');\n          if (((ref1 = _this.scope.task.neighbors.previous) != null ? ref1.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.task.neighbors.previous.ref\n            };\n            _this.scope.previousUrl = _this.navUrls.resolve(\"project-tasks-detail\", ctx);\n          }\n          if (((ref2 = _this.scope.task.neighbors.next) != null ? ref2.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.task.neighbors.next.ref\n            };\n            _this.scope.nextUrl = _this.navUrls.resolve(\"project-tasks-detail\", ctx);\n          }\n          return task;\n        };\n      })(this));\n    };\n\n    TaskDetailController.prototype.loadSprint = function() {\n      if (this.scope.task.milestone) {\n        return this.rs.sprints.get(this.scope.task.project, this.scope.task.milestone).then((function(_this) {\n          return function(sprint) {\n            _this.scope.sprint = sprint;\n            return sprint;\n          };\n        })(this));\n      }\n    };\n\n    TaskDetailController.prototype.loadUserStory = function() {\n      if (this.scope.task.user_story) {\n        return this.rs.userstories.get(this.scope.task.project, this.scope.task.user_story).then((function(_this) {\n          return function(us) {\n            _this.scope.us = us;\n            return us;\n          };\n        })(this));\n      }\n    };\n\n    TaskDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadTask().then((function(_this) {\n        return function() {\n          return _this.q.all([_this.loadSprint(), _this.loadUserStory()]);\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    TaskDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.upvote(this.scope.taskId).then(onSuccess, onError);\n    };\n\n    TaskDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.downvote(this.scope.taskId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    TaskDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.watch(this.scope.taskId).then(onSuccess, onError);\n    };\n\n    TaskDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.unwatch(this.scope.taskId).then(onSuccess, onError);\n    };\n\n    return TaskDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"TaskDetailController\", TaskDetailController);\n\n  TaskStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(task) {\n        var html, status;\n        status = $scope.statusById[task.status];\n        html = template({\n          is_closed: status.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(task) {\n        if (task != null) {\n          return render(task);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgTaskStatusDisplay\", [\"$tgTemplate\", \"$compile\", TaskStatusDisplayDirective]);\n\n  TaskStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $compile, $translate, $template) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_task\") !== -1;\n      };\n      render = (function(_this) {\n        return function(task) {\n          var html, status;\n          status = $scope.statusById[task.status];\n          html = $compile(template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          }))($scope);\n          return $el.html(html);\n        };\n      })(this);\n      save = function(status) {\n        var currentLoading, onError, onSuccess, transform;\n        currentLoading = $loading().target($el).start();\n        transform = $modelTransform.save(function(task) {\n          task.status = status;\n          return task;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        $.fn.popover().closeAll();\n        return save(target.data(\"status-id\"));\n      });\n      $scope.$watch(function() {\n        var ref1;\n        return (ref1 = $model.$modelValue) != null ? ref1.status : void 0;\n      }, function() {\n        var task;\n        task = $model.$modelValue;\n        if (task) {\n          return render(task);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgTaskStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$compile\", \"$translate\", \"$tgTemplate\", TaskStatusButtonDirective]);\n\n  TaskIsIocaineButtonDirective = function($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $compile, $template) {\n    var link, template;\n    template = $template.get(\"issue/iocaine-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_task\") !== -1;\n      };\n      render = function(task) {\n        var ctx, html;\n        if (!isEditable() && !task.is_iocaine) {\n          $el.html(\"\");\n          return;\n        }\n        ctx = {\n          isIocaine: task.is_iocaine,\n          isEditable: isEditable()\n        };\n        html = $compile(template(ctx))($scope);\n        return $el.html(html);\n      };\n      save = function(is_iocaine) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find('label')).start();\n        transform = $modelTransform.save(function(task) {\n          task.is_iocaine = is_iocaine;\n          return task;\n        });\n        transform.then(function() {\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          return currentLoading.finish();\n        });\n      };\n      $el.on(\"click\", \".is-iocaine\", function(event) {\n        var is_iocaine;\n        if (!isEditable()) {\n          return;\n        }\n        is_iocaine = !$model.$modelValue.is_iocaine;\n        return save(is_iocaine);\n      });\n      $scope.$watch(function() {\n        var ref1;\n        return (ref1 = $model.$modelValue) != null ? ref1.is_iocaine : void 0;\n      }, function() {\n        var task;\n        task = $model.$modelValue;\n        if (task) {\n          return render(task);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgTaskIsIocaineButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$compile\", \"$tgTemplate\", TaskIsIocaineButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var LeaveProjectDirective, TeamController, TeamFiltersDirective, TeamMemberCurrentUserDirective, TeamMemberStatsDirective, TeamMembersDirective, membersFilter, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  module = angular.module(\"taigaTeam\");\n\n  TeamController = (function(superClass) {\n    extend(TeamController, superClass);\n\n    TeamController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$q\", \"$location\", \"$tgNavUrls\", \"tgAppMetaService\", \"$tgAuth\", \"$translate\", \"tgProjectService\", \"tgErrorHandlingService\"];\n\n    function TeamController(scope, rootscope, repo, rs, params, q, location, navUrls, appMetaService, auth, translate, projectService, errorHandlingService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.auth = auth;\n      this.translate = translate;\n      this.projectService = projectService;\n      this.errorHandlingService = errorHandlingService;\n      this.scope.sectionName = \"TEAM.SECTION_NAME\";\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"TEAM.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"TEAM.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    TeamController.prototype.setRole = function(role) {\n      if (role) {\n        return this.scope.filtersRole = role;\n      } else {\n        return this.scope.filtersRole = null;\n      }\n    };\n\n    TeamController.prototype.loadMembers = function() {\n      var i, len, member, ref, user;\n      user = this.auth.getUser();\n      this.scope.totals = {};\n      ref = this.scope.activeUsers;\n      for (i = 0, len = ref.length; i < len; i++) {\n        member = ref[i];\n        this.scope.totals[member.id] = 0;\n      }\n      this.scope.currentUser = _.find(this.scope.activeUsers, {\n        id: user != null ? user.id : void 0\n      });\n      return this.scope.memberships = _.reject(this.scope.activeUsers, {\n        id: user != null ? user.id : void 0\n      });\n    };\n\n    TeamController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.issuesEnabled = project.is_issues_activated;\n      this.scope.tasksEnabled = project.is_kanban_activated || project.is_backlog_activated;\n      this.scope.wikiEnabled = project.is_wiki_activated;\n      this.scope.owner = project.owner.id;\n      return project;\n    };\n\n    TeamController.prototype.loadMemberStats = function() {\n      return this.rs.projects.memberStats(this.scope.projectId).then((function(_this) {\n        return function(stats) {\n          var totals;\n          totals = {};\n          _.forEach(_this.scope.totals, function(total, userId) {\n            var vals;\n            vals = _.map(stats, function(memberStats, statsKey) {\n              return memberStats[userId];\n            });\n            total = _.reduce(vals, function(sum, el) {\n              return sum + el;\n            });\n            return _this.scope.totals[userId] = total;\n          });\n          _this.scope.stats = _this._processStats(stats);\n          return _this.scope.stats.totals = _this.scope.totals;\n        };\n      })(this));\n    };\n\n    TeamController.prototype._processStat = function(stat) {\n      var key, max, min, singleStat, value;\n      max = _.max(_.toArray(stat));\n      min = _.min(_.toArray(stat));\n      singleStat = Object();\n      for (key in stat) {\n        if (!hasProp.call(stat, key)) continue;\n        value = stat[key];\n        if (value === min) {\n          singleStat[key] = 0.1;\n        } else if (value === max) {\n          singleStat[key] = 1;\n        } else {\n          singleStat[key] = (value * 0.5) / max;\n        }\n      }\n      return singleStat;\n    };\n\n    TeamController.prototype._processStats = function(stats) {\n      var key, value;\n      for (key in stats) {\n        value = stats[key];\n        stats[key] = this._processStat(value);\n      }\n      return stats;\n    };\n\n    TeamController.prototype.loadInitialData = function() {\n      var project, userRoles;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.loadMembers();\n      userRoles = _.map(this.scope.users, function(user) {\n        return user.role;\n      });\n      this.scope.roles = _.filter(this.scope.roles, function(role) {\n        return userRoles.indexOf(role.id) !== -1;\n      });\n      return this.loadMemberStats();\n    };\n\n    return TeamController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"TeamController\", TeamController);\n\n  TeamFiltersDirective = function() {\n    return {\n      templateUrl: \"team/team-filter.html\"\n    };\n  };\n\n  module.directive(\"tgTeamFilters\", [TeamFiltersDirective]);\n\n  TeamMemberStatsDirective = function() {\n    return {\n      templateUrl: \"team/team-member-stats.html\",\n      scope: {\n        stats: \"=\",\n        userId: \"=user\",\n        issuesEnabled: \"=issuesenabled\",\n        tasksEnabled: \"=tasksenabled\",\n        wikiEnabled: \"=wikienabled\"\n      }\n    };\n  };\n\n  module.directive(\"tgTeamMemberStats\", TeamMemberStatsDirective);\n\n  TeamMemberCurrentUserDirective = function() {\n    return {\n      templateUrl: \"team/team-member-current-user.html\",\n      scope: {\n        project: \"=project\",\n        currentUser: \"=currentuser\",\n        stats: \"=\",\n        issuesEnabled: \"=issuesenabled\",\n        tasksEnabled: \"=tasksenabled\",\n        wikiEnabled: \"=wikienabled\",\n        owner: \"=owner\"\n      }\n    };\n  };\n\n  module.directive(\"tgTeamCurrentUser\", TeamMemberCurrentUserDirective);\n\n  TeamMembersDirective = function() {\n    var template;\n    template = \"team/team-members.html\";\n    return {\n      templateUrl: template,\n      scope: {\n        memberships: \"=\",\n        filtersQ: \"=filtersq\",\n        filtersRole: \"=filtersrole\",\n        stats: \"=\",\n        issuesEnabled: \"=issuesenabled\",\n        tasksEnabled: \"=tasksenabled\",\n        wikiEnabled: \"=wikienabled\",\n        owner: \"=owner\"\n      }\n    };\n  };\n\n  module.directive(\"tgTeamMembers\", TeamMembersDirective);\n\n  LeaveProjectDirective = function($repo, $confirm, $location, $rs, $navurls, $translate, lightboxFactory, currentUserService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var leaveConfirm;\n      leaveConfirm = function() {\n        var confirm_leave_project_text, leave_project_text;\n        leave_project_text = $translate.instant(\"TEAM.ACTION_LEAVE_PROJECT\");\n        confirm_leave_project_text = $translate.instant(\"TEAM.CONFIRM_LEAVE_PROJECT\");\n        return $confirm.ask(leave_project_text, confirm_leave_project_text).then((function(_this) {\n          return function(response) {\n            var promise;\n            promise = $rs.projects.leave($scope.project.id);\n            promise.then(function() {\n              return currentUserService.loadProjects().then(function() {\n                response.finish();\n                $confirm.notify(\"success\");\n                return $location.path($navurls.resolve(\"home\"));\n              });\n            });\n            return promise.then(null, function(response) {\n              response.finish();\n              return $confirm.notify('error', response.data._error_message);\n            });\n          };\n        })(this));\n      };\n      return $scope.leave = function() {\n        if ($scope.project.owner.id === $scope.user.id) {\n          return lightboxFactory.create(\"tg-lightbox-leave-project-warning\", {\n            \"class\": \"lightbox lightbox-leave-project-warning\"\n          }, {\n            isCurrentUser: true,\n            project: $scope.project\n          });\n        } else {\n          return leaveConfirm();\n        }\n      };\n    };\n    return {\n      scope: {\n        user: \"=\",\n        project: \"=\"\n      },\n      templateUrl: \"team/leave-project.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLeaveProject\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"$tgResources\", \"$tgNavUrls\", \"$translate\", \"tgLightboxFactory\", \"tgCurrentUserService\", LeaveProjectDirective]);\n\n  membersFilter = function() {\n    return function(members, filtersQ, filtersRole) {\n      return _.filter(members, function(m) {\n        return (!filtersRole || m.role === filtersRole.id) && (!filtersQ || m.full_name.search(new RegExp(filtersQ, \"i\")) >= 0);\n      });\n    };\n  };\n\n  module.filter('membersFilter', membersFilter);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WikiDetailController, WikiSummaryDirective, WikiWysiwyg, bindOnce, debounce, groupBy, mixOf, module, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaWiki\");\n\n  WikiDetailController = (function(superClass) {\n    extend(WikiDetailController, superClass);\n\n    WikiDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgModel\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$filter\", \"$log\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function WikiDetailController(scope, rootscope, repo, model, confirm, rs, params, q, location, filter, log, appMetaService, navUrls, analytics, translate, errorHandlingService, projectService, attachmentsFullService1) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.model = model;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.filter = filter;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService1;\n      this.moveLink = bind(this.moveLink, this);\n      this.loadWiki = bind(this.loadWiki, this);\n      this.scope.$on(\"wiki:links:move\", this.moveLink);\n      this.scope.$on(\"wikipage:add\", this.loadWiki);\n      this.scope.projectSlug = this.params.pslug;\n      this.scope.wikiSlug = this.params.slug;\n      this.scope.sectionName = \"Wiki\";\n      this.scope.linksVisible = false;\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          return _this._setMeta();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    WikiDetailController.prototype._setMeta = function() {\n      var description, ref, ref1, ref2, title;\n      title = this.translate.instant(\"WIKI.PAGE_TITLE\", {\n        wikiPageName: this.scope.wikiSlug,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"WIKI.PAGE_DESCRIPTION\", {\n        wikiPageContent: angular.element(((ref = this.scope.wiki) != null ? ref.html : void 0) || \"\").text(),\n        totalEditions: ((ref1 = this.scope.wiki) != null ? ref1.editions : void 0) || 0,\n        lastModifiedDate: moment((ref2 = this.scope.wiki) != null ? ref2.modified_date : void 0).format(this.translate.instant(\"WIKI.DATETIME\"))\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    WikiDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('wikipage', this.scope.wikiId, this.scope.projectId);\n    };\n\n    WikiDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_wiki_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    WikiDetailController.prototype.loadWiki = function() {\n      var promise;\n      promise = this.rs.wiki.getBySlug(this.scope.projectId, this.params.slug);\n      promise.then((function(_this) {\n        return function(wiki) {\n          _this.scope.wiki = wiki;\n          _this.scope.wikiId = wiki.id;\n          _this.loadAttachments();\n          return _this.scope.wiki;\n        };\n      })(this));\n      return promise.then(null, (function(_this) {\n        return function(xhr) {\n          var data;\n          _this.scope.wikiId = null;\n          _this.scope.attachmentsReady = true;\n          if (_this.scope.project.my_permissions.indexOf(\"add_wiki_page\") === -1) {\n            return null;\n          }\n          data = {\n            project: _this.scope.projectId,\n            slug: _this.scope.wikiSlug,\n            content: \"\"\n          };\n          _this.scope.wiki = _this.model.make_model(\"wiki\", data);\n          return _this.scope.wiki;\n        };\n      })(this));\n    };\n\n    WikiDetailController.prototype.loadWikiLinks = function() {\n      return this.rs.wiki.listLinks(this.scope.projectId).then((function(_this) {\n        return function(wikiLinks) {\n          var i, len, link, ref, selectedWikiLink;\n          _this.scope.wikiLinks = wikiLinks;\n          ref = _this.scope.wikiLinks;\n          for (i = 0, len = ref.length; i < len; i++) {\n            link = ref[i];\n            link.url = _this.navUrls.resolve(\"project-wiki-page\", {\n              project: _this.scope.projectSlug,\n              slug: link.href\n            });\n          }\n          return selectedWikiLink = _.find(wikiLinks, {\n            href: _this.scope.wikiSlug\n          });\n        };\n      })(this));\n    };\n\n    WikiDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.q.all([this.loadWikiLinks(), this.loadWiki()]).then(this.checkLinksPerms.bind(this));\n    };\n\n    WikiDetailController.prototype.checkLinksPerms = function() {\n      if (this.scope.project.my_permissions.indexOf(\"add_wiki_link\") !== -1 || (this.scope.project.my_permissions.indexOf(\"view_wiki_links\") !== -1 && this.scope.wikiLinks.length)) {\n        return this.scope.linksVisible = true;\n      }\n    };\n\n    WikiDetailController.prototype[\"delete\"] = function() {\n      var message, title;\n      title = this.translate.instant(\"WIKI.DELETE_LIGHTBOX_TITLE\");\n      message = this.scope.wikiSlug;\n      return this.confirm.askOnDelete(title, message).then((function(_this) {\n        return function(askResponse) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            var ctx;\n            askResponse.finish();\n            ctx = {\n              project: _this.scope.projectSlug\n            };\n            _this.location.path(_this.navUrls.resolve(\"project-wiki\", ctx));\n            _this.confirm.notify(\"success\");\n            return _this.loadWiki();\n          };\n          onError = function() {\n            askResponse.finish(false);\n            return _this.confirm.notify(\"error\");\n          };\n          return _this.repo.remove(_this.scope.wiki).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    WikiDetailController.prototype.moveLink = function(ctx, item, itemIndex) {\n      var r, values;\n      values = this.scope.wikiLinks;\n      r = values.indexOf(item);\n      values.splice(r, 1);\n      values.splice(itemIndex, 0, item);\n      _.each(values, function(value, index) {\n        return value.order = index;\n      });\n      return this.repo.saveAll(values);\n    };\n\n    return WikiDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"WikiDetailController\", WikiDetailController);\n\n  WikiSummaryDirective = function($log, $template, $compile, $translate, avatarService) {\n    var link, template;\n    template = $template.get(\"wiki/wiki-summary.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var render;\n      render = function(wiki) {\n        var avatar, ctx, html, user;\n        if ($scope.usersById == null) {\n          $log.error(\"WikiSummaryDirective requires userById set in scope.\");\n        } else {\n          user = $scope.usersById[wiki.last_modifier];\n        }\n        avatar = avatarService.getAvatar(user);\n        if (user === void 0) {\n          user = {\n            name: \"unknown\",\n            avatar: avatar\n          };\n        } else {\n          user = {\n            name: user.full_name_display,\n            avatar: avatar\n          };\n        }\n        ctx = {\n          totalEditions: wiki.editions,\n          lastModifiedDate: moment(wiki.modified_date).format($translate.instant(\"WIKI.DATETIME\")),\n          user: user\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(wikiPage) {\n        if (!wikiPage) {\n          return;\n        }\n        return render(wikiPage);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgWikiSummary\", [\"$log\", \"$tgTemplate\", \"$compile\", \"$translate\", \"tgAvatarService\", WikiSummaryDirective]);\n\n  WikiWysiwyg = function($modelTransform, $rootscope, $confirm, attachmentsFullService, $qqueue, $repo, $analytics, activityService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      $scope.editableDescription = false;\n      $scope.saveDescription = $qqueue.bindAdd(function(description, cb) {\n        var onError, onSuccess, promise;\n        onSuccess = function(wikiPage) {\n          if ($scope.item.id == null) {\n            $analytics.trackEvent(\"wikipage\", \"create\", \"create wiki page\", 1);\n            $scope.$emit(\"wikipage:add\");\n            $scope.editableDescription = $scope.project.my_permissions.indexOf(\"modify_wiki_page\") !== -1;\n          }\n          activityService.fetchEntries(true);\n          return $confirm.notify(\"success\");\n        };\n        onError = function() {\n          return $confirm.notify(\"error\");\n        };\n        $scope.item.content = description;\n        if ($scope.item.id != null) {\n          promise = $repo.save($scope.item).then(onSuccess, onError);\n        } else {\n          promise = $repo.create(\"wiki\", $scope.item).then(onSuccess, onError);\n        }\n        return promise[\"finally\"](cb);\n      });\n      $scope.uploadFiles = function(file, cb) {\n        attachmentsFullService.addAttachment($scope.project.id, $scope.item.id, 'wiki_page', file).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n      $scope.$watch($attrs.model, function(value) {\n        if (!value) {\n          return;\n        }\n        $scope.item = value;\n        $scope.version = value.version;\n        return $scope.storageKey = $scope.project.id + \"-\" + value.id + \"-wiki\";\n      });\n      return $scope.$watch('project', function(project) {\n        if (!project) {\n          return;\n        }\n        if ($scope.item.id != null) {\n          return $scope.editableDescription = project.my_permissions.indexOf(\"modify_wiki_page\") !== -1;\n        } else {\n          return $scope.editableDescription = project.my_permissions.indexOf(\"add_wiki_page\") !== -1;\n        }\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        ng-if=\\\"editableDescription\\\"\\n        html-read-mode=\\\"true\\\"\\n        placeholder=\\\"'COMMON.DESCRIPTION.EMPTY '| translate\\\"\\n        version='version'\\n        project=\\\"project\\\"\\n        storage-key='storageKey'\\n        content='item.content'\\n        on-save='saveDescription(text, cb)'\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n\\n    <div\\n        class=\\\"wysiwyg\\\"\\n        ng-if=\\\"!editableDescription && item.content.length\\\"\\n        tg-bind-wysiwyg-html=\\\"item.content\\\"></div>\\n    <div\\n        class=\\\"wysiwyg\\\"\\n        ng-if=\\\"!editableDescription && !item.content.length\\\">\\n        {{'COMMON.DESCRIPTION.NO_DESCRIPTION' | translate}}\\n    </div>\\n</div>\"\n    };\n  };\n\n  module.directive(\"tgWikiWysiwyg\", [\"$tgQueueModelTransformation\", \"$rootScope\", \"$tgConfirm\", \"tgAttachmentsFullService\", \"$tgQqueue\", \"$tgRepo\", \"$tgAnalytics\", \"tgActivityService\", WikiWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WikiNavDirective, bindOnce, groupBy, mixOf, module, taiga;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaWiki\");\n\n  WikiNavDirective = function($tgrepo, $log, $location, $confirm, $analytics, $loading, $template, $compile, $translate) {\n    var link, linkWikiLinks, template;\n    template = $template.get(\"wiki/wiki-nav.html\", true);\n    linkWikiLinks = function($scope, $el, $attrs) {\n      var $ctrl, addWikiLinkPermission, drake, render;\n      $ctrl = $el.controller();\n      if ($attrs.ngModel == null) {\n        return $log.error(\"WikiNavDirective: no ng-model attr is defined\");\n      }\n      addWikiLinkPermission = $scope.project.my_permissions.indexOf(\"add_wiki_link\") > -1;\n      drake = null;\n      render = function(wikiLinks) {\n        var deleteWikiLinkPermission, html, itemEl, scroll, tdom;\n        addWikiLinkPermission = $scope.project.my_permissions.indexOf(\"add_wiki_link\") > -1;\n        deleteWikiLinkPermission = $scope.project.my_permissions.indexOf(\"delete_wiki_link\") > -1;\n        html = template({\n          wikiLinks: wikiLinks,\n          projectSlug: $scope.projectSlug,\n          addWikiLinkPermission: addWikiLinkPermission,\n          deleteWikiLinkPermission: deleteWikiLinkPermission\n        });\n        html = $compile(html)($scope);\n        $el.off();\n        if (addWikiLinkPermission && drake) {\n          drake.destroy();\n        }\n        $el.html(html);\n        if (addWikiLinkPermission) {\n          itemEl = null;\n          tdom = $el.find(\".sortable\");\n          drake = dragula([tdom[0]], {\n            direction: 'vertical',\n            copySortSource: false,\n            copy: false,\n            mirrorContainer: tdom[0],\n            moves: function(item) {\n              return $(item).is('li');\n            }\n          });\n          drake.on('dragend', function(item) {\n            var itemIndex;\n            itemEl = $(item);\n            item = itemEl.scope().link;\n            itemIndex = itemEl.index();\n            return $scope.$emit(\"wiki:links:move\", item, itemIndex);\n          });\n          scroll = autoScroll(window, {\n            margin: 20,\n            pixels: 30,\n            scrollWhenOutside: true,\n            autoScroll: function() {\n              return this.down && drake.dragging;\n            }\n          });\n        }\n        $el.on(\"click\", \".add-button\", function(event) {\n          event.preventDefault();\n          $el.find(\".new\").removeClass(\"hidden\");\n          $el.find(\".new input\").focus();\n          return $el.find(\".add-button\").hide();\n        });\n        $el.on(\"click\", \".js-delete-link\", function(event) {\n          var linkId, message, target, title;\n          event.preventDefault();\n          event.stopPropagation();\n          target = angular.element(event.currentTarget);\n          linkId = target.parents('.wiki-link').data('id');\n          title = $translate.instant(\"WIKI.DELETE_LINK_TITLE\");\n          message = $scope.wikiLinks[linkId].title;\n          return $confirm.askOnDelete(title, message).then((function(_this) {\n            return function(askResponse) {\n              var promise;\n              promise = $tgrepo.remove($scope.wikiLinks[linkId]);\n              promise.then(function() {\n                promise = $ctrl.loadWikiLinks();\n                promise.then(function() {\n                  askResponse.finish();\n                  return render($scope.wikiLinks);\n                });\n                return promise.then(null, function() {\n                  return askResponse.finish();\n                });\n              });\n              return promise.then(null, function() {\n                askResponse.finish(false);\n                return $confirm.notify(\"error\");\n              });\n            };\n          })(this));\n        });\n        return $el.on(\"keyup\", \".new input\", function(event) {\n          var currentLoading, newLink, promise, target;\n          event.preventDefault();\n          if (event.keyCode === 13) {\n            target = angular.element(event.currentTarget);\n            newLink = target.val();\n            currentLoading = $loading().target($el.find(\".new\")).start();\n            promise = $tgrepo.create(\"wiki-links\", {\n              project: $scope.projectId,\n              title: newLink\n            });\n            promise.then(function() {\n              var loadPromise;\n              $analytics.trackEvent(\"wikilink\", \"create\", \"create wiki link\", 1);\n              loadPromise = $ctrl.loadWikiLinks();\n              loadPromise.then(function() {\n                currentLoading.finish();\n                $el.find(\".new\").addClass(\"hidden\");\n                $el.find(\".new input\").val('');\n                $el.find(\".add-button\").show();\n                return render($scope.wikiLinks);\n              });\n              return loadPromise.then(null, function() {\n                currentLoading.finish();\n                $el.find(\".new\").addClass(\"hidden\");\n                $el.find(\".new input\").val('');\n                $el.find(\".add-button\").show();\n                return $confirm.notify(\"error\", \"Error loading wiki links\");\n              });\n            });\n            return promise.then(null, function(error) {\n              var ref;\n              currentLoading.finish();\n              $el.find(\".new input\").val(newLink);\n              $el.find(\".new input\").focus().select();\n              if ((error != null ? (ref = error.__all__) != null ? ref[0] : void 0 : void 0) != null) {\n                return $confirm.notify(\"error\", \"The link already exists\");\n              } else {\n                return $confirm.notify(\"error\");\n              }\n            });\n          } else if (event.keyCode === 27) {\n            target = angular.element(event.currentTarget);\n            $el.find(\".new\").addClass(\"hidden\");\n            $el.find(\".new input\").val('');\n            return $el.find(\".add-button\").show();\n          }\n        });\n      };\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    link = function($scope, $el, $attrs) {\n      linkWikiLinks($scope, $el, $attrs);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgWikiNav\", [\"$tgRepo\", \"$log\", \"$tgLocation\", \"$tgConfirm\", \"$tgAnalytics\", \"$tgLoading\", \"$tgTemplate\", \"$compile\", \"$translate\", WikiNavDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WikiPagesListController, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  module = angular.module(\"taigaWiki\");\n\n  WikiPagesListController = (function(superClass) {\n    extend(WikiPagesListController, superClass);\n\n    WikiPagesListController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgModel\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgNavUrls\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function WikiPagesListController(scope, rootscope, repo, model, confirm, rs, params, q, navUrls, errorHandlingService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.model = model;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.navUrls = navUrls;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.scope.projectSlug = this.params.pslug;\n      this.scope.wikiSlug = this.params.slug;\n      this.scope.sectionName = \"Wiki\";\n      this.scope.linksVisible = false;\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    WikiPagesListController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_wiki_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    WikiPagesListController.prototype.loadWikiPages = function() {\n      var promise;\n      return promise = this.rs.wiki.list(this.scope.projectId).then((function(_this) {\n        return function(wikipages) {\n          return _this.scope.wikipages = wikipages;\n        };\n      })(this));\n    };\n\n    WikiPagesListController.prototype.loadWikiLinks = function() {\n      return this.rs.wiki.listLinks(this.scope.projectId).then((function(_this) {\n        return function(wikiLinks) {\n          var i, len, link, ref, selectedWikiLink;\n          _this.scope.wikiLinks = wikiLinks;\n          ref = _this.scope.wikiLinks;\n          for (i = 0, len = ref.length; i < len; i++) {\n            link = ref[i];\n            link.url = _this.navUrls.resolve(\"project-wiki-page\", {\n              project: _this.scope.projectSlug,\n              slug: link.href\n            });\n          }\n          return selectedWikiLink = _.find(wikiLinks, {\n            href: _this.scope.wikiSlug\n          });\n        };\n      })(this));\n    };\n\n    WikiPagesListController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.q.all([this.loadWikiLinks(), this.loadWikiPages()]).then(this.checkLinksPerms.bind(this));\n    };\n\n    WikiPagesListController.prototype.checkLinksPerms = function() {\n      if (this.scope.project.my_permissions.indexOf(\"add_wiki_link\") !== -1 || (this.scope.project.my_permissions.indexOf(\"view_wiki_links\") !== -1 && this.scope.wikiLinks.length)) {\n        return this.scope.linksVisible = true;\n      }\n    };\n\n    return WikiPagesListController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"WikiPagesListController\", WikiPagesListController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ChangeOwnerLightboxController, ChangeOwnerLightboxDirective, LbRequestOwnershipDirective, LightboxAddMembersWarningMessageDirective, TransferProjectStartSuccessDirective, debounce, module, normalizeString, taiga;\n\n  taiga = this.taiga;\n\n  debounce = this.taiga.debounce;\n\n  normalizeString = this.taiga.normalizeString;\n\n  module = angular.module(\"taigaKanban\");\n\n  LightboxAddMembersWarningMessageDirective = function() {\n    return {\n      templateUrl: \"admin/memberships-warning-message.html\",\n      scope: {\n        project: \"=\"\n      }\n    };\n  };\n\n  module.directive(\"tgLightboxAddMembersWarningMessage\", [LightboxAddMembersWarningMessageDirective]);\n\n  LbRequestOwnershipDirective = function(lightboxService, rs, confirmService, $translate) {\n    return {\n      link: function(scope, el) {\n        lightboxService.open(el);\n        return scope.request = function() {\n          scope.loading = true;\n          return rs.projects.transferRequest(scope.projectId).then(function() {\n            scope.loading = false;\n            lightboxService.close(el);\n            return confirmService.notify(\"success\", $translate.instant(\"ADMIN.PROJECT_PROFILE.REQUEST_OWNERSHIP_SUCCESS\"));\n          });\n        };\n      },\n      templateUrl: \"common/lightbox/lightbox-request-ownership.html\"\n    };\n  };\n\n  module.directive('tgLbRequestOwnership', [\"lightboxService\", \"tgResources\", \"$tgConfirm\", \"$translate\", LbRequestOwnershipDirective]);\n\n  ChangeOwnerLightboxController = (function() {\n    function ChangeOwnerLightboxController(rs1, lightboxService1, confirm, translate) {\n      this.rs = rs1;\n      this.lightboxService = lightboxService1;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.users = [];\n      this.q = \"\";\n      this.commentOpen = false;\n    }\n\n    ChangeOwnerLightboxController.prototype.limit = 3;\n\n    ChangeOwnerLightboxController.prototype.filterUsers = function(user) {\n      var text, username;\n      username = user.full_name_display.toUpperCase();\n      username = normalizeString(username);\n      text = this.q.toUpperCase();\n      text = normalizeString(text);\n      return _.includes(username, text);\n    };\n\n    ChangeOwnerLightboxController.prototype.getUsers = function() {\n      var users;\n      if (!this.users.length && !this.q.length) {\n        users = this.activeUsers;\n      } else {\n        users = this.users;\n      }\n      users = _.reject(users, {\n        \"id\": this.currentOwnerId\n      });\n      users = _.reject(users, {\n        \"selected\": true\n      });\n      this.totalUsers = _.size(users);\n      return users.slice(0, this.limit);\n    };\n\n    ChangeOwnerLightboxController.prototype.userSearch = function() {\n      this.users = this.activeUsers;\n      this.selected = _.find(this.users, {\n        \"selected\": true\n      });\n      if (this.q) {\n        return this.users = _.filter(this.users, this.filterUsers.bind(this));\n      }\n    };\n\n    ChangeOwnerLightboxController.prototype.selectUser = function(user) {\n      this.activeUsers = _.map(this.activeUsers, function(user) {\n        user.selected = false;\n        return user;\n      });\n      user.selected = true;\n      return this.userSearch();\n    };\n\n    ChangeOwnerLightboxController.prototype.submit = function() {\n      this.loading = true;\n      return this.rs.projects.transferStart(this.projectId, this.selected.id, this.comment).then((function(_this) {\n        return function() {\n          var desc, title;\n          _this.loading = false;\n          _this.lightboxService.closeAll();\n          title = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.CHANGE_OWNER_SUCCESS_TITLE\");\n          desc = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.CHANGE_OWNER_SUCCESS_DESC\");\n          return _this.confirm.success(title, desc, {\n            type: \"svg\",\n            name: \"icon-speak-up\"\n          });\n        };\n      })(this));\n    };\n\n    return ChangeOwnerLightboxController;\n\n  })();\n\n  ChangeOwnerLightboxController.$inject = [\"tgResources\", \"lightboxService\", \"$tgConfirm\", \"$translate\"];\n\n  module.controller('ChangeOwnerLightbox', ChangeOwnerLightboxController);\n\n  ChangeOwnerLightboxDirective = function(lightboxService, lightboxKeyboardNavigationService, $template, $compile) {\n    var link;\n    link = function(scope, el) {\n      return lightboxService.open(el);\n    };\n    return {\n      scope: true,\n      controller: \"ChangeOwnerLightbox\",\n      controllerAs: \"vm\",\n      bindToController: {\n        currentOwnerId: \"=\",\n        projectId: \"=\",\n        activeUsers: \"=\"\n      },\n      templateUrl: \"common/lightbox/lightbox-change-owner.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbChangeOwner\", [\"lightboxService\", \"lightboxKeyboardNavigationService\", \"$tgTemplate\", \"$compile\", ChangeOwnerLightboxDirective]);\n\n  TransferProjectStartSuccessDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el) {\n      scope.close = function() {\n        return lightboxService.close(el);\n      };\n      return lightboxService.open(el);\n    };\n    return {\n      templateUrl: \"common/lightbox/lightbox-transfer-project-start-success.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbTransferProjectStartSuccess\", [\"lightboxService\", TransferProjectStartSuccessDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var MembershipsController, MembershipsDirective, MembershipsRowActionsDirective, MembershipsRowAdminCheckboxDirective, MembershipsRowAvatarDirective, MembershipsRowRoleSelectorDirective, NoMoreMembershipsExplanationDirective, bindMethods, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaAdmin\");\n\n  MembershipsController = (function(superClass) {\n    extend(MembershipsController, superClass);\n\n    MembershipsController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAnalytics\", \"tgAppMetaService\", \"$translate\", \"$tgAuth\", \"tgLightboxFactory\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function MembershipsController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, analytics, appMetaService, translate, auth, lightboxFactory1, errorHandlingService, projectService1) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.auth = auth;\n      this.lightboxFactory = lightboxFactory1;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      bindMethods(this);\n      this.scope.project = {};\n      this.scope.filters = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.MEMBERSHIPS.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"membersform:new:success\", (function(_this) {\n        return function() {\n          _this.loadInitialData();\n          return _this.analytics.trackEvent(\"membership\", \"create\", \"create memberships on admin\", 1);\n        };\n      })(this));\n    }\n\n    MembershipsController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.canAddUsers = project.max_memberships === null || project.max_memberships > project.total_memberships;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    MembershipsController.prototype.loadMembers = function() {\n      var httpFilters;\n      httpFilters = this.getUrlFilters();\n      return this.rs.memberships.list(this.scope.projectId, httpFilters).then((function(_this) {\n        return function(data) {\n          _this.scope.memberships = _.filter(data.models, function(membership) {\n            return membership.user === null || membership.is_user_active;\n          });\n          _.map(_this.scope.memberships, function(member) {\n            if (member.is_owner) {\n              return _this.scope.projectOwnerEmail = member.user_email;\n            }\n          });\n          _this.scope.page = data.current;\n          _this.scope.count = data.count;\n          _this.scope.paginatedBy = data.paginatedBy;\n          return data;\n        };\n      })(this));\n    };\n\n    MembershipsController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.q.all([this.loadMembers(), this.auth.refresh()]);\n    };\n\n    MembershipsController.prototype.getUrlFilters = function() {\n      var filters;\n      filters = _.pick(this.location.search(), \"page\");\n      if (!filters.page) {\n        filters.page = 1;\n      }\n      return filters;\n    };\n\n    MembershipsController.prototype.addNewMembers = function() {\n      return this.lightboxFactory.create('tg-lb-add-members', {\n        \"class\": \"lightbox lightbox-add-member\",\n        \"project\": \"project\"\n      }, {\n        \"project\": this.scope.project\n      });\n    };\n\n    MembershipsController.prototype.showLimitUsersWarningMessage = function() {\n      var icon, message, title;\n      title = this.translate.instant(\"ADMIN.MEMBERSHIPS.LIMIT_USERS_WARNING\");\n      message = this.translate.instant(\"ADMIN.MEMBERSHIPS.LIMIT_USERS_WARNING_MESSAGE\", {\n        members: this.scope.project.max_memberships\n      });\n      icon = \"/\" + window._version + \"/svg/icons/team-question.svg\";\n      return this.confirm.success(title, message, {\n        name: icon,\n        type: \"img\"\n      });\n    };\n\n    return MembershipsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"MembershipsController\", MembershipsController);\n\n  MembershipsDirective = function($template, $compile) {\n    var link, linkPagination, template;\n    template = $template.get(\"admin/admin-membership-paginator.html\", true);\n    linkPagination = function($scope, $el, $attrs, $ctrl) {\n      var $pagEl, afterCurrent, atBegin, atEnd, beforeCurrent, getNumPages, renderPagination;\n      afterCurrent = 2;\n      beforeCurrent = 4;\n      atBegin = 2;\n      atEnd = 2;\n      $pagEl = $el.find(\".memberships-paginator\");\n      getNumPages = function() {\n        var numPages;\n        numPages = $scope.count / $scope.paginatedBy;\n        if (parseInt(numPages, 10) < numPages) {\n          numPages = parseInt(numPages, 10) + 1;\n        } else {\n          numPages = parseInt(numPages, 10);\n        }\n        return numPages;\n      };\n      renderPagination = function() {\n        var cpage, html, i, j, numPages, options, pages, ref;\n        numPages = getNumPages();\n        if (numPages <= 1) {\n          $pagEl.hide();\n          return;\n        }\n        pages = [];\n        options = {};\n        options.pages = pages;\n        options.showPrevious = $scope.page > 1;\n        options.showNext = !($scope.page === numPages);\n        cpage = $scope.page;\n        for (i = j = 1, ref = numPages; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n          if (i === (cpage + afterCurrent) && numPages > (cpage + afterCurrent + atEnd)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i === (cpage - beforeCurrent) && cpage > (atBegin + beforeCurrent)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i > (cpage + afterCurrent) && i <= (numPages - atEnd)) {\n\n          } else if (i < (cpage - beforeCurrent) && i > atBegin) {\n\n          } else if (i === cpage) {\n            pages.push({\n              classes: \"active\",\n              num: i,\n              type: \"page-active\"\n            });\n          } else {\n            pages.push({\n              classes: \"page\",\n              num: i,\n              type: \"page\"\n            });\n          }\n        }\n        html = template(options);\n        html = $compile(html)($scope);\n        $pagEl.html(html);\n        return $pagEl.show();\n      };\n      $scope.$watch(\"memberships\", function(value) {\n        if (!value) {\n          return;\n        }\n        return renderPagination();\n      });\n      $el.on(\"click\", \".memberships-paginator a.next\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page + 1);\n          return $ctrl.loadMembers();\n        });\n      });\n      $el.on(\"click\", \".memberships-paginator a.previous\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page - 1);\n          return $ctrl.loadMembers();\n        });\n      });\n      return $el.on(\"click\", \".memberships-paginator li.page > a\", function(event) {\n        var pagenum, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        pagenum = target.data(\"pagenum\");\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", pagenum);\n          return $ctrl.loadMembers();\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      linkPagination($scope, $el, $attrs, $ctrl);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMemberships\", [\"$tgTemplate\", \"$compile\", MembershipsDirective]);\n\n  MembershipsRowAvatarDirective = function($log, $template, $translate, $compile, avatarService) {\n    var link, template;\n    template = $template.get(\"admin/memberships-row-avatar.html\", true);\n    link = function($scope, $el, $attrs) {\n      var member, pending, render;\n      pending = $translate.instant(\"ADMIN.MEMBERSHIP.STATUS_PENDING\");\n      render = function(member) {\n        var avatar, ctx, html;\n        avatar = avatarService.getAvatar(member);\n        ctx = {\n          full_name: member.full_name ? member.full_name : \"\",\n          email: member.user_email ? member.user_email : member.email,\n          imgurl: avatar.url,\n          bg: avatar.bg,\n          pending: !member.is_user_active ? pending : \"\",\n          isOwner: member.is_owner\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      if ($attrs.tgMembershipsRowAvatar == null) {\n        return $log.error(\"MembershipsRowAvatarDirective: the directive need a member\");\n      }\n      member = $scope.$eval($attrs.tgMembershipsRowAvatar);\n      render(member);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowAvatar\", [\"$log\", \"$tgTemplate\", '$translate', \"$compile\", \"tgAvatarService\", MembershipsRowAvatarDirective]);\n\n  MembershipsRowAdminCheckboxDirective = function($log, $repo, $confirm, $template, $compile) {\n    var link, template;\n    template = $template.get(\"admin/admin-memberships-row-checkbox.html\", true);\n    link = function($scope, $el, $attrs) {\n      var html, member, render;\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      if ($attrs.tgMembershipsRowAdminCheckbox == null) {\n        return $log.error(\"MembershipsRowAdminCheckboxDirective: the directive need a member\");\n      }\n      member = $scope.$eval($attrs.tgMembershipsRowAdminCheckbox);\n      if (member.is_owner) {\n        $el.find(\".js-check\").remove();\n        return;\n      }\n      render = function(member) {\n        var ctx, html;\n        ctx = {\n          inputId: \"is-admin-\" + member.id\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $el.on(\"click\", \":checkbox\", (function(_this) {\n        return function(event) {\n          var onError, onSuccess, target;\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function(data) {\n            member.revert();\n            $el.find(\":checkbox\").prop(\"checked\", member.is_admin);\n            return $confirm.notify(\"error\", data.is_admin[0]);\n          };\n          target = angular.element(event.currentTarget);\n          member.is_admin = target.prop(\"checked\");\n          return $repo.save(member).then(onSuccess, onError);\n        };\n      })(this));\n      html = render(member);\n      if (member.is_admin) {\n        return $el.find(\":checkbox\").prop(\"checked\", true);\n      }\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowAdminCheckbox\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgTemplate\", \"$compile\", MembershipsRowAdminCheckboxDirective]);\n\n  MembershipsRowRoleSelectorDirective = function($log, $repo, $confirm) {\n    var link, template;\n    template = _.template(\"<select>\\n    <% _.each(roleList, function(role) { %>\\n    <option value=\\\"<%- role.id %>\\\" <% if(selectedRole === role.id){ %>selected=\\\"selected\\\"<% } %>>\\n        <%- role.name %>\\n    </option>\\n    <% }); %>\\n</select>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, html, member, render;\n      render = function(member) {\n        var ctx, html;\n        ctx = {\n          roleList: $scope.project.roles,\n          selectedRole: member.role\n        };\n        html = template(ctx);\n        return $el.html(html);\n      };\n      if ($attrs.tgMembershipsRowRoleSelector == null) {\n        return $log.error(\"MembershipsRowRoleSelectorDirective: the directive need a member\");\n      }\n      $ctrl = $el.controller();\n      member = $scope.$eval($attrs.tgMembershipsRowRoleSelector);\n      html = render(member);\n      $el.on(\"change\", \"select\", (function(_this) {\n        return function(event) {\n          var newRole, onError, onSuccess, target;\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          target = angular.element(event.currentTarget);\n          newRole = parseInt(target.val(), 10);\n          if (member.role !== newRole) {\n            member.role = newRole;\n            return $repo.save(member).then(onSuccess, onError);\n          }\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowRoleSelector\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", MembershipsRowRoleSelectorDirective]);\n\n  MembershipsRowActionsDirective = function($log, $repo, $rs, $confirm, $compile, $translate, $location, $navUrls, lightboxFactory, projectService) {\n    var activedTemplate, link, pendingTemplate;\n    activedTemplate = \"<div class=\\\"active\\\"\\n     translate=\\\"ADMIN.MEMBERSHIP.STATUS_ACTIVE\\\">\\n</div>\\n<a class=\\\"delete\\\" href=\\\"\\\"\\n   title=\\\"{{ 'ADMIN.MEMBERSHIP.DELETE_MEMBER' | translate }}\\\">\\n    <tg-svg svg-icon=\\\"icon-trash\\\"></tg-svg>\\n</a>\";\n    pendingTemplate = \"<a class=\\\"resend js-resend\\\" href=\\\"\\\"\\n   title=\\\"{{ 'ADMIN.MEMBERSHIP.RESEND' | translate }}\\\"\\n   translate=\\\"ADMIN.MEMBERSHIP.RESEND\\\">\\n</a>\\n<a class=\\\"delete\\\" href=\\\"\\\"\\n   title=\\\"{{ 'ADMIN.MEMBERSHIP.DELETE_MEMBER' | translate }}\\\">\\n    <tg-svg svg-icon=\\\"icon-trash\\\"></tg-svg>\\n</a>\";\n    link = function($scope, $el, $attrs) {\n      var $ctrl, leaveConfirm, member, render;\n      render = function(member) {\n        var html;\n        if (member.user) {\n          html = $compile(activedTemplate)($scope);\n        } else {\n          html = $compile(pendingTemplate)($scope);\n        }\n        return $el.html(html);\n      };\n      if ($attrs.tgMembershipsRowActions == null) {\n        return $log.error(\"MembershipsRowActionsDirective: the directive need a member\");\n      }\n      $ctrl = $el.controller();\n      member = $scope.$eval($attrs.tgMembershipsRowActions);\n      render(member);\n      $el.on(\"click\", \".js-resend\", function(event) {\n        var onError, onSuccess;\n        event.preventDefault();\n        onSuccess = function() {\n          var text;\n          text = $translate.instant(\"ADMIN.MEMBERSHIP.SUCCESS_SEND_INVITATION\", {\n            email: $scope.member.email\n          });\n          return $confirm.notify(\"success\", text);\n        };\n        onError = function() {\n          var text;\n          text = $translate.instant(\"ADMIN.MEMBERSHIP.ERROR_SEND_INVITATION\");\n          return $confirm.notify(\"error\", text);\n        };\n        return $rs.memberships.resendInvitation($scope.member.id).then(onSuccess, onError);\n      });\n      leaveConfirm = function() {\n        var defaultMsg, message, title;\n        title = $translate.instant(\"ADMIN.MEMBERSHIP.DELETE_MEMBER\");\n        defaultMsg = $translate.instant(\"ADMIN.MEMBERSHIP.DEFAULT_DELETE_MESSAGE\", {\n          email: member.email\n        });\n        message = member.user ? member.full_name : defaultMsg;\n        return $confirm.askOnDelete(title, message).then(function(askResponse) {\n          var onError, onSuccess;\n          onSuccess = (function(_this) {\n            return function() {\n              var text;\n              askResponse.finish();\n              if (member.user !== $scope.user.id) {\n                if ($scope.page > 1 && ($scope.count - 1) <= $scope.paginatedBy) {\n                  $ctrl.selectFilter(\"page\", $scope.page - 1);\n                }\n                projectService.fetchProject().then(function() {\n                  return $ctrl.loadInitialData();\n                });\n              } else {\n                $location.path($navUrls.resolve(\"home\"));\n              }\n              text = $translate.instant(\"ADMIN.MEMBERSHIP.SUCCESS_DELETE\", {\n                message: message\n              });\n              return $confirm.notify(\"success\", text, null, 5000);\n            };\n          })(this);\n          onError = (function(_this) {\n            return function() {\n              var text;\n              askResponse.finish(false);\n              text = $translate.instant(\"ADMIN.MEMBERSHIP.ERROR_DELETE\", {\n                message: message\n              });\n              return $confirm.notify(\"error\", text);\n            };\n          })(this);\n          return $repo.remove(member).then(onSuccess, onError);\n        });\n      };\n      $el.on(\"click\", \".delete\", function(event) {\n        var isCurrentUser;\n        event.preventDefault();\n        if ($scope.project.owner.id === member.user) {\n          isCurrentUser = $scope.user.id === member.user;\n          return lightboxFactory.create(\"tg-lightbox-leave-project-warning\", {\n            \"class\": \"lightbox lightbox-leave-project-warning\"\n          }, {\n            isCurrentUser: isCurrentUser,\n            project: $scope.project\n          });\n        } else {\n          return leaveConfirm();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowActions\", [\"$log\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$compile\", \"$translate\", \"$tgLocation\", \"$tgNavUrls\", \"tgLightboxFactory\", \"tgProjectService\", MembershipsRowActionsDirective]);\n\n  NoMoreMembershipsExplanationDirective = function() {\n    return {\n      templateUrl: \"admin/no-more-memberships-explanation.html\",\n      scope: {\n        project: \"=\",\n        ownerEmail: \"=\"\n      }\n    };\n  };\n\n  module.directive(\"tgNoMoreMembershipsExplanation\", [NoMoreMembershipsExplanationDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AdminNavigationDirective, module;\n\n  AdminNavigationDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var section;\n      section = $attrs.tgAdminNavigation;\n      $el.find(\".active\").removeClass(\"active\");\n      $el.find(\"#adminmenu-\" + section).addClass(\"active\");\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module = angular.module(\"taigaAdmin\");\n\n  module.directive(\"tgAdminNavigation\", AdminNavigationDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AdminProjectChangeOwnerDirective, AdminProjectRequestOwnershipDirective, AdminProjectRestrictionsDirective, CsvEpicDirective, CsvExporterController, CsvExporterEpicsController, CsvExporterIssuesController, CsvExporterTasksController, CsvExporterUserstoriesController, CsvIssueDirective, CsvTaskDirective, CsvUsDirective, ProjectDefaultValuesDirective, ProjectExportDirective, ProjectLogoDirective, ProjectLogoModelDirective, ProjectModulesDirective, ProjectProfileController, ProjectProfileDirective, bindOnce, debounce, groupBy, joinStr, mixOf, module, scopeDefer, taiga, toString, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaAdmin\");\n\n  ProjectProfileController = (function(superClass) {\n    extend(ProjectProfileController, superClass);\n\n    ProjectProfileController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"$tgAuth\", \"tgCurrentUserService\", \"tgErrorHandlingService\", \"tgProjectService\", \"$tgModel\"];\n\n    function ProjectProfileController(scope1, rootscope, repo, confirm, rs, params, q, location, navUrls, appMetaService, translate, tgAuth, currentUserService1, errorHandlingService, projectService1, model1) {\n      var promise;\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.tgAuth = tgAuth;\n      this.currentUserService = currentUserService1;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      this.model = model1;\n      this.scope.project = {};\n      this.scope.projectTags = [];\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, sectionName, title;\n          sectionName = _this.translate.instant(_this.scope.sectionName);\n          title = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.PAGE_TITLE\", {\n            sectionName: sectionName,\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          _this.appMetaService.setAll(title, description);\n          return _this.fillUsersAndRoles(_this.scope.project.members, _this.scope.project.roles);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"project:loaded\", (function(_this) {\n        return function() {\n          var description, sectionName, title;\n          sectionName = _this.translate.instant(_this.scope.sectionName);\n          title = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.PAGE_TITLE\", {\n            sectionName: sectionName,\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n    }\n\n    ProjectProfileController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      project = this.model.make_model(\"projects\", project);\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.epicStatusList = _.sortBy(project.epic_statuses, \"order\");\n      this.scope.usStatusList = _.sortBy(project.us_statuses, \"order\");\n      this.scope.pointsList = _.sortBy(project.points, \"order\");\n      this.scope.taskStatusList = _.sortBy(project.task_statuses, \"order\");\n      this.scope.issueTypesList = _.sortBy(project.issue_types, \"order\");\n      this.scope.issueStatusList = _.sortBy(project.issue_statuses, \"order\");\n      this.scope.prioritiesList = _.sortBy(project.priorities, \"order\");\n      this.scope.severitiesList = _.sortBy(project.severities, \"order\");\n      scopeDefer(this.scope, (function(_this) {\n        return function() {\n          return _this.scope.$emit('project:loaded', project);\n        };\n      })(this));\n      this.scope.projectTags = _.map(this.scope.project.tags, (function(_this) {\n        return function(it) {\n          return [it, _this.scope.project.tags_colors[it]];\n        };\n      })(this));\n      return project;\n    };\n\n    ProjectProfileController.prototype.loadInitialData = function() {\n      this.loadProject();\n      this.scope.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects().valid;\n      return this.tgAuth.refresh();\n    };\n\n    ProjectProfileController.prototype.openDeleteLightbox = function() {\n      return this.rootscope.$broadcast(\"deletelightbox:new\", this.scope.project);\n    };\n\n    ProjectProfileController.prototype.addTag = function(name, color) {\n      var tags;\n      tags = _.clone(this.scope.project.tags);\n      tags.push(name);\n      this.scope.projectTags.push([name, null]);\n      return this.scope.project.tags = tags;\n    };\n\n    ProjectProfileController.prototype.deleteTag = function(tag) {\n      var tags;\n      tags = _.clone(this.scope.project.tags);\n      _.pull(tags, tag[0]);\n      _.remove(this.scope.projectTags, (function(_this) {\n        return function(it) {\n          return it[0] === tag[0];\n        };\n      })(this));\n      return this.scope.project.tags = tags;\n    };\n\n    return ProjectProfileController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"ProjectProfileController\", ProjectProfileController);\n\n  ProjectProfileDirective = function($repo, $confirm, $loading, $navurls, $location, projectService, currentUserService, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, form, submit, submitButton;\n      $ctrl = $el.controller();\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, privacyChanged, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          privacyChanged = $scope.project.isAttributeModified(\"is_private\");\n          promise = $repo.save($scope.project);\n          promise.then(function() {\n            var newUrl;\n            currentLoading.finish();\n            if (privacyChanged && $scope.project.is_private) {\n              $analytics.trackEvent(\"project-privacy-changed\", \"from-public-to-private\", \"Change project privacy from public to private\", 1);\n            } else if (privacyChanged && !$scope.project.is_private) {\n              $analytics.trackEvent(\"project-privacy-changed\", \"from-private-to-public\", \"Change project privacy from private to public\", 1);\n            }\n            $confirm.notify(\"success\");\n            newUrl = $navurls.resolve(\"project-admin-project-profile-details\", {\n              project: $scope.project.slug\n            });\n            $location.path(newUrl);\n            projectService.fetchProject().then((function(_this) {\n              return function() {\n                return $ctrl.loadInitialData();\n              };\n            })(this));\n            return currentUserService.loadProjects();\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectProfile\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgNavUrls\", \"$tgLocation\", \"tgProjectService\", \"tgCurrentUserService\", \"$tgAnalytics\", ProjectProfileDirective]);\n\n  ProjectDefaultValuesDirective = function($rootScope, $repo, $confirm, $loading) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.save($scope.project);\n          promise.then(function() {\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $rootScope.$broadcast(\"admin:project-default-values:updated\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectDefaultValues\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", ProjectDefaultValuesDirective]);\n\n  ProjectModulesDirective = function($rootScope, $repo, $confirm, $loading) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit;\n      submit = (function(_this) {\n        return function() {\n          var form, promise;\n          form = $el.find(\"form\").checksley();\n          form.initializeFields();\n          form.reset();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $repo.save($scope.project);\n          promise.then(function() {\n            $scope.$emit(\"project:loaded\", $scope.project);\n            $rootScope.$broadcast(\"admin:project-modules:updated\");\n            return $confirm.notify(\"success\");\n          });\n          return promise.then(null, function(data) {\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this);\n      $el.on(\"change\", \".module-activation.module-direct-active input\", function(event) {\n        event.preventDefault();\n        return $scope.$applyAsync(submit);\n      });\n      $el.on(\"submit\", \"form\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"keydown\", \".videoconference-attributes input\", function(e) {\n        return e.which !== 32;\n      });\n      $scope.$watch(\"project.videoconferences\", function(newVal, oldVal) {\n        if ((newVal != null) && (oldVal != null) && newVal !== oldVal) {\n          return $scope.project.videoconferences_extra_data = \"\";\n        }\n      });\n      $scope.$watch(\"isVideoconferenceActivated\", function(newValue, oldValue) {\n        if (newValue === false) {\n          $scope.project.videoconferences = null;\n          $scope.project.videoconferences_extra_data = \"\";\n          if (oldValue === true) {\n            return submit();\n          }\n        }\n      });\n      return $scope.$watch(\"project\", function(project) {\n        if (project.videoconferences != null) {\n          return $scope.isVideoconferenceActivated = true;\n        } else {\n          return $scope.isVideoconferenceActivated = false;\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectModules\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", ProjectModulesDirective]);\n\n  ProjectExportDirective = function($window, $rs, $confirm, $translate, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var asyn_message, buttonsEl, dump_ready_text, hideButtons, hideResult, hideSpinner, loading_msg, loading_title, resultEl, resultMessageEl, resultTitleEl, setAsyncMessage, setAsyncTitle, setLoadingMessage, setLoadingTitle, setSyncMessage, setSyncTitle, showButtons, showErrorMode, showExportResultAsyncMode, showExportResultSyncMode, showLoadingMode, showResult, showSpinner, spinnerEl, syn_message;\n      buttonsEl = $el.find(\".admin-project-export-buttons\");\n      showButtons = function() {\n        return buttonsEl.removeClass(\"hidden\");\n      };\n      hideButtons = function() {\n        return buttonsEl.addClass(\"hidden\");\n      };\n      resultEl = $el.find(\".admin-project-export-result\");\n      showResult = function() {\n        return resultEl.removeClass(\"hidden\");\n      };\n      hideResult = function() {\n        return resultEl.addClass(\"hidden\");\n      };\n      spinnerEl = $el.find(\".spin\");\n      showSpinner = function() {\n        return spinnerEl.removeClass(\"hidden\");\n      };\n      hideSpinner = function() {\n        return spinnerEl.addClass(\"hidden\");\n      };\n      resultTitleEl = $el.find(\".result-title\");\n      loading_title = $translate.instant(\"ADMIN.PROJECT_EXPORT.LOADING_TITLE\");\n      loading_msg = $translate.instant(\"ADMIN.PROJECT_EXPORT.LOADING_MESSAGE\");\n      dump_ready_text = function() {\n        return resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.DUMP_READY\"));\n      };\n      asyn_message = function() {\n        return resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.ASYNC_MESSAGE\"));\n      };\n      syn_message = function(url) {\n        return resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.SYNC_MESSAGE\", {\n          url: url\n        }));\n      };\n      setLoadingTitle = function() {\n        return resultTitleEl.html(loading_title);\n      };\n      setAsyncTitle = function() {\n        return resultTitleEl.html(loading_msg);\n      };\n      setSyncTitle = function() {\n        return resultTitleEl.html(dump_ready_text);\n      };\n      resultMessageEl = $el.find(\".result-message \");\n      setLoadingMessage = function() {\n        return resultMessageEl.html(loading_msg);\n      };\n      setAsyncMessage = function() {\n        return resultMessageEl.html(asyn_message);\n      };\n      setSyncMessage = function(url) {\n        return resultMessageEl.html(syn_message(url));\n      };\n      showLoadingMode = function() {\n        showSpinner();\n        setLoadingTitle();\n        setLoadingMessage();\n        hideButtons();\n        return showResult();\n      };\n      showExportResultAsyncMode = function() {\n        hideSpinner();\n        setAsyncTitle();\n        return setAsyncMessage();\n      };\n      showExportResultSyncMode = function(url) {\n        hideSpinner();\n        setSyncTitle();\n        return setSyncMessage(url);\n      };\n      showErrorMode = function() {\n        hideSpinner();\n        hideResult();\n        return showButtons();\n      };\n      return $el.on(\"click\", \".button-export\", debounce(2000, (function(_this) {\n        return function(event) {\n          var onError, onSuccess;\n          event.preventDefault();\n          onSuccess = function(result) {\n            var dumpUrl;\n            $analytics.trackEvent(\"exporter\", \"export-project\", \"Exported project\", 1);\n            if (result.status === 202) {\n              return showExportResultAsyncMode();\n            } else {\n              dumpUrl = result.data.url;\n              showExportResultSyncMode(dumpUrl);\n              return $window.open(dumpUrl, \"_blank\");\n            }\n          };\n          onError = function(result) {\n            var errorMsg, ref;\n            showErrorMode();\n            errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR\");\n            if (result.status === 429) {\n              errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR_BUSY\");\n            } else if ((ref = result.data) != null ? ref._error_message : void 0) {\n              errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR_BUSY\", {\n                message: result.data._error_message\n              });\n            }\n            return $confirm.notify(\"error\", errorMsg);\n          };\n          showLoadingMode();\n          return $rs.projects[\"export\"]($scope.projectId).then(onSuccess, onError);\n        };\n      })(this)));\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectExport\", [\"$window\", \"$tgResources\", \"$tgConfirm\", \"$translate\", \"$tgAnalytics\", ProjectExportDirective]);\n\n  CsvExporterController = (function(superClass) {\n    extend(CsvExporterController, superClass);\n\n    CsvExporterController.$inject = [\"$scope\", \"$rootScope\", \"$tgUrls\", \"$tgConfirm\", \"$tgResources\", \"$translate\"];\n\n    function CsvExporterController(scope1, rootscope, urls, confirm, rs, translate) {\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.urls = urls;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.translate = translate;\n      this._deleteUuid = bind(this._deleteUuid, this);\n      this._generateUuid = bind(this._generateUuid, this);\n      this.setCsvUuid = bind(this.setCsvUuid, this);\n      this.rootscope.$on(\"project:loaded\", this.setCsvUuid);\n      this.scope.$watch(\"csvUuid\", (function(_this) {\n        return function(value) {\n          if (value) {\n            return _this.scope.csvUrl = _this.urls.resolveAbsolute(_this.type + \"-csv\", value);\n          } else {\n            return _this.scope.csvUrl = \"\";\n          }\n        };\n      })(this));\n    }\n\n    CsvExporterController.prototype.setCsvUuid = function() {\n      return this.scope.csvUuid = this.scope.project[this.type + \"_csv_uuid\"];\n    };\n\n    CsvExporterController.prototype._generateUuid = function(response) {\n      var promise;\n      if (response == null) {\n        response = null;\n      }\n      promise = this.rs.projects[\"regenerate_\" + this.type + \"_csv_uuid\"](this.scope.projectId);\n      promise.then((function(_this) {\n        return function(data) {\n          var ref;\n          return _this.scope.csvUuid = (ref = data.data) != null ? ref.uuid : void 0;\n        };\n      })(this));\n      promise.then(null, (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n      promise[\"finally\"](function() {\n        if (response) {\n          return response.finish();\n        }\n      });\n      return promise;\n    };\n\n    CsvExporterController.prototype._deleteUuid = function(response) {\n      var promise;\n      if (response == null) {\n        response = null;\n      }\n      promise = this.rs.projects[\"delete_\" + this.type + \"_csv_uuid\"](this.scope.projectId);\n      promise.then((function(_this) {\n        return function(data) {\n          var ref;\n          return _this.scope.csvUuid = (ref = data.data) != null ? ref.uuid : void 0;\n        };\n      })(this));\n      promise.then(null, (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n      promise[\"finally\"](function() {\n        if (response) {\n          return response.finish();\n        }\n      });\n      return promise;\n    };\n\n    CsvExporterController.prototype.regenerateUuid = function() {\n      var subtitle, title;\n      if (this.scope.csvUuid) {\n        title = this.translate.instant(\"ADMIN.REPORTS.REGENERATE_TITLE\");\n        subtitle = this.translate.instant(\"ADMIN.REPORTS.REGENERATE_SUBTITLE\");\n        return this.confirm.ask(title, subtitle).then(this._generateUuid);\n      } else {\n        return this._generateUuid();\n      }\n    };\n\n    CsvExporterController.prototype.deleteUuid = function() {\n      var subtitle, title;\n      if (this.scope.csvUuid) {\n        title = this.translate.instant(\"ADMIN.REPORTS.DELETE_TITLE\");\n        subtitle = this.translate.instant(\"ADMIN.REPORTS.DELETE_SUBTITLE\");\n        return this.confirm.ask(title, subtitle).then(this._deleteUuid);\n      } else {\n        return this._deleteUuid();\n      }\n    };\n\n    return CsvExporterController;\n\n  })(taiga.Controller);\n\n  CsvExporterEpicsController = (function(superClass) {\n    extend(CsvExporterEpicsController, superClass);\n\n    function CsvExporterEpicsController() {\n      return CsvExporterEpicsController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterEpicsController.prototype.type = \"epics\";\n\n    return CsvExporterEpicsController;\n\n  })(CsvExporterController);\n\n  CsvExporterUserstoriesController = (function(superClass) {\n    extend(CsvExporterUserstoriesController, superClass);\n\n    function CsvExporterUserstoriesController() {\n      return CsvExporterUserstoriesController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterUserstoriesController.prototype.type = \"userstories\";\n\n    return CsvExporterUserstoriesController;\n\n  })(CsvExporterController);\n\n  CsvExporterTasksController = (function(superClass) {\n    extend(CsvExporterTasksController, superClass);\n\n    function CsvExporterTasksController() {\n      return CsvExporterTasksController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterTasksController.prototype.type = \"tasks\";\n\n    return CsvExporterTasksController;\n\n  })(CsvExporterController);\n\n  CsvExporterIssuesController = (function(superClass) {\n    extend(CsvExporterIssuesController, superClass);\n\n    function CsvExporterIssuesController() {\n      return CsvExporterIssuesController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterIssuesController.prototype.type = \"issues\";\n\n    return CsvExporterIssuesController;\n\n  })(CsvExporterController);\n\n  module.controller(\"CsvExporterEpicsController\", CsvExporterEpicsController);\n\n  module.controller(\"CsvExporterUserstoriesController\", CsvExporterUserstoriesController);\n\n  module.controller(\"CsvExporterTasksController\", CsvExporterTasksController);\n\n  module.controller(\"CsvExporterIssuesController\", CsvExporterIssuesController);\n\n  CsvEpicDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_EPIC\";\n    };\n    return {\n      controller: \"CsvExporterEpicsController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvEpic\", [\"$translate\", CsvEpicDirective]);\n\n  CsvUsDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_US\";\n    };\n    return {\n      controller: \"CsvExporterUserstoriesController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvUs\", [\"$translate\", CsvUsDirective]);\n\n  CsvTaskDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_TASK\";\n    };\n    return {\n      controller: \"CsvExporterTasksController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvTask\", [\"$translate\", CsvTaskDirective]);\n\n  CsvIssueDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_ISSUE\";\n    };\n    return {\n      controller: \"CsvExporterIssuesController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvIssue\", [\"$translate\", CsvIssueDirective]);\n\n  ProjectLogoDirective = function($auth, $model, $rs, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var onError, onSuccess, showSizeInfo;\n      showSizeInfo = function() {\n        return $el.find(\".size-info\").addClass(\"active\");\n      };\n      onSuccess = function(response) {\n        var project;\n        project = $model.make_model(\"projects\", response.data);\n        $scope.project = project;\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('success');\n      };\n      onError = function(response) {\n        if (response.status === 413) {\n          showSizeInfo();\n        }\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('error', response.data._error_message);\n      };\n      $el.on(\"click\", \".js-change-logo\", function() {\n        return $el.find(\"#logo-field\").click();\n      });\n      $el.on(\"change\", \"#logo-field\", function(event) {\n        if ($scope.logoAttachment) {\n          $el.find('.loading-overlay').addClass(\"active\");\n          return $rs.projects.changeLogo($scope.project.id, $scope.logoAttachment).then(onSuccess, onError);\n        }\n      });\n      $el.on(\"click\", \"a.js-use-default-logo\", function(event) {\n        $el.find('.loading-overlay').addClass(\"active\");\n        return $rs.projects.removeLogo($scope.project.id).then(onSuccess, onError);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectLogo\", [\"$tgAuth\", \"$tgModel\", \"$tgResources\", \"$tgConfirm\", ProjectLogoDirective]);\n\n  ProjectLogoModelDirective = function($parse) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var model, modelSetter;\n      model = $parse($attrs.tgProjectLogoModel);\n      modelSetter = model.assign;\n      return $el.bind('change', function() {\n        return $scope.$apply(function() {\n          return modelSetter($scope, $el[0].files[0]);\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive('tgProjectLogoModel', ['$parse', ProjectLogoModelDirective]);\n\n  AdminProjectRestrictionsDirective = function() {\n    return {\n      scope: {\n        \"project\": \"=\"\n      },\n      templateUrl: \"admin/admin-project-restrictions.html\"\n    };\n  };\n\n  module.directive('tgAdminProjectRestrictions', [AdminProjectRestrictionsDirective]);\n\n  AdminProjectRequestOwnershipDirective = function(lightboxFactory) {\n    return {\n      link: function(scope) {\n        return scope.requestOwnership = function() {\n          if (scope.canRequest) {\n            return lightboxFactory.create(\"tg-lb-request-ownership\", {\n              \"class\": \"lightbox lightbox-request-ownership\"\n            }, {\n              projectId: scope.projectId\n            });\n          }\n        };\n      },\n      scope: {\n        \"canRequest\": \"=\",\n        \"projectId\": \"=\",\n        \"owner\": \"=\"\n      },\n      templateUrl: \"admin/admin-project-request-ownership.html\"\n    };\n  };\n\n  module.directive('tgAdminProjectRequestOwnership', [\"tgLightboxFactory\", AdminProjectRequestOwnershipDirective]);\n\n  AdminProjectChangeOwnerDirective = function(lightboxFactory) {\n    return {\n      link: function(scope) {\n        return scope.changeOwner = function() {\n          return lightboxFactory.create(\"tg-lb-change-owner\", {\n            \"class\": \"lightbox lightbox-select-user\",\n            \"project-id\": \"projectId\",\n            \"active-users\": \"activeUsers\",\n            \"current-owner-id\": \"currentOwnerId\"\n          }, {\n            projectId: scope.projectId,\n            activeUsers: scope.activeUsers,\n            currentOwnerId: scope.owner.id,\n            members: scope.members\n          });\n        };\n      },\n      scope: {\n        \"activeUsers\": \"=\",\n        \"projectId\": \"=\",\n        \"owner\": \"=\",\n        \"members\": \"=\"\n      },\n      templateUrl: \"admin/admin-project-change-owner.html\"\n    };\n  };\n\n  module.directive('tgAdminProjectChangeOwner', [\"tgLightboxFactory\", AdminProjectChangeOwnerDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CHECKBOX_TYPE, DATE_TYPE, DROPDOWN_TYPE, MULTILINE_TYPE, NUMBER_TYPE, ProjectCustomAttributesController, ProjectCustomAttributesDirective, ProjectDueDatesValues, ProjectDueDatesValuesController, ProjectSwimlanesSingle, ProjectSwimlanesValue, ProjectSwimlanesValuesController, ProjectSwimlanesWipDirective, ProjectTagsController, ProjectTagsDirective, ProjectValuesController, ProjectValuesDirective, ProjectValuesSectionController, RICHTEXT_TYPE, SortableSwimlanes, TEXT_TYPE, TYPE_CHOICES, URL_TYPE, bindOnce, debounce, defaultColor, getDefaulColorList, groupBy, joinStr, mixOf, module, taiga, toString, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  getDefaulColorList = this.taiga.getDefaulColorList;\n\n  defaultColor = '#A9AABC';\n\n  module = angular.module(\"taigaAdmin\");\n\n  ProjectValuesSectionController = (function(superClass) {\n    extend(ProjectValuesSectionController, superClass);\n\n    ProjectValuesSectionController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function ProjectValuesSectionController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, appMetaService, translate, errorHandlingService, projectService1) {\n      var description, sectionName, title;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      this.scope.project = {};\n      this.scope.$on(\"project:load\", (function(_this) {\n        return function() {\n          return _this.projectService.fetchProject().then(function() {\n            return _this.loadProject();\n          });\n        };\n      })(this));\n      this.loadInitialData();\n      sectionName = this.translate.instant(this.scope.sectionName);\n      title = this.translate.instant(\"ADMIN.PROJECT_VALUES.PAGE_TITLE\", {\n        \"sectionName\": sectionName,\n        \"projectName\": this.scope.project.name\n      });\n      description = this.scope.project.description;\n      this.appMetaService.setAll(title, description);\n    }\n\n    ProjectValuesSectionController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    ProjectValuesSectionController.prototype.loadInitialData = function() {\n      var promise;\n      promise = this.loadProject();\n      return promise;\n    };\n\n    return ProjectValuesSectionController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"ProjectValuesSectionController\", ProjectValuesSectionController);\n\n  ProjectValuesController = (function(superClass) {\n    extend(ProjectValuesController, superClass);\n\n    ProjectValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\"];\n\n    function ProjectValuesController(scope, rootscope, repo, confirm, rs) {\n      var unwatch;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.moveValue = bind(this.moveValue, this);\n      this.loadValues = bind(this.loadValues, this);\n      this.scope.$on(\"admin:project-values:move\", this.moveValue);\n      unwatch = this.scope.$watch(\"resource\", (function(_this) {\n        return function(resource) {\n          if (resource) {\n            _this.loadValues();\n            return unwatch();\n          }\n        };\n      })(this));\n    }\n\n    ProjectValuesController.prototype.loadValues = function() {\n      return this.rs[this.scope.resource].listValues(this.scope.projectId, this.scope.type).then((function(_this) {\n        return function(values) {\n          if (values.length) {\n            _this.scope.values = values;\n            _this.scope.maxValueOrder = _.maxBy(values, \"order\").order;\n          }\n          return values;\n        };\n      })(this));\n    };\n\n    ProjectValuesController.prototype.moveValue = function(ctx, itemValue, itemIndex) {\n      var r, values;\n      values = this.scope.values;\n      r = values.indexOf(itemValue);\n      values.splice(r, 1);\n      values.splice(itemIndex, 0, itemValue);\n      _.each(values, function(value, index) {\n        return value.order = index;\n      });\n      return this.repo.saveAll(values).then((function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"admin:project-values:updated\");\n        };\n      })(this));\n    };\n\n    return ProjectValuesController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ProjectValuesController\", ProjectValuesController);\n\n  ProjectSwimlanesValuesController = (function(superClass) {\n    extend(ProjectSwimlanesValuesController, superClass);\n\n    ProjectSwimlanesValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$translate\", \"$tgConfirm\", \"$tgResources\", \"tgProjectService\"];\n\n    function ProjectSwimlanesValuesController(scope, rootscope, repo, translate, confirm, rs, projectService1) {\n      var unwatch;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.translate = translate;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.projectService = projectService1;\n      this.removeSwimlane = bind(this.removeSwimlane, this);\n      this.loadSwimlanes = bind(this.loadSwimlanes, this);\n      this.filterArchivedSwimlaneStatus = bind(this.filterArchivedSwimlaneStatus, this);\n      this.filterArchivedProjectStatuses = bind(this.filterArchivedProjectStatuses, this);\n      this.updatedSwimlanePosition = bind(this.updatedSwimlanePosition, this);\n      this.setDefaultSwimlane = bind(this.setDefaultSwimlane, this);\n      this.updateSwimlane = bind(this.updateSwimlane, this);\n      this.addSwimlane = bind(this.addSwimlane, this);\n      this.scope.$on(\"swimlane:load\", (function(_this) {\n        return function() {\n          return _this.loadSwimlanes();\n        };\n      })(this));\n      unwatch = this.scope.$watch(\"resource\", (function(_this) {\n        return function(resource) {\n          if (resource) {\n            _this.loadSwimlanes();\n            return unwatch();\n          }\n        };\n      })(this));\n    }\n\n    ProjectSwimlanesValuesController.prototype.addSwimlane = function() {\n      var promise;\n      promise = this.rs[this.scope.resource].create(this.scope.projectId, this.scope.swimlane.name);\n      promise.success((function(_this) {\n        return function(values) {\n          _this.scope.swimlaneAdded();\n          _this.loadSwimlanes();\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n      return promise.error((function(_this) {\n        return function() {\n          _this.confirm.notify('light-error', _this.translate.instant(\"ADMIN.PROJECT_KANBAN_OPTIONS.ACTION_ADD_SWIMLANE\"));\n          return _this.scope.hideSwimlaneForm();\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.updateSwimlane = function(swimlane, name) {\n      return this.rs[this.scope.resource].edit(swimlane.id, name).then((function(_this) {\n        return function(values) {\n          _this.loadSwimlanes();\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.setDefaultSwimlane = function(swimlane) {\n      return this.rs.projects.patch_default_swimlane(this.scope.projectId, swimlane.id).then((function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.updatedSwimlanePosition = function(swimlane, position) {\n      var newSwimlanesOrder, prevSwimlane, swimlanesOrderArrayFiltered;\n      prevSwimlane = this.scope.values.find(function(value) {\n        return value.id === swimlane.id;\n      });\n      if (prevSwimlane.order === position) {\n        return;\n      }\n      swimlanesOrderArrayFiltered = this.scope.values.filter((function(_this) {\n        return function(value, index) {\n          return value.id !== swimlane.id;\n        };\n      })(this));\n      swimlanesOrderArrayFiltered.splice(position, 0, swimlane);\n      newSwimlanesOrder = swimlanesOrderArrayFiltered.map((function(_this) {\n        return function(swimlane, index) {\n          return [swimlane.id, index];\n        };\n      })(this));\n      return this.rs[this.scope.resource].bulkUpdateOrder(this.scope.projectId, newSwimlanesOrder).then((function(_this) {\n        return function(values) {\n          return _this.loadSwimlanes();\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.filterArchivedProjectStatuses = function() {\n      return this.scope.project.us_statuses.filter((function(_this) {\n        return function(status) {\n          return status.is_archived !== true;\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.filterArchivedSwimlaneStatus = function(swimlane) {\n      return swimlane.statuses.filter((function(_this) {\n        return function(status) {\n          return status.is_archived !== true;\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.loadSwimlanes = function() {\n      return this.rs[this.scope.resource].list(this.scope.projectId).then((function(_this) {\n        return function(values) {\n          return _this.scope.values = values;\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.removeSwimlane = function(swimlaneId, moveTo) {\n      return this.rs[this.scope.resource][\"delete\"](swimlaneId, moveTo).then((function(_this) {\n        return function() {\n          _this.loadSwimlanes();\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n    };\n\n    return ProjectSwimlanesValuesController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ProjectSwimlanesValuesController\", ProjectSwimlanesValuesController);\n\n  ProjectSwimlanesValue = function($timeout) {\n    var link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      $ctrl = $el.controller();\n      $scope.isFormVisible = false;\n      $scope.isNewSwimlane = false;\n      $scope.swimlane = {\n        name: ''\n      };\n      $scope.swimlaneAdded = function() {\n        $scope.swimlane = {\n          name: ''\n        };\n        $scope.isNewSwimlane = true;\n        $scope.isFormVisible = false;\n        return setTimeout(function() {\n          $scope.isNewSwimlane = false;\n          return $scope.$apply();\n        }, 10000);\n      };\n      $scope.displaySwimlaneForm = function() {\n        $scope.isFormVisible = true;\n        return $timeout(function() {\n          return $el.find(\"#admin-swimlanes-form-input\").focus();\n        });\n      };\n      $scope.hideSwimlaneForm = function() {\n        $scope.isFormVisible = false;\n        return $scope.swimlane = {\n          name: ''\n        };\n      };\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectSwimlanesValues\", [\"$timeout\", ProjectSwimlanesValue]);\n\n  ProjectSwimlanesSingle = function($translate, $confirm, $animate) {\n    var link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      $ctrl = $el.controller();\n      $scope.displaySwimlaneSingleForm = false;\n      $scope.swimlaneSingleForm = {\n        name: ''\n      };\n      $scope.updateSwimlane = function(swimlane) {\n        $scope.displaySwimlaneSingleForm = false;\n        return $ctrl.updateSwimlane(swimlane, $scope.swimlaneSingleForm.name);\n      };\n      $scope.setDefaultSwimlane = function(swimlane) {\n        return $ctrl.setDefaultSwimlane(swimlane);\n      };\n      $scope.getDefaultTitle = function(swimlane) {\n        if (swimlane.id === $scope.project.default_swimlane) {\n          return $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.DEFAULT_SWIMLANE\");\n        } else {\n          return $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SET_DEFAULT_SWIMLANE\");\n        }\n      };\n      $scope.removeSwimlaneTitle = function(swimlane) {\n        if (swimlane.id === $scope.project.default_swimlane) {\n          return $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.DISABLE_DELETE_SWIMLANE\");\n        }\n      };\n      $scope.editSwimlaneSingleForm = function() {\n        return $scope.displaySwimlaneSingleForm = true;\n      };\n      $scope.cancelEditSwimlaneSingleForm = function() {\n        return $scope.displaySwimlaneSingleForm = false;\n      };\n      return $scope.removeSwimlaneDialog = (function(_this) {\n        return function(event, swimlane) {\n          var choices, replacement, subtitle, title;\n          title = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.TITLE_ACTION_DELETE_SWIMLANE\");\n          $animate.on(\"leave\", $el[0], function(element, phase) {\n            if (phase === \"close\") {\n              $animate.off(\"leave\", $el[0]);\n              return $ctrl.scope.$evalAsync((function(_this) {\n                return function() {\n                  return $ctrl.scope.deletingSwimlane = false;\n                };\n              })(this));\n            }\n          });\n          if ($scope.values.length > 1) {\n            subtitle = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SUBTITLE_ACTION_DELETE_SWIMLANE_OPTIONS\", {\n              swimlane: swimlane.name\n            });\n            replacement = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SUBTITLE_ACTION_DELETE_SWIMLANE_REPLACEMENT\");\n            choices = {};\n            _.each($scope.values, function(option) {\n              if (swimlane.id !== option.id) {\n                return choices[option.id] = option.name;\n              }\n            });\n            return $confirm.askChoice(title, subtitle, choices, replacement).then(function(response) {\n              $ctrl.scope.deletingSwimlane = true;\n              $ctrl.removeSwimlane(swimlane.id, response.selected);\n              return response.finish();\n            });\n          } else {\n            subtitle = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SUBTITLE_ACTION_DELETE_SWIMLANE_LAST\");\n            return $confirm.askDelete(title, subtitle).then(function(response) {\n              $ctrl.scope.deletingSwimlane = true;\n              $ctrl.removeSwimlane(swimlane.id);\n              return response.finish();\n            });\n          }\n        };\n      })(this);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectSwimlanesSingle\", [\"$translate\", \"$tgConfirm\", \"$animate\", ProjectSwimlanesSingle]);\n\n  SortableSwimlanes = function() {\n    var link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      var drake, itemEl, tdom;\n      $ctrl = $el.controller();\n      itemEl = null;\n      tdom = $el.find(\".sortable\");\n      drake = dragula([tdom[0]], {\n        direction: 'vertical',\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: tdom[0]\n      });\n      drake.on('dragend', function(item) {\n        var itemValue, newIndex;\n        itemEl = $(item);\n        itemValue = itemEl.scope().value;\n        newIndex = itemEl.index();\n        return $scope.$apply(function() {\n          return $ctrl.updatedSwimlanePosition(itemValue, newIndex);\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSortableSwimlanes\", [SortableSwimlanes]);\n\n  ProjectDueDatesValuesController = (function(superClass) {\n    extend(ProjectDueDatesValuesController, superClass);\n\n    function ProjectDueDatesValuesController() {\n      this.displayValues = bind(this.displayValues, this);\n      this.createDefaultValues = bind(this.createDefaultValues, this);\n      this.loadValues = bind(this.loadValues, this);\n      return ProjectDueDatesValuesController.__super__.constructor.apply(this, arguments);\n    }\n\n    ProjectDueDatesValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\"];\n\n    ProjectDueDatesValuesController.prototype.loadValues = function() {\n      return this.rs[this.scope.resource].listValues(this.scope.projectId, this.scope.type).then((function(_this) {\n        return function(values) {\n          if (values.length) {\n            _this.scope.maxValueOrder = _.maxBy(values, \"order\").order;\n            _this.displayValues(values);\n          } else {\n            _this.createDefaultValues();\n          }\n          return values;\n        };\n      })(this));\n    };\n\n    ProjectDueDatesValuesController.prototype.createDefaultValues = function() {\n      if (this.rs[this.scope.resource].createDefaultValues == null) {\n        return;\n      }\n      return this.rs[this.scope.resource].createDefaultValues(this.scope.projectId, this.scope.type).then((function(_this) {\n        return function(response) {\n          var values;\n          _this.rootscope.$broadcast(\"admin:project-values:updated\");\n          values = response.data;\n          if (values.length) {\n            _this.scope.maxValueOrder = _.maxBy(values, \"order\").order;\n            _this.displayValues(values);\n          }\n          return values;\n        };\n      })(this));\n    };\n\n    ProjectDueDatesValuesController.prototype.displayValues = function(values) {\n      _.each(values, function(value, index) {\n        value.days_to_due_abs = value.days_to_due !== null ? Math.abs(value.days_to_due) : null;\n        return value.sign = value.days_to_due >= 0 ? 1 : -1;\n      });\n      return this.scope.values = values;\n    };\n\n    return ProjectDueDatesValuesController;\n\n  })(ProjectValuesController);\n\n  module.controller(\"ProjectDueDatesValuesController\", ProjectDueDatesValuesController);\n\n  ProjectValuesDirective = function($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService) {\n    var link, linkDragAndDrop, linkValue;\n    linkDragAndDrop = function($scope, $el, $attrs) {\n      var drake, itemEl, newParentScope, oldParentScope, scroll, tdom;\n      oldParentScope = null;\n      newParentScope = null;\n      itemEl = null;\n      tdom = $el.find(\".sortable\");\n      drake = dragula([tdom[0]], {\n        direction: 'vertical',\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: tdom[0]\n      });\n      drake.on('dragend', function(item) {\n        var itemIndex, itemValue;\n        itemEl = $(item);\n        itemValue = itemEl.scope().value;\n        itemIndex = itemEl.index();\n        return $scope.$broadcast(\"admin:project-values:move\", itemValue, itemIndex);\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return drake.destroy();\n      });\n    };\n    linkValue = function($scope, $el, $attrs) {\n      var $ctrl, cancel, goToBottomList, initializeNewValue, initializeTextTranslations, objName, saveNewValue, saveValue, valueType;\n      $ctrl = $el.controller();\n      valueType = $attrs.type;\n      objName = $attrs.objname;\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"name\": \"\",\n          \"is_closed\": false,\n          \"is_archived\": false\n        };\n      };\n      initializeTextTranslations = function() {\n        return $scope.addNewElementText = $translate.instant(\"ADMIN.PROJECT_VALUES_\" + (objName.toUpperCase()) + \".ACTION_ADD\");\n      };\n      initializeNewValue();\n      initializeTextTranslations();\n      $rootscope.$on(\"$translateChangeEnd\", function() {\n        return $scope.$evalAsync(initializeTextTranslations);\n      });\n      goToBottomList = (function(_this) {\n        return function(focus) {\n          var table;\n          if (focus == null) {\n            focus = false;\n          }\n          table = $el.find(\".table-main\");\n          $(document.body).scrollTop(table.offset().top + table.height());\n          if (focus) {\n            return $el.find(\".new-value input:visible\").first().focus();\n          }\n        };\n      })(this);\n      saveValue = function(target) {\n        var form, formEl, promise, value;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        value = formEl.scope().value;\n        if (!value.color) {\n          value.color = defaultColor;\n        }\n        promise = $repo.save(value);\n        promise.then(function() {\n          var row;\n          row = target.parents(\".row.table-main\");\n          row.addClass(\"hidden\");\n          row.siblings(\".visualization\").removeClass('hidden');\n          $rootscope.$broadcast(\"admin:project-values:updated\");\n          return projectService.fetchProject();\n        });\n        return promise.then(null, function(data) {\n          return form.setErrors(data);\n        });\n      };\n      saveNewValue = function(target) {\n        var form, formEl, promise;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.newValue.project = $scope.project.id;\n        $scope.newValue.order = $scope.maxValueOrder ? $scope.maxValueOrder + 1 : 1;\n        if (!$scope.newValue.color) {\n          $scope.newValue.color = defaultColor;\n        }\n        promise = $repo.create(valueType, $scope.newValue);\n        promise.then(function(data) {\n          target.addClass(\"hidden\");\n          $scope.values.push(data);\n          $scope.maxValueOrder = data.order;\n          initializeNewValue();\n          return $rootscope.$broadcast(\"admin:project-values:updated\");\n        });\n        return promise.then(null, function(data) {\n          return form.setErrors(data);\n        });\n      };\n      cancel = function(target) {\n        var formEl, row, value;\n        row = target.parents(\".row.table-main\");\n        formEl = target.parents(\"form\");\n        value = formEl.scope().value;\n        return $scope.$apply(function() {\n          row.addClass(\"hidden\");\n          value.revert();\n          return row.siblings(\".visualization\").removeClass('hidden');\n        });\n      };\n      $el.on(\"click\", \".show-add-new\", function(event) {\n        event.preventDefault();\n        $el.find(\".new-value\").removeClass('hidden');\n        return goToBottomList(true);\n      });\n      $el.on(\"click\", \".add-new\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        target = $el.find(\".new-value\");\n        return saveNewValue(target);\n      }));\n      $el.on(\"click\", \".delete-new\", function(event) {\n        event.preventDefault();\n        $el.find(\".new-value\").addClass(\"hidden\");\n        return initializeNewValue();\n      });\n      $el.on(\"click\", \".edit-value\", function(event) {\n        var editionRow, row, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        row = target.parents(\".row.table-main\");\n        row.addClass(\"hidden\");\n        editionRow = row.siblings(\".edition\");\n        editionRow.removeClass('hidden');\n        return editionRow.find('input:visible').first().focus().select();\n      });\n      $el.on(\"keyup\", \".new-value input\", function(event) {\n        var target;\n        if (event.keyCode === 13) {\n          target = $el.find(\".new-value\");\n          return saveNewValue(target);\n        } else if (event.keyCode === 27) {\n          $el.find(\".new-value\").addClass(\"hidden\");\n          return initializeNewValue();\n        }\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return saveValue(target);\n      });\n      $el.on(\"click\", \".cancel\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return cancel(target);\n      });\n      return $el.on(\"click\", \".delete-value\", function(event) {\n        var choices, formEl, subtitle, target, text, title, value;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        formEl = target.parents(\"form\");\n        value = formEl.scope().value;\n        choices = {};\n        _.each($scope.values, function(option) {\n          if (value.id !== option.id) {\n            return choices[option.id] = option.name;\n          }\n        });\n        subtitle = value.name;\n        if (_.keys(choices).length === 0) {\n          return $confirm.error($translate.instant(\"ADMIN.PROJECT_VALUES.ERROR_DELETE_ALL\"));\n        }\n        title = $translate.instant(\"ADMIN.COMMON.TITLE_ACTION_DELETE_VALUE\");\n        text = $translate.instant(\"ADMIN.PROJECT_VALUES.REPLACEMENT\");\n        return $confirm.askChoice(title, subtitle, choices, text).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadValues()[\"finally\"](function() {\n              $rootscope.$broadcast(\"admin:project-values:updated\");\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $repo.remove(value, {\n            \"moveTo\": response.selected\n          }).then(onSucces, onError);\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      linkDragAndDrop($scope, $el, $attrs);\n      linkValue($scope, $el, $attrs);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectValues\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\", \"$translate\", \"$rootScope\", \"tgProjectService\", ProjectValuesDirective]);\n\n  ProjectDueDatesValues = function($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService) {\n    var linkDueDateStatusValue, parentDirective;\n    parentDirective = ProjectValuesDirective($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService);\n    linkDueDateStatusValue = function($scope, $el, $attrs, $ctrl) {\n      var _setDaysToDue, _valueFromEventTarget, initializeNewValue, saveNewValue, valueType;\n      $ctrl = $el.controller();\n      valueType = $attrs.type;\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"name\": \"\",\n          \"days_to_due\": 0,\n          \"sign\": 1\n        };\n      };\n      initializeNewValue();\n      _setDaysToDue = function(value) {\n        return value.days_to_due = value.days_to_due_abs * value.sign;\n      };\n      _valueFromEventTarget = function(event) {\n        var formEl, row, target;\n        target = angular.element(event.currentTarget);\n        row = target.parents(\".row.table-main\");\n        formEl = target.parents(\"form\");\n        if (!formEl.scope().value) {\n          return formEl.scope().newValue;\n        } else {\n          return formEl.scope().value;\n        }\n      };\n      saveNewValue = function(target) {\n        var form, formEl, promise;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.newValue.project = $scope.project.id;\n        $scope.newValue.order = $scope.maxValueOrder ? $scope.maxValueOrder + 1 : 1;\n        promise = $repo.create(valueType, $scope.newValue);\n        promise.then(function(data) {\n          target.addClass(\"hidden\");\n          data.sign = $scope.newValue.sign;\n          data.days_to_due_abs = $scope.newValue.days_to_due_abs;\n          $scope.values.push(data);\n          $rootscope.$broadcast(\"admin:project-values:updated\");\n          return initializeNewValue();\n        });\n        return promise.then(null, function(data) {\n          return form.setErrors(data);\n        });\n      };\n      $el.on(\"input\", \".days-to-due-abs\", function(event) {\n        var value;\n        event.preventDefault();\n        value = _valueFromEventTarget(event);\n        return $scope.$apply(function() {\n          return _setDaysToDue(value);\n        });\n      });\n      $el.on(\"click\", \".days-to-due-sign\", function(event) {\n        var currentValue, value;\n        event.preventDefault();\n        currentValue = Number(angular.element(event.currentTarget).parent().find('input').val());\n        value = _valueFromEventTarget(event);\n        if (currentValue === value.sign) {\n          return;\n        }\n        return $scope.$apply(function() {\n          value.sign = value.sign * -1;\n          return _setDaysToDue(value);\n        });\n      });\n      $el.on(\"click\", \".add-new-due-date\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        target = $el.find(\".new-value\");\n        return saveNewValue(target);\n      }));\n      return $el.on(\"click\", \".delete-due-date\", function(event) {\n        var formEl, subtitle, target, title, value;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        formEl = target.parents(\"form\");\n        value = formEl.scope().value;\n        title = $translate.instant(\"LIGHTBOX.ADMIN_DUE_DATES.TITLE_ACTION_DELETE_DUE_DATE\");\n        subtitle = $translate.instant(\"LIGHTBOX.ADMIN_DUE_DATES.SUBTITLE_ACTION_DELETE_DUE_DATE\", {\n          due_date_status_name: value.name\n        });\n        return $confirm.askDelete(title, subtitle).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadValues()[\"finally\"](function() {\n              $rootscope.$broadcast(\"admin:project-values:updated\");\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $repo.remove(value).then(onSucces, onError);\n        });\n      });\n    };\n    return {\n      link: function($scope, $el, $attrs) {\n        parentDirective.link($scope, $el, $attrs);\n        return linkDueDateStatusValue($scope, $el, $attrs);\n      }\n    };\n  };\n\n  module.directive(\"tgProjectDueDatesValues\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\", \"$translate\", \"$rootScope\", \"tgProjectService\", ProjectDueDatesValues]);\n\n  TEXT_TYPE = \"text\";\n\n  MULTILINE_TYPE = \"multiline\";\n\n  RICHTEXT_TYPE = \"richtext\";\n\n  DATE_TYPE = \"date\";\n\n  URL_TYPE = \"url\";\n\n  DROPDOWN_TYPE = \"dropdown\";\n\n  CHECKBOX_TYPE = \"checkbox\";\n\n  NUMBER_TYPE = \"number\";\n\n  TYPE_CHOICES = [\n    {\n      key: TEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_TEXT\"\n    }, {\n      key: MULTILINE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_MULTI\"\n    }, {\n      key: RICHTEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_RICHTEXT\"\n    }, {\n      key: DATE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DATE\"\n    }, {\n      key: URL_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_URL\"\n    }, {\n      key: DROPDOWN_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DROPDOWN\"\n    }, {\n      key: CHECKBOX_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_CHECKBOX\"\n    }, {\n      key: NUMBER_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_NUMBER\"\n    }\n  ];\n\n  ProjectCustomAttributesController = (function(superClass) {\n    extend(ProjectCustomAttributesController, superClass);\n\n    ProjectCustomAttributesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function ProjectCustomAttributesController(scope, rootscope, repo, rs, params, q, location, navUrls, appMetaService, translate, projectService1) {\n      var description, sectionName, title;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService1;\n      this.moveCustomAttributes = bind(this.moveCustomAttributes, this);\n      this.deleteCustomAttribute = bind(this.deleteCustomAttribute, this);\n      this.saveCustomAttribute = bind(this.saveCustomAttribute, this);\n      this.createCustomAttribute = bind(this.createCustomAttribute, this);\n      this.loadCustomAttributes = bind(this.loadCustomAttributes, this);\n      this._onCustomAttributesModified = bind(this._onCustomAttributesModified, this);\n      this.scope.TYPE_CHOICES = TYPE_CHOICES;\n      this.scope.project = this.projectService.project.toJS();\n      this.scope.projectId = this.scope.project.id;\n      sectionName = this.translate.instant(this.scope.sectionName);\n      title = this.translate.instant(\"ADMIN.CUSTOM_ATTRIBUTES.PAGE_TITLE\", {\n        \"sectionName\": sectionName,\n        \"projectName\": this.scope.project.name\n      });\n      description = this.scope.project.description;\n      this.appMetaService.setAll(title, description);\n      this.scope.init = (function(_this) {\n        return function(type) {\n          _this.scope.type = type;\n          return _this.loadCustomAttributes();\n        };\n      })(this);\n    }\n\n    ProjectCustomAttributesController.prototype._parseAttributesExtra = function() {\n      return this.scope.customAttributes = _.map(this.scope.customAttributes, (function(_this) {\n        return function(x) {\n          return _this._parseAttributeExtra(x);\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype._parseAttributeExtra = function(attr) {\n      if (attr.type === 'dropdown' && !attr.extra) {\n        attr.extra = [''];\n      }\n      return attr;\n    };\n\n    ProjectCustomAttributesController.prototype._onCustomAttributesModified = function() {\n      return this.rootscope.$broadcast(\"admin:project-custom-attributes:updated\");\n    };\n\n    ProjectCustomAttributesController.prototype.loadCustomAttributes = function() {\n      return this.rs.customAttributes[this.scope.type].list(this.scope.projectId).then((function(_this) {\n        return function(customAttributes) {\n          var ref;\n          _this.scope.customAttributes = customAttributes;\n          _this.scope.maxOrder = (ref = _.maxBy(customAttributes, \"order\")) != null ? ref.order : void 0;\n          _this._parseAttributesExtra();\n          return customAttributes;\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.createCustomAttribute = function(attrValues) {\n      return this.repo.create(\"custom-attributes/\" + this.scope.type, attrValues).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.saveCustomAttribute = function(attrModel) {\n      return this.repo.save(attrModel).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.deleteCustomAttribute = function(attrModel) {\n      return this.repo.remove(attrModel).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.moveCustomAttributes = function(attrModel, newIndex) {\n      var customAttributes, r;\n      customAttributes = this.scope.customAttributes;\n      r = customAttributes.indexOf(attrModel);\n      customAttributes.splice(r, 1);\n      customAttributes.splice(newIndex, 0, attrModel);\n      _.each(customAttributes, function(val, idx) {\n        return val.order = idx;\n      });\n      return this.repo.saveAll(customAttributes).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    return ProjectCustomAttributesController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"ProjectCustomAttributesController\", ProjectCustomAttributesController);\n\n  ProjectCustomAttributesDirective = function($log, $confirm, animationFrame, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, _manageExtraFormEvent, _manageFormEvent, addExtraOption, cancelCreate, cancelUpdate, create, deleteCustomAttribute, hideAddButton, hideCancelButton, hideCreateForm, hideEditForm, hideExtra, initAttrType, initDraggable, removeExtraOption, resetNewAttr, revertChangesInCustomAttribute, showAddButton, showCancelButton, showCreateForm, showEditForm, showExtra, update;\n      $ctrl = $el.controller();\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $scope.isExtraVisible = {};\n      _manageFormEvent = function(event, callback) {\n        var formEl;\n        event.preventDefault();\n        formEl = angular.element(event.currentTarget).closest(\"form\");\n        return callback(formEl);\n      };\n      initDraggable = function() {\n        var drake, el, i, len, results, sortableChildren, sortableEl;\n        sortableEl = $el.find(\".js-sortable\");\n        drake = dragula([sortableEl[0]], {\n          direction: 'vertical',\n          copySortSource: false,\n          copy: false,\n          mirrorContainer: sortableEl[0],\n          moves: function(item, source, handle) {\n            var childItem;\n            childItem = $(handle).closest('.js-child-sortable');\n            if (childItem[0]) {\n              return false;\n            }\n            return $(item).is('div[tg-bind-scope]');\n          }\n        });\n        drake.on('dragend', function(item) {\n          var itemAttr, itemEl, itemIndex;\n          itemEl = $(item);\n          itemAttr = itemEl.scope().attr;\n          itemIndex = itemEl.index();\n          return $ctrl.moveCustomAttributes(itemAttr, itemIndex);\n        });\n        sortableChildren = $el.find(\".js-child-sortable\");\n        results = [];\n        for (i = 0, len = sortableChildren.length; i < len; i++) {\n          el = sortableChildren[i];\n          drake[el] = dragula([el], {\n            direction: 'vertical',\n            copySortSource: false,\n            copy: false,\n            mirrorContainer: el,\n            moves: function(item) {\n              return $(item).is('div[tg-bind-scope]');\n            }\n          });\n          results.push(drake[el].on('dragend', function(item) {\n            var attrExtra, itemEl, sourceIndex, targetIndex, value;\n            itemEl = $(item);\n            attrExtra = itemEl.scope().attr.extra;\n            sourceIndex = itemEl.scope().$index;\n            targetIndex = itemEl.index();\n            value = attrExtra[sourceIndex];\n            attrExtra.splice(sourceIndex, 1);\n            attrExtra.splice(targetIndex, 0, value);\n            itemEl.scope().attr.setAttr('extra', attrExtra);\n            return $ctrl.saveCustomAttribute(itemEl.scope().attr).then(function() {\n              return $confirm.notify(\"success\");\n            });\n          }));\n        }\n        return results;\n      };\n      showCreateForm = function() {\n        $el.find(\".js-new-custom-field\").removeClass(\"hidden\");\n        return $el.find(\".js-new-custom-field input:visible\").first().focus();\n      };\n      hideCreateForm = function() {\n        return $el.find(\".js-new-custom-field\").addClass(\"hidden\");\n      };\n      showAddButton = function() {\n        return $el.find(\".js-add-custom-field-button\").removeClass(\"hidden\");\n      };\n      hideAddButton = function() {\n        return $el.find(\".js-add-custom-field-button\").addClass(\"hidden\");\n      };\n      showCancelButton = function() {\n        return $el.find(\".js-cancel-new-custom-field-button\").removeClass(\"hidden\");\n      };\n      hideCancelButton = function() {\n        return $el.find(\".js-cancel-new-custom-field-button\").addClass(\"hidden\");\n      };\n      resetNewAttr = function() {\n        return $scope.newAttr = {};\n      };\n      create = function(formEl) {\n        var attr, form, onError, onSucces;\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        onSucces = function() {\n          $ctrl.loadCustomAttributes();\n          hideCreateForm();\n          resetNewAttr();\n          return $confirm.notify(\"success\");\n        };\n        onError = function(data) {\n          return form.setErrors(data);\n        };\n        attr = $scope.newAttr;\n        attr.project = $scope.projectId;\n        attr.order = $scope.maxOrder ? $scope.maxOrder + 1 : 1;\n        return $ctrl.createCustomAttribute(attr).then(onSucces, onError);\n      };\n      cancelCreate = function() {\n        hideCreateForm();\n        return resetNewAttr();\n      };\n      initAttrType = function(formEl) {\n        var attr, ref;\n        attr = formEl.scope().newAttr ? formEl.scope().newAttr : formEl.scope().attr;\n        if (attr.type !== \"dropdown\") {\n          return;\n        }\n        if ((ref = attr.extra) != null ? ref.length : void 0) {\n          return;\n        }\n        attr.extra = [''];\n        if (attr.id) {\n          return showEditForm(formEl);\n        } else {\n          showExtra(-1);\n          return formEl.scope().$apply();\n        }\n      };\n      $scope.$watch(\"customAttributes\", function(customAttributes) {\n        if (!customAttributes) {\n          return;\n        }\n        if (customAttributes.length === 0) {\n          hideCancelButton();\n          hideAddButton();\n          return showCreateForm();\n        } else {\n          hideCreateForm();\n          showAddButton();\n          showCancelButton();\n          return initDraggable();\n        }\n      });\n      $el.on(\"change\", \".custom-field-type select\", function(event) {\n        return _manageFormEvent(event, initAttrType);\n      });\n      $el.on(\"click\", \".js-add-custom-field-button\", function(event) {\n        return _manageFormEvent(event, showCreateForm);\n      });\n      $el.on(\"click\", \".js-create-custom-field-button\", debounce(2000, function(event) {\n        return _manageFormEvent(event, create);\n      }));\n      $el.on(\"click\", \".js-cancel-new-custom-field-button\", function(event) {\n        event.preventDefault();\n        return cancelCreate();\n      });\n      $el.on(\"keyup\", \".js-new-custom-field input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, create);\n        } else if (event.keyCode === 27) {\n          return cancelCreate();\n        }\n      });\n      showEditForm = function(formEl) {\n        formEl.find(\".js-view-custom-field\").addClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field\").removeClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field input:visible\").first().focus().select();\n        formEl.find(\".js-view-custom-field-extra\").addClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field-extra\").removeClass(\"hidden\");\n        formEl.find(\".custom-extra-actions\").removeClass(\"hidden\");\n        showExtra(formEl.scope().attr.id);\n        return $scope.$apply();\n      };\n      update = function(formEl) {\n        var attr, form, onError, onSucces;\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        onSucces = function() {\n          $ctrl.loadCustomAttributes();\n          hideEditForm(formEl);\n          return $confirm.notify(\"success\");\n        };\n        onError = function(data) {\n          return form.setErrors(data);\n        };\n        attr = formEl.scope().attr;\n        attr.setAttr('extra', attr.extra);\n        return $ctrl.saveCustomAttribute(attr).then(onSucces, onError);\n      };\n      cancelUpdate = function(formEl) {\n        hideEditForm(formEl);\n        return revertChangesInCustomAttribute(formEl);\n      };\n      hideEditForm = function(formEl) {\n        formEl.find(\".js-edit-custom-field\").addClass(\"hidden\");\n        formEl.find(\".js-view-custom-field\").removeClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field-extra\").addClass(\"hidden\");\n        formEl.find(\".js-view-custom-field-extra\").removeClass(\"hidden\");\n        return formEl.find(\".custom-extra-actions\").addClass(\"hidden\");\n      };\n      revertChangesInCustomAttribute = function(formEl) {\n        return $scope.$apply(function() {\n          return formEl.scope().attr.revert();\n        });\n      };\n      $el.on(\"click\", \".js-edit-custom-field-button\", function(event) {\n        return _manageFormEvent(event, showEditForm);\n      });\n      $el.on(\"click\", \".js-update-custom-field-button\", debounce(1000, function(event) {\n        return _manageFormEvent(event, update);\n      }));\n      $el.on(\"click\", \".js-cancel-edit-custom-field-button\", function(event) {\n        return _manageFormEvent(event, cancelUpdate);\n      });\n      $el.on(\"keyup\", \".js-edit-custom-field input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, update);\n        } else if (event.keyCode === 27) {\n          return _manageFormEvent(event, cancelUpdate);\n        }\n      });\n      deleteCustomAttribute = function(formEl) {\n        var attr, message, text, title;\n        attr = formEl.scope().attr;\n        message = attr.name;\n        title = $translate.instant(\"COMMON.CUSTOM_ATTRIBUTES.DELETE\");\n        text = $translate.instant(\"COMMON.CUSTOM_ATTRIBUTES.CONFIRM_DELETE\");\n        return $confirm.askDelete(title, text, message).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadCustomAttributes()[\"finally\"](function() {\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\", null, \"We have not been able to delete '\" + message + \"'.\");\n          };\n          return $ctrl.deleteCustomAttribute(attr).then(onSucces, onError);\n        });\n      };\n      $el.on(\"click\", \".js-delete-custom-field-button\", debounce(2000, function(event) {\n        return _manageFormEvent(event, deleteCustomAttribute);\n      }));\n      $scope.toggleExtraVisible = function(index) {\n        if (!$scope.isExtraVisible[index]) {\n          return showExtra(index);\n        } else {\n          return hideExtra(index);\n        }\n      };\n      showExtra = function(index) {\n        return $scope.isExtraVisible[index] = true;\n      };\n      hideExtra = function(index) {\n        return $scope.isExtraVisible[index] = false;\n      };\n      _manageExtraFormEvent = function(event, callback) {\n        var formEl, formExtraEl;\n        event.preventDefault();\n        formEl = angular.element(event.currentTarget).closest(\"form\");\n        formExtraEl = angular.element(event.currentTarget).closest(\".js-form\");\n        return callback(formEl, formExtraEl);\n      };\n      addExtraOption = function(formEl, formExtraEl) {\n        var attrExtra, formScope, ref;\n        formScope = formEl.scope();\n        attrExtra = ((ref = formScope.newAttr) != null ? ref.extra : void 0) ? formScope.newAttr.extra : formScope.attr.extra;\n        attrExtra.push(\"\");\n        formScope.$apply();\n        formEl.find(\".js-edit-custom-field-extra\").last().removeClass(\"hidden\");\n        formEl.find(\".js-view-custom-field-extra\").last().addClass(\"hidden\");\n        return formEl.find(\".js-edit-custom-field-extra input\").last().focus();\n      };\n      removeExtraOption = function(formEl, formExtraEl) {\n        var attrExtra;\n        attrExtra = formEl.scope().attr.extra;\n        attrExtra.splice(formExtraEl.scope().$index, 1);\n        return formExtraEl.scope().$apply();\n      };\n      $el.on(\"keyup\", \".js-edit-custom-field-extra input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, update);\n        } else if (event.keyCode === 27) {\n          return _manageFormEvent(event, cancelUpdate);\n        }\n      });\n      $el.on(\"keyup\", \".js-new-custom-field-extra input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, create);\n        } else if (event.keyCode === 27) {\n          return cancelCreate();\n        }\n      });\n      $el.on(\"click\", \".js-add-option-custom-field-extra-button\", debounce(500, function(event) {\n        return _manageExtraFormEvent(event, addExtraOption);\n      }));\n      return $el.on(\"click\", \".js-delete-custom-field-extra-button\", debounce(500, function(event) {\n        return _manageExtraFormEvent(event, removeExtraOption);\n      }));\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectCustomAttributes\", [\"$log\", \"$tgConfirm\", \"animationFrame\", \"$translate\", ProjectCustomAttributesDirective]);\n\n  ProjectTagsController = (function(superClass) {\n    extend(ProjectTagsController, superClass);\n\n    ProjectTagsController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$tgModel\", \"tgProjectService\"];\n\n    function ProjectTagsController(scope, rootscope, repo, confirm, rs, model, projectService1) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.model = model;\n      this.projectService = projectService1;\n      this.mixingClass = bind(this.mixingClass, this);\n      this.cancelMixingTags = bind(this.cancelMixingTags, this);\n      this.confirmMixingTags = bind(this.confirmMixingTags, this);\n      this.toggleMixingFromTags = bind(this.toggleMixingFromTags, this);\n      this.startMixingTags = bind(this.startMixingTags, this);\n      this.deleteTag = bind(this.deleteTag, this);\n      this.editTag = bind(this.editTag, this);\n      this.createTag = bind(this.createTag, this);\n      this.filterAndSortTags = bind(this.filterAndSortTags, this);\n      this.loadTags = bind(this.loadTags, this);\n      this.loading = true;\n      this.loadTags();\n    }\n\n    ProjectTagsController.prototype.loadTags = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rs.projects.tagsColors(project.id).then((function(_this) {\n        return function(tags) {\n          _this.scope.projectTagsAll = _.map(tags.getAttrs(), function(color, name) {\n            return _this.model.make_model('tag', {\n              name: name,\n              color: color\n            });\n          });\n          _this.filterAndSortTags();\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.filterAndSortTags = function() {\n      this.scope.projectTags = _.sortBy(this.scope.projectTagsAll, function(it) {\n        return it.name.toLowerCase();\n      });\n      return this.scope.projectTags = _.filter(this.scope.projectTags, (function(_this) {\n        return function(tag) {\n          return tag.name.indexOf(_this.scope.tagsFilter.name) !== -1;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.createTag = function(tag, color) {\n      return this.rs.projects.createTag(this.scope.projectId, tag, color);\n    };\n\n    ProjectTagsController.prototype.editTag = function(from_tag, to_tag, color) {\n      if (from_tag === to_tag) {\n        to_tag = null;\n      }\n      return this.rs.projects.editTag(this.scope.projectId, from_tag, to_tag, color);\n    };\n\n    ProjectTagsController.prototype.deleteTag = function(tag) {\n      this.scope.loadingDelete = true;\n      return this.rs.projects.deleteTag(this.scope.projectId, tag)[\"finally\"]((function(_this) {\n        return function() {\n          return _this.scope.loadingDelete = false;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.startMixingTags = function(tag) {\n      return this.scope.mixingTags.toTag = tag.name;\n    };\n\n    ProjectTagsController.prototype.toggleMixingFromTags = function(tag) {\n      var index;\n      if (tag.name !== this.scope.mixingTags.toTag) {\n        index = this.scope.mixingTags.fromTags.indexOf(tag.name);\n        if (index === -1) {\n          return this.scope.mixingTags.fromTags.push(tag.name);\n        } else {\n          return this.scope.mixingTags.fromTags.splice(index, 1);\n        }\n      }\n    };\n\n    ProjectTagsController.prototype.confirmMixingTags = function() {\n      var fromTags, toTag;\n      toTag = this.scope.mixingTags.toTag;\n      fromTags = this.scope.mixingTags.fromTags;\n      this.scope.loadingMixing = true;\n      return this.rs.projects.mixTags(this.scope.projectId, toTag, fromTags).then((function(_this) {\n        return function() {\n          _this.cancelMixingTags();\n          return _this.loadTags();\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.scope.loadingMixing = false;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.cancelMixingTags = function() {\n      this.scope.mixingTags.toTag = null;\n      return this.scope.mixingTags.fromTags = [];\n    };\n\n    ProjectTagsController.prototype.mixingClass = function(tag) {\n      if (this.scope.mixingTags.toTag !== null) {\n        if (tag.name === this.scope.mixingTags.toTag) {\n          return \"mixing-tags-to\";\n        } else if (this.scope.mixingTags.fromTags.indexOf(tag.name) !== -1) {\n          return \"mixing-tags-from\";\n        }\n      }\n    };\n\n    return ProjectTagsController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ProjectTagsController\", ProjectTagsController);\n\n  ProjectTagsDirective = function($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, $window, cancel, goToBottomList, initializeMixingTags, initializeNewValue, initializeTagsFilter, initializeTextTranslations, objName, saveNewValue, saveValue, valueType;\n      $window = $(window);\n      $ctrl = $el.controller();\n      valueType = $attrs.type;\n      objName = $attrs.objname;\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"tag\": \"\",\n          \"color\": \"\"\n        };\n      };\n      initializeTagsFilter = function() {\n        return $scope.tagsFilter = {\n          \"name\": \"\"\n        };\n      };\n      initializeMixingTags = function() {\n        return $scope.mixingTags = {\n          \"toTag\": null,\n          \"fromTags\": []\n        };\n      };\n      initializeTextTranslations = function() {\n        return $scope.addNewElementText = $translate.instant(\"ADMIN.PROJECT_VALUES_TAGS.ACTION_ADD\");\n      };\n      initializeNewValue();\n      initializeTagsFilter();\n      initializeMixingTags();\n      initializeTextTranslations();\n      $rootscope.$on(\"$translateChangeEnd\", function() {\n        return $scope.$evalAsync(initializeTextTranslations);\n      });\n      goToBottomList = (function(_this) {\n        return function(focus) {\n          var table;\n          if (focus == null) {\n            focus = false;\n          }\n          table = $el.find(\".table-main\");\n          $(document.body).scrollTop(table.offset().top + table.height());\n          if (focus) {\n            return $el.find(\".new-value input:visible\").first().focus();\n          }\n        };\n      })(this);\n      saveValue = function(target) {\n        var form, formEl, originalTag, promise, tag;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        tag = formEl.scope().tag;\n        originalTag = tag.clone();\n        originalTag.revert();\n        $scope.loadingEdit = true;\n        promise = $ctrl.editTag(originalTag.name, tag.name, tag.color);\n        promise.then(function() {\n          return $ctrl.loadTags().then(function() {\n            var row;\n            row = target.parents(\".row.table-main\");\n            row.addClass(\"hidden\");\n            $scope.loadingEdit = false;\n            $rootscope.$broadcast('tags:updated');\n            return row.siblings(\".visualization\").removeClass('hidden');\n          });\n        });\n        return promise.then(null, function(response) {\n          $scope.loadingEdit = false;\n          return form.setErrors(response.data);\n        });\n      };\n      saveNewValue = function(target) {\n        var form, formEl, promise;\n        formEl = target.parents(\"form\");\n        formEl = target;\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.loadingCreate = true;\n        promise = $ctrl.createTag($scope.newValue.tag, $scope.newValue.color);\n        promise.then(function(data) {\n          return $ctrl.loadTags().then(function() {\n            $scope.loadingCreate = false;\n            target.addClass(\"hidden\");\n            $rootscope.$broadcast('tags:updated');\n            return initializeNewValue();\n          });\n        });\n        return promise.then(null, function(response) {\n          $scope.loadingCreate = false;\n          return form.setErrors(response.data);\n        });\n      };\n      cancel = function(target) {\n        var formEl, row, tag;\n        row = target.parents(\".row.table-main\");\n        formEl = target.parents(\"form\");\n        tag = formEl.scope().tag;\n        return $scope.$apply(function() {\n          row.addClass(\"hidden\");\n          tag.revert();\n          return row.siblings(\".visualization\").removeClass('hidden');\n        });\n      };\n      $scope.$watch(\"tagsFilter.name\", function(tagsFilter) {\n        return $ctrl.filterAndSortTags();\n      });\n      $window.on(\"keyup\", function(event) {\n        if (event.keyCode === 27) {\n          return $scope.$apply(function() {\n            return initializeMixingTags();\n          });\n        }\n      });\n      $el.on(\"click\", \".show-add-new\", function(event) {\n        event.preventDefault();\n        return $el.find(\".new-value\").removeClass('hidden');\n      });\n      $el.on(\"click\", \".add-new\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        target = $el.find(\".new-value\");\n        return saveNewValue(target);\n      }));\n      $el.on(\"click\", \".delete-new\", function(event) {\n        event.preventDefault();\n        $el.find(\".new-value\").addClass(\"hidden\");\n        return initializeNewValue();\n      });\n      $el.on(\"click\", \".mix-tags\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return $scope.$apply(function() {\n          return $ctrl.startMixingTags(target.parents('form').scope().tag);\n        });\n      });\n      $el.on(\"click\", \".mixing-row\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return $scope.$apply(function() {\n          return $ctrl.toggleMixingFromTags(target.parents('form').scope().tag);\n        });\n      });\n      $el.on(\"click\", \".mixing-confirm\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $scope.$apply(function() {\n          return $ctrl.confirmMixingTags();\n        });\n      });\n      $el.on(\"click\", \".mixing-cancel\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $scope.$apply(function() {\n          return $ctrl.cancelMixingTags();\n        });\n      });\n      $el.on(\"click\", \".edit-value\", function(event) {\n        var editionRow, row, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        row = target.parents(\".row.table-main\");\n        row.addClass(\"hidden\");\n        editionRow = row.siblings(\".edition\");\n        editionRow.removeClass('hidden');\n        return editionRow.find('input:visible').first().focus().select();\n      });\n      $el.on(\"keyup\", \".new-value input\", function(event) {\n        var target;\n        if (event.keyCode === 13) {\n          target = $el.find(\".new-value\");\n          return saveNewValue(target);\n        } else if (event.keyCode === 27) {\n          $el.find(\".new-value\").addClass(\"hidden\");\n          return initializeNewValue();\n        }\n      });\n      $el.on(\"keyup\", \".status-name input\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        if (event.keyCode === 13) {\n          return saveValue(target);\n        } else if (event.keyCode === 27) {\n          return cancel(target);\n        }\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return saveValue(target);\n      });\n      $el.on(\"click\", \".cancel\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return cancel(target);\n      });\n      $el.on(\"click\", \".delete-tag\", function(event) {\n        var formEl, tag, target, title;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        formEl = target.parents(\"form\");\n        tag = formEl.scope().tag;\n        title = $translate.instant(\"ADMIN.COMMON.TITLE_ACTION_DELETE_TAG\");\n        return $confirm.askOnDelete(title, tag.name).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadTags()[\"finally\"](function() {\n              $rootscope.$broadcast('tags:updated');\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $ctrl.deleteTag(tag.name).then(onSucces, onError);\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return $window.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectTags\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\", \"$translate\", \"$rootScope\", ProjectTagsDirective]);\n\n  ProjectSwimlanesWipDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      $scope.wipClosed = false;\n      return $scope.toggleWipVisibility = function() {\n        return $scope.wipClosed = !$scope.wipClosed;\n      };\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectSwimlanesWip\", ProjectSwimlanesWipDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var EditRoleDirective, NewRoleDirective, RolePermissionsDirective, RolesController, RolesDirective, bindMethods, bindOnce, debounce, mixOf, module, publicPermissions, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaAdmin\");\n\n  publicPermissions = ['view_epics', 'view_milestones', 'view_us', 'view_tasks', 'view_issues', 'view_wiki_pages', 'view_wiki_links'];\n\n  RolesController = (function(superClass) {\n    extend(RolesController, superClass);\n\n    RolesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgModel\", \"tgAppMetaService\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function RolesController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, model, appMetaService, translate, errorHandlingService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.model = model;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this._disableComputable = bind(this._disableComputable, this);\n      this._enableComputable = bind(this._enableComputable, this);\n      bindMethods(this);\n      this.scope.sectionName = \"ADMIN.MENU.PERMISSIONS\";\n      this.scope.project = {};\n      this.scope.anyComputableRole = true;\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.ROLES.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    RolesController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      project = this.model.make_model(\"projects\", project);\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.anyComputableRole = _.some(_.map(project.roles, function(point) {\n        return point.computable;\n      }));\n      return project;\n    };\n\n    RolesController.prototype.loadRoles = function() {\n      return this.rs.roles.list(this.scope.projectId).then((function(_this) {\n        return function(roles) {\n          var public_permission;\n          roles = roles.map(function(role) {\n            role.external_user = false;\n            return role;\n          });\n          public_permission = {\n            \"name\": _this.translate.instant(\"ADMIN.ROLES.EXTERNAL_USER\"),\n            \"permissions\": _this.scope.project.public_permissions,\n            \"external_user\": true\n          };\n          roles.push(public_permission);\n          _this.scope.roles = roles;\n          _this.scope.role = _this.scope.roles[0];\n          if (!_this.scope.project.is_private) {\n            publicPermissions.forEach(function(permission) {\n              if (!_this.scope.role.permissions.includes(permission)) {\n                return _this.scope.role.permissions.push(permission);\n              }\n            });\n          }\n          return roles;\n        };\n      })(this));\n    };\n\n    RolesController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadRoles();\n    };\n\n    RolesController.prototype.forceLoadProject = function() {\n      return this.rootscope.$broadcast(\"admin:project-roles:updated\");\n    };\n\n    RolesController.prototype.setRole = function(role) {\n      this.scope.role = role;\n      return this.scope.$broadcast(\"role:changed\", this.scope.role);\n    };\n\n    RolesController.prototype[\"delete\"] = function() {\n      var choices, i, len, ref, replacement, role, subtitle, title, warning;\n      choices = {};\n      ref = this.scope.roles;\n      for (i = 0, len = ref.length; i < len; i++) {\n        role = ref[i];\n        if (role.id !== this.scope.role.id) {\n          choices[role.id] = role.name;\n        }\n      }\n      if (_.keys(choices).length === 0) {\n        return this.confirm.error(this.translate.instant(\"ADMIN.ROLES.ERROR_DELETE_ALL\"));\n      }\n      title = this.translate.instant(\"ADMIN.ROLES.TITLE_DELETE_ROLE\");\n      subtitle = this.scope.role.name;\n      replacement = this.translate.instant(\"ADMIN.ROLES.REPLACEMENT_ROLE\");\n      warning = this.translate.instant(\"ADMIN.ROLES.WARNING_DELETE_ROLE\");\n      return this.confirm.askChoice(title, subtitle, choices, replacement, warning).then((function(_this) {\n        return function(response) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            _this.forceLoadProject();\n            return _this.loadRoles()[\"finally\"](function() {\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return _this.confirm.notify('error');\n          };\n          return _this.repo.remove(_this.scope.role, {\n            moveTo: response.selected\n          }).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    RolesController.prototype._enableComputable = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.confirm.notify(\"success\");\n          return _this.forceLoadProject();\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          _this.confirm.notify(\"error\");\n          return _this.scope.role.revert();\n        };\n      })(this);\n      return this.repo.save(this.scope.role).then(onSuccess, onError);\n    };\n\n    RolesController.prototype._disableComputable = function() {\n      var askOnError, askOnSuccess, subtitle, title;\n      askOnSuccess = (function(_this) {\n        return function(response) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            response.finish();\n            _this.confirm.notify(\"success\");\n            return _this.forceLoadProject();\n          };\n          onError = function() {\n            response.finish();\n            _this.confirm.notify(\"error\");\n            return _this.scope.role.revert();\n          };\n          return _this.repo.save(_this.scope.role).then(onSuccess, onError);\n        };\n      })(this);\n      askOnError = (function(_this) {\n        return function(response) {\n          return _this.scope.role.revert();\n        };\n      })(this);\n      title = this.translate.instant(\"ADMIN.ROLES.DISABLE_COMPUTABLE_ALERT_TITLE\");\n      subtitle = this.translate.instant(\"ADMIN.ROLES.DISABLE_COMPUTABLE_ALERT_SUBTITLE\", {\n        roleName: this.scope.role.name\n      });\n      return this.confirm.ask(title, subtitle, \"\").then(askOnSuccess, askOnError);\n    };\n\n    RolesController.prototype.toggleComputable = debounce(2000, function() {\n      if (!this.scope.role.computable) {\n        return this._disableComputable();\n      } else {\n        return this._enableComputable();\n      }\n    });\n\n    return RolesController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"RolesController\", RolesController);\n\n  EditRoleDirective = function($repo, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit, toggleView;\n      toggleView = function() {\n        $el.find('.total').toggle();\n        return $el.find('.edit-role').toggle();\n      };\n      submit = function() {\n        var promise;\n        $scope.role.name = $el.find(\"input\").val();\n        promise = $repo.save($scope.role);\n        promise.then(function() {\n          return $confirm.notify(\"success\");\n        });\n        promise.then(null, function(data) {\n          return $confirm.notify(\"error\");\n        });\n        return toggleView();\n      };\n      $el.on(\"click\", \".edit-value\", function() {\n        toggleView();\n        $el.find(\"input\").focus();\n        return $el.find(\"input\").val($scope.role.name);\n      });\n      $el.on(\"click\", \"a.save\", submit);\n      $el.on(\"keyup\", \"input\", function(event) {\n        if (event.keyCode === 13) {\n          return submit();\n        } else if (event.keyCode === 27) {\n          return toggleView();\n        }\n      });\n      $scope.$on(\"role:changed\", function() {\n        if ($el.find('.edit-role').is(\":visible\")) {\n          return toggleView();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgEditRole\", [\"$tgRepo\", \"$tgConfirm\", EditRoleDirective]);\n\n  RolesDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRoles\", RolesDirective);\n\n  NewRoleDirective = function($tgrepo, $confirm) {\n    var DEFAULT_PERMISSIONS, link;\n    DEFAULT_PERMISSIONS = [\"view_project\", \"view_milestones\", \"view_us\", \"view_tasks\", \"view_issues\"];\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $el.on(\"click\", \"button.add-button\", function(event) {\n        event.preventDefault();\n        $el.find(\".new\").removeClass(\"hidden\");\n        $el.find(\".new\").focus();\n        return $el.find(\".add-button\").hide();\n      });\n      return $el.on(\"keyup\", \".new\", function(event) {\n        var newRole, onError, onSuccess, target;\n        event.preventDefault();\n        if (event.keyCode === 13) {\n          target = angular.element(event.currentTarget);\n          newRole = {\n            project: $scope.projectId,\n            name: target.val(),\n            permissions: DEFAULT_PERMISSIONS,\n            order: _.maxBy($scope.roles, function(r) {\n              return r.order;\n            }).order + 1,\n            computable: false\n          };\n          $el.find(\".new\").addClass(\"hidden\");\n          $el.find(\".new\").val('');\n          onSuccess = function(role) {\n            var insertPosition;\n            insertPosition = $scope.roles.length - 1;\n            $scope.roles.splice(insertPosition, 0, role);\n            $ctrl.setRole(role);\n            $el.find(\".add-button\").show();\n            return $ctrl.forceLoadProject();\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $tgrepo.create(\"roles\", newRole).then(onSuccess, onError);\n        } else if (event.keyCode === 27) {\n          target = angular.element(event.currentTarget);\n          $el.find(\".new\").addClass(\"hidden\");\n          $el.find(\".new\").val('');\n          return $el.find(\".add-button\").show();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgNewRole\", [\"$tgRepo\", \"$tgConfirm\", NewRoleDirective]);\n\n  RolePermissionsDirective = function($rootscope, $repo, $confirm, $compile) {\n    var baseTemplate, categoryTemplate, link, resumeTemplate;\n    resumeTemplate = _.template(\"<div class=\\\"resume-title\\\" translate=\\\"<%- category.name %>\\\"></div>\\n<div class=\\\"summary-role\\\">\\n    <div class=\\\"count\\\"><%- category.activePermissions %>/<%- category.permissions.length %></div>\\n    <% _.each(category.permissions, function(permission) { %>\\n        <div class=\\\"role-summary-single check-toggle <% if(permission.active) { %>active<% } %>\\\"\\n             title=\\\"{{ '<%- permission.name %>' | translate }}\\\"></div>\\n    <% }) %>\\n</div>\\n<tg-svg svg-icon=\\\"icon-arrow-right\\\"></tg-svg>\");\n    categoryTemplate = _.template(\"<div class=\\\"category-config\\\" data-id=\\\"<%- index %>\\\">\\n    <div class=\\\"resume\\\">\\n    </div>\\n    <div class=\\\"category-items\\\">\\n        <div class=\\\"items-container\\\">\\n        <% _.each(category.permissions, function(permission) { %>\\n            <div class=\\\"category-item\\\" data-id=\\\"<%- permission.key %>\\\">\\n                <span translate=\\\"<%- permission.name %>\\\"></span>\\n                <div class=\\\"check\\\">\\n                    <input type=\\\"checkbox\\\"\\n                           <% if(!permission.editable) { %> disabled=\\\"disabled\\\" <% } %>\\n                           <% if(permission.active) { %> checked=\\\"checked\\\" <% } %>/>\\n                    <div></div>\\n                    <span class=\\\"check-text check-yes\\\" translate=\\\"COMMON.YES\\\"></span>\\n                    <span class=\\\"check-text check-no\\\" translate=\\\"COMMON.NO\\\"></span>\\n                </div>\\n            </div>\\n        <% }) %>\\n        </div>\\n    </div>\\n</div>\");\n    baseTemplate = _.template(\"<div class=\\\"category-config-list\\\"></div>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, generateCategoriesFromRole, renderCategory, renderPermissions, renderResume;\n      $ctrl = $el.controller();\n      generateCategoriesFromRole = function(role) {\n        var categories, epicPermissions, isPermissionEditable, issuePermissions, milestonePermissions, setActivePermissions, setActivePermissionsPerCategory, taskPermissions, userStoryPermissions, wikiPermissions;\n        setActivePermissions = function(permissions) {\n          return _.map(permissions, function(x) {\n            var ref;\n            return _.extend({}, x, {\n              active: (ref = x[\"key\"], indexOf.call(role.permissions, ref) >= 0)\n            });\n          });\n        };\n        isPermissionEditable = function(permission, role, project) {\n          if (role.external_user && !project.is_private && permission.key.indexOf(\"view_\") === 0) {\n            return false;\n          } else {\n            return true;\n          }\n        };\n        setActivePermissionsPerCategory = function(category) {\n          return _.map(category, function(cat) {\n            cat.permissions = cat.permissions.map(function(permission) {\n              permission.editable = isPermissionEditable(permission, role, $scope.project);\n              return permission;\n            });\n            return _.extend({}, cat, {\n              activePermissions: _.filter(cat[\"permissions\"], \"active\").length\n            });\n          });\n        };\n        categories = [];\n        epicPermissions = [\n          {\n            key: \"view_epics\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.VIEW_EPICS\"\n          }, {\n            key: \"add_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.ADD_EPICS\"\n          }, {\n            key: \"modify_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.MODIFY_EPICS\"\n          }, {\n            key: \"comment_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.COMMENT_EPICS\"\n          }, {\n            key: \"delete_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.DELETE_EPICS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.NAME\",\n          permissions: setActivePermissions(epicPermissions)\n        });\n        milestonePermissions = [\n          {\n            key: \"view_milestones\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.VIEW_SPRINTS\"\n          }, {\n            key: \"add_milestone\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.ADD_SPRINTS\"\n          }, {\n            key: \"modify_milestone\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.MODIFY_SPRINTS\"\n          }, {\n            key: \"delete_milestone\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.DELETE_SPRINTS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.NAME\",\n          permissions: setActivePermissions(milestonePermissions)\n        });\n        userStoryPermissions = [\n          {\n            key: \"view_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.VIEW_USER_STORIES\"\n          }, {\n            key: \"add_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.ADD_USER_STORIES\"\n          }, {\n            key: \"modify_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.MODIFY_USER_STORIES\"\n          }, {\n            key: \"comment_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.COMMENT_USER_STORIES\"\n          }, {\n            key: \"delete_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.DELETE_USER_STORIES\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.NAME\",\n          permissions: setActivePermissions(userStoryPermissions)\n        });\n        taskPermissions = [\n          {\n            key: \"view_tasks\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.VIEW_TASKS\"\n          }, {\n            key: \"add_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.ADD_TASKS\"\n          }, {\n            key: \"modify_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.MODIFY_TASKS\"\n          }, {\n            key: \"comment_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.COMMENT_TASKS\"\n          }, {\n            key: \"delete_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.DELETE_TASKS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.NAME\",\n          permissions: setActivePermissions(taskPermissions)\n        });\n        issuePermissions = [\n          {\n            key: \"view_issues\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.VIEW_ISSUES\"\n          }, {\n            key: \"add_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.ADD_ISSUES\"\n          }, {\n            key: \"modify_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.MODIFY_ISSUES\"\n          }, {\n            key: \"comment_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.COMMENT_ISSUES\"\n          }, {\n            key: \"delete_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.DELETE_ISSUES\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.NAME\",\n          permissions: setActivePermissions(issuePermissions)\n        });\n        wikiPermissions = [\n          {\n            key: \"view_wiki_pages\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.VIEW_WIKI_PAGES\"\n          }, {\n            key: \"add_wiki_page\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.ADD_WIKI_PAGES\"\n          }, {\n            key: \"modify_wiki_page\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.MODIFY_WIKI_PAGES\"\n          }, {\n            key: \"delete_wiki_page\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.DELETE_WIKI_PAGES\"\n          }, {\n            key: \"add_wiki_link\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.ADD_WIKI_LINKS\"\n          }, {\n            key: \"delete_wiki_link\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.DELETE_WIKI_LINKS\"\n          }, {\n            key: \"view_wiki_links\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.VIEW_WIKI_LINKS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.NAME\",\n          permissions: setActivePermissions(wikiPermissions)\n        });\n        return setActivePermissionsPerCategory(categories);\n      };\n      renderResume = function(element, category) {\n        return element.find(\".resume\").html($compile(resumeTemplate({\n          category: category\n        }))($scope));\n      };\n      renderCategory = function(category, index) {\n        var html;\n        html = categoryTemplate({\n          category: category,\n          index: index\n        });\n        html = angular.element(html);\n        renderResume(html, category);\n        return $compile(html)($scope);\n      };\n      renderPermissions = function() {\n        var html;\n        $el.off();\n        html = baseTemplate();\n        _.each(generateCategoriesFromRole($scope.role), function(category, index) {\n          if (!$scope.project.is_private) {\n            category.permissions.forEach((function(_this) {\n              return function(permission) {\n                if (publicPermissions.includes(permission.key)) {\n                  return permission.editable = false;\n                }\n              };\n            })(this));\n          }\n          return html = angular.element(html).append(renderCategory(category, index));\n        });\n        $el.html(html);\n        $el.on(\"click\", \".resume\", function(event) {\n          var target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          target.toggleClass(\"open-drawer\");\n          return target.next().toggleClass(\"open\");\n        });\n        return $el.on(\"change\", \".category-item input\", function(event) {\n          var getActivePermissions, onError, onSuccess, target;\n          getActivePermissions = function() {\n            var activePermissions;\n            activePermissions = _.filter($el.find(\".category-item input\"), function(t) {\n              return angular.element(t).is(\":checked\");\n            });\n            activePermissions = _.sortBy(_.map(activePermissions, function(t) {\n              var permission;\n              return permission = angular.element(t).parents(\".category-item\").data(\"id\");\n            }));\n            if (activePermissions.length) {\n              activePermissions.push(\"view_project\");\n            }\n            return activePermissions;\n          };\n          target = angular.element(event.currentTarget);\n          $scope.role.permissions = getActivePermissions();\n          onSuccess = function() {\n            var categories, categoryId;\n            categories = generateCategoriesFromRole($scope.role);\n            categoryId = target.parents(\".category-config\").data(\"id\");\n            renderResume(target.parents(\".category-config\"), categories[categoryId]);\n            $rootscope.$broadcast(\"projects:reload\");\n            $confirm.notify(\"success\");\n            return $ctrl.forceLoadProject();\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            target.prop(\"checked\", !target.prop(\"checked\"));\n            return $scope.role.permissions = getActivePermissions();\n          };\n          if ($scope.role.external_user) {\n            $scope.project.public_permissions = $scope.role.permissions;\n            $scope.project.anon_permissions = $scope.role.permissions.filter(function(permission) {\n              return permission.indexOf(\"view_\") === 0;\n            });\n            return $repo.save($scope.project).then(onSuccess, onError);\n          } else {\n            return $repo.save($scope.role).then(onSuccess, onError);\n          }\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $scope.$on(\"role:changed\", function() {\n        return renderPermissions();\n      });\n      return bindOnce($scope, $attrs.ngModel, renderPermissions);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRolePermissions\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$compile\", RolePermissionsDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var BitbucketController, BitbucketWebhooksDirective, GithubController, GithubWebhooksDirective, GitlabController, GitlabWebhooksDirective, GogsController, GogsWebhooksDirective, NewWebhookDirective, SelectInputText, ValidOriginIpsDirective, WebhookDirective, WebhooksController, bindMethods, debounce, mixOf, module, taiga, timeout,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounce = this.taiga.debounce;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaAdmin\");\n\n  WebhooksController = (function(superClass) {\n    extend(WebhooksController, superClass);\n\n    WebhooksController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function WebhooksController(scope, repo, rs, params, location, navUrls, appMetaService, translate, errorHandlingService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = \"ADMIN.WEBHOOKS.SECTION_NAME\";\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.WEBHOOKS.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"webhooks:reload\", this.loadWebhooks);\n    }\n\n    WebhooksController.prototype.loadWebhooks = function() {\n      return this.rs.webhooks.list(this.scope.projectId).then((function(_this) {\n        return function(webhooks) {\n          return _this.scope.webhooks = webhooks;\n        };\n      })(this));\n    };\n\n    WebhooksController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    WebhooksController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadWebhooks();\n    };\n\n    return WebhooksController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"WebhooksController\", WebhooksController);\n\n  WebhookDirective = function($rs, $repo, $confirm, $loading, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var cancel, openHistory, save, showEditMode, showVisualizationMode, updateLogs, updateShowHideHistoryText, webhook;\n      webhook = $scope.$eval($attrs.tgWebhook);\n      updateLogs = function() {\n        var prettyDate;\n        prettyDate = $translate.instant(\"ADMIN.WEBHOOKS.DATE\");\n        return $rs.webhooklogs.list(webhook.id).then((function(_this) {\n          return function(webhooklogs) {\n            var i, len, log, ref;\n            for (i = 0, len = webhooklogs.length; i < len; i++) {\n              log = webhooklogs[i];\n              log.validStatus = (200 <= (ref = log.status) && ref < 300);\n              log.prettySentHeaders = _.map(_.toPairs(log.request_headers), function(arg) {\n                var header, value;\n                header = arg[0], value = arg[1];\n                return header + \": \" + value;\n              }).join(\"\\n\");\n              log.prettySentData = JSON.stringify(log.request_data);\n              log.prettyDate = moment(log.created).format(prettyDate);\n            }\n            webhook.logs_counter = webhooklogs.length;\n            webhook.logs = webhooklogs;\n            return updateShowHideHistoryText();\n          };\n        })(this));\n      };\n      updateShowHideHistoryText = function() {\n        var historyElement, text, textElement, title;\n        textElement = $el.find(\".toggle-history\");\n        historyElement = textElement.parents(\".single-webhook-wrapper\").find(\".webhooks-history\");\n        if (historyElement.hasClass(\"open\")) {\n          text = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_HIDE_HISTORY\");\n          title = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_HIDE_HISTORY_TITLE\");\n        } else {\n          text = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_SHOW_HISTORY\");\n          title = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_SHOW_HISTORY_TITLE\");\n        }\n        textElement.text(text);\n        return textElement.prop(\"title\", title);\n      };\n      showVisualizationMode = function() {\n        $el.find(\".edition-mode\").addClass(\"hidden\");\n        return $el.find(\".visualization-mode\").removeClass(\"hidden\");\n      };\n      showEditMode = function() {\n        $el.find(\".visualization-mode\").addClass(\"hidden\");\n        return $el.find(\".edition-mode\").removeClass(\"hidden\");\n      };\n      openHistory = function() {\n        return $el.find(\".webhooks-history\").addClass(\"open\");\n      };\n      cancel = function() {\n        showVisualizationMode();\n        return $scope.$apply(function() {\n          return webhook.revert();\n        });\n      };\n      save = debounce(2000, function(target) {\n        var form, promise;\n        form = target.parents(\"form\").checksley();\n        if (!form.validate()) {\n          return;\n        }\n        promise = $repo.save(webhook);\n        promise.then((function(_this) {\n          return function() {\n            return showVisualizationMode();\n          };\n        })(this));\n        return promise.then(null, function(data) {\n          $confirm.notify(\"error\");\n          return form.setErrors(data);\n        });\n      });\n      $el.on(\"click\", \".test-webhook\", function() {\n        openHistory();\n        return $rs.webhooks.test(webhook.id).then((function(_this) {\n          return function() {\n            return updateLogs();\n          };\n        })(this));\n      });\n      $el.on(\"click\", \".edit-webhook\", function() {\n        return showEditMode();\n      });\n      $el.on(\"click\", \".cancel-existing\", function() {\n        return cancel();\n      });\n      $el.on(\"click\", \".edit-existing\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return save(target);\n      });\n      $el.on(\"keyup\", \".edition-mode input\", function(event) {\n        var target;\n        if (event.keyCode === 13) {\n          target = angular.element(event.currentTarget);\n          return save(target);\n        } else if (event.keyCode === 27) {\n          target = angular.element(event.currentTarget);\n          return cancel(target);\n        }\n      });\n      $el.on(\"click\", \".delete-webhook\", function() {\n        var message, title;\n        title = $translate.instant(\"ADMIN.WEBHOOKS.DELETE\");\n        message = $translate.instant(\"ADMIN.WEBHOOKS.WEBHOOK_NAME\", {\n          name: webhook.name\n        });\n        return $confirm.askOnDelete(title, message).then((function(_this) {\n          return function(askResponse) {\n            var onError, onSucces;\n            onSucces = function() {\n              askResponse.finish();\n              return $scope.$emit(\"webhooks:reload\");\n            };\n            onError = function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            };\n            return $repo.remove(webhook).then(onSucces, onError);\n          };\n        })(this));\n      });\n      $el.on(\"click\", \".toggle-history\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        if ((webhook.logs == null) || webhook.logs.length === 0) {\n          return updateLogs().then(function() {\n            return timeout(0, function() {\n              $el.find(\".webhooks-history\").toggleClass(\"open\").slideToggle();\n              return updateShowHideHistoryText();\n            });\n          });\n        } else {\n          $el.find(\".webhooks-history\").toggleClass(\"open\").slideToggle();\n          return $scope.$apply(function() {\n            return updateShowHideHistoryText();\n          });\n        }\n      });\n      $el.on(\"click\", \".history-single\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        target.toggleClass(\"history-single-open\");\n        return target.siblings(\".history-single-response\").toggleClass(\"open\");\n      });\n      return $el.on(\"click\", \".resend-request\", function(event) {\n        var log, target;\n        target = angular.element(event.currentTarget);\n        log = target.data(\"log\");\n        return $rs.webhooklogs.resend(log).then((function(_this) {\n          return function() {\n            return updateLogs();\n          };\n        })(this));\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgWebhook\", [\"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$translate\", WebhookDirective]);\n\n  NewWebhookDirective = function($rs, $repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var addWebhookDOMNode, formDOMNode, initializeNewValue, save, webhook;\n      webhook = $scope.$eval($attrs.tgWebhook);\n      formDOMNode = $el.find(\".new-webhook-form\");\n      addWebhookDOMNode = $el.find(\".add-webhook\");\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"name\": \"\",\n          \"url\": \"\",\n          \"key\": \"\"\n        };\n      };\n      initializeNewValue();\n      $scope.$watch(\"webhooks\", function(webhooks) {\n        if (webhooks != null) {\n          if (webhooks.length === 0) {\n            formDOMNode.removeClass(\"hidden\");\n            addWebhookDOMNode.addClass(\"hidden\");\n            return formDOMNode.find(\"input\")[0].focus();\n          } else {\n            formDOMNode.addClass(\"hidden\");\n            return addWebhookDOMNode.removeClass(\"hidden\");\n          }\n        }\n      });\n      save = debounce(2000, function() {\n        var form, promise;\n        form = formDOMNode.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.newValue.project = $scope.project.id;\n        promise = $repo.create(\"webhooks\", $scope.newValue);\n        promise.then((function(_this) {\n          return function() {\n            $analytics.trackEvent(\"webhooks\", \"create\", \"Create new webhook\", 1);\n            $scope.$emit(\"webhooks:reload\");\n            return initializeNewValue();\n          };\n        })(this));\n        return promise.then(null, function(data) {\n          $confirm.notify(\"error\");\n          return form.setErrors(data);\n        });\n      });\n      formDOMNode.on(\"click\", \".add-new\", function(event) {\n        event.preventDefault();\n        return save();\n      });\n      formDOMNode.on(\"keyup\", \"input\", function(event) {\n        if (event.keyCode === 13) {\n          return save();\n        }\n      });\n      formDOMNode.on(\"click\", \".cancel-new\", function(event) {\n        return $scope.$apply(function() {\n          initializeNewValue();\n          if ($scope.webhooks.length >= 1) {\n            return formDOMNode.addClass(\"hidden\");\n          }\n        });\n      });\n      return addWebhookDOMNode.on(\"click\", function(event) {\n        formDOMNode.removeClass(\"hidden\");\n        return formDOMNode.find(\"input\")[0].focus();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgNewWebhook\", [\"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", NewWebhookDirective]);\n\n  GithubController = (function(superClass) {\n    extend(GithubController, superClass);\n\n    GithubController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function GithubController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.GITHUB.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.GITHUB.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    GithubController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"github\").then((function(_this) {\n        return function(github) {\n          return _this.scope.github = github;\n        };\n      })(this));\n    };\n\n    GithubController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    GithubController.prototype.loadInitialData = function() {\n      var promise;\n      promise = this.loadProject();\n      return this.loadModules();\n    };\n\n    return GithubController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"GithubController\", GithubController);\n\n  GitlabController = (function(superClass) {\n    extend(GitlabController, superClass);\n\n    GitlabController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function GitlabController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.GITLAB.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.GITLAB.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"project:modules:reload\", (function(_this) {\n        return function() {\n          return _this.loadModules();\n        };\n      })(this));\n    }\n\n    GitlabController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"gitlab\").then((function(_this) {\n        return function(gitlab) {\n          return _this.scope.gitlab = gitlab;\n        };\n      })(this));\n    };\n\n    GitlabController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    GitlabController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadModules();\n    };\n\n    return GitlabController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"GitlabController\", GitlabController);\n\n  BitbucketController = (function(superClass) {\n    extend(BitbucketController, superClass);\n\n    BitbucketController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function BitbucketController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.BITBUCKET.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.BITBUCKET.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"project:modules:reload\", (function(_this) {\n        return function() {\n          return _this.loadModules();\n        };\n      })(this));\n    }\n\n    BitbucketController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"bitbucket\").then((function(_this) {\n        return function(bitbucket) {\n          return _this.scope.bitbucket = bitbucket;\n        };\n      })(this));\n    };\n\n    BitbucketController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    BitbucketController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadModules();\n    };\n\n    return BitbucketController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"BitbucketController\", BitbucketController);\n\n  SelectInputText = function($translate, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $el.on(\"click\", \".select-input-content\", function() {\n        var source;\n        source = $el.find(\"input\");\n        if (!source.val()) {\n          return;\n        }\n        source.select();\n        document.execCommand('copy');\n        return $confirm.notify(\"success\", $translate.instant(\"COMMON.COPIED_TO_CLIPBOARD\"));\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSelectInputText\", [\"$translate\", \"$tgConfirm\", SelectInputText]);\n\n  GithubWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.github, \"github\");\n          promise.then(function() {\n            $analytics.trackEvent(\"github-webhook\", \"created-or-changed\", \"Create or changed github webhook\", 1);\n            currentLoading.finish();\n            return $confirm.notify(\"success\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgGithubWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GithubWebhooksDirective]);\n\n  GitlabWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.gitlab, \"gitlab\");\n          promise.then(function() {\n            $analytics.trackEvent(\"gitlab-webhook\", \"created-or-changed\", \"Create or changed gitlab webhook\", 1);\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $scope.$emit(\"project:modules:reload\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgGitlabWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GitlabWebhooksDirective]);\n\n  BitbucketWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.bitbucket, \"bitbucket\");\n          promise.then(function() {\n            $analytics.trackEvent(\"bitbucket-webhook\", \"created-or-changed\", \"Create or changed bitbucket webhook\", 1);\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $scope.$emit(\"project:modules:reload\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBitbucketWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", BitbucketWebhooksDirective]);\n\n  ValidOriginIpsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs, $ngModel) {\n      return $ngModel.$parsers.push(function(value) {\n        value = $.trim(value);\n        if (value === \"\") {\n          return [];\n        }\n        return value.split(\",\");\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgValidOriginIps\", ValidOriginIpsDirective);\n\n  GogsController = (function(superClass) {\n    extend(GogsController, superClass);\n\n    GogsController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function GogsController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.GOGS.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.GOGS.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    GogsController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"gogs\").then((function(_this) {\n        return function(gogs) {\n          return _this.scope.gogs = gogs;\n        };\n      })(this));\n    };\n\n    GogsController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    GogsController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadModules();\n    };\n\n    return GogsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  GogsWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.gogs, \"gogs\");\n          promise.then(function() {\n            $analytics.trackEvent(\"gogs-webhook\", \"create-or-change\", \"Create or change gogs webhook\", 1);\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $scope.$emit(\"project:modules:reload\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $el.on(\"click\", \".submit-button\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.controller(\"GogsController\", GogsController);\n\n  module.directive(\"tgGogsWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GogsWebhooksDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DeleteProjectDirective, bindOnce, debounce, module, taiga, timeout;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  timeout = this.taiga.timeout;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaProject\");\n\n  DeleteProjectDirective = function($repo, $rootscope, $auth, $location, $navUrls, $confirm, lightboxService, tgLoader, currentUserService, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var projectToDelete, submit;\n      projectToDelete = null;\n      $scope.$on(\"deletelightbox:new\", function(ctx, project) {\n        lightboxService.open($el);\n        return projectToDelete = project;\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      submit = function() {\n        var promise;\n        tgLoader.start();\n        lightboxService.close($el);\n        promise = $repo.remove(projectToDelete);\n        promise.then(function(data) {\n          $analytics.trackEvent(\"projects\", \"delete\", \"Delete project\", 1);\n          tgLoader.pageLoaded();\n          $rootscope.$broadcast(\"projects:reload\");\n          $location.path($navUrls.resolve(\"home\"));\n          $confirm.notify(\"success\");\n          return currentUserService.loadProjects();\n        });\n        return promise.then(null, function() {\n          $confirm.notify(\"error\");\n          return lightboxService.close($el);\n        });\n      };\n      $el.on(\"click\", \".js-cancel\", function(event) {\n        event.preventDefault();\n        return lightboxService.close($el);\n      });\n      return $el.on(\"click\", \".js-confirm\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbDeleteProject\", [\"$tgRepo\", \"$rootScope\", \"$tgAuth\", \"$tgLocation\", \"$tgNavUrls\", \"$tgConfirm\", \"lightboxService\", \"tgLoader\", \"tgCurrentUserService\", \"$tgAnalytics\", DeleteProjectDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var BindHtmlDirective, BindOnceAltDirective, BindOnceBindDirective, BindOnceHrefDirective, BindOnceHtmlDirective, BindOnceRefDirective, BindOnceSrcDirective, BindOnceTitleDirective, BindTitleDirective, bindOnce, module;\n\n  bindOnce = this.taiga.bindOnce;\n\n  BindOnceBindDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoBind, function(val) {\n        return $el.text(val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceHtmlDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoHtml, function(val) {\n        return $el.html(val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceRefDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoRef, function(val) {\n        return $el.html(\"#\" + val + \" \");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceSrcDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoSrc, function(val) {\n        return $el.attr(\"src\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceHrefDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoHref, function(val) {\n        return $el.attr(\"href\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceAltDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoAlt, function(val) {\n        return $el.attr(\"alt\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceTitleDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoTitle, function(val) {\n        return $el.attr(\"title\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindTitleDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$watch($attrs.tgTitleHtml, function(val) {\n        if (val != null) {\n          return $el.attr(\"title\", val);\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindHtmlDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$watch($attrs.tgBindHtml, function(val) {\n        if (val != null) {\n          return $el.html(val);\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module = angular.module(\"taigaBase\");\n\n  module.directive(\"tgBoBind\", BindOnceBindDirective);\n\n  module.directive(\"tgBoHtml\", BindOnceHtmlDirective);\n\n  module.directive(\"tgBoRef\", BindOnceRefDirective);\n\n  module.directive(\"tgBoSrc\", BindOnceSrcDirective);\n\n  module.directive(\"tgBoHref\", BindOnceHrefDirective);\n\n  module.directive(\"tgBoAlt\", BindOnceAltDirective);\n\n  module.directive(\"tgBoTitle\", BindOnceTitleDirective);\n\n  module.directive(\"tgBindTitle\", BindTitleDirective);\n\n  module.directive(\"tgBindHtml\", BindHtmlDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ConfigurationService, module;\n\n  ConfigurationService = (function() {\n    function ConfigurationService() {\n      this.config = window.taigaConfig;\n    }\n\n    ConfigurationService.prototype.get = function(key, defaultValue) {\n      if (defaultValue == null) {\n        defaultValue = null;\n      }\n      if (_.has(this.config, key)) {\n        return this.config[key];\n      }\n      return defaultValue;\n    };\n\n    return ConfigurationService;\n\n  })();\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgConfig\", ConfigurationService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ContribController, ContribUserSettingsController, module,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  module = angular.module(\"taigaBase\");\n\n  ContribController = (function(superClass) {\n    extend(ContribController, superClass);\n\n    ContribController.$inject = [\"$rootScope\", \"$scope\", \"$routeParams\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"tgProjectService\", \"tgErrorHandlingService\"];\n\n    function ContribController(rootScope, scope, params, repo, rs, confirm, projectService, errorHandlingService) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.params = params;\n      this.repo = repo;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.errorHandlingService = errorHandlingService;\n      this.scope.currentPlugin = _.head(_.filter(this.rootScope.adminPlugins, {\n        \"slug\": this.params.plugin\n      }));\n      this.scope.projectSlug = this.params.pslug;\n      this.loadInitialData();\n    }\n\n    ContribController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.$broadcast('project:loaded', project);\n      return project;\n    };\n\n    ContribController.prototype.loadInitialData = function() {\n      return this.loadProject();\n    };\n\n    return ContribController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ContribController\", ContribController);\n\n  ContribUserSettingsController = (function(superClass) {\n    extend(ContribUserSettingsController, superClass);\n\n    ContribUserSettingsController.$inject = [\"$rootScope\", \"$scope\", \"$routeParams\"];\n\n    function ContribUserSettingsController(rootScope, scope, params) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.params = params;\n      this.scope.currentPlugin = _.head(_.filter(this.rootScope.userSettingsPlugins, {\n        \"slug\": this.params.plugin\n      }));\n    }\n\n    return ContribUserSettingsController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ContribUserSettingsController\", ContribUserSettingsController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var FiltersStorageService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  FiltersStorageService = (function(superClass) {\n    extend(FiltersStorageService, superClass);\n\n    FiltersStorageService.$inject = [\"$tgStorage\", \"$routeParams\"];\n\n    function FiltersStorageService(storage, params) {\n      this.storage = storage;\n      this.params = params;\n    }\n\n    FiltersStorageService.prototype.generateHash = function(components) {\n      if (components == null) {\n        components = [];\n      }\n      components = _.map(components, function(x) {\n        return JSON.stringify(x);\n      });\n      return hex_sha1(components.join(\":\"));\n    };\n\n    return FiltersStorageService;\n\n  })(taiga.Service);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var HttpService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  HttpService = (function(superClass) {\n    extend(HttpService, superClass);\n\n    HttpService.$inject = [\"$http\", \"$q\", \"tgLoader\", \"$tgStorage\", \"$rootScope\", \"$cacheFactory\", \"$translate\"];\n\n    function HttpService(http, q, tgLoader, storage, rootScope, cacheFactory, translate) {\n      this.http = http;\n      this.q = q;\n      this.tgLoader = tgLoader;\n      this.storage = storage;\n      this.rootScope = rootScope;\n      this.cacheFactory = cacheFactory;\n      this.translate = translate;\n      HttpService.__super__.constructor.call(this);\n      this.cache = this.cacheFactory(\"httpget\");\n    }\n\n    HttpService.prototype.headers = function() {\n      var headers, lang, token;\n      headers = {};\n      token = this.storage.get('token');\n      if (token) {\n        headers[\"Authorization\"] = \"Bearer \" + token;\n      }\n      lang = this.translate.preferredLanguage();\n      if (lang) {\n        headers[\"Accept-Language\"] = lang;\n      }\n      return headers;\n    };\n\n    HttpService.prototype.request = function(options) {\n      options.headers = _.assign({}, options.headers || {}, this.headers());\n      return this.http(options);\n    };\n\n    HttpService.prototype.get = function(url, params, options) {\n      options = _.assign({\n        method: \"GET\",\n        url: url\n      }, options);\n      if (params) {\n        options.params = params;\n      }\n      options.cache = this.cache;\n      return this.request(options)[\"finally\"]((function(_this) {\n        return function(data) {\n          return _this.cache.removeAll();\n        };\n      })(this));\n    };\n\n    HttpService.prototype.post = function(url, data, params, options) {\n      options = _.assign({\n        method: \"POST\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      options.responseType = 'text';\n      return this.request(options);\n    };\n\n    HttpService.prototype.put = function(url, data, params, options) {\n      options = _.assign({\n        method: \"PUT\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      return this.request(options);\n    };\n\n    HttpService.prototype.patch = function(url, data, params, options) {\n      options = _.assign({\n        method: \"PATCH\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      return this.request(options);\n    };\n\n    HttpService.prototype[\"delete\"] = function(url, data, params, options) {\n      options = _.assign({\n        method: \"DELETE\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      return this.request(options);\n    };\n\n    return HttpService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgHttp\", HttpService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var LoadElementDirective, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaBase\");\n\n  LoadElementDirective = function($parse) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      unwatch = $scope.$watch($parse($attrs.tgLoadElement), function(val) {\n        var el, legacyObj;\n        if (val) {\n          legacyObj = $parse($attrs.tgLoadElement)($scope);\n          el = $el[0];\n          el.component = legacyObj.component;\n          if (legacyObj.params) {\n            el.params = legacyObj.params;\n          }\n          if (legacyObj.events) {\n            return el.events = legacyObj.events;\n          }\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return unwatch();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLoadElement\", ['$parse', LoadElementDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var locationFactory, module;\n\n  locationFactory = function($location, $route, $rootscope) {\n    $location.noreload = function(scope) {\n      var lastRoute, un;\n      lastRoute = $route.current;\n      un = scope.$on(\"$locationChangeSuccess\", function() {\n        $route.current = lastRoute;\n        return un();\n      });\n      return $location;\n    };\n    $location.isInCurrentRouteParams = function(name, value) {\n      var params;\n      params = $location.search() || {};\n      return params[name] === value;\n    };\n    return $location;\n  };\n\n  module = angular.module(\"taigaBase\");\n\n  module.factory(\"$tgLocation\", [\"$location\", \"$route\", \"$rootScope\", locationFactory]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Model, ModelService, module, provider, taiga,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  Model = (function() {\n    function Model(name, data, dataTypes) {\n      this._attrs = data;\n      this._name = name;\n      this._dataTypes = dataTypes;\n      this.setAttrs(data);\n      this.initialize();\n    }\n\n    Model.prototype.realClone = function() {\n      var attrs, instance;\n      attrs = _.cloneDeep(this._attrs);\n      instance = new Model(this._name, attrs, this._dataTypes);\n      instance._modifiedAttrs = _.cloneDeep(this._modifiedAttrs);\n      instance._isModified = _.cloneDeep(this._isModified);\n      return instance;\n    };\n\n    Model.prototype.clone = function() {\n      var instance;\n      instance = new Model(this._name, this._attrs, this._dataTypes);\n      instance._modifiedAttrs = this._modifiedAttrs;\n      instance._isModified = this._isModified;\n      return instance;\n    };\n\n    Model.prototype.applyCasts = function() {\n      var attrName, castMethod, castName, ref, results;\n      ref = this._dataTypes;\n      results = [];\n      for (attrName in ref) {\n        castName = ref[attrName];\n        castMethod = service.casts[castName];\n        if (!castMethod) {\n          continue;\n        }\n        results.push(this._attrs[attrName] = castMethod(this._attrs[attrName]));\n      }\n      return results;\n    };\n\n    Model.prototype.getIdAttrName = function() {\n      return \"id\";\n    };\n\n    Model.prototype.getName = function() {\n      return this._name;\n    };\n\n    Model.prototype.getAttrs = function(patch) {\n      if (patch == null) {\n        patch = false;\n      }\n      if (this._attrs.version != null) {\n        this._modifiedAttrs.version = this._attrs.version;\n      }\n      if (patch) {\n        return _.extend({}, this._modifiedAttrs);\n      }\n      return _.extend({}, this._attrs, this._modifiedAttrs);\n    };\n\n    Model.prototype.setAttrs = function(attrs) {\n      this._attrs = attrs;\n      this._modifiedAttrs = {};\n      this.applyCasts();\n      return this._isModified = false;\n    };\n\n    Model.prototype.setAttr = function(name, value) {\n      this._modifiedAttrs[name] = value;\n      return this._isModified = true;\n    };\n\n    Model.prototype.initialize = function() {\n      var getter, self, setter;\n      self = this;\n      getter = function(name) {\n        return function() {\n          if (typeof name === 'string' && name.substr(0, 2) === \"__\") {\n            return self[name];\n          }\n          if (indexOf.call(_.keys(self._modifiedAttrs), name) < 0) {\n            return self._attrs[name];\n          }\n          return self._modifiedAttrs[name];\n        };\n      };\n      setter = function(name) {\n        return function(value) {\n          if (typeof name === 'string' && name.substr(0, 2) === \"__\") {\n            self[name] = value;\n            return;\n          }\n          if (self._attrs[name] !== value) {\n            self._modifiedAttrs[name] = value;\n            self._isModified = true;\n          } else {\n            delete self._modifiedAttrs[name];\n          }\n        };\n      };\n      return _.each(this._attrs, function(value, name) {\n        var options;\n        options = {\n          get: getter(name),\n          set: setter(name),\n          enumerable: true,\n          configurable: true\n        };\n        return Object.defineProperty(self, name, options);\n      });\n    };\n\n    Model.prototype.serialize = function() {\n      var data;\n      data = {\n        \"data\": _.clone(this._attrs),\n        \"name\": this._name\n      };\n      return JSON.stringify(data);\n    };\n\n    Model.prototype.isModified = function() {\n      return this._isModified;\n    };\n\n    Model.prototype.isAttributeModified = function(attribute) {\n      return this._modifiedAttrs[attribute] != null;\n    };\n\n    Model.prototype.markSaved = function() {\n      this._isModified = false;\n      this._attrs = this.getAttrs();\n      return this._modifiedAttrs = {};\n    };\n\n    Model.prototype.revert = function() {\n      this._modifiedAttrs = {};\n      return this._isModified = false;\n    };\n\n    Model.desSerialize = function(sdata) {\n      var ddata, model;\n      ddata = JSON.parse(sdata);\n      model = new Model(ddata.url, ddata.data);\n      return model;\n    };\n\n    return Model;\n\n  })();\n\n  taiga = this.taiga;\n\n  ModelService = (function(superClass) {\n    extend(ModelService, superClass);\n\n    ModelService.$inject = [\"$q\", \"$tgUrls\", \"$tgStorage\", \"$tgHttp\"];\n\n    function ModelService(q, urls, storage, http) {\n      this.q = q;\n      this.urls = urls;\n      this.storage = storage;\n      this.http = http;\n      ModelService.__super__.constructor.call(this);\n    }\n\n    return ModelService;\n\n  })(taiga.Service);\n\n  provider = function($q, $http, $gmUrls, $gmStorage) {\n    var service;\n    service = {};\n    service.make_model = function(name, data, cls, dataTypes) {\n      if (cls == null) {\n        cls = Model;\n      }\n      if (dataTypes == null) {\n        dataTypes = {};\n      }\n      return new cls(name, data, dataTypes);\n    };\n    service.cls = Model;\n    service.casts = {\n      int: function(value) {\n        return parseInt(value, 10);\n      },\n      float: function(value) {\n        return parseFloat(value, 10);\n      }\n    };\n    return service;\n  };\n\n  module = angular.module(\"taigaBase\");\n\n  module.factory(\"$tgModel\", [\"$q\", \"$http\", \"$tgUrls\", \"$tgStorage\", provider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var NavigationUrlsDirective, NavigationUrlsService, bindOnce, module, taiga, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  trim = this.taiga.trim;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaBase\");\n\n  NavigationUrlsService = (function(superClass) {\n    extend(NavigationUrlsService, superClass);\n\n    function NavigationUrlsService() {\n      this.urls = {};\n    }\n\n    NavigationUrlsService.prototype.update = function(urls) {\n      return this.urls = _.merge({}, this.urls, urls || {});\n    };\n\n    NavigationUrlsService.prototype.formatUrl = function(url, ctx) {\n      var replacer;\n      if (ctx == null) {\n        ctx = {};\n      }\n      replacer = function(match) {\n        match = trim(match, \":\");\n        return ctx[match] || \":\" + match;\n      };\n      return url.replace(/(:\\w+)/g, replacer);\n    };\n\n    NavigationUrlsService.prototype._resolve = function(name, ctx) {\n      var url;\n      url = this.urls[name];\n      if (!url) {\n        return \"\";\n      }\n      if (ctx) {\n        return this.formatUrl(url, ctx);\n      }\n      return url;\n    };\n\n    NavigationUrlsService.prototype.resolve = function(name, ctx) {\n      var url;\n      url = this._resolve(name, ctx);\n      if (url.startsWith('/')) {\n        return url.slice(1);\n      }\n      return url;\n    };\n\n    return NavigationUrlsService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgNavUrls\", NavigationUrlsService);\n\n  NavigationUrlsDirective = function($navurls, $auth, $q, $location, lightboxService, tgSections) {\n    var bindOnceP, link, parseNav;\n    bindOnceP = function($scope, attr) {\n      var defered;\n      defered = $q.defer();\n      bindOnce($scope, attr, function(v) {\n        return defered.resolve(v);\n      });\n      return defered.promise;\n    };\n    parseNav = function(data, $scope) {\n      var index, name, obj, params, promises, ref, result, values;\n      ref = _.map(data.split(\":\"), trim), name = ref[0], params = ref[1];\n      if (params) {\n        result = params.split(/(\\w+)=/);\n        result = _.filter(result, function(str) {\n          return str.length;\n        });\n        result = _.map(result, function(str) {\n          return trim(str.replace(/,$/g, ''));\n        });\n        params = [];\n        index = 0;\n        while (index < result.length) {\n          obj = {};\n          obj[result[index]] = result[index + 1];\n          params.push(obj);\n          index = index + 2;\n        }\n      } else {\n        params = [];\n      }\n      values = _.map(params, function(param) {\n        return _.values(param)[0];\n      });\n      promises = _.map(values, function(x) {\n        return bindOnceP($scope, x);\n      });\n      return Promise.all(promises).then(function() {\n        var i, key, len, options, param, value;\n        options = {};\n        for (i = 0, len = params.length; i < len; i++) {\n          param = params[i];\n          key = Object.keys(param)[0];\n          value = param[key];\n          options[key] = $scope.$eval(value);\n        }\n        return [name, options];\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      if ($el.is(\"a\")) {\n        $el.attr(\"href\", \"#\");\n      }\n      $el.on(\"pointerenter\", function(event) {\n        var target;\n        target = $(event.currentTarget);\n        if (!target.data(\"fullUrl\") || $attrs.tgNavGetParams !== target.data(\"params\")) {\n          return parseNav($attrs.tgNav, $scope).then(function(result) {\n            var fullUrl, getURLParams, getURLParamsStr, name, options, path, url, user;\n            name = result[0], options = result[1];\n            user = $auth.getUser();\n            if (user) {\n              options.user = user.username;\n            }\n            if (name === 'project') {\n              path = tgSections.getPath(options['project'], options['section']);\n              name = name + \"-\" + path;\n            }\n            url = $navurls.resolve(name);\n            fullUrl = $navurls.formatUrl(url, options);\n            if ($attrs.tgNavGetParams) {\n              getURLParams = JSON.parse($attrs.tgNavGetParams);\n              getURLParamsStr = $.param(getURLParams);\n              fullUrl = fullUrl + \"?\" + getURLParamsStr;\n              target.data(\"params\", $attrs.tgNavGetParams);\n            }\n            target.data(\"fullUrl\", fullUrl);\n            if (target.is(\"a\")) {\n              target.attr(\"href\", fullUrl);\n            }\n            return $el.on(\"click\", function(event) {\n              if (event.metaKey || event.ctrlKey) {\n                return;\n              }\n              event.preventDefault();\n              target = $(event.currentTarget);\n              if (target.hasClass('noclick')) {\n                return;\n              }\n              fullUrl = target.data(\"fullUrl\");\n              switch (event.which) {\n                case 1:\n                  $location.url(fullUrl);\n                  $scope.$apply();\n                  break;\n                case 2:\n                  window.open(fullUrl);\n              }\n              return lightboxService.closeAll();\n            });\n          });\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgNav\", [\"$tgNavUrls\", \"$tgAuth\", \"$q\", \"$tgLocation\", \"lightboxService\", \"$tgSections\", NavigationUrlsDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var RepositoryService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  RepositoryService = (function(superClass) {\n    extend(RepositoryService, superClass);\n\n    RepositoryService.$inject = [\"$q\", \"$tgModel\", \"$tgStorage\", \"$tgHttp\", \"$tgUrls\"];\n\n    function RepositoryService(q, model1, storage, http, urls) {\n      this.q = q;\n      this.model = model1;\n      this.storage = storage;\n      this.http = http;\n      this.urls = urls;\n      RepositoryService.__super__.constructor.call(this);\n    }\n\n    RepositoryService.prototype.resolveUrlForModel = function(model) {\n      var idAttrName;\n      idAttrName = model.getIdAttrName();\n      return (this.urls.resolve(model.getName())) + \"/\" + model[idAttrName];\n    };\n\n    RepositoryService.prototype.resolveUrlForAttributeModel = function(model) {\n      return this.urls.resolve(model.getName(), model.parent);\n    };\n\n    RepositoryService.prototype.create = function(name, data, dataTypes, extraParams) {\n      var defered, promise, url;\n      if (dataTypes == null) {\n        dataTypes = {};\n      }\n      if (extraParams == null) {\n        extraParams = {};\n      }\n      defered = this.q.defer();\n      url = this.urls.resolve(name);\n      promise = this.http.post(url, JSON.stringify(data), extraParams);\n      promise.success((function(_this) {\n        return function(_data, _status) {\n          return defered.resolve(_this.model.make_model(name, _data, null, dataTypes));\n        };\n      })(this));\n      promise.error((function(_this) {\n        return function(data, status) {\n          return defered.reject(data);\n        };\n      })(this));\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.remove = function(model, params) {\n      var defered, promise, url;\n      if (params == null) {\n        params = {};\n      }\n      defered = this.q.defer();\n      url = this.resolveUrlForModel(model);\n      promise = this.http[\"delete\"](url, {}, params);\n      promise.success(function(data, status) {\n        return defered.resolve(model);\n      });\n      promise.error(function(data, status) {\n        return defered.reject(model);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.saveAll = function(models, patch) {\n      var promises;\n      if (patch == null) {\n        patch = true;\n      }\n      promises = _.map(models, (function(_this) {\n        return function(x) {\n          return _this.save(x, true);\n        };\n      })(this));\n      return this.q.all(promises);\n    };\n\n    RepositoryService.prototype.save = function(model, patch, params, options, returnHeaders) {\n      var data, defered, promise, url;\n      if (patch == null) {\n        patch = true;\n      }\n      if (params == null) {\n        params = {};\n      }\n      if (returnHeaders == null) {\n        returnHeaders = false;\n      }\n      defered = this.q.defer();\n      if (!model.isModified() && patch) {\n        defered.resolve(model);\n        return defered.promise;\n      }\n      url = this.resolveUrlForModel(model);\n      data = JSON.stringify(model.getAttrs(patch));\n      if (patch) {\n        promise = this.http.patch(url, data, params, options);\n      } else {\n        promise = this.http.put(url, data, params, options);\n      }\n      promise.success((function(_this) {\n        return function(data, status, headers, response) {\n          model._isModified = false;\n          model._attrs = _.extend(model.getAttrs(), data);\n          model._modifiedAttrs = {};\n          model.applyCasts();\n          if (returnHeaders) {\n            return defered.resolve([model, headers()]);\n          } else {\n            return defered.resolve(model);\n          }\n        };\n      })(this));\n      promise.error(function(data, status) {\n        return defered.reject(data);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.saveAttribute = function(model, attribute, patch) {\n      var data, defered, promise, url;\n      if (patch == null) {\n        patch = true;\n      }\n      defered = this.q.defer();\n      if (!(model != null ? model.isModified() : void 0) && patch) {\n        defered.resolve(model);\n        return defered.promise;\n      }\n      url = this.resolveUrlForAttributeModel(model);\n      data = {};\n      data[attribute] = model.getAttrs();\n      if (patch) {\n        promise = this.http.patch(url, data);\n      } else {\n        promise = this.http.put(url, data);\n      }\n      promise.success((function(_this) {\n        return function(data, status) {\n          model._isModified = false;\n          model._attrs = _.extend(model.getAttrs(), data);\n          model._modifiedAttrs = {};\n          model.applyCasts();\n          return defered.resolve(model);\n        };\n      })(this));\n      promise.error(function(data, status) {\n        return defered.reject(data);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.refresh = function(model) {\n      var defered, promise, url;\n      defered = this.q.defer();\n      url = this.resolveUrlForModel(model);\n      promise = this.http.get(url);\n      promise.success(function(data, status) {\n        model._modifiedAttrs = {};\n        model._attrs = data;\n        model._isModified = false;\n        model.applyCasts();\n        return defered.resolve(model);\n      });\n      promise.error(function(data, status) {\n        return defered.reject(data);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.queryMany = function(name, params, options, headers) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      if (headers == null) {\n        headers = false;\n      }\n      url = this.urls.resolve(name);\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var result;\n          result = _.map(data.data, function(x) {\n            return _this.model.make_model(name, x);\n          });\n          if (headers) {\n            return [result, data.headers];\n          }\n          return result;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOneAttribute = function(name, id, attribute, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name, id);\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var model;\n          model = _this.model.make_model(name, data.data[attribute]);\n          model.parent = id;\n          return model;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOne = function(name, id, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      if (id) {\n        url = url + \"/\" + id;\n      }\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          return _this.model.make_model(name, data.data);\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOneRaw = function(name, id, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      if (id) {\n        url = url + \"/\" + id;\n      }\n      httpOptions = _.merge({\n        headers: {}\n      }, options);\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryPaginated = function(name, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      httpOptions = _.merge({\n        headers: {}\n      }, options);\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var headers, result;\n          headers = data.headers();\n          result = {};\n          result.models = _.map(data.data, function(x) {\n            return _this.model.make_model(name, x);\n          });\n          result.count = parseInt(headers[\"x-pagination-count\"], 10);\n          result.current = parseInt(headers[\"x-pagination-current\"] || 1, 10);\n          result.paginatedBy = parseInt(headers[\"x-paginated-by\"], 10);\n          return result;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOnePaginatedRaw = function(name, id, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      if (id) {\n        url = url + \"/\" + id;\n      }\n      httpOptions = _.merge({\n        headers: {}\n      }, options);\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var headers, result;\n          headers = data.headers();\n          result = {};\n          result.data = data.data;\n          result.count = parseInt(headers[\"x-pagination-count\"], 10);\n          result.current = parseInt(headers[\"x-pagination-current\"] || 1, 10);\n          result.paginatedBy = parseInt(headers[\"x-paginated-by\"], 10);\n          return result;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.resolve = function(options) {\n      var cache, params;\n      params = {};\n      if (options.pslug != null) {\n        params.project = options.pslug;\n      }\n      if (options.usref != null) {\n        params.us = options.usref;\n      }\n      if (options.taskref != null) {\n        params.task = options.taskref;\n      }\n      if (options.issueref != null) {\n        params.issue = options.issueref;\n      }\n      if (options.sslug != null) {\n        params.milestone = options.sslug;\n      }\n      if (options.wikipage != null) {\n        params.wikipage = options.wikipage;\n      }\n      if (options.ref != null) {\n        params.ref = options.ref;\n      }\n      cache = !(options.wikipage || options.sslug);\n      return this.queryOneRaw(\"resolver\", null, params, {\n        cache: cache\n      });\n    };\n\n    return RepositoryService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgRepo\", RepositoryService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var StorageService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  StorageService = (function(superClass) {\n    extend(StorageService, superClass);\n\n    StorageService.$inject = [\"$rootScope\"];\n\n    function StorageService($rootScope) {\n      StorageService.__super__.constructor.call(this);\n    }\n\n    StorageService.prototype.get = function(key, _default) {\n      var e, serializedValue;\n      serializedValue = localStorage.getItem(key);\n      if (serializedValue === null) {\n        return _default || null;\n      }\n      try {\n        return JSON.parse(serializedValue);\n      } catch (error) {\n        e = error;\n        return null;\n      }\n    };\n\n    StorageService.prototype.set = function(key, val) {\n      if (_.isObject(key)) {\n        return _.each(key, (function(_this) {\n          return function(val, key) {\n            return _this.set(key, val);\n          };\n        })(this));\n      } else {\n        return localStorage.setItem(key, JSON.stringify(val));\n      }\n    };\n\n    StorageService.prototype.contains = function(key) {\n      var value;\n      value = this.get(key);\n      return value !== null;\n    };\n\n    StorageService.prototype.remove = function(key) {\n      return localStorage.removeItem(key);\n    };\n\n    StorageService.prototype.clear = function() {\n      return localStorage.clear();\n    };\n\n    return StorageService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgStorage\", StorageService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UrlsService, format, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  format = function(fmt, obj) {\n    obj = _.clone(obj);\n    return fmt.replace(/%s/g, function(match) {\n      return String(obj.shift());\n    });\n  };\n\n  taiga = this.taiga;\n\n  UrlsService = (function(superClass) {\n    extend(UrlsService, superClass);\n\n    UrlsService.$inject = [\"$tgConfig\"];\n\n    function UrlsService(config) {\n      this.config = config;\n      this.urls = {};\n      this.mainUrl = this.config.get(\"api\");\n    }\n\n    UrlsService.prototype.update = function(urls) {\n      return this.urls = _.merge(this.urls, urls);\n    };\n\n    UrlsService.prototype.resolve = function() {\n      var args, name, url;\n      args = _.toArray(arguments);\n      if (args.length === 0) {\n        throw Error(\"wrong arguments to setUrls\");\n      }\n      name = args.slice(0, 1)[0];\n      url = format(this.urls[name], args.slice(1));\n      return format(\"%s/%s\", [_.trimEnd(this.mainUrl, \"/\"), _.trimStart(url, \"/\")]);\n    };\n\n    UrlsService.prototype.resolveAbsolute = function() {\n      var url;\n      url = this.resolve.apply(this, arguments);\n      if (/^https?:\\/\\//i.test(url)) {\n        return url;\n      }\n      if (/^\\//.test(url)) {\n        return window.location.protocol + \"//\" + window.location.host + url;\n      }\n      return window.location.protocol + \"//\" + window.location.host + \"/\" + url;\n    };\n\n    return UrlsService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service('$tgUrls', UrlsService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo) {\n    var _get, service;\n    _get = function(objectId, resource) {\n      return $repo.queryOne(resource, objectId);\n    };\n    service = {\n      epic: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/epic\");\n        }\n      },\n      userstory: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/userstory\");\n        }\n      },\n      task: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/task\");\n        }\n      },\n      issue: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/issue\");\n        }\n      }\n    };\n    return function(instance) {\n      return instance.customAttributesValues = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgCustomAttributesValuesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($repo) {\n    var _list, service;\n    _list = function(projectId, resource) {\n      return $repo.queryMany(resource, {\n        project: projectId\n      });\n    };\n    service = {\n      epic: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/epic\");\n        }\n      },\n      userstory: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/userstory\");\n        }\n      },\n      task: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/task\");\n        }\n      },\n      issue: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/issue\");\n        }\n      }\n    };\n    return function(instance) {\n      return instance.customAttributes = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgCustomAttributesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls, $storage) {\n    var hashSuffix, service;\n    service = {};\n    hashSuffix = \"epics-queryparams\";\n    service.getByRef = function(projectId, ref) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      return $repo.queryOne(\"epics\", \"by_ref\", params);\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(type, params);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.upvote = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-upvote\", epicId);\n      return $http.post(url);\n    };\n    service.downvote = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-downvote\", epicId);\n      return $http.post(url);\n    };\n    service.watch = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-watch\", epicId);\n      return $http.post(url);\n    };\n    service.unwatch = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-unwatch\", epicId);\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.epics = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgEpicsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(contentType, objectId, entryType) {\n      return $repo.queryOneRaw(\"history/\" + contentType, objectId, {\n        type: entryType\n      });\n    };\n    service.editComment = function(type, objectId, activityId, comment) {\n      var commentData, params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/edit_comment\";\n      params = {\n        id: activityId\n      };\n      commentData = {\n        comment: comment\n      };\n      return $http.post(url, commentData, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    service.getCommentHistory = function(type, objectId, activityId) {\n      var params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/comment_versions\";\n      params = {\n        id: activityId\n      };\n      return $http.get(url, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    service.deleteComment = function(type, objectId, activityId) {\n      var params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/delete_comment\";\n      params = {\n        id: activityId\n      };\n      return $http.post(url, null, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    service.undeleteComment = function(type, objectId, activityId) {\n      var params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/undelete_comment\";\n      params = {\n        id: activityId\n      };\n      return $http.post(url, null, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    return function(instance) {\n      return instance.history = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgHistoryResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo) {\n    var service;\n    service = {};\n    service.get = function(token) {\n      return $repo.queryOne(\"invitations\", token);\n    };\n    return function(instance) {\n      return instance.invitations = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgInvitationsResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls, $storage, $q) {\n    var hashIssuesShowTags, hashSprintShowTags, hashSuffix, service;\n    service = {};\n    hashSuffix = \"issues-queryparams\";\n    hashSprintShowTags = \"taskboard-issues\";\n    hashIssuesShowTags = \"issues-list\";\n    service.get = function(projectId, issueId) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      return $repo.queryOne(\"issues\", issueId, params);\n    };\n    service.getByRef = function(projectId, ref) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      return $repo.queryOne(\"issues\", \"by_ref\", params);\n    };\n    service.listInAllProjects = function(filters) {\n      return $repo.queryMany(\"issues\", filters);\n    };\n    service.list = function(projectId, filters, options) {\n      var params;\n      params = {\n        project: projectId\n      };\n      params = _.extend({}, params, filters || {});\n      service.storeQueryParams(projectId, params);\n      return $repo.queryPaginated(\"issues\", params, options);\n    };\n    service.listInProject = function(projectId, sprintId, params) {\n      if (sprintId == null) {\n        sprintId = null;\n      }\n      params = _.merge(params, {\n        project: projectId\n      });\n      if (sprintId) {\n        params.milestone = sprintId;\n      }\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(\"issues\", params);\n    };\n    service.bulkCreate = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-create-issues\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_issues: data\n      };\n      return $http.post(url, params);\n    };\n    service.upvote = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-upvote\", issueId);\n      return $http.post(url);\n    };\n    service.downvote = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-downvote\", issueId);\n      return $http.post(url);\n    };\n    service.watch = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-watch\", issueId);\n      return $http.post(url);\n    };\n    service.unwatch = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-unwatch\", issueId);\n      return $http.post(url);\n    };\n    service.stats = function(projectId) {\n      return $repo.queryOneRaw(\"projects\", projectId + \"/issues_stats\");\n    };\n    service.filtersData = function(params) {\n      return $repo.queryOneRaw(\"issues-filters\", null, params);\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(type, params);\n    };\n    service.createDefaultValues = function(projectId, type) {\n      var data, url;\n      data = {\n        \"project_id\": projectId\n      };\n      url = $urls.resolve(type + \"-create-default\");\n      return $http.post(url, data);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.bulkUpdateMilestone = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-issue-milestone\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_issues: data\n      };\n      return $http.post(url, params);\n    };\n    service.promoteToUserStory = function(issueId, projectId) {\n      var data, url;\n      url = $urls.resolve(\"promote-issue-to-us\", issueId);\n      data = {\n        project_id: projectId\n      };\n      return $http.post(url, data);\n    };\n    service.storeIssuesShowTags = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashIssuesShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getIssuesShowTags = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashIssuesShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash);\n    };\n    service.storeSprintShowTags = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSprintShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getSprintShowTags = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSprintShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash);\n    };\n    return function(instance) {\n      return instance.issues = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgIssuesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($storage) {\n    var hashSuffixStatusColumnModes, hashSuffixStatusViewModes, hashSuffixSwimlanesModes, service;\n    service = {};\n    hashSuffixStatusViewModes = \"kanban-statusviewmodels\";\n    hashSuffixStatusColumnModes = \"kanban-statuscolumnmodels\";\n    hashSuffixSwimlanesModes = \"kanban-swimlanesmodels\";\n    service.storeStatusColumnModes = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getStatusColumnModes = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeSwimlanesModes = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixSwimlanesModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getSwimlanesModes = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixSwimlanesModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    return function(instance) {\n      return instance.kanban = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgKanbanResourcesProvider\", [\"$tgStorage\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($repo) {\n    var service;\n    service = {\n      list: function() {\n        return $repo.queryMany(\"locales\");\n      }\n    };\n    return function(instance) {\n      return instance.locales = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgLocalesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $urls, $http) {\n    var service;\n    service = {};\n    service.render = function(projectId, content) {\n      var params, url;\n      if ((content == null) || content === \"\") {\n        content = ' ';\n      }\n      params = {\n        project_id: projectId,\n        content: content\n      };\n      url = $urls.resolve(\"wiki\");\n      return $http.post(url + \"/render\", params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    return function(instance) {\n      return instance.mdrender = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgMdRenderResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"memberships\", id);\n    };\n    service.list = function(projectId, filters, enablePagination) {\n      var options, params;\n      if (enablePagination == null) {\n        enablePagination = true;\n      }\n      params = {\n        project: projectId\n      };\n      params = _.extend({}, params, filters || {});\n      if (enablePagination) {\n        return $repo.queryPaginated(\"memberships\", params);\n      }\n      return $repo.queryMany(\"memberships\", params, options = {\n        enablePagination: enablePagination\n      });\n    };\n    service.listByUser = function(userId, filters) {\n      var params;\n      params = {\n        user: userId\n      };\n      params = _.extend({}, params, filters || {});\n      return $repo.queryPaginated(\"memberships\", params);\n    };\n    service.resendInvitation = function(id) {\n      var url;\n      url = $urls.resolve(\"memberships\");\n      return $http.post(url + \"/\" + id + \"/resend_invitation\", {});\n    };\n    service.bulkCreateMemberships = function(projectId, data, invitation_extra_text) {\n      var params, url;\n      url = $urls.resolve(\"bulk-create-memberships\");\n      params = {\n        project_id: projectId,\n        bulk_memberships: data,\n        invitation_extra_text: invitation_extra_text\n      };\n      return $http.post(url, params);\n    };\n    return function(instance) {\n      return instance.memberships = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgMembershipsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider;\n\n  resourceProvider = function($repo) {\n    var service;\n    service = {};\n    service.list = function(projectId, module) {\n      return $repo.queryOneAttribute(\"project-modules\", projectId, module);\n    };\n    return function(instance) {\n      return instance.modules = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgModulesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"notify-policies\", id);\n    };\n    service.list = function(filters) {\n      var params;\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"notify-policies\", params);\n    };\n    return function(instance) {\n      return instance.notifyPolicies = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgNotifyPoliciesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($config, $repo, $http, $urls, $auth, $q, $translate) {\n    var service;\n    service = {};\n    service.get = function(projectId) {\n      return $repo.queryOne(\"projects\", projectId);\n    };\n    service.getBySlug = function(projectSlug) {\n      return $repo.queryOne(\"projects\", \"by_slug?slug=\" + projectSlug);\n    };\n    service.list = function(filters) {\n      var params;\n      params = {\n        \"order_by\": \"user_order\"\n      };\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"projects\", params);\n    };\n    service.listByMember = function(memberId) {\n      var params;\n      params = {\n        \"member\": memberId,\n        \"order_by\": \"user_order\"\n      };\n      return $repo.queryMany(\"projects\", params);\n    };\n    service.templates = function() {\n      return $repo.queryMany(\"project-templates\");\n    };\n    service.usersList = function(projectId) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      return $repo.queryMany(\"users\", params);\n    };\n    service.rolesList = function(projectId) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      return $repo.queryMany(\"roles\", params);\n    };\n    service.stats = function(projectId) {\n      return $repo.queryOneRaw(\"projects\", projectId + \"/stats\");\n    };\n    service.bulkUpdateOrder = function(bulkData) {\n      var url;\n      url = $urls.resolve(\"bulk-update-projects-order\");\n      return $http.post(url, bulkData);\n    };\n    service.regenerate_epics_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_epics_csv_uuid\";\n      return $http.post(url);\n    };\n    service.regenerate_userstories_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_userstories_csv_uuid\";\n      return $http.post(url);\n    };\n    service.regenerate_tasks_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_tasks_csv_uuid\";\n      return $http.post(url);\n    };\n    service.regenerate_issues_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_issues_csv_uuid\";\n      return $http.post(url);\n    };\n    service.delete_epics_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_epics_csv_uuid\";\n      return $http.post(url);\n    };\n    service.delete_userstories_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_userstories_csv_uuid\";\n      return $http.post(url);\n    };\n    service.delete_tasks_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_tasks_csv_uuid\";\n      return $http.post(url);\n    };\n    service.patch_default_swimlane = function(projectId, swimlaneId) {\n      var data, url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId;\n      data = {\n        default_swimlane: swimlaneId\n      };\n      return $http.patch(url, data);\n    };\n    service.delete_issues_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_issues_csv_uuid\";\n      return $http.post(url);\n    };\n    service.leave = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/leave\";\n      return $http.post(url);\n    };\n    service.memberStats = function(projectId) {\n      return $repo.queryOneRaw(\"projects\", projectId + \"/member_stats\");\n    };\n    service.tagsColors = function(projectId) {\n      return $repo.queryOne(\"projects\", projectId + \"/tags_colors\");\n    };\n    service.deleteTag = function(projectId, tag) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_tag\";\n      return $http.post(url, {\n        tag: tag\n      });\n    };\n    service.createTag = function(projectId, tag, color) {\n      var data, url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/create_tag\";\n      data = {};\n      data.tag = tag;\n      data.color = null;\n      if (color) {\n        data.color = color;\n      }\n      return $http.post(url, data);\n    };\n    service.editTag = function(projectId, from_tag, to_tag, color) {\n      var data, url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/edit_tag\";\n      data = {};\n      data.from_tag = from_tag;\n      if (to_tag) {\n        data.to_tag = to_tag;\n      }\n      data.color = null;\n      if (color) {\n        data.color = color;\n      }\n      return $http.post(url, data);\n    };\n    service.mixTags = function(projectId, to_tag, from_tags) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/mix_tags\";\n      return $http.post(url, {\n        to_tag: to_tag,\n        from_tags: from_tags\n      });\n    };\n    service[\"export\"] = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"exporter\")) + \"/\" + projectId;\n      return $http.get(url);\n    };\n    service[\"import\"] = function(file, statusUpdater) {\n      var complete, data, defered, errorMsg, failed, maxFileSize, response, uploadComplete, uploadFailed, uploadProgress, xhr;\n      defered = $q.defer();\n      maxFileSize = $config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        errorMsg = $translate.instant(\"PROJECT.IMPORT.ERROR_MAX_SIZE_EXCEEDED\", {\n          fileName: file.name,\n          fileSize: sizeFormat(file.size),\n          maxFileSize: sizeFormat(maxFileSize)\n        });\n        response = {\n          status: 413,\n          data: {\n            _error_message: errorMsg\n          }\n        };\n        defered.reject(response);\n        return defered.promise;\n      }\n      uploadProgress = (function(_this) {\n        return function(evt) {\n          var message, percent;\n          percent = Math.round((evt.loaded / evt.total) * 100);\n          message = $translate.instant(\"PROJECT.IMPORT.UPLOAD_IN_PROGRESS_MESSAGE\", {\n            uploadedSize: sizeFormat(evt.loaded),\n            totalSize: sizeFormat(evt.total)\n          });\n          return statusUpdater(\"in-progress\", null, message, percent);\n        };\n      })(this);\n      uploadComplete = (function(_this) {\n        return function(evt) {\n          return statusUpdater(\"done\", $translate.instant(\"PROJECT.IMPORT.TITLE\"), $translate.instant(\"PROJECT.IMPORT.DESCRIPTION\"));\n        };\n      })(this);\n      uploadFailed = (function(_this) {\n        return function(evt) {\n          return statusUpdater(\"error\");\n        };\n      })(this);\n      complete = (function(_this) {\n        return function(evt) {\n          var ref;\n          response = {};\n          try {\n            response.data = JSON.parse(evt.target.responseText);\n          } catch (error) {\n            response.data = {};\n          }\n          response.status = evt.target.status;\n          if (evt.target.getResponseHeader('Taiga-Info-Project-Is-Private')) {\n            response.headers = {\n              isPrivate: evt.target.getResponseHeader('Taiga-Info-Project-Is-Private') === 'True',\n              memberships: parseInt(evt.target.getResponseHeader('Taiga-Info-Project-Memberships'))\n            };\n          }\n          if ((ref = response.status) === 201 || ref === 202) {\n            defered.resolve(response);\n          }\n          return defered.reject(response);\n        };\n      })(this);\n      failed = (function(_this) {\n        return function(evt) {\n          return defered.reject(\"fail\");\n        };\n      })(this);\n      data = new FormData();\n      data.append('dump', file);\n      xhr = new XMLHttpRequest();\n      xhr.upload.addEventListener(\"progress\", uploadProgress, false);\n      xhr.upload.addEventListener(\"load\", uploadComplete, false);\n      xhr.upload.addEventListener(\"error\", uploadFailed, false);\n      xhr.upload.addEventListener(\"abort\", uploadFailed, false);\n      xhr.addEventListener(\"load\", complete, false);\n      xhr.addEventListener(\"error\", failed, false);\n      xhr.open(\"POST\", $urls.resolve(\"importer\"));\n      xhr.setRequestHeader(\"Authorization\", \"Bearer \" + ($auth.getToken()));\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send(data);\n      return defered.promise;\n    };\n    service.changeLogo = function(projectId, file) {\n      var data, defered, maxFileSize, options, response, url;\n      maxFileSize = $config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        response = {\n          status: 413,\n          data: {\n            _error_message: \"'\" + file.name + \"' (\" + (sizeFormat(file.size)) + \") is too heavy for our oompa loompas, try it with a smaller than (\" + (sizeFormat(maxFileSize)) + \")\"\n          }\n        };\n        defered = $q.defer();\n        defered.reject(response);\n        return defered.promise;\n      }\n      data = new FormData();\n      data.append('logo', file);\n      options = {\n        transformRequest: angular.identity,\n        headers: {\n          'Content-Type': void 0\n        }\n      };\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/change_logo\";\n      return $http.post(url, data, {}, options);\n    };\n    service.removeLogo = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/remove_logo\";\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.projects = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgProjectsResourcesProvider\", [\"$tgConfig\", \"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgAuth\", \"$q\", \"$translate\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"roles\", id);\n    };\n    service.list = function(projectId) {\n      return $repo.queryMany(\"roles\", {\n        project: projectId\n      });\n    };\n    return function(instance) {\n      return instance.roles = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgRolesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $urls, $http, $q) {\n    var service;\n    service = {};\n    service[\"do\"] = function(projectId, term) {\n      var deferredAbort, params, request, url;\n      deferredAbort = $q.defer();\n      url = $urls.resolve(\"search\");\n      params = {\n        url: url,\n        method: \"GET\",\n        timeout: deferredAbort.promise,\n        cancelable: true,\n        params: {\n          project: projectId,\n          text: term,\n          get_all: false\n        }\n      };\n      request = $http.request(params).then(function(data) {\n        return data.data;\n      });\n      request.abort = function() {\n        return deferredAbort.resolve();\n      };\n      request[\"finally\"] = function() {\n        request.abort = angular.noop;\n        return deferredAbort = request = null;\n      };\n      return request;\n    };\n    return function(instance) {\n      return instance.search = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgSearchResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $model, $storage, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(projectId, sprintId) {\n      return $repo.queryOne(\"milestones\", sprintId).then(function(sprint) {\n        var uses;\n        uses = sprint.user_stories;\n        uses = _.map(uses, function(u) {\n          return $model.make_model(\"userstories\", u);\n        });\n        sprint._attrs.user_stories = uses;\n        return sprint;\n      });\n    };\n    service.stats = function(projectId, sprintId) {\n      return $repo.queryOneRaw(\"milestones\", sprintId + \"/stats\");\n    };\n    service.list = function(projectId, filters) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"milestones\", params, {}, true).then((function(_this) {\n        return function(result) {\n          var headers, i, len, m, milestones, uses;\n          milestones = result[0];\n          headers = result[1];\n          for (i = 0, len = milestones.length; i < len; i++) {\n            m = milestones[i];\n            uses = m.user_stories;\n            uses = _.map(uses, function(u) {\n              return $model.make_model(\"userstories\", u);\n            });\n            m._attrs.user_stories = uses;\n          }\n          return {\n            milestones: milestones,\n            closed: parseInt(headers(\"Taiga-Info-Total-Closed-Milestones\"), 10),\n            open: parseInt(headers(\"Taiga-Info-Total-Opened-Milestones\"), 10)\n          };\n        };\n      })(this));\n    };\n    service.moveUserStoriesMilestone = function(currentMilestoneId, projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"move-userstories-to-milestone\", currentMilestoneId);\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_stories: data\n      };\n      return $http.post(url, params);\n    };\n    service.moveTasksMilestone = function(currentMilestoneId, projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"move-tasks-to-milestone\", currentMilestoneId);\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params);\n    };\n    service.moveIssuesMilestone = function(currentMilestoneId, projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"move-issues-to-milestone\", currentMilestoneId);\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_issues: data\n      };\n      return $http.post(url, params);\n    };\n    return function(instance) {\n      return instance.sprints = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgSprintsResourcesProvider\", [\"$tgRepo\", \"$tgModel\", \"$tgStorage\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.list = function(projectId) {\n      var params;\n      params = {\n        project: projectId\n      };\n      return $repo.queryMany(\"swimlanes\", params);\n    };\n    service.create = function(projectId, name, order) {\n      var params, url;\n      url = $urls.resolve(\"swimlanes\");\n      params = {\n        project: projectId,\n        name: name\n      };\n      if (order) {\n        params.order = order;\n      }\n      return $http.post(url, params);\n    };\n    service.edit = function(swimlaneId, name) {\n      var params, url;\n      url = $urls.resolve(\"swimlanes\");\n      url = url + \"/\" + swimlaneId;\n      params = {\n        name: name\n      };\n      return $http.patch(url, params);\n    };\n    service.bulkUpdateOrder = function(project, swimlanesOrder) {\n      var params, url;\n      url = $urls.resolve(\"swimlanes\");\n      url = url + \"/bulk_update_order\";\n      params = {\n        project: project,\n        bulk_swimlanes: swimlanesOrder\n      };\n      return $http.post(url, params);\n    };\n    service.wipLimitUpdate = function(swimlaneId, wip_limit) {\n      var params, url;\n      url = $urls.resolve(\"swimlane-userstory-statuses\");\n      url = url + \"/\" + swimlaneId;\n      params = {\n        wip_limit: wip_limit\n      };\n      return $http.patch(url, params);\n    };\n    service[\"delete\"] = function(swimlaneId, moveTo) {\n      var url;\n      url = $urls.resolve(\"swimlanes\");\n      if (moveTo) {\n        url = url + \"/\" + swimlaneId + \"?moveTo=\" + moveTo;\n      } else {\n        url = url + \"/\" + swimlaneId;\n      }\n      return $http[\"delete\"](url);\n    };\n    return function(instance) {\n      return instance.swimlanes = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgSwimlanesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls, $storage) {\n    var hashSuffix, hashSuffixStatusColumnModes, hashSuffixUsRowModes, service;\n    service = {};\n    hashSuffix = \"tasks-queryparams\";\n    hashSuffixStatusColumnModes = \"tasks-statuscolumnmodels\";\n    hashSuffixUsRowModes = \"tasks-usrowmodels\";\n    service.get = function(projectId, taskId, extraParams) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params = _.extend({}, params, extraParams);\n      return $repo.queryOne(\"tasks\", taskId, params);\n    };\n    service.getByRef = function(projectId, ref, extraParams) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      params = _.extend({}, params, extraParams);\n      return $repo.queryOne(\"tasks\", \"by_ref\", params);\n    };\n    service.listInAllProjects = function(filters) {\n      return $repo.queryMany(\"tasks\", filters);\n    };\n    service.filtersData = function(params) {\n      return $repo.queryOneRaw(\"task-filters\", null, params);\n    };\n    service.list = function(projectId, sprintId, userStoryId, params) {\n      if (sprintId == null) {\n        sprintId = null;\n      }\n      if (userStoryId == null) {\n        userStoryId = null;\n      }\n      params = _.merge(params, {\n        project: projectId,\n        order_by: 'us_order'\n      });\n      if (sprintId) {\n        params.milestone = sprintId;\n      }\n      if (userStoryId) {\n        params.user_story = userStoryId;\n      }\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(\"tasks\", params);\n    };\n    service.bulkCreate = function(projectId, sprintId, usId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-create-tasks\");\n      params = {\n        project_id: projectId,\n        milestone_id: sprintId,\n        us_id: usId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params).then(function(result) {\n        return result.data;\n      });\n    };\n    service.upvote = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-upvote\", taskId);\n      return $http.post(url);\n    };\n    service.downvote = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-downvote\", taskId);\n      return $http.post(url);\n    };\n    service.watch = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-watch\", taskId);\n      return $http.post(url);\n    };\n    service.unwatch = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-unwatch\", taskId);\n      return $http.post(url);\n    };\n    service.bulkUpdateTaskTaskboardOrder = function(projectId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-task-taskboard-order\");\n      params = {\n        project_id: projectId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params);\n    };\n    service.bulkUpdateMilestone = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-task-milestone\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params);\n    };\n    service.reorder = function(id, data, setOrders) {\n      var options, url;\n      url = $urls.resolve(\"tasks\") + (\"/\" + id);\n      options = {\n        \"headers\": {\n          \"set-orders\": JSON.stringify(setOrders)\n        }\n      };\n      return $http.patch(url, data, null, options).then(function(result) {\n        return result.data;\n      });\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      return $repo.queryMany(type, params);\n    };\n    service.createDefaultValues = function(projectId, type) {\n      var data, url;\n      data = {\n        \"project_id\": projectId\n      };\n      url = $urls.resolve(type + \"-create-default\");\n      return $http.post(url, data);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeStatusColumnModes = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getStatusColumnModes = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeUsRowModes = function(projectId, sprintId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixUsRowModes;\n      hash = generateHash([projectId, sprintId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getUsRowModes = function(projectId, sprintId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixUsRowModes;\n      hash = generateHash([projectId, sprintId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.promoteToUserStory = function(taskId, projectId) {\n      var data, url;\n      url = $urls.resolve(\"promote-task-to-us\", taskId);\n      data = {\n        project_id: projectId\n      };\n      return $http.post(url, data);\n    };\n    return function(instance) {\n      return instance.tasks = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgTasksResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"user-project-settings\", id);\n    };\n    service.list = function(filters) {\n      var params;\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"user-project-settings\", params);\n    };\n    return function(instance) {\n      return instance.userProjectSettings = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUserProjectSettingsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($config, $repo, $http, $urls, $q) {\n    var service;\n    service = {};\n    service.changeAvatar = function(file) {\n      var data, defered, maxFileSize, options, response, url;\n      maxFileSize = $config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        response = {\n          status: 413,\n          data: {\n            _error_message: \"'\" + file.name + \"' (\" + (sizeFormat(file.size)) + \") is too heavy for our oompa loompas, try it with a smaller than (\" + (sizeFormat(maxFileSize)) + \")\"\n          }\n        };\n        defered = $q.defer();\n        defered.reject(response);\n        return defered.promise;\n      }\n      data = new FormData();\n      data.append('avatar', file);\n      options = {\n        transformRequest: angular.identity,\n        headers: {\n          'Content-Type': void 0\n        }\n      };\n      url = ($urls.resolve(\"users\")) + \"/change_avatar\";\n      return $http.post(url, data, {}, options);\n    };\n    service.removeAvatar = function() {\n      var url;\n      url = ($urls.resolve(\"users\")) + \"/remove_avatar\";\n      return $http.post(url);\n    };\n    service.changePassword = function(currentPassword, newPassword) {\n      var data, url;\n      url = ($urls.resolve(\"users\")) + \"/change_password\";\n      data = {\n        current_password: currentPassword,\n        password: newPassword\n      };\n      return $http.post(url, data);\n    };\n    return function(instance) {\n      return instance.userSettings = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUserSettingsResourcesProvider\", [\"$tgConfig\", \"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($http, $urls) {\n    var service;\n    service = {};\n    service.contacts = function(userId, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = $urls.resolve(\"user-contacts\", userId);\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return $http.get(url, {}, httpOptions).then(function(result) {\n        return result.data;\n      });\n    };\n    return function(instance) {\n      return instance.users = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUsersResourcesProvider\", [\"$tgHttp\", \"$tgUrls\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var generateHash, hashShowTags, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  hashShowTags = 'backlog-tags';\n\n  resourceProvider = function($repo, $http, $urls, $storage, $q) {\n    var hashSuffix, service;\n    service = {};\n    hashSuffix = \"userstories-queryparams\";\n    service.get = function(projectId, usId, extraParams) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params = _.extend({}, params, extraParams);\n      return $repo.queryOne(\"userstories\", usId, params);\n    };\n    service.getByRef = function(projectId, ref, extraParams) {\n      var params;\n      if (extraParams == null) {\n        extraParams = {};\n      }\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      params = _.extend({}, params, extraParams);\n      if (params.milestone === 'null') {\n        delete params.milestone;\n        delete params['no-milestone'];\n      }\n      return $repo.queryOne(\"userstories\", \"by_ref\", params);\n    };\n    service.listInAllProjects = function(filters) {\n      return $repo.queryMany(\"userstories\", filters);\n    };\n    service.filtersData = function(params) {\n      return $repo.queryOneRaw(\"userstories-filters\", null, params);\n    };\n    service.listUnassigned = function(projectId, filters, pageSize, store) {\n      var params;\n      if (store == null) {\n        store = true;\n      }\n      params = {\n        \"project\": projectId,\n        \"milestone\": \"null\"\n      };\n      params = _.extend({}, params, filters || {});\n      if (store) {\n        service.storeQueryParams(projectId, params);\n      }\n      return $repo.queryMany(\"userstories\", _.extend(params, {\n        page_size: pageSize\n      }), {\n        enablePagination: true\n      }, true);\n    };\n    service.listAll = function(projectId, filters) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      params = _.extend({}, params, filters || {});\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(\"userstories\", params);\n    };\n    service.bulkCreate = function(projectId, status, bulk, swimlane) {\n      var data, url;\n      data = {\n        project_id: projectId,\n        status_id: status,\n        bulk_stories: bulk,\n        swimlane_id: swimlane\n      };\n      url = $urls.resolve(\"bulk-create-us\");\n      return $http.post(url, data);\n    };\n    service.upvote = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-upvote\", userStoryId);\n      return $http.post(url);\n    };\n    service.downvote = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-downvote\", userStoryId);\n      return $http.post(url);\n    };\n    service.watch = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-watch\", userStoryId);\n      return $http.post(url);\n    };\n    service.unwatch = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-unwatch\", userStoryId);\n      return $http.post(url);\n    };\n    service.bulkUpdateBacklogOrder = function(projectId, milestoneId, afterUserstoryId, beforeUserstoryId, bulkUserstories) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-us-backlog-order\");\n      params = {\n        project_id: projectId,\n        bulk_userstories: bulkUserstories\n      };\n      if (milestoneId) {\n        params.milestone_id = milestoneId;\n      }\n      if (afterUserstoryId) {\n        params.after_userstory_id = afterUserstoryId;\n      } else if (beforeUserstoryId) {\n        params.before_userstory_id = beforeUserstoryId;\n      }\n      return $http.post(url, params);\n    };\n    service.bulkUpdateMilestone = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-us-milestone\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_stories: data\n      };\n      return $http.post(url, params);\n    };\n    service.bulkUpdateKanbanOrder = function(projectId, statusId, swimlaneId, afterUserstoryId, beforeUserstoryId, bulkUserstories) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-us-kanban-order\");\n      params = {\n        project_id: projectId,\n        status_id: statusId,\n        bulk_userstories: bulkUserstories\n      };\n      if (afterUserstoryId) {\n        params.after_userstory_id = afterUserstoryId;\n      } else if (beforeUserstoryId) {\n        params.before_userstory_id = beforeUserstoryId;\n      }\n      if (swimlaneId) {\n        params.swimlane_id = swimlaneId;\n      }\n      return $http.post(url, params);\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(type, params);\n    };\n    service.createDefaultValues = function(projectId, type) {\n      var data, url;\n      data = {\n        \"project_id\": projectId\n      };\n      url = $urls.resolve(type + \"-create-default\");\n      return $http.post(url, data);\n    };\n    service.editStatus = function(statusId, wip_limit) {\n      var params, url;\n      url = $urls.resolve(\"userstory-statuses\");\n      url = url + \"/\" + statusId;\n      params = {\n        wip_limit: wip_limit\n      };\n      return $http.patch(url, params);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeBacklog = function(projectId, ids) {\n      var hash, ns;\n      ns = projectId + \":backlog-ids\";\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, ids);\n    };\n    service.getBacklog = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":backlog-ids\";\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || [];\n    };\n    service.storeShowTags = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getShowTags = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash);\n    };\n    return function(instance) {\n      return instance.userstories = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUserstoriesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider;\n\n  resourceProvider = function($repo, $urls, $http) {\n    var service;\n    service = {};\n    service.list = function(webhookId) {\n      var params;\n      params = {\n        webhook: webhookId\n      };\n      return $repo.queryMany(\"webhooklogs\", params);\n    };\n    service.resend = function(webhooklogId) {\n      var url;\n      url = $urls.resolve(\"webhooklogs-resend\", webhooklogId);\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.webhooklogs = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgWebhookLogsResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider;\n\n  resourceProvider = function($repo, $urls, $http) {\n    var service;\n    service = {};\n    service.list = function(projectId) {\n      var params;\n      params = {\n        project: projectId\n      };\n      return $repo.queryMany(\"webhooks\", params);\n    };\n    service.test = function(webhookId) {\n      var url;\n      url = $urls.resolve(\"webhooks-test\", webhookId);\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.webhooks = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgWebhooksResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(wikiId) {\n      return $repo.queryOne(\"wiki\", wikiId);\n    };\n    service.getBySlug = function(projectId, slug) {\n      return $repo.queryOne(\"wiki\", \"by_slug?project=\" + projectId + \"&slug=\" + slug);\n    };\n    service.list = function(projectId) {\n      return $repo.queryMany(\"wiki\", {\n        project: projectId\n      });\n    };\n    service.listLinks = function(projectId) {\n      return $repo.queryMany(\"wiki-links\", {\n        project: projectId\n      });\n    };\n    return function(instance) {\n      return instance.wiki = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgWikiResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserChangePasswordController, UserChangePasswordDirective, debounce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserChangePasswordController = (function(superClass) {\n    extend(UserChangePasswordController, superClass);\n\n    UserChangePasswordController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAuth\", \"$translate\"];\n\n    function UserChangePasswordController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, auth, translate) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.auth = auth;\n      this.translate = translate;\n      this.scope.sectionName = this.translate.instant(\"CHANGE_PASSWORD.SECTION_NAME\");\n      this.scope.user = this.auth.getUser();\n    }\n\n    return UserChangePasswordController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserChangePasswordController\", UserChangePasswordController);\n\n  UserChangePasswordDirective = function($rs, $confirm, $loading, $translate) {\n    var link;\n    link = function($scope, $el, $attrs, ctrl) {\n      var form, submit, submitButton;\n      form = new checksley.Form($el.find(\"form\"));\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          if ($scope.newPassword1 !== $scope.newPassword2) {\n            $confirm.notify('error', $translate.instant(\"CHANGE_PASSWORD.ERROR_PASSWORD_MATCH\"));\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $rs.userSettings.changePassword($scope.currentPassword, $scope.newPassword1);\n          promise.then(function() {\n            currentLoading.finish();\n            return $confirm.notify('success');\n          });\n          return promise.then(null, function(response) {\n            currentLoading.finish();\n            return $confirm.notify('error', response.data._error_message);\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserChangePassword\", [\"$tgResources\", \"$tgConfirm\", \"$tgLoading\", \"$translate\", UserChangePasswordDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DeleteUserDirective, bindOnce, debounce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  DeleteUserDirective = function($repo, $rootscope, $auth, $location, $navUrls, lightboxService, $loading) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit, submitButton;\n      $scope.$on(\"deletelightbox:new\", function(ctx, user) {\n        return lightboxService.open($el);\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      submit = function() {\n        var currentLoading, promise;\n        currentLoading = $loading().target(submitButton).start();\n        promise = $repo.remove($scope.user);\n        promise.then(function(data) {\n          currentLoading.finish();\n          lightboxService.close($el);\n          $auth.logout();\n          return $location.path($navUrls.resolve(\"login\"));\n        });\n        return promise.then(null, function() {\n          currentLoading.finish();\n          return console.log(\"FAIL\");\n        });\n      };\n      $el.on(\"click\", \".js-cancel\", function(event) {\n        event.preventDefault();\n        return lightboxService.close($el);\n      });\n      $el.on(\"click\", \".js-confirm\", debounce(2000, function(event) {\n        event.preventDefault();\n        return submit();\n      }));\n      return submitButton = $el.find(\".js-confirm\");\n    };\n    return {\n      link: link,\n      templateUrl: \"user/lightbox/lightbox-delete-account.html\"\n    };\n  };\n\n  module.directive(\"tgLbDeleteUser\", [\"$tgRepo\", \"$rootScope\", \"$tgAuth\", \"$tgLocation\", \"$tgNavUrls\", \"lightboxService\", \"$tgLoading\", DeleteUserDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserLiveNotificationsController, UserLiveNotificationsDirective, UserLiveNotificationsListDirective, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserLiveNotificationsController = (function(superClass) {\n    extend(UserLiveNotificationsController, superClass);\n\n    UserLiveNotificationsController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAuth\", \"tgErrorHandlingService\"];\n\n    function UserLiveNotificationsController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, auth, errorHandlingService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.auth = auth;\n      this.errorHandlingService = errorHandlingService;\n      this.scope.sectionName = \"USER_SETTINGS.NOTIFICATIONS.LIVE_SECTION_NAME\";\n      this.scope.user = this.auth.getUser();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserLiveNotificationsController.prototype.loadInitialData = function() {\n      return this.rs.notifyPolicies.list().then((function(_this) {\n        return function(notifyPolicies) {\n          _this.scope.notifyPolicies = notifyPolicies;\n          return notifyPolicies;\n        };\n      })(this));\n    };\n\n    return UserLiveNotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserLiveNotificationsController\", UserLiveNotificationsController);\n\n  UserLiveNotificationsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserLiveNotifications\", UserLiveNotificationsDirective);\n\n  UserLiveNotificationsListDirective = function($repo, $confirm, $compile) {\n    var link, template;\n    template = _.template(\"<% _.each(notifyPolicies, function (notifyPolicy, index) { %>\\n<div class=\\\"policy-table-row\\\" data-index=\\\"<%- index %>\\\">\\n  <div class=\\\"policy-table-project\\\"><span><%- notifyPolicy.project_name %></span></div>\\n  <div class=\\\"policy-table-all\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             value=\\\"2\\\" <% if (notifyPolicy.live_notify_level == 2) { %>checked=\\\"checked\\\"<% } %>/>\\n      <label for=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_ALL\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-involved\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             value=\\\"1\\\" <% if (notifyPolicy.live_notify_level == 1) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_INVOLVED\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-none\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             value=\\\"3\\\" <% if (notifyPolicy.live_notify_level == 3) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_NONE\\\"></label>\\n    </div>\\n  </div>\\n</div>\\n<% }) %>\");\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function() {\n        var ctx, html;\n        $el.off();\n        ctx = {\n          notifyPolicies: $scope.notifyPolicies\n        };\n        html = template(ctx);\n        $el.html($compile(html)($scope));\n        return $el.on(\"change\", \"input[type=radio]\", function(event) {\n          var onError, onSuccess, policy, policyIndex, prev_level, target;\n          target = angular.element(event.currentTarget);\n          policyIndex = target.parents(\".policy-table-row\").data('index');\n          policy = $scope.notifyPolicies[policyIndex];\n          prev_level = policy.live_notify_level;\n          policy.live_notify_level = parseInt(target.val(), 10);\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            return target.parents(\".policy-table-row\").find(\"input[value=\" + prev_level + \"]\").prop(\"checked\", true);\n          };\n          return $repo.save(policy).then(onSuccess, onError);\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserLiveNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\", UserLiveNotificationsListDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TaigaAvatarModelDirective, UserAvatarDirective, UserProfileDirective, UserSettingsController, debounce, mixOf, module, sizeFormat, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  debounce = this.taiga.debounce;\n\n  UserSettingsController = (function(superClass) {\n    extend(UserSettingsController, superClass);\n\n    UserSettingsController.$inject = [\"$scope\", \"$rootScope\", \"$tgConfig\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAuth\", \"$translate\", \"tgErrorHandlingService\", \"$window\"];\n\n    function UserSettingsController(scope, rootscope, config, repo, confirm, rs, params, q, location, navUrls, auth, translate, errorHandlingService, window1) {\n      var maxFileSize, promise, text;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.config = config;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.auth = auth;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.window = window1;\n      this.scope.sectionName = \"USER_SETTINGS.MENU.SECTION_TITLE\";\n      this.scope.project = {};\n      this.scope.user = this.auth.getUser();\n      if (!this.scope.user) {\n        this.errorHandlingService.permissionDenied();\n      } else {\n        this.scope.lang = this.getLan();\n        this.scope.theme = this.getTheme();\n      }\n      maxFileSize = this.config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize) {\n        text = this.translate.instant(\"USER_SETTINGS.AVATAR_MAX_SIZE\", {\n          \"maxFileSize\": sizeFormat(maxFileSize)\n        });\n        this.scope.maxFileSizeMsg = text;\n      }\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserSettingsController.prototype.loadInitialData = function() {\n      var compiledThemes;\n      compiledThemes = window._taigaAvailableThemes;\n      this.scope.availableThemes = this.config.get(\"themes\", []).filter((function(_this) {\n        return function(theme) {\n          return compiledThemes.includes(theme);\n        };\n      })(this));\n      return this.rs.locales.list().then((function(_this) {\n        return function(locales) {\n          _this.scope.locales = locales;\n          return locales;\n        };\n      })(this));\n    };\n\n    UserSettingsController.prototype.openDeleteLightbox = function() {\n      return this.rootscope.$broadcast(\"deletelightbox:new\", this.scope.user);\n    };\n\n    UserSettingsController.prototype.getLan = function() {\n      return this.scope.user.lang || this.translate.preferredLanguage();\n    };\n\n    UserSettingsController.prototype.getTheme = function() {\n      var compiledThemes, theme;\n      compiledThemes = window._taigaAvailableThemes;\n      theme = this.scope.user.theme || this.config.get(\"defaultTheme\") || \"taiga\";\n      if (!compiledThemes.includes(theme)) {\n        theme = \"taiga\";\n      }\n      return theme;\n    };\n\n    UserSettingsController.prototype.exportProfile = function() {\n      var onError, onSuccess;\n      onSuccess = function(result) {\n        var dumpUrl;\n        dumpUrl = result.data.url;\n        return this.window.open(dumpUrl, \"_blank\");\n      };\n      onError = (function(_this) {\n        return function(response) {\n          var ref;\n          if ((ref = response.data) != null ? ref._error_message : void 0) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          }\n        };\n      })(this);\n      return this.auth.exportProfile().then(onSuccess, onError);\n    };\n\n    UserSettingsController.prototype.verifyEmail = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function(result) {\n          var text;\n          text = _this.translate.instant(\"USER_PROFILE.VERIFY_EMAIL_SUCCESS\");\n          return _this.confirm.notify(\"success\", text);\n        };\n      })(this);\n      onError = (function(_this) {\n        return function(response) {\n          var ref;\n          if ((ref = response.data) != null ? ref._error_message : void 0) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          }\n        };\n      })(this);\n      return this.auth.sendVerificationEmail().then(onSuccess, onError);\n    };\n\n    return UserSettingsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserSettingsController\", UserSettingsController);\n\n  UserProfileDirective = function($confirm, $auth, $repo, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit;\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var changeEmail, form, onError, onSuccess;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          changeEmail = $scope.user.isAttributeModified(\"email\");\n          $scope.user.lang = $scope.lang;\n          $scope.user.theme = $scope.theme;\n          onSuccess = function(data) {\n            var text;\n            $auth.setUser(data);\n            if (changeEmail) {\n              text = $translate.instant(\"USER_PROFILE.CHANGE_EMAIL_SUCCESS\");\n              return $confirm.success(text);\n            } else {\n              return $confirm.notify('success');\n            }\n          };\n          onError = function(data) {\n            form.setErrors(data);\n            return $confirm.notify('error', data._error_message);\n          };\n          return $repo.save($scope.user).then(onSuccess, onError);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserProfile\", [\"$tgConfirm\", \"$tgAuth\", \"$tgRepo\", \"$translate\", UserProfileDirective]);\n\n  UserAvatarDirective = function($auth, $model, $rs, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var onError, onSuccess, showSizeInfo;\n      showSizeInfo = function() {\n        return $el.find(\".size-info\").removeClass(\"hidden\");\n      };\n      onSuccess = function(response) {\n        var user;\n        user = $model.make_model(\"users\", response.data);\n        $auth.setUser(user);\n        $scope.user = user;\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('success');\n      };\n      onError = function(response) {\n        if (response.status === 413) {\n          showSizeInfo();\n        }\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('error', response.data._error_message);\n      };\n      $el.on(\"click\", \".js-change-avatar\", function(e) {\n        e.preventDefault();\n        return $el.find(\"#avatar-field\").click();\n      });\n      $el.on(\"change\", \"#avatar-field\", function(event) {\n        if ($scope.avatarAttachment) {\n          $el.find('.loading-overlay').addClass(\"active\");\n          return $rs.userSettings.changeAvatar($scope.avatarAttachment).then(onSuccess, onError);\n        }\n      });\n      $el.on(\"click\", \"a.js-use-gravatar\", function(event) {\n        $el.find('.loading-overlay').addClass(\"active\");\n        return $rs.userSettings.removeAvatar().then(onSuccess, onError);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserAvatar\", [\"$tgAuth\", \"$tgModel\", \"$tgResources\", \"$tgConfirm\", UserAvatarDirective]);\n\n  TaigaAvatarModelDirective = function($parse) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var model, modelSetter;\n      model = $parse($attrs.tgAvatarModel);\n      modelSetter = model.assign;\n      return $el.bind('change', function() {\n        return $scope.$apply(function() {\n          return modelSetter($scope, $el[0].files[0]);\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive('tgAvatarModel', ['$parse', TaigaAvatarModelDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserSettingsNavigationDirective, module;\n\n  UserSettingsNavigationDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var section;\n      section = $attrs.tgUserSettingsNavigation;\n      $el.find(\".active\").removeClass(\"active\");\n      $el.find(\"#usersettingsmenu-\" + section).addClass(\"active\");\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module = angular.module(\"taigaUserSettings\");\n\n  module.directive(\"tgUserSettingsNavigation\", UserSettingsNavigationDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserNotificationsController, UserNotificationsDirective, UserNotificationsListDirective, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserNotificationsController = (function(superClass) {\n    extend(UserNotificationsController, superClass);\n\n    UserNotificationsController.$inject = [\"$scope\", \"$tgConfirm\", \"$tgResources\", \"$tgAuth\", \"$tgConfig\", \"tgResources\", \"tgCurrentUserService\", \"$translate\"];\n\n    function UserNotificationsController(scope, confirm, rs, auth, config, resources, currentUserService, translate) {\n      var promise;\n      this.scope = scope;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.auth = auth;\n      this.config = config;\n      this.resources = resources;\n      this.currentUserService = currentUserService;\n      this.translate = translate;\n      this.scope.sectionName = \"USER_SETTINGS.NOTIFICATIONS.SECTION_NAME\";\n      this.scope.user = this.auth.getUser();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.isSaas = this.config.get(\"isSaas\");\n      this.onPremiseSubscribed = false;\n      this.loadPremise = false;\n    }\n\n    UserNotificationsController.prototype.subscribed = function() {\n      this.loadPremise = true;\n      return this.resources.onPremise.subscribeOnPremiseNewsletter({\n        \"email\": this.currentUserService.getUser().get('email'),\n        \"full_name\": this.currentUserService.getUser().get('full_name'),\n        \"origin_form\": 'Newsletter sign-up settings'\n      }).then((function(_this) {\n        return function() {\n          var text;\n          text = _this.translate.instant(\"PROJECT.NEWSLETTER_OPENING.SAVED_PREFERENCE\");\n          _this.confirm.notify(\"success\", \"Your preferences have been save successfully\");\n          _this.onPremiseSubscribed = true;\n          _this.loadPremise = false;\n          return _this.resources.user.getUserStorage('dont_ask_premise_newsletter').then(function(storageState) {\n            return _this.resources.user.setUserStorage('dont_ask_premise_newsletter', true);\n          })[\"catch\"](function(storageError) {\n            if (storageError.status = 404) {\n              return _this.resources.user.createUserStorage('dont_ask_premise_newsletter', false);\n            }\n          });\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function() {\n          _this.confirm.notify(\"light-error\", \"\");\n          return _this.loadPremise = false;\n        };\n      })(this));\n    };\n\n    UserNotificationsController.prototype.loadInitialData = function() {\n      return this.rs.notifyPolicies.list().then((function(_this) {\n        return function(notifyPolicies) {\n          _this.scope.notifyPolicies = notifyPolicies;\n          return notifyPolicies;\n        };\n      })(this));\n    };\n\n    return UserNotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserNotificationsController\", UserNotificationsController);\n\n  UserNotificationsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserNotifications\", UserNotificationsDirective);\n\n  UserNotificationsListDirective = function($repo, $confirm, $compile) {\n    var link, template;\n    template = _.template(\"<% _.each(notifyPolicies, function (notifyPolicy, index) { %>\\n<div class=\\\"policy-table-row\\\" data-index=\\\"<%- index %>\\\">\\n  <div class=\\\"policy-table-project\\\"><span><%- notifyPolicy.project_name %></span></div>\\n  <div class=\\\"policy-table-all\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             value=\\\"2\\\" <% if (notifyPolicy.notify_level == 2) { %>checked=\\\"checked\\\"<% } %>/>\\n      <label for=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_ALL\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-involved\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             value=\\\"1\\\" <% if (notifyPolicy.notify_level == 1) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_INVOLVED\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-none\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             value=\\\"3\\\" <% if (notifyPolicy.notify_level == 3) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_NONE\\\"></label>\\n    </div>\\n  </div>\\n</div>\\n<% }) %>\");\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function() {\n        var ctx, html;\n        $el.off();\n        ctx = {\n          notifyPolicies: $scope.notifyPolicies\n        };\n        html = template(ctx);\n        $el.html($compile(html)($scope));\n        return $el.on(\"change\", \"input[type=radio]\", function(event) {\n          var onError, onSuccess, policy, policyIndex, prev_level, target;\n          target = angular.element(event.currentTarget);\n          policyIndex = target.parents(\".policy-table-row\").data('index');\n          policy = $scope.notifyPolicies[policyIndex];\n          prev_level = policy.notify_level;\n          policy.notify_level = parseInt(target.val(), 10);\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            return target.parents(\".policy-table-row\").find(\"input[value=\" + prev_level + \"]\").prop(\"checked\", true);\n          };\n          return $repo.save(policy).then(onSuccess, onError);\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\", UserNotificationsListDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserProjectSettingsController, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserProjectSettingsController = (function(superClass) {\n    extend(UserProjectSettingsController, superClass);\n\n    UserProjectSettingsController.$inject = [\"$rootScope\", \"$scope\", \"$tgSections\", \"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"tgCurrentUserService\"];\n\n    function UserProjectSettingsController(rootScope, scope, tgSections, rs, repo, confirm, currentUserService) {\n      var promise;\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.tgSections = tgSections;\n      this.rs = rs;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.currentUserService = currentUserService;\n      this.scope.sections = this.tgSections.list();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserProjectSettingsController.prototype.loadInitialData = function() {\n      return this.rs.userProjectSettings.list().then((function(_this) {\n        return function(userProjectSettings) {\n          return _this.scope.userProjectSettings = userProjectSettings;\n        };\n      })(this));\n    };\n\n    UserProjectSettingsController.prototype.updateCustomHomePage = function(projectSettings) {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.currentUserService.loadProjects();\n          _this.rootScope.$broadcast(\"dropdown-project-list:updated\");\n          return _this.confirm.notify(\"success\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.repo.save(projectSettings).then(onSuccess, onError);\n    };\n\n    UserProjectSettingsController.prototype.filteredSections = function(projectSettings) {\n      return _.filter(this.scope.sections, function(section) {\n        var ref;\n        return ref = section.id, indexOf.call(projectSettings.allowed_sections, ref) >= 0;\n      });\n    };\n\n    return UserProjectSettingsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserProjectSettingsController\", UserProjectSettingsController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserWebNotificationsController, UserWebNotificationsDirective, UserWebNotificationsListDirective, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserWebNotificationsController = (function(superClass) {\n    extend(UserWebNotificationsController, superClass);\n\n    UserWebNotificationsController.$inject = [\"$scope\", \"$tgResources\", \"$tgAuth\"];\n\n    function UserWebNotificationsController(scope, rs, auth) {\n      var promise;\n      this.scope = scope;\n      this.rs = rs;\n      this.auth = auth;\n      this.scope.sectionName = \"USER_SETTINGS.EVENTS.SECTION_NAME\";\n      this.scope.user = this.auth.getUser();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserWebNotificationsController.prototype.loadInitialData = function() {\n      return this.rs.notifyPolicies.list().then((function(_this) {\n        return function(notifyPolicies) {\n          _this.scope.notifyPolicies = notifyPolicies;\n          return notifyPolicies;\n        };\n      })(this));\n    };\n\n    return UserWebNotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserWebNotificationsController\", UserWebNotificationsController);\n\n  UserWebNotificationsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserWebNotifications\", UserWebNotificationsDirective);\n\n  UserWebNotificationsListDirective = function($repo, $confirm, $compile) {\n    var link, template;\n    template = _.template(\"<% _.each(notifyPolicies, function (notifyPolicy, index) { %>\\n<div class=\\\"policy-table-row\\\">\\n  <div class=\\\"policy-table-project\\\"><span><%- notifyPolicy.project_name %></span></div>\\n  <div class=\\\"policy-table-all\\\">\\n    <div class=\\\"check\\\" data-index=\\\"<%- index %>\\\">\\n      <input type=\\\"checkbox\\\"\\n        <% if(notifyPolicy.web_notify_level) { %> checked=\\\"checked\\\" <% } %>\\n        name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-<%- notifyPolicy.id %>\\\"/>\\n      <div></div>\\n      <span class=\\\"check-text check-yes\\\" translate=\\\"COMMON.YES\\\"></span>\\n      <span class=\\\"check-text check-no\\\"\\\" translate=\\\"COMMON.NO\\\"></span>\\n    </div>\\n  </div>\\n</div>\\n<% }) %>\");\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function() {\n        var ctx, html;\n        $el.off();\n        ctx = {\n          notifyPolicies: $scope.notifyPolicies\n        };\n        html = template(ctx);\n        $el.html($compile(html)($scope));\n        return $el.on(\"click\", \".check\", function(event) {\n          var onError, onSuccess, policy, policyIndex, target;\n          target = angular.element(event.currentTarget);\n          policyIndex = target.data('index');\n          policy = $scope.notifyPolicies[policyIndex];\n          policy.web_notify_level = !policy.web_notify_level;\n          onSuccess = function() {\n            $confirm.notify(\"success\");\n            return target.find(\"input\").prop(\"checked\", policy.web_notify_level);\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $repo.save(policy).then(onSuccess, onError);\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserWebNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\", UserWebNotificationsListDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  angular.module(\"taigaComponents\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaDiscover\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaExternalApps\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  angular.module(\"taigaHistory\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaHome\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  angular.module(\"taigaNavigationBar\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  angular.module(\"taigaNotifications\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaProfile\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  angular.module(\"taigaProjects\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  angular.module(\"taigaResources2\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  angular.module(\"taigaUserTimeline\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaUtils\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  angular.module(\"taigaWikiHistory\", []);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AnimatedCounter;\n\n  AnimatedCounter = function() {\n    var link, template;\n    template = \"<div\\n    ng-class=\\\"{'wip-amount': data.wip, 'limit-over': data.count > data.wip}\\\"\\n    class=\\\"animated-counter-inner\\\">\\n    <div class=\\\"counter-translator\\\">\\n        <div class=\\\"result\\\">\\n            <span class=\\\"current\\\">{{ nextUp.current || 0 }}</span><span ng-if=\\\"nextUp.wip\\\"> / {{ nextUp.wip }}</span>\\n        </div>\\n        <div class=\\\"result\\\">\\n            <span class=\\\"current\\\">{{ renderCount.current || 0 }}</span><span ng-if=\\\"renderCount.wip\\\"> / {{ renderCount.wip }}</span>\\n        </div>\\n        <div class=\\\"result\\\">\\n            <span class=\\\"current\\\">{{ nextDown.current || 0 }}</span><span ng-if=\\\"nextDown.wip\\\"> / {{ nextDown.wip }}</span>\\n        </div>\\n    </div>\\n</div>\";\n    link = function($scope, $el, $attrs) {\n      var counter, initialLoad, lastCount, renderData, transitionEnd, unwatch;\n      transitionEnd = function(event) {\n        return $scope.$evalAsync((function(_this) {\n          return function() {\n            if ($scope.nextUp !== void 0) {\n              $scope.renderCount = $scope.nextUp;\n            } else {\n              $scope.renderCount = $scope.nextDown;\n            }\n            return $(counter).removeClass('inc dec');\n          };\n        })(this));\n      };\n      counter = $el.find('.counter-translator');\n      counter.on('transitionend', transitionEnd);\n      initialLoad = false;\n      lastCount = void 0;\n      unwatch = $scope.$on('kanban:userstories:loaded', function() {\n        initialLoad = true;\n        return unwatch();\n      });\n      renderData = function(data) {\n        var getCounter;\n        getCounter = (function(_this) {\n          return function(num) {\n            return {\n              current: num,\n              wip: data.wip\n            };\n          };\n        })(this);\n        $scope.nextUp = void 0;\n        $scope.nextDown = void 0;\n        if (!$scope.data || $scope.data.count === void 0) {\n          lastCount = 0;\n          $scope.renderCount = getCounter(lastCount);\n          return;\n        } else if (lastCount === $scope.data.count) {\n          return;\n        } else if (!initialLoad || lastCount === void 0) {\n          lastCount = $scope.data.count;\n          $scope.renderCount = getCounter(lastCount);\n          return;\n        }\n        if ($scope.data.count > lastCount) {\n          lastCount = $scope.data.count;\n          $scope.nextUp = getCounter($scope.data.count);\n        } else if ($scope.data.count < lastCount) {\n          lastCount = $scope.data.count;\n          $scope.nextDown = getCounter($scope.data.count);\n        }\n        if ($scope.nextUp !== void 0 || $scope.nextDown !== void 0) {\n          counter.removeClass('inc dec');\n          return $scope.$evalAsync((function(_this) {\n            return function() {\n              if ($scope.nextUp !== void 0) {\n                return counter.addClass('inc');\n              } else if ($scope.nextDown !== void 0) {\n                return counter.addClass('dec');\n              }\n            };\n          })(this));\n        }\n      };\n      $scope.$watch('disabled', function(disabled) {\n        if ($scope.disabled) {\n          return;\n        }\n        return renderData($scope.data);\n      });\n      $scope.$watch('data', function(data) {\n        if ($scope.disabled) {\n          return;\n        }\n        return renderData(data);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return counter.off();\n      });\n    };\n    return {\n      link: link,\n      template: template,\n      scope: {\n        data: '<',\n        disabled: '<'\n      }\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAnimatedCounter\", [AnimatedCounter]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AssignedToInlineDirective;\n\n  AssignedToInlineDirective = function($rootscope, $confirm, $repo, $loading, $modelTransform, $template, $translate, $compile, $currentUserService, avatarService, $userListService) {\n    var link;\n    link = function($scope, $el, $attr, $model) {\n      var isEditable, renderUser, renderUserList;\n      isEditable = function() {\n        var ref, ref1;\n        return ((ref = $scope.project) != null ? (ref1 = ref.my_permissions) != null ? ref1.indexOf($attr.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      renderUserList = function(text) {\n        var selectedId, users, visibleUsers;\n        selectedId = $model.$modelValue.assigned_to;\n        users = $userListService.searchUsers(text);\n        if (selectedId) {\n          users = _.reject(users, {\n            \"id\": selectedId\n          });\n        }\n        visibleUsers = _.slice(users, 0, 5);\n        visibleUsers = _.map(visibleUsers, function(user) {\n          return user.avatar = avatarService.getAvatar(user);\n        });\n        $scope.users = _.slice(users, 0, 5);\n        return $scope.showMore = users.length > 5;\n      };\n      renderUser = function(assignedObject) {\n        var assigned_to_extra_info;\n        if (assignedObject != null ? assignedObject.assigned_to : void 0) {\n          $scope.selected = assignedObject.assigned_to;\n          assigned_to_extra_info = $scope.usersById[$scope.selected];\n          $scope.fullName = assigned_to_extra_info != null ? assigned_to_extra_info.full_name_display : void 0;\n          $scope.isUnassigned = false;\n          $scope.avatar = avatarService.getAvatar(assigned_to_extra_info);\n          $scope.bg = $scope.avatar.bg;\n          $scope.isIocaine = assignedObject != null ? assignedObject.is_iocaine : void 0;\n        } else {\n          $scope.fullName = $translate.instant(\"COMMON.ASSIGNED_TO.ASSIGN\");\n          $scope.isUnassigned = true;\n          $scope.avatar = avatarService.getAvatar(null);\n          $scope.bg = null;\n          $scope.isIocaine = false;\n        }\n        $scope.fullNameVisible = !($scope.isUnassigned && !$currentUserService.isAuthenticated());\n        return $scope.isEditable = isEditable();\n      };\n      $el.on(\"click\", \".users-search\", function(event) {\n        return event.stopPropagation();\n      });\n      $el.on(\"click\", \".users-dropdown\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        $scope.usersSearch = \"\";\n        renderUserList();\n        $scope.$apply();\n        return $el.find(\".pop-users\").popover().open();\n      });\n      $scope.selfAssign = function() {\n        $model.$modelValue.assigned_to = $currentUserService.getUser().get('id');\n        return renderUser($model.$modelValue);\n      };\n      $scope.unassign = function() {\n        $model.$modelValue.assigned_to = null;\n        return renderUser();\n      };\n      $scope.$watch(\"usersSearch\", function(searchingText) {\n        if (searchingText != null) {\n          renderUserList(searchingText);\n          return $el.find('input').focus();\n        }\n      });\n      $el.on(\"click\", \".user-list-single\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        $model.$modelValue.assigned_to = target.data(\"user-id\");\n        renderUser($model.$modelValue);\n        return $scope.$apply();\n      });\n      $scope.$watch($attr.ngModel, function(instance) {\n        return renderUser(instance);\n      });\n      $scope.$on(\"isiocaine:changed\", function(ctx, instance) {\n        return renderUser(instance);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/assigned-inline/assigned-to-inline.html\",\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedToInline\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\", \"tgCurrentUserService\", \"tgAvatarService\", \"tgUserListService\", AssignedToInlineDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AssignedUsersInlineDirective,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  AssignedUsersInlineDirective = function($rootscope, $confirm, $repo, $loading, $modelTransform, $template, $translate, $compile, $currentUserService, avatarService, $userListService) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var applyToModel, currentAssignedIds, currentAssignedTo, isAssigned, renderUsers, renderUsersList;\n      currentAssignedIds = [];\n      currentAssignedTo = null;\n      isAssigned = function() {\n        return currentAssignedIds.length > 0;\n      };\n      renderUsersList = function(text) {\n        var selected, users, visible;\n        users = $userListService.searchUsers(text);\n        selected = [];\n        _.map(users, function(user) {\n          var ref;\n          if (ref = user.id, indexOf.call(currentAssignedIds, ref) >= 0) {\n            user.avatar = avatarService.getAvatar(user);\n            return selected.push(user);\n          }\n        });\n        visible = [];\n        _.map(users, function(user) {\n          var ref;\n          if (ref = user.id, indexOf.call(currentAssignedIds, ref) < 0) {\n            user.avatar = avatarService.getAvatar(user);\n            return visible.push(user);\n          }\n        });\n        $scope.selected = _.slice(selected, 0, 5);\n        if ($scope.selected.length < 5) {\n          $scope.users = _.slice(visible, 0, 5 - $scope.selected.length);\n        } else {\n          $scope.users = [];\n        }\n        return $scope.showMore = users.length > 5;\n      };\n      renderUsers = function() {\n        var assignedUsers;\n        assignedUsers = _.map(currentAssignedIds, function(assignedUserId) {\n          return $scope.usersById[assignedUserId];\n        });\n        assignedUsers = _.filter(assignedUsers, function(it) {\n          return !!it;\n        });\n        $scope.hiddenUsers = currentAssignedIds.length > 3 ? currentAssignedIds.length - 3 : 0;\n        $scope.assignedUsers = _.slice(assignedUsers, 0, 3);\n        return $scope.isAssigned = isAssigned();\n      };\n      applyToModel = function() {\n        _.map(currentAssignedIds, function(userId) {\n          if (!$scope.usersById[userId]) {\n            return currentAssignedIds.splice(currentAssignedIds.indexOf(userId), 1);\n          }\n        });\n        if (currentAssignedIds.length === 0) {\n          currentAssignedTo = null;\n        } else if (currentAssignedIds.indexOf(currentAssignedTo) === -1 || !currentAssignedTo) {\n          currentAssignedTo = currentAssignedIds[0];\n        }\n        if (!$model.$modelValue.assigned_users) {\n          $model.$modelValue.assigned_users = currentAssignedIds;\n        } else {\n          $model.$modelValue.setAttr('assigned_users', currentAssignedIds);\n        }\n        return $model.$modelValue.assigned_to = currentAssignedTo;\n      };\n      $el.on(\"click\", \".users-dropdown\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        $scope.usersSearch = null;\n        renderUsersList();\n        $scope.$apply();\n        return $el.find(\".pop-users\").popover().open();\n      });\n      $scope.assign = function(user) {\n        currentAssignedIds.push(user.id);\n        renderUsers();\n        return applyToModel();\n      };\n      $scope.selfAssign = function() {\n        currentAssignedIds.push($currentUserService.getUser().get('id'));\n        renderUsers();\n        return applyToModel();\n      };\n      $scope.unassign = function(user) {\n        var index;\n        index = currentAssignedIds.indexOf(user.id);\n        currentAssignedIds.splice(index, 1);\n        renderUsers();\n        return applyToModel();\n      };\n      $el.on(\"click\", \".users-search\", function(event) {\n        return event.stopPropagation();\n      });\n      $scope.$watch(\"usersSearch\", function(searchingText) {\n        if (searchingText != null) {\n          renderUsersList(searchingText);\n          return $el.find('input').focus();\n        }\n      });\n      $scope.$watch($attrs.ngModel, function(item) {\n        var assigned_to;\n        if (item == null) {\n          return;\n        }\n        currentAssignedIds = [];\n        assigned_to = null;\n        if (item.assigned_users != null) {\n          currentAssignedIds = item.assigned_users;\n        }\n        assigned_to = item.assigned_to;\n        return renderUsers();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      templateUrl: \"components/assigned-inline/assigned-users-inline.html\",\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedUsersInline\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\", \"tgCurrentUserService\", \"tgAvatarService\", \"tgUserListService\", AssignedUsersInlineDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AttachmentLinkDirective;\n\n  AttachmentLinkDirective = function($parse, attachmentsPreviewService, lightboxService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var attachment;\n      attachment = $parse(attrs.tgAttachmentLink)(scope);\n      el.on(\"click\", function(event) {\n        if (taiga.isImage(attachment.getIn(['file', 'name']))) {\n          event.preventDefault();\n          return scope.$apply(function() {\n            lightboxService.open($('tg-attachments-preview'));\n            return attachmentsPreviewService.fileId = attachment.getIn(['file', 'id']);\n          });\n        } else if (taiga.isPdf(attachment.getIn(['file', 'name']))) {\n          event.preventDefault();\n          return window.open(attachment.getIn(['file', 'url']));\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        return el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  AttachmentLinkDirective.$inject = [\"$parse\", \"tgAttachmentsPreviewService\", \"lightboxService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentLink\", AttachmentLinkDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AttachmentGalleryDirective;\n\n  AttachmentGalleryDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {};\n    return {\n      scope: {},\n      bindToController: {\n        attachment: \"=\",\n        onDelete: \"&\",\n        onUpdate: \"&\",\n        type: \"=\"\n      },\n      controller: \"Attachment\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachment/attachment-gallery.html\",\n      link: link\n    };\n  };\n\n  AttachmentGalleryDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentGallery\", AttachmentGalleryDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AttachmentController;\n\n  AttachmentController = (function() {\n    AttachmentController.$inject = ['tgAttachmentsService', '$translate'];\n\n    function AttachmentController(attachmentsService, translate) {\n      this.attachmentsService = attachmentsService;\n      this.translate = translate;\n      this.form = {};\n      this.form.description = this.attachment.getIn(['file', 'description']);\n      this.form.is_deprecated = this.attachment.get(['file', 'is_deprecated']);\n      this.title = this.translate.instant(\"ATTACHMENT.TITLE\", {\n        fileName: this.attachment.get('name'),\n        date: moment(this.attachment.get('created_date')).format(this.translate.instant(\"ATTACHMENT.DATE\"))\n      });\n    }\n\n    AttachmentController.prototype.editMode = function(mode) {\n      var attachment;\n      attachment = this.attachment.set('editable', mode);\n      return this.onUpdate({\n        attachment: attachment\n      });\n    };\n\n    AttachmentController.prototype[\"delete\"] = function() {\n      return this.onDelete({\n        attachment: this.attachment\n      });\n    };\n\n    AttachmentController.prototype.save = function() {\n      var attachment;\n      attachment = this.attachment.set('loading', true);\n      this.onUpdate({\n        attachment: attachment\n      });\n      attachment = this.attachment.merge({\n        editable: false,\n        loading: false\n      });\n      attachment = attachment.mergeIn(['file'], {\n        description: this.form.description,\n        is_deprecated: !!this.form.is_deprecated\n      });\n      return this.onUpdate({\n        attachment: attachment\n      });\n    };\n\n    return AttachmentController;\n\n  })();\n\n  angular.module('taigaComponents').controller('Attachment', AttachmentController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AttachmentDirective;\n\n  AttachmentDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {};\n    return {\n      scope: {},\n      bindToController: {\n        attachment: \"=\",\n        onDelete: \"&\",\n        onUpdate: \"&\",\n        type: \"=\"\n      },\n      controller: \"Attachment\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachment/attachment.html\",\n      link: link\n    };\n  };\n\n  AttachmentDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachment\", AttachmentDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AttachmentsDropDirective;\n\n  AttachmentsDropDirective = function($parse) {\n    var link;\n    link = function(scope, el, attrs) {\n      var eventAttr;\n      eventAttr = $parse(attrs.tgAttachmentsDrop);\n      el.on('dragover', function(e) {\n        e.preventDefault();\n        e.currentTarget.classList.add('attachment-dragover');\n        return false;\n      });\n      el.on('dragleave', function(e) {\n        e.preventDefault();\n        e.currentTarget.classList.remove('attachment-dragover');\n        return false;\n      });\n      el.on('drop', function(e) {\n        var dataTransfer;\n        e.stopPropagation();\n        e.preventDefault();\n        e.currentTarget.classList.remove('attachment-dragover');\n        dataTransfer = e.dataTransfer || (e.originalEvent && e.originalEvent.dataTransfer);\n        return scope.$apply(function() {\n          return eventAttr(scope, {\n            files: dataTransfer.files\n          });\n        });\n      });\n      return scope.$on(\"$destroy\", function() {\n        return el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  AttachmentsDropDirective.$inject = [\"$parse\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsDrop\", AttachmentsDropDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AttachmentsFullController, sizeFormat;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  AttachmentsFullController = (function() {\n    AttachmentsFullController.$inject = [\"$translate\", \"$tgConfirm\", \"$tgConfig\", \"$tgStorage\", \"tgAttachmentsFullService\", \"tgProjectService\", \"tgAttachmentsPreviewService\"];\n\n    function AttachmentsFullController(translate, confirm, config, storage, attachmentsFullService, projectService, attachmentsPreviewService) {\n      this.translate = translate;\n      this.confirm = confirm;\n      this.config = config;\n      this.storage = storage;\n      this.attachmentsFullService = attachmentsFullService;\n      this.projectService = projectService;\n      this.attachmentsPreviewService = attachmentsPreviewService;\n      this.mode = this.storage.get('attachment-mode', 'list');\n      this.maxFileSize = this.config.get(\"maxUploadFileSize\", null);\n      if (this.maxFileSize) {\n        this.maxFileSize = sizeFormat(this.maxFileSize);\n      }\n      this.maxFileSizeMsg = this.maxFileSize ? this.translate.instant(\"ATTACHMENT.MAX_UPLOAD_SIZE\", {\n        maxFileSize: this.maxFileSize\n      }) : \"\";\n      taiga.defineImmutableProperty(this, 'attachments', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.attachments;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsCount', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.deprecatedsCount;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'attachmentsVisible', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.attachmentsVisible;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsVisible', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.deprecatedsVisible;\n        };\n      })(this));\n    }\n\n    AttachmentsFullController.prototype.uploadingAttachments = function() {\n      return this.attachmentsFullService.uploadingAttachments;\n    };\n\n    AttachmentsFullController.prototype.addAttachment = function(file) {\n      var editable;\n      editable = this.mode === 'list';\n      return this.attachmentsFullService.addAttachment(this.projectId, this.objId, this.type, file, editable);\n    };\n\n    AttachmentsFullController.prototype.setMode = function(mode) {\n      this.mode = mode;\n      return this.storage.set('attachment-mode', mode);\n    };\n\n    AttachmentsFullController.prototype.toggleDeprecatedsVisible = function() {\n      return this.attachmentsFullService.toggleDeprecatedsVisible();\n    };\n\n    AttachmentsFullController.prototype.addAttachments = function(files) {\n      return _.forEach(files, (function(_this) {\n        return function(file) {\n          return _this.addAttachment(file);\n        };\n      })(this));\n    };\n\n    AttachmentsFullController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments(this.type, this.objId, this.projectId);\n    };\n\n    AttachmentsFullController.prototype.deleteAttachment = function(toDeleteAttachment) {\n      var message, title;\n      this.attachmentsPreviewService.fileId = null;\n      title = this.translate.instant(\"ATTACHMENT.TITLE_LIGHTBOX_DELETE_ATTACHMENT\");\n      message = this.translate.instant(\"ATTACHMENT.MSG_LIGHTBOX_DELETE_ATTACHMENT\", {\n        fileName: toDeleteAttachment.getIn(['file', 'name'])\n      });\n      return this.confirm.askOnDelete(title, message).then((function(_this) {\n        return function(askResponse) {\n          var onError, onSuccess;\n          onError = function() {\n            message = _this.translate.instant(\"ATTACHMENT.ERROR_DELETE_ATTACHMENT\", {\n              errorMessage: message\n            });\n            _this.confirm.notify(\"error\", null, message);\n            return askResponse.finish(false);\n          };\n          onSuccess = function() {\n            return askResponse.finish();\n          };\n          return _this.attachmentsFullService.deleteAttachment(toDeleteAttachment, _this.type).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    AttachmentsFullController.prototype.reorderAttachment = function(attachment, newIndex) {\n      return this.attachmentsFullService.reorderAttachment(this.objId, this.type, attachment, newIndex);\n    };\n\n    AttachmentsFullController.prototype.updateAttachment = function(toUpdateAttachment) {\n      return this.attachmentsFullService.updateAttachment(toUpdateAttachment, this.type);\n    };\n\n    AttachmentsFullController.prototype._isEditable = function() {\n      if (this.projectService.project) {\n        return this.projectService.hasPermission(this.editPermission);\n      }\n      return false;\n    };\n\n    AttachmentsFullController.prototype.showAttachments = function() {\n      return this._isEditable() || this.attachmentsFullService.attachments.size;\n    };\n\n    return AttachmentsFullController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"AttachmentsFull\", AttachmentsFullController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AttachmentsFullDirective, bindOnce;\n\n  bindOnce = this.taiga.bindOnce;\n\n  AttachmentsFullDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.displayAttachmentInput = function(event) {\n        angular.element('#add-attach').click();\n        return false;\n      };\n    };\n    return {\n      scope: {},\n      bindToController: {\n        type: \"@\",\n        objId: \"=\",\n        projectId: \"=\",\n        editPermission: \"@\"\n      },\n      controller: \"AttachmentsFull\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachments-full/attachments-full.html\",\n      link: link\n    };\n  };\n\n  AttachmentsFullDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsFull\", AttachmentsFullDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AttachmentsFullService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  AttachmentsFullService = (function(superClass) {\n    extend(AttachmentsFullService, superClass);\n\n    AttachmentsFullService.$inject = [\"tgAttachmentsService\", \"$rootScope\", \"$q\"];\n\n    function AttachmentsFullService(attachmentsService, rootScope, q) {\n      this.attachmentsService = attachmentsService;\n      this.rootScope = rootScope;\n      this.q = q;\n      this._attachments = Immutable.List();\n      this._deprecatedsCount = 0;\n      this._attachmentsVisible = Immutable.List();\n      this._deprecatedsVisible = false;\n      this.uploadingAttachments = [];\n      this.types = this.attachmentsService.types;\n      taiga.defineImmutableProperty(this, 'attachments', (function(_this) {\n        return function() {\n          return _this._attachments;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsCount', (function(_this) {\n        return function() {\n          return _this._deprecatedsCount;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'attachmentsVisible', (function(_this) {\n        return function() {\n          return _this._attachmentsVisible;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsVisible', (function(_this) {\n        return function() {\n          return _this._deprecatedsVisible;\n        };\n      })(this));\n    }\n\n    AttachmentsFullService.prototype.toggleDeprecatedsVisible = function() {\n      this._deprecatedsVisible = !this._deprecatedsVisible;\n      return this.regenerate();\n    };\n\n    AttachmentsFullService.prototype.regenerate = function() {\n      this._deprecatedsCount = this._attachments.count(function(it) {\n        return it.getIn(['file', 'is_deprecated']);\n      });\n      if (this._deprecatedsVisible) {\n        return this._attachmentsVisible = this._attachments;\n      } else {\n        return this._attachmentsVisible = this._attachments.filter(function(it) {\n          return !it.getIn(['file', 'is_deprecated']);\n        });\n      }\n    };\n\n    AttachmentsFullService.prototype.addAttachment = function(projectId, objId, type, file, editable, comment) {\n      if (editable == null) {\n        editable = true;\n      }\n      if (comment == null) {\n        comment = false;\n      }\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          var promise;\n          if (_this.attachmentsService.validate(file)) {\n            _this.uploadingAttachments.push(file);\n            promise = _this.attachmentsService.upload(file, objId, projectId, type, comment);\n            return promise.then(function(file) {\n              var attachment;\n              _this.uploadingAttachments = _this.uploadingAttachments.filter(function(uploading) {\n                return uploading.name !== file.get('name');\n              });\n              attachment = Immutable.Map();\n              attachment = attachment.merge({\n                file: file,\n                editable: editable,\n                loading: false,\n                from_comment: comment\n              });\n              _this._attachments = _this._attachments.push(attachment);\n              _this.regenerate();\n              _this.rootScope.$broadcast(\"attachment:create\");\n              return resolve(attachment);\n            });\n          } else {\n            return reject(new Error(file));\n          }\n        };\n      })(this));\n    };\n\n    AttachmentsFullService.prototype.loadAttachments = function(type, objId, projectId) {\n      return this.attachmentsService.list(type, objId, projectId).then((function(_this) {\n        return function(files) {\n          _this._attachments = files.map(function(file) {\n            var attachment;\n            attachment = Immutable.Map();\n            return attachment.merge({\n              loading: false,\n              editable: false,\n              file: file\n            });\n          });\n          _this.rootScope.$broadcast(\"attachments:loaded\", _this._attachments);\n          return _this.regenerate();\n        };\n      })(this));\n    };\n\n    AttachmentsFullService.prototype.deleteAttachment = function(toDeleteAttachment, type) {\n      var onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this._attachments = _this._attachments.filter(function(attachment) {\n            return attachment !== toDeleteAttachment;\n          });\n          return _this.regenerate();\n        };\n      })(this);\n      return this.attachmentsService[\"delete\"](type, toDeleteAttachment.getIn(['file', 'id'])).then(onSuccess);\n    };\n\n    AttachmentsFullService.prototype.reorderAttachment = function(objectId, type, attachment, newIndex) {\n      var afterAttachmentId, attachments, oldIndex, previousAttachment;\n      oldIndex = this.attachments.findIndex(function(it) {\n        return it === attachment;\n      });\n      attachments = this.attachments.remove(oldIndex);\n      attachments = attachments.splice(newIndex, 0, attachment);\n      attachments = attachments.map(function(x, i) {\n        return x.setIn(['file', 'order'], i + 1);\n      });\n      this._attachments = attachments;\n      this.regenerate();\n      afterAttachmentId = null;\n      if (newIndex > 0) {\n        previousAttachment = this.attachments.get(newIndex - 1);\n        afterAttachmentId = previousAttachment.getIn(['file', 'id']);\n      }\n      return this.attachmentsService.bulkUpdateOrder(objectId, type, afterAttachmentId, [attachment.getIn(['file', 'id'])]);\n    };\n\n    AttachmentsFullService.prototype.updateAttachment = function(toUpdateAttachment, type) {\n      var index, oldAttachment, patch;\n      index = this._attachments.findIndex(function(attachment) {\n        return attachment.getIn(['file', 'id']) === toUpdateAttachment.getIn(['file', 'id']);\n      });\n      oldAttachment = this._attachments.get(index);\n      patch = taiga.patch(oldAttachment.get('file'), toUpdateAttachment.get('file'));\n      if (toUpdateAttachment.get('loading')) {\n        return this.setAttachments(index, toUpdateAttachment);\n      } else {\n        if (_.isEmpty(patch)) {\n          return this.setAttachments(index, toUpdateAttachment);\n        } else {\n          return this.attachmentsService.patch(toUpdateAttachment.getIn(['file', 'id']), type, patch).then((function(_this) {\n            return function() {\n              return _this.setAttachments(index, toUpdateAttachment);\n            };\n          })(this));\n        }\n      }\n    };\n\n    AttachmentsFullService.prototype.setAttachments = function(index, toUpdateAttachment) {\n      this._attachments = this._attachments.set(index, toUpdateAttachment);\n      return this.regenerate();\n    };\n\n    return AttachmentsFullService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgAttachmentsFullService\", AttachmentsFullService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AttachmentsPreviewController;\n\n  AttachmentsPreviewController = (function() {\n    AttachmentsPreviewController.$inject = [\"tgAttachmentsPreviewService\"];\n\n    function AttachmentsPreviewController(attachmentsPreviewService) {\n      this.attachmentsPreviewService = attachmentsPreviewService;\n      taiga.defineImmutableProperty(this, \"current\", (function(_this) {\n        return function() {\n          if (!_this.attachmentsPreviewService.fileId) {\n            return null;\n          }\n          return _this.getCurrent();\n        };\n      })(this));\n    }\n\n    AttachmentsPreviewController.prototype.hasPagination = function() {\n      var images;\n      images = this.attachments.filter((function(_this) {\n        return function(attachment) {\n          return taiga.isImage(attachment.getIn(['file', 'name']));\n        };\n      })(this));\n      return images.size > 1;\n    };\n\n    AttachmentsPreviewController.prototype.getCurrent = function() {\n      var attachment, file;\n      attachment = this.attachments.find((function(_this) {\n        return function(attachment) {\n          return _this.attachmentsPreviewService.fileId === attachment.getIn(['file', 'id']);\n        };\n      })(this));\n      if (!attachment) {\n        return null;\n      }\n      file = attachment.get('file');\n      return file;\n    };\n\n    AttachmentsPreviewController.prototype.getIndex = function() {\n      return this.attachments.findIndex((function(_this) {\n        return function(attachment) {\n          return _this.attachmentsPreviewService.fileId === attachment.getIn(['file', 'id']);\n        };\n      })(this));\n    };\n\n    AttachmentsPreviewController.prototype.next = function() {\n      var attachmentIndex, image;\n      attachmentIndex = this.getIndex();\n      image = this.attachments.slice(attachmentIndex + 1).find(function(attachment) {\n        return taiga.isImage(attachment.getIn(['file', 'name']));\n      });\n      if (!image) {\n        image = this.attachments.find(function(attachment) {\n          return taiga.isImage(attachment.getIn(['file', 'name']));\n        });\n      }\n      return this.attachmentsPreviewService.fileId = image.getIn(['file', 'id']);\n    };\n\n    AttachmentsPreviewController.prototype.previous = function() {\n      var attachmentIndex, image;\n      attachmentIndex = this.getIndex();\n      image = this.attachments.slice(0, attachmentIndex).findLast(function(attachment) {\n        return taiga.isImage(attachment.getIn(['file', 'name']));\n      });\n      if (!image) {\n        image = this.attachments.findLast(function(attachment) {\n          return taiga.isImage(attachment.getIn(['file', 'name']));\n        });\n      }\n      return this.attachmentsPreviewService.fileId = image.getIn(['file', 'id']);\n    };\n\n    return AttachmentsPreviewController;\n\n  })();\n\n  angular.module('taigaComponents').controller('AttachmentsPreview', AttachmentsPreviewController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AttachmentPreviewLightboxDirective;\n\n  AttachmentPreviewLightboxDirective = function(lightboxService, attachmentsPreviewService) {\n    var link;\n    link = function($scope, el, attrs, ctrl) {\n      $(document.body).on(\"keydown.image-preview\", function(e) {\n        if (attachmentsPreviewService.fileId) {\n          if (e.keyCode === 39) {\n            ctrl.next();\n          } else if (e.keyCode === 37) {\n            ctrl.previous();\n          }\n        }\n        return $scope.$digest();\n      });\n      return $scope.$on('$destroy', function() {\n        return $(document.body).off('.image-preview');\n      });\n    };\n    return {\n      scope: {},\n      controller: 'AttachmentsPreview',\n      templateUrl: 'components/attachments-preview/attachments-preview.html',\n      link: link,\n      controllerAs: \"vm\",\n      bindToController: {\n        attachments: \"=\"\n      }\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAttachmentsPreview\", [\"lightboxService\", \"tgAttachmentsPreviewService\", AttachmentPreviewLightboxDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AttachmentsPreviewService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  AttachmentsPreviewService = (function(superClass) {\n    extend(AttachmentsPreviewService, superClass);\n\n    AttachmentsPreviewService.$inject = [];\n\n    function AttachmentsPreviewService() {}\n\n    return AttachmentsPreviewService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgAttachmentsPreviewService\", AttachmentsPreviewService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AttachmentsSimpleController;\n\n  AttachmentsSimpleController = (function() {\n    AttachmentsSimpleController.$inject = [\"tgAttachmentsService\"];\n\n    function AttachmentsSimpleController(attachmentsService) {\n      this.attachmentsService = attachmentsService;\n    }\n\n    AttachmentsSimpleController.prototype.addAttachment = function(file) {\n      var attachment;\n      attachment = Immutable.fromJS({\n        file: file,\n        name: file.name,\n        size: file.size\n      });\n      if (this.attachmentsService.validate(file)) {\n        this.attachments = this.attachments.push(attachment);\n        if (this.onAdd) {\n          return this.onAdd({\n            attachment: attachment\n          });\n        }\n      }\n    };\n\n    AttachmentsSimpleController.prototype.addAttachments = function(files) {\n      return _.forEach(files, this.addAttachment.bind(this));\n    };\n\n    AttachmentsSimpleController.prototype.deleteAttachment = function(toDeleteAttachment) {\n      this.attachments = this.attachments.filter(function(attachment) {\n        return attachment !== toDeleteAttachment;\n      });\n      if (this.onDelete) {\n        return this.onDelete({\n          attachment: toDeleteAttachment\n        });\n      }\n    };\n\n    return AttachmentsSimpleController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"AttachmentsSimple\", AttachmentsSimpleController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AttachmentsSimpleDirective;\n\n  AttachmentsSimpleDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.displayAttachmentInput = function(event) {\n        angular.element('#add-attach').click();\n        return false;\n      };\n    };\n    return {\n      scope: {},\n      bindToController: {\n        attachments: \"=\",\n        onAdd: \"&\",\n        onDelete: \"&\"\n      },\n      controller: \"AttachmentsSimple\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachments-simple/attachments-simple.html\",\n      link: link\n    };\n  };\n\n  AttachmentsSimpleDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsSimple\", AttachmentsSimpleDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AttachmentSortableDirective;\n\n  AttachmentSortableDirective = function($parse) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      callback = $parse(attrs.tgAttachmentsSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('div[tg-bind-scope]');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var attachment, newIndex;\n        item = $(item);\n        attachment = item.scope().attachment;\n        newIndex = item.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            attachment: attachment,\n            index: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  AttachmentSortableDirective.$inject = [\"$parse\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsSortable\", AttachmentSortableDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AutoSelectDirective;\n\n  AutoSelectDirective = function($timeout) {\n    return {\n      link: function(scope, elm) {\n        return $timeout(function() {\n          return elm[0].select();\n        });\n      }\n    };\n  };\n\n  AutoSelectDirective.$inject = ['$timeout'];\n\n  angular.module(\"taigaComponents\").directive(\"tgAutoSelect\", AutoSelectDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AvatarDirective;\n\n  AvatarDirective = function(avatarService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var attributeName;\n      if (attrs.tgAvatarBig) {\n        attributeName = 'avatarBig';\n      } else {\n        attributeName = 'avatar';\n      }\n      return scope.$watch(attributeName, function(user) {\n        var avatar;\n        avatar = avatarService.getAvatar(user, attributeName);\n        el.attr('src', avatar.url);\n        el.attr('title', \"\" + avatar.fullName);\n        el.attr('alt', \"\" + avatar.fullName);\n        return el.css('background', avatar.bg || \"\");\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        avatar: \"=tgAvatar\",\n        avatarBig: \"=tgAvatarBig\"\n      }\n    };\n  };\n\n  AvatarDirective.$inject = ['tgAvatarService'];\n\n  angular.module(\"taigaComponents\").directive(\"tgAvatar\", AvatarDirective);\n\n  angular.module(\"taigaComponents\").directive(\"tgAvatarBig\", AvatarDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var BelongToEpicsDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  BelongToEpicsDirective = function($translate, $confirm, $rs, $rs2, lightboxService) {\n    var link, templateUrl;\n    link = function(scope, el, attrs) {\n      var updateEpics;\n      scope.$watch('epics', function(epics) {\n        return updateEpics(epics);\n      });\n      scope.$on(\"related-epics:changed\", function(ctx, userStory) {\n        return $rs.userstories.getByRef(userStory.project, userStory.ref, {}).then(function(us) {\n          scope.item.epics = us.epics;\n          return updateEpics(us.epics);\n        });\n      });\n      scope.removeEpicRelationship = function(epic) {\n        var message, title;\n        title = $translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.TITLE\");\n        message = $translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.MESSAGE\", {\n          epicSubject: epic.get('subject')\n        });\n        return $confirm.ask(title, null, message).then(function(askResponse) {\n          var epicId, onError, onSuccess, usId;\n          onSuccess = function() {\n            askResponse.finish();\n            return scope.$broadcast(\"related-epics:changed\", scope.item);\n          };\n          onError = function() {\n            askResponse.finish(false);\n            return $confirm.notify(\"error\");\n          };\n          epicId = epic.get('id');\n          usId = scope.item.id;\n          return $rs2.epics.deleteRelatedUserstory(epicId, usId).then(onSuccess, onError);\n        });\n      };\n      return updateEpics = function(epics) {\n        scope.epicsLength = 0;\n        scope.immutable_epics = [];\n        if (epics && !epics.isIterable) {\n          scope.epicsLength = epics.length;\n          return scope.immutable_epics = Immutable.fromJS(epics);\n        }\n      };\n    };\n    templateUrl = function(el, attrs) {\n      if (attrs.format) {\n        return \"components/belong-to-epics/belong-to-epics-\" + attrs.format + \".html\";\n      }\n      return \"components/belong-to-epics/belong-to-epics-pill.html\";\n    };\n    return {\n      link: link,\n      scope: {\n        epics: '=',\n        item: \"=\"\n      },\n      templateUrl: templateUrl\n    };\n  };\n\n  module.directive(\"tgBelongToEpics\", [\"$translate\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"lightboxService\", BelongToEpicsDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var BindCode;\n\n  BindCode = function($sce, $parse, $compile, wysiwygService) {\n    return {\n      restrict: 'A',\n      compile: function(tElement, tAttrs) {\n        var render, tgBindWysiwygHtmlGetter, tgBindWysiwygHtmlWatch;\n        tgBindWysiwygHtmlGetter = $parse(tAttrs.tgBindWysiwygHtml);\n        tgBindWysiwygHtmlWatch = $parse(tAttrs.tgBindWysiwygHtml, function(value) {\n          return (value || '').toString();\n        });\n        $compile.$$addBindingClass(tElement);\n        render = (function(_this) {\n          return function(element, html) {\n            var anchor;\n            window._extraValidHtmlElments = {\n              input: true\n            };\n            window._extraValidAttrs = {\n              checked: true\n            };\n            element.html($sce.getTrustedHtml(html) || '');\n            element[0].querySelectorAll('pre code').forEach(function(block) {\n              var blockClasses, language, match, matchResult, resultHighlight;\n              blockClasses = block.className + ' ';\n              blockClasses += block.parentNode ? block.parentNode.className : '';\n              match = /\\blang(?:uage)?-([\\w-]+)\\b/i.exec(blockClasses);\n              matchResult = 'plaintext';\n              if (match && match.length) {\n                matchResult = match[1];\n              }\n              language = hljs.getLanguage(matchResult);\n              if (language) {\n                return resultHighlight = hljs.highlightBlock(block);\n              } else {\n                return ljs.load((\"/\" + window._version + \"/highlightjs-languages/\") + matchResult + \".min.js\", function() {\n                  return hljs.highlightBlock(block);\n                });\n              }\n            });\n            anchor = element[0].querySelectorAll('a[href^=\"#\"]');\n            return anchor.forEach(function(link) {\n              return link.addEventListener('click', function(e) {\n                var node;\n                e.preventDefault();\n                node = document.querySelector(link.getAttribute('href'));\n                if (node) {\n                  return node.scrollIntoView();\n                }\n              });\n            });\n          };\n        })(this);\n        return function(scope, element, attr) {\n          $compile.$$addBindingInfo(element, attr.tgBindWysiwygHtml);\n          return scope.$watch(tgBindWysiwygHtmlWatch, function() {\n            var html;\n            html = wysiwygService.getHTML(tgBindWysiwygHtmlGetter(scope));\n            html = wysiwygService.relativePaths(html);\n            wysiwygService.refreshAttachmentURL(html).then((function(_this) {\n              return function(html) {\n                return render(element, html);\n              };\n            })(this));\n            return render(element, html);\n          });\n        };\n      }\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgBindWysiwygHtml\", [\"$sce\", \"$parse\", \"$compile\", \"tgWysiwygService\", BindCode]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var BoardZoomDirective;\n\n  BoardZoomDirective = function() {\n    return {\n      scope: {\n        levels: \"=\",\n        value: \"=\"\n      },\n      templateUrl: 'components/board-zoom/board-zoom.html'\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgBoardZoom\", [BoardZoomDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CardSlideshowController;\n\n  CardSlideshowController = (function() {\n    CardSlideshowController.$inject = [];\n\n    function CardSlideshowController() {\n      this.index = 0;\n    }\n\n    CardSlideshowController.prototype.next = function() {\n      this.index++;\n      if (this.index >= this.images.size) {\n        return this.index = 0;\n      }\n    };\n\n    CardSlideshowController.prototype.previous = function() {\n      this.index--;\n      if (this.index < 0) {\n        return this.index = this.images.size - 1;\n      }\n    };\n\n    return CardSlideshowController;\n\n  })();\n\n  angular.module('taigaComponents').controller('CardSlideshow', CardSlideshowController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var cardSlideshowDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  cardSlideshowDirective = function() {\n    return {\n      controller: \"CardSlideshow\",\n      templateUrl: \"components/card-slideshow/card-slideshow.html\",\n      bindToController: true,\n      controllerAs: \"vm\",\n      scope: {\n        images: \"=\"\n      }\n    };\n  };\n\n  module.directive('tgCardSlideshow', cardSlideshowDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CardController;\n\n  CardController = (function() {\n    CardController.$inject = [\"$scope\"];\n\n    function CardController(scope1) {\n      this.scope = scope1;\n    }\n\n    CardController.prototype.getLinkParams = function() {\n      var ParsedLastLoadUserstoriesParams, ctrl, lastLoadUserstoriesParams;\n      ctrl = taiga.findScope(this.scope, function(scope) {\n        if (scope && scope.ctrl) {\n          return scope.ctrl;\n        }\n        return false;\n      });\n      lastLoadUserstoriesParams = ctrl.lastLoadUserstoriesParams;\n      if (lastLoadUserstoriesParams) {\n        lastLoadUserstoriesParams['status'] = this.scope.vm.item.getIn(['model', 'status']);\n        lastLoadUserstoriesParams['swimlane'] = this.scope.vm.item.getIn(['model', 'swimlane']);\n        lastLoadUserstoriesParams = _.pickBy(lastLoadUserstoriesParams, _.identity);\n        if (ctrl.scope.swimlanesList.size && !lastLoadUserstoriesParams['swimlane']) {\n          lastLoadUserstoriesParams.swimlane = \"null\";\n        }\n        ParsedLastLoadUserstoriesParams = {};\n        Object.keys(lastLoadUserstoriesParams).forEach(function(key) {\n          return ParsedLastLoadUserstoriesParams['kanban-' + key] = lastLoadUserstoriesParams[key];\n        });\n        return ParsedLastLoadUserstoriesParams;\n      } else {\n        return {};\n      }\n    };\n\n    CardController.prototype.visible = function(name) {\n      return this.zoom.indexOf(name) !== -1;\n    };\n\n    CardController.prototype.hasTasks = function() {\n      var tasks;\n      tasks = this.item.getIn(['model', 'tasks']);\n      return tasks && tasks.size > 0;\n    };\n\n    CardController.prototype.getTagColor = function(color) {\n      if (color) {\n        return color;\n      }\n      return \"#A9AABC\";\n    };\n\n    CardController.prototype.hasMultipleAssignedUsers = function() {\n      var assignedUsers;\n      assignedUsers = this.item.getIn(['model', 'assigned_users']);\n      return assignedUsers && assignedUsers.size > 1;\n    };\n\n    CardController.prototype.hasVisibleAttachments = function() {\n      return this.item.get('images').size > 0;\n    };\n\n    CardController.prototype.toggleFold = function() {\n      return this.onToggleFold({\n        id: this.item.get('id')\n      });\n    };\n\n    CardController.prototype.getClosedTasks = function() {\n      return this.item.getIn(['model', 'tasks']).filter(function(task) {\n        return task.get('is_closed');\n      });\n    };\n\n    CardController.prototype.closedTasksPercent = function() {\n      return this.getClosedTasks().size * 100 / this.item.getIn(['model', 'tasks']).size;\n    };\n\n    CardController.prototype.getModifyPermisionKey = function() {\n      if (this.type === 'task') {\n        return 'modify_task';\n      } else {\n        return 'modify_us';\n      }\n    };\n\n    CardController.prototype.getDeletePermisionKey = function() {\n      if (this.type === 'task') {\n        return 'delete_task';\n      } else {\n        return 'delete_us';\n      }\n    };\n\n    CardController.prototype._setVisibility = function() {\n      var visibility;\n      visibility = {\n        related: this.visible('related_tasks'),\n        slides: this.visible('attachments')\n      };\n      if (!_.isUndefined(this.item.get('foldStatusChanged')) && this.visible('unfold')) {\n        if (this.zoomLevel === 2) {\n          visibility.related = this.item.get('foldStatusChanged');\n          visibility.slides = this.item.get('foldStatusChanged');\n        } else {\n          visibility.related = !this.item.get('foldStatusChanged');\n          visibility.slides = !this.item.get('foldStatusChanged');\n        }\n      }\n      if (!this.item.getIn(['model', 'tasks']) || !this.item.getIn(['model', 'tasks']).size) {\n        visibility.related = false;\n      }\n      if (!this.item.get('images') || !this.item.get('images').size) {\n        visibility.slides = false;\n      }\n      return visibility;\n    };\n\n    CardController.prototype.isRelatedTasksVisible = function() {\n      var visibility;\n      visibility = this._setVisibility();\n      return visibility.related;\n    };\n\n    CardController.prototype.isSlideshowVisible = function() {\n      var visibility;\n      visibility = this._setVisibility();\n      return visibility.slides;\n    };\n\n    CardController.prototype.getNavKey = function() {\n      if (this.type === 'task') {\n        return 'project-tasks-detail';\n      } else if (this.type === 'issue') {\n        return 'project-issues-detail';\n      } else {\n        return 'project-userstories-detail';\n      }\n    };\n\n    return CardController;\n\n  })();\n\n  angular.module('taigaComponents').controller('Card', CardController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var cardDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  cardDirective = function() {\n    return {\n      controller: \"Card\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/card/card.html\",\n      bindToController: {\n        onToggleFold: \"&\",\n        onClickAssignedTo: \"&\",\n        onClickEdit: \"&\",\n        onClickRemove: \"&\",\n        onClickDelete: \"&\",\n        onClickMoveToTop: \"&\",\n        project: \"<\",\n        item: \"<\",\n        zoom: \"<\",\n        zoomLevel: \"<\",\n        archived: \"<\",\n        inViewPort: \"<\",\n        folded: \"<\",\n        type: \"@\",\n        isFirst: \"<\"\n      }\n    };\n  };\n\n  module.directive('tgCard', cardDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ClickInputFile;\n\n  ClickInputFile = function() {\n    return {\n      link: function(scope, el) {\n        el.on('click', function(e) {\n          var inputFile;\n          if (!$(e.target).is('input')) {\n            e.preventDefault();\n            inputFile = el.find('input[type=\"file\"]');\n            inputFile.val('');\n            return inputFile.trigger('click');\n          }\n        });\n        return scope.$on(\"$destroy\", function() {\n          return el.off();\n        });\n      }\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgClickInputFile\", [ClickInputFile]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ColorSelectorController, getDefaulColorList, taiga;\n\n  taiga = this.taiga;\n\n  getDefaulColorList = taiga.getDefaulColorList;\n\n  ColorSelectorController = (function() {\n    ColorSelectorController.$inject = [\"tgProjectService\"];\n\n    function ColorSelectorController(projectService) {\n      this.projectService = projectService;\n      this.colorList = getDefaulColorList();\n      this.checkIsColorRequired();\n      this.displayColorList = false;\n    }\n\n    ColorSelectorController.prototype.userCanChangeColor = function() {\n      if (!this.requiredPerm) {\n        return true;\n      }\n      return this.projectService.hasPermission(this.requiredPerm);\n    };\n\n    ColorSelectorController.prototype.checkIsColorRequired = function() {\n      if (!this.isColorRequired) {\n        return this.colorList = _.dropRight(this.colorList);\n      }\n    };\n\n    ColorSelectorController.prototype.setColor = function(color) {\n      this.color = color;\n      return this.customColor = color;\n    };\n\n    ColorSelectorController.prototype.resetColor = function() {\n      if (this.isColorRequired && !this.color) {\n        return this.color = this.initColor;\n      }\n    };\n\n    ColorSelectorController.prototype.toggleColorList = function() {\n      this.displayColorList = !this.displayColorList;\n      this.customColor = this.color;\n      return this.resetColor();\n    };\n\n    ColorSelectorController.prototype.onSelectDropdownColor = function(color) {\n      this.color = color;\n      this.onSelectColor({\n        color: color\n      });\n      return this.toggleColorList();\n    };\n\n    ColorSelectorController.prototype.onKeyDown = function(event) {\n      if (event.which === 13) {\n        if (this.customColor || !this.isColorRequired) {\n          this.onSelectDropdownColor(this.customColor);\n        }\n        return event.preventDefault();\n      }\n    };\n\n    return ColorSelectorController;\n\n  })();\n\n  angular.module('taigaComponents').controller(\"ColorSelectorCtrl\", ColorSelectorController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ColorSelectorDirective, bindOnce;\n\n  bindOnce = this.taiga.bindOnce;\n\n  ColorSelectorDirective = function($timeout) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var _timeout, cancel, close;\n      _timeout = null;\n      cancel = function() {\n        $timeout.cancel(_timeout);\n        return _timeout = null;\n      };\n      close = function() {\n        if (_timeout) {\n          return;\n        }\n        return _timeout = $timeout((function() {\n          ctrl.displayColorList = false;\n          return ctrl.resetColor();\n        }), 400);\n      };\n      el.find('.color-selector').mouseenter(cancel).mouseleave(close);\n      el.find('.color-selector-dropdown').mouseenter(cancel).mouseleave(close);\n      return scope.$watch('vm.initColor', function(color) {\n        return ctrl.setColor(color);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/color-selector/color-selector.html\",\n      controller: \"ColorSelectorCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        isColorRequired: \"=\",\n        onSelectColor: \"&\",\n        initColor: \"=\",\n        requiredPerm: \"@\"\n      },\n      scope: {}\n    };\n  };\n\n  ColorSelectorDirective.$inject = [\"$timeout\"];\n\n  angular.module('taigaComponents').directive(\"tgColorSelector\", ColorSelectorDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DetailHeaderController, module;\n\n  module = angular.module('taigaBase');\n\n  DetailHeaderController = (function() {\n    DetailHeaderController.$inject = [\"$rootScope\", \"$tgConfirm\", \"$tgQueueModelTransformation\", \"$tgNavUrls\", \"$window\"];\n\n    function DetailHeaderController(rootScope, confirm, modelTransform, navUrls, window) {\n      this.rootScope = rootScope;\n      this.confirm = confirm;\n      this.modelTransform = modelTransform;\n      this.navUrls = navUrls;\n      this.window = window;\n      this.editMode = false;\n      this.loadingSubject = false;\n      this.originalSubject = this.item.subject;\n      this.objType = {\n        'tasks': 'task',\n        'issues': 'issue',\n        'userstories': 'us'\n      }[this.item._name];\n    }\n\n    DetailHeaderController.prototype._checkPermissions = function() {\n      return this.permissions = {\n        canEdit: _.includes(this.project.my_permissions, this.requiredPerm)\n      };\n    };\n\n    DetailHeaderController.prototype.cancelEdit = function() {\n      this.editMode = false;\n      return this.item.subject = this.originalSubject;\n    };\n\n    DetailHeaderController.prototype.editSubject = function(value) {\n      var selection;\n      selection = this.window.getSelection();\n      if (selection.type !== \"Range\") {\n        if (value) {\n          this.editMode = true;\n        }\n        if (!value) {\n          return this.editMode = false;\n        }\n      }\n    };\n\n    DetailHeaderController.prototype.onKeyDown = function(event) {\n      if (event.which === 13) {\n        this.saveSubject();\n      }\n      if (event.which === 27) {\n        this.item.subject = this.originalSubject;\n        return this.editSubject(false);\n      }\n    };\n\n    DetailHeaderController.prototype.saveSubject = function() {\n      var item, onEditSubjectError, onEditSubjectSuccess, transform;\n      onEditSubjectSuccess = (function(_this) {\n        return function() {\n          _this.loadingSubject = false;\n          _this.rootScope.$broadcast(\"object:updated\");\n          _this.confirm.notify('success');\n          return _this.originalSubject = _this.item.subject;\n        };\n      })(this);\n      onEditSubjectError = (function(_this) {\n        return function() {\n          _this.loadingSubject = false;\n          return _this.confirm.notify('error');\n        };\n      })(this);\n      this.editMode = false;\n      this.loadingSubject = true;\n      item = this.item;\n      transform = this.modelTransform.save(function(item) {\n        return item;\n      });\n      return transform.then(onEditSubjectSuccess, onEditSubjectError);\n    };\n\n    return DetailHeaderController;\n\n  })();\n\n  module.controller(\"DetailHeaderCtrl\", DetailHeaderController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DetailHeaderDirective, module;\n\n  module = angular.module('taigaBase');\n\n  DetailHeaderDirective = function($tgWysiwygService) {\n    var link;\n    this.$inject = [];\n    link = function(scope, el, attrs, ctrl) {\n      scope.blocked_html_note = '';\n      scope.$watch(\"vm.item.blocked_note\", function(blocked_note) {\n        var html_note;\n        html_note = $tgWysiwygService.getHTML(blocked_note);\n        return scope.blocked_html_note = html_note;\n      });\n      return ctrl._checkPermissions();\n    };\n    return {\n      link: link,\n      controller: \"DetailHeaderCtrl\",\n      bindToController: true,\n      scope: {\n        item: \"=\",\n        project: \"=\",\n        sectionName: \"=\",\n        requiredPerm: \"@\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/detail/header/detail-header.html\"\n    };\n  };\n\n  module.directive(\"tgDetailHeader\", [\"tgWysiwygService\", DetailHeaderDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DetailNavController, module;\n\n  module = angular.module(\"taigaBase\");\n\n  DetailNavController = (function() {\n    DetailNavController.$inject = [\"$tgNavUrls\", \"$tgResources\"];\n\n    function DetailNavController(navUrls, rs) {\n      this.navUrls = navUrls;\n      this.rs = rs;\n      return;\n    }\n\n    DetailNavController.prototype._checkNav = function() {\n      var ctx, index, neighbors, noMilestone, params, ref1, ref2, uss;\n      params = this.rs.userstories.getQueryParams(this.item.project_extra_info.id);\n      noMilestone = params.milestone === 'null';\n      neighbors = this.item.neighbors;\n      this.previousUrl = null;\n      this.nextUrl = null;\n      if (noMilestone) {\n        uss = this.rs.userstories.getBacklog(this.item.project_extra_info.id);\n        index = uss.findIndex((function(_this) {\n          return function(ref) {\n            return ref === _this.item.ref;\n          };\n        })(this));\n        if (index !== -1) {\n          neighbors = {\n            previous: {\n              ref: uss[index - 1]\n            },\n            next: {\n              ref: uss[index + 1]\n            }\n          };\n        }\n      }\n      if (((ref1 = neighbors.previous) != null ? ref1.ref : void 0) != null) {\n        ctx = {\n          project: this.item.project_extra_info.slug,\n          ref: neighbors.previous.ref\n        };\n        this.previousUrl = this.navUrls.resolve(\"project-\" + this.item._name + \"-detail\", ctx);\n      }\n      if (((ref2 = neighbors.next) != null ? ref2.ref : void 0) != null) {\n        ctx = {\n          project: this.item.project_extra_info.slug,\n          ref: neighbors.next.ref\n        };\n        return this.nextUrl = this.navUrls.resolve(\"project-\" + this.item._name + \"-detail\", ctx);\n      }\n    };\n\n    return DetailNavController;\n\n  })();\n\n  module.controller(\"DetailNavCtrl\", DetailNavController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DetailNavDirective, module;\n\n  module = angular.module('taigaBase');\n\n  DetailNavDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.$watch(\"vm.item\", function(value) {\n        if (!value) {\n          return;\n        }\n        return ctrl._checkNav();\n      });\n    };\n    return {\n      link: link,\n      controller: \"DetailNavCtrl\",\n      bindToController: true,\n      scope: {\n        item: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/detail/nav/detail-nav.html\"\n    };\n  };\n\n  module.directive(\"tgDetailNav\", DetailNavDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DueDateController;\n\n  DueDateController = (function() {\n    DueDateController.$inject = [\"tgDueDateService\", \"tgLightboxFactory\"];\n\n    function DueDateController(dueDateService, tgLightboxFactory) {\n      this.dueDateService = dueDateService;\n      this.tgLightboxFactory = tgLightboxFactory;\n    }\n\n    DueDateController.prototype.visible = function() {\n      return this.dueDateService.visible(this._getScope());\n    };\n\n    DueDateController.prototype.disabled = function() {\n      return this.dueDateService.disabled(this._getScope());\n    };\n\n    DueDateController.prototype.color = function() {\n      return this.dueDateService.color(this._getScope());\n    };\n\n    DueDateController.prototype.title = function() {\n      return this.dueDateService.title(this._getScope());\n    };\n\n    DueDateController.prototype.setDueDate = function() {\n      if (this.disabled()) {\n        return;\n      }\n      return this.tgLightboxFactory.create(\"tg-lb-set-due-date\", {\n        \"class\": \"lightbox lightbox-set-due-date\"\n      }, {\n        \"object\": this.item,\n        \"notAutoSave\": this.notAutoSave\n      });\n    };\n\n    DueDateController.prototype._getScope = function() {\n      return {\n        dueDate: this.dueDate,\n        isClosed: this.isClosed,\n        item: this.item,\n        objType: this.objType,\n        format: this.format,\n        notAutoSave: this.notAutoSave\n      };\n    };\n\n    return DueDateController;\n\n  })();\n\n  angular.module('taigaComponents').controller('DueDateCtrl', DueDateController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var dueDatePopoverDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  dueDatePopoverDirective = function($translate, datePickerConfigService) {\n    return {\n      link: function(scope, el, attrs, ctrl) {\n        var datePickerConfig;\n        scope.open = false;\n        datePickerConfig = datePickerConfigService.get();\n        _.merge(datePickerConfig, {\n          field: el.find('.due-date-button')[0],\n          container: el.find('.date-picker-container')[0],\n          bound: true,\n          onClose: function() {\n            scope.open = false;\n            return scope.$apply();\n          },\n          onSelect: function() {\n            return ctrl.dueDate = this.getMoment().format('YYYY-MM-DD');\n          }\n        });\n        el.picker = new Pikaday(datePickerConfig);\n        el.on(\"click\", \".due-date-button\", function(event) {\n          event.preventDefault();\n          event.stopPropagation();\n          if (scope.open) {\n            el.picker.hide();\n            return;\n          }\n          if (!el.picker.getDate() && ctrl.dueDate) {\n            el.picker.setDate(moment(ctrl.dueDate).format('YYYY-MM-DD'));\n          }\n          el.picker.show();\n          scope.open = true;\n          return scope.$apply();\n        });\n        el.on(\"click\", \".date-picker-clean\", function(event) {\n          event.preventDefault();\n          event.stopPropagation();\n          ctrl.dueDate = null;\n          el.picker.setDate(ctrl.dueDate);\n          scope.open = false;\n          el.picker.hide();\n          return scope.$apply();\n        });\n        return scope.$on(\"status:changed\", function(ctx, status) {\n          return ctrl.isClosed = ctrl.item.is_closed;\n        });\n      },\n      controller: \"DueDateCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: \"components/due-date/due-date-popover.html\",\n      scope: {\n        dueDate: '=',\n        isClosed: '=',\n        item: '=',\n        objType: '@',\n        format: '@',\n        notAutoSave: '='\n      }\n    };\n  };\n\n  module.directive('tgDueDatePopover', ['$translate', 'tgDatePickerConfigService', dueDatePopoverDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var dueDateDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  dueDateDirective = function($translate, datePickerConfigService) {\n    var templateUrl;\n    templateUrl = function(el, attrs) {\n      if (attrs.format) {\n        return \"components/due-date/due-date-\" + attrs.format + \".html\";\n      }\n      return \"components/due-date/due-date-icon.html\";\n    };\n    return {\n      link: function(scope, el, attrs, ctrl) {\n        var renderDatePicker;\n        renderDatePicker = function() {\n          var datePickerConfig, prettyDate;\n          prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n          if (ctrl.dueDate) {\n            ctrl.dueDate = moment(ctrl.dueDate, prettyDate);\n          }\n          el.on(\"click\", \".date-picker-popover-trigger\", function(event) {\n            if (ctrl.disabled()) {\n              return;\n            }\n            event.preventDefault();\n            event.stopPropagation();\n            return el.find(\".date-picker-popover\").popover().open();\n          });\n          el.on(\"click\", \".date-picker-clean\", function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            ctrl.dueDate = null;\n            scope.$apply();\n            return el.find(\".date-picker-popover\").popover().close();\n          });\n          datePickerConfig = datePickerConfigService.get();\n          _.merge(datePickerConfig, {\n            field: el.find('input.due-date')[0],\n            container: el.find('.date-picker-container')[0],\n            bound: false,\n            onSelect: function() {\n              ctrl.dueDate = this.getMoment().format('YYYY-MM-DD');\n              el.find(\".date-picker-popover\").popover().close();\n              return scope.$apply();\n            }\n          });\n          return el.picker = new Pikaday(datePickerConfig);\n        };\n        if (attrs.format === 'button-popover') {\n          return renderDatePicker();\n        }\n      },\n      controller: \"DueDateCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: templateUrl,\n      scope: {\n        dueDate: '=',\n        isClosed: '=',\n        item: '=',\n        objType: '@',\n        format: '@',\n        notAutoSave: '='\n      }\n    };\n  };\n\n  module.directive('tgDueDate', ['$translate', 'tgDatePickerConfigService', dueDateDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DueDateService, taiga;\n\n  taiga = this.taiga;\n\n  DueDateService = (function() {\n    DueDateService.$inject = [\"$translate\", \"tgProjectService\"];\n\n    function DueDateService(translate, projectService) {\n      this.translate = translate;\n      this.projectService = projectService;\n      this.defaultConfig = [\n        {\n          \"color\": \"#93C45D\",\n          \"name\": \"normal due\",\n          \"days_to_due\": null,\n          \"by_default\": true\n        }, {\n          \"color\": \"#EA7B4B\",\n          \"name\": \"due soon\",\n          \"days_to_due\": 14,\n          \"by_default\": false\n        }, {\n          \"color\": \"#E44057\",\n          \"name\": \"past due\",\n          \"days_to_due\": 0,\n          \"by_default\": false\n        }\n      ];\n    }\n\n    DueDateService.prototype.visible = function(options) {\n      return options.format === 'button' || (options.dueDate != null);\n    };\n\n    DueDateService.prototype.disabled = function(options) {\n      return options.isClosed;\n    };\n\n    DueDateService.prototype.color = function(options) {\n      var ref;\n      return ((ref = this.getStatus(options)) != null ? ref.color : void 0) || null;\n    };\n\n    DueDateService.prototype.title = function(options) {\n      if (options.dueDate) {\n        return this._formatTitle(options);\n      } else if (options.format === 'button') {\n        return this.translate.instant('COMMON.DUE_DATE.TITLE_ACTION_SET_DUE_DATE');\n      }\n      return '';\n    };\n\n    DueDateService.prototype.getStatus = function(options) {\n      var config, project;\n      if (!options.dueDate) {\n        return null;\n      }\n      project = this.projectService.project.toJS();\n      config = project[options.objType + \"_duedates\"];\n      if (!config) {\n        config = this.defaultConfig;\n      }\n      return this._getAppearance(options, config);\n    };\n\n    DueDateService.prototype._getDefaultAppearance = function(config) {\n      var defaultAppearance;\n      defaultAppearance = null;\n      _.map(config, function(it) {\n        if (it.by_default === true) {\n          return defaultAppearance = it;\n        }\n      });\n      return defaultAppearance;\n    };\n\n    DueDateService.prototype._getAppearance = function(options, config) {\n      var currentAppearance, dueDate, now;\n      currentAppearance = this._getDefaultAppearance(config);\n      config = _.sortBy(config, function(o) {\n        return -o.days_to_due;\n      });\n      dueDate = moment(options.dueDate);\n      now = moment();\n      _.map(config, function(appearance) {\n        var limitDate;\n        if (appearance.days_to_due === null) {\n          return;\n        }\n        limitDate = moment(dueDate - moment.duration(appearance.days_to_due, \"days\"));\n        if (now >= limitDate) {\n          return currentAppearance = appearance;\n        }\n      });\n      return currentAppearance;\n    };\n\n    DueDateService.prototype._formatTitle = function(options) {\n      var formatedDate, prettyDate, status;\n      prettyDate = this.translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n      formatedDate = moment(options.dueDate).format(prettyDate);\n      status = this.getStatus(options);\n      if (status != null ? status.name : void 0) {\n        return formatedDate + \" (\" + status.name + \")\";\n      }\n      return formatedDate;\n    };\n\n    return DueDateService;\n\n  })();\n\n  taiga.DueDateService = DueDateService;\n\n  angular.module(\"taigaCommon\").service(\"tgDueDateService\", DueDateService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var FileChangeDirective;\n\n  FileChangeDirective = function($parse) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var eventAttr;\n      eventAttr = $parse(attrs.tgFileChange);\n      el.on('change', function(event) {\n        return scope.$apply(function() {\n          return eventAttr(scope, {\n            files: event.currentTarget.files\n          });\n        });\n      });\n      return scope.$on(\"$destroy\", function() {\n        return el.off();\n      });\n    };\n    return {\n      restrict: \"A\",\n      link: link\n    };\n  };\n\n  FileChangeDirective.$inject = [\"$parse\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgFileChange\", FileChangeDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var FilterRemoteStorageService, generateHash,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  generateHash = taiga.generateHash;\n\n  FilterRemoteStorageService = (function(superClass) {\n    extend(FilterRemoteStorageService, superClass);\n\n    FilterRemoteStorageService.$inject = [\"$q\", \"$tgUrls\", \"$tgHttp\"];\n\n    function FilterRemoteStorageService(q, urls, http) {\n      this.q = q;\n      this.urls = urls;\n      this.http = http;\n    }\n\n    FilterRemoteStorageService.prototype.storeFilters = function(projectId, myFilters, filtersHashSuffix) {\n      var deferred, hash, ns, promise, url;\n      deferred = this.q.defer();\n      url = this.urls.resolve(\"user-storage\");\n      ns = projectId + \":\" + filtersHashSuffix;\n      hash = generateHash([projectId, ns]);\n      if (_.isEmpty(myFilters)) {\n        promise = this.http[\"delete\"](url + \"/\" + hash, {\n          key: hash,\n          value: myFilters\n        });\n        promise.then(function() {\n          return deferred.resolve();\n        });\n        promise.then(null, function() {\n          return deferred.reject();\n        });\n      } else {\n        promise = this.http.put(url + \"/\" + hash, {\n          key: hash,\n          value: myFilters\n        });\n        promise.then(function(data) {\n          return deferred.resolve();\n        });\n        promise.then(null, (function(_this) {\n          return function(data) {\n            var innerPromise;\n            innerPromise = _this.http.post(\"\" + url, {\n              key: hash,\n              value: myFilters\n            });\n            innerPromise.then(function() {\n              return deferred.resolve();\n            });\n            return innerPromise.then(null, function() {\n              return deferred.reject();\n            });\n          };\n        })(this));\n      }\n      return deferred.promise;\n    };\n\n    FilterRemoteStorageService.prototype.getFilters = function(projectId, filtersHashSuffix) {\n      var deferred, hash, ns, promise, url;\n      deferred = this.q.defer();\n      url = this.urls.resolve(\"user-storage\");\n      ns = projectId + \":\" + filtersHashSuffix;\n      hash = generateHash([projectId, ns]);\n      promise = this.http.get(url + \"/\" + hash);\n      promise.then(function(data) {\n        return deferred.resolve(data.data.value);\n      });\n      promise.then(null, function(data) {\n        return deferred.resolve({});\n      });\n      return deferred.promise;\n    };\n\n    return FilterRemoteStorageService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgFilterRemoteStorageService\", FilterRemoteStorageService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var FilterSlideDownDirective;\n\n  FilterSlideDownDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var filter;\n      filter = $('tg-filter');\n      return scope.$watch(attrs.ngIf, function(value) {\n        var contentHeight, wrapperHeight;\n        if (value) {\n          filter.find('.filter-list').hide();\n          wrapperHeight = filter.height();\n          contentHeight = 0;\n          filter.children().each(function() {\n            return contentHeight += $(this).outerHeight(true);\n          });\n          return $(el.context.nextSibling).css({\n            \"display\": \"block\"\n          });\n        }\n      });\n    };\n    return {\n      priority: 900,\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgFilterSlideDown\", [FilterSlideDownDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var FilterController;\n\n  FilterController = (function() {\n    FilterController.$inject = ['$translate'];\n\n    FilterController.activeCustomFilter = null;\n\n    FilterController.repeatedFilterError = false;\n\n    FilterController.lengthZeroError = false;\n\n    function FilterController(translate) {\n      this.translate = translate;\n      this.opened = null;\n      this.filterModeOptions = [\"include\", \"exclude\"];\n      this.filterModeLabels = {\n        \"include\": this.translate.instant(\"COMMON.FILTERS.ADVANCED_FILTERS.INCLUDE\"),\n        \"exclude\": this.translate.instant(\"COMMON.FILTERS.ADVANCED_FILTERS.EXCLUDE\")\n      };\n      this.filterMode = 'include';\n      this.customFilterForm = false;\n      this.customFilterName = '';\n      this.$onChanges = function(changes) {\n        if (changes.selectedFilters) {\n          this.getIncludedFilters();\n          return this.getExcludedFilters();\n        }\n      };\n      this.includedFilters = this.getIncludedFilters();\n      this.excludedFilters = this.getExcludedFilters();\n    }\n\n    FilterController.prototype.toggleFilterCategory = function(filterName) {\n      if (this.opened === filterName) {\n        return this.opened = null;\n      } else {\n        return this.opened = filterName;\n      }\n    };\n\n    FilterController.prototype.isOpen = function(filterName) {\n      return this.opened === filterName;\n    };\n\n    FilterController.prototype.openCustomFilter = function() {\n      this.customFilterForm = true;\n      this.lengthZeroError = false;\n      return this.repeatedFilterError = false;\n    };\n\n    FilterController.prototype.saveCustomFilter = function() {\n      if (this.customFilterName.length > 0 && !this.customFilters.find((function(_this) {\n        return function(filter) {\n          return filter.name === _this.customFilterName;\n        };\n      })(this))) {\n        this.lengthZeroError = false;\n        this.repeatedFilterError = false;\n        this.onSaveCustomFilter({\n          name: this.customFilterName\n        });\n        this.customFilterForm = false;\n        this.opened = 'custom-filter';\n        this.customFilterName = '';\n      }\n      if (this.customFilterName.length === 0) {\n        this.lengthZeroError = true;\n      } else {\n        this.lengthZeroError = false;\n      }\n      if (!this.customFilters.find((function(_this) {\n        return function(filter) {\n          return filter.name === _this.customFilterName;\n        };\n      })(this))) {\n        return this.repeatedFilterError = false;\n      } else {\n        return this.repeatedFilterError = true;\n      }\n    };\n\n    FilterController.prototype.unselectFilter = function(filter) {\n      this.activeCustomFilter = null;\n      return this.onRemoveFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.selectFilter = function(filterCategory, filter) {\n      filter = {\n        category: filterCategory,\n        filter: filter,\n        mode: this.filterMode\n      };\n      this.activeCustomFilter = null;\n      return this.onAddFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.removeCustomFilter = function(filter) {\n      this.activeCustomFilter = null;\n      return this.onRemoveCustomFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.selectCustomFilter = function(filter) {\n      this.activeCustomFilter = filter.id;\n      return this.onSelectCustomFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.getIncludedFilters = function() {\n      return this.includedFilters = _.filter(this.selectedFilters, function(it) {\n        return it.mode === 'include';\n      });\n    };\n\n    FilterController.prototype.getExcludedFilters = function() {\n      return this.excludedFilters = _.filter(this.selectedFilters, function(it) {\n        return it.mode === 'exclude';\n      });\n    };\n\n    FilterController.prototype.isFilterSelected = function(filterCategory, filter) {\n      return !!_.find(this.selectedFilters, function(it) {\n        return filter.id === it.id && filterCategory.dataType === it.dataType;\n      });\n    };\n\n    return FilterController;\n\n  })();\n\n  angular.module('taigaComponents').controller('Filter', FilterController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var FilterDirective;\n\n  FilterDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var taskboard, watchTaskboardHeight;\n      watchTaskboardHeight = (function(_this) {\n        return function(taskboard) {\n          var resizeObserver;\n          resizeObserver = new ResizeObserver(function() {\n            var currentMax, maxSize;\n            maxSize = null;\n            currentMax = Number(el[0].style.getPropertyValue('--filter-list-max-height').replace('px', ''));\n            if (scope.vm.opened) {\n              maxSize = taskboard.offsetHeight - el[0].offsetHeight + currentMax;\n            } else {\n              maxSize = taskboard.offsetHeight - el[0].offsetHeight;\n            }\n            if (maxSize < 100) {\n              maxSize = 100;\n            } else if (maxSize > 380) {\n              maxSize = 380;\n            }\n            el[0].style.setProperty('--filter-list-max-height', maxSize + \"px\");\n            return resizeObserver.unobserve(el[0]);\n          });\n          return resizeObserver.observe(taskboard);\n        };\n      })(this);\n      attrs.$observe(\"open\", function(open) {\n        open = scope.$eval(open);\n        if (open) {\n          return el.addClass('open');\n        } else {\n          return el.removeClass('open');\n        }\n      });\n      taskboard = $('.js-taskboard-manager');\n      if (taskboard.length) {\n        return watchTaskboardHeight(taskboard[0]);\n      }\n    };\n    return {\n      scope: {\n        onChangeQ: \"&\",\n        onAddFilter: \"&\",\n        onSelectCustomFilter: \"&\",\n        onRemoveFilter: \"&\",\n        onRemoveCustomFilter: \"&\",\n        onSaveCustomFilter: \"&\",\n        customFilters: \"<\",\n        filters: \"<\",\n        customFilters: \"<\",\n        selectedFilters: \"<\"\n      },\n      bindToController: true,\n      controller: \"Filter\",\n      controllerAs: \"vm\",\n      templateUrl: 'components/filter/filter.html',\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgFilter\", [FilterDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var InputSearchComponent;\n\n  InputSearchComponent = {\n    bindings: {\n      q: '<',\n      change: '&'\n    },\n    template: \"<input\\n    type=\\\"search\\\"\\n    placeholder=\\\"{{'COMMON.FILTERS.INPUT_PLACEHOLDER' | translate}}\\\"\\n    ng-model=\\\"$ctrl.searchText\\\"\\n    ng-change=\\\"$ctrl.onChange($ctrl.searchText)\\\" />\\n<tg-svg svg-icon=\\\"icon-search\\\"></tg-svg>\",\n    controller: function() {\n      this.searchText = '';\n      this.dirty = false;\n      this.$onChanges = function(changes) {\n        if (changes.q && !this.dirty) {\n          return this.searchText = this.q;\n        }\n      };\n      this.onChange = (function(_this) {\n        return function(text) {\n          _this.dirty = true;\n          return _this.change({\n            q: text\n          });\n        };\n      })(this);\n    }\n  };\n\n  angular.module(\"taigaComponents\").component(\"tgInputSearch\", InputSearchComponent);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var IssuesTableController;\n\n  IssuesTableController = (function() {\n    function IssuesTableController() {}\n\n    IssuesTableController.prototype.edit = function(issue) {\n      return this.onEditIssue({\n        id: issue.id\n      });\n    };\n\n    IssuesTableController.prototype.toggleTags = function() {\n      return this.onToggleTags({\n        tags: this.showTags\n      });\n    };\n\n    IssuesTableController.prototype.detach = function(issue) {\n      return this.onDetachIssue({\n        id: issue.id\n      });\n    };\n\n    IssuesTableController.prototype[\"delete\"] = function(issue) {\n      return this.onDeleteIssue({\n        id: issue.id\n      });\n    };\n\n    return IssuesTableController;\n\n  })();\n\n  angular.module('taigaComponents').controller('IssuesTable', IssuesTableController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var issuesTableDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  issuesTableDirective = function($timeout) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.issueOptions = null;\n      scope.displayOptions = function(id) {\n        var timeout;\n        if (timeout) {\n          $timeout.cancel(timeout);\n          timeout = null;\n        }\n        return scope.issueOptions = id;\n      };\n      return scope.hideOptions = function() {\n        var timeout;\n        return timeout = $timeout((function() {\n          return scope.issueOptions = null;\n        }), 200);\n      };\n    };\n    return {\n      controller: \"IssuesTable\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"components/issues-table/issues-table.html\",\n      bindToController: {\n        issues: \"<\",\n        showTags: \"=\",\n        onLoadIssues: '&',\n        onAddIssuesInBulk: '&',\n        onAddNewIssue: '&',\n        sprintIssues: '<',\n        onDeleteIssue: '&',\n        onEditIssue: '&',\n        onDetachIssue: '&',\n        onToggleTags: '&'\n      },\n      scope: true,\n      link: link\n    };\n  };\n\n  module.directive('tgIssuesTable', ['$timeout', issuesTableDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var JoyRideDirective, taiga;\n\n  taiga = this.taiga;\n\n  JoyRideDirective = function($rootScope, currentUserService, joyRideService, $location, $translate) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var initJoyrRide, intro, unsuscribe;\n      unsuscribe = null;\n      intro = introJs();\n      intro.oncomplete(function() {\n        return $('html,body').scrollTop(0);\n      });\n      intro.onexit(function() {\n        return currentUserService.disableJoyRide();\n      });\n      initJoyrRide = function(next, config) {\n        if (!config[next.joyride]) {\n          return;\n        }\n        intro.setOptions({\n          exitOnEsc: false,\n          exitOnOverlayClick: false,\n          showStepNumbers: false,\n          nextLabel: $translate.instant('JOYRIDE.NAV.NEXT') + ' &rarr;',\n          prevLabel: '&larr; ' + $translate.instant('JOYRIDE.NAV.BACK'),\n          skipLabel: $translate.instant('JOYRIDE.NAV.SKIP'),\n          doneLabel: $translate.instant('JOYRIDE.NAV.DONE'),\n          disableInteraction: true\n        });\n        intro.setOption('steps', joyRideService.get(next.joyride));\n        return intro.start();\n      };\n      return $rootScope.$on('$routeChangeSuccess', function(event, next) {\n        if (!next.joyride || !currentUserService.isAuthenticated()) {\n          intro.exit();\n          if (unsuscribe) {\n            unsuscribe();\n          }\n          return;\n        }\n        intro.oncomplete(function() {\n          return currentUserService.disableJoyRide(next.joyride);\n        });\n        if (next.loader) {\n          return unsuscribe = $rootScope.$on('loader:end', function() {\n            currentUserService.loadJoyRideConfig().then(function(config) {\n              return initJoyrRide(next, config);\n            });\n            return unsuscribe();\n          });\n        } else {\n          return currentUserService.loadJoyRideConfig().then(function(config) {\n            return initJoyrRide(next, config);\n          });\n        }\n      });\n    };\n    return {\n      scope: {},\n      link: link\n    };\n  };\n\n  JoyRideDirective.$inject = [\"$rootScope\", \"tgCurrentUserService\", \"tgJoyRideService\", \"$location\", \"$translate\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgJoyRide\", JoyRideDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var JoyRideService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  JoyRideService = (function(superClass) {\n    extend(JoyRideService, superClass);\n\n    JoyRideService.$inject = ['$translate', 'tgCheckPermissionsService'];\n\n    function JoyRideService(translate, checkPermissionsService) {\n      this.translate = translate;\n      this.checkPermissionsService = checkPermissionsService;\n    }\n\n    JoyRideService.prototype.getConfig = function() {\n      return {\n        dashboard: (function(_this) {\n          return function() {\n            var steps;\n            steps = [\n              {\n                element: '.project-list > section:not(.ng-hide)',\n                position: 'left',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP1.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.DASHBOARD.STEP1.TEXT')\n                }\n              }, {\n                element: '.working-on-container',\n                position: 'right',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP2.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.DASHBOARD.STEP2.TEXT')\n                }\n              }, {\n                element: '.watching-container',\n                position: 'right',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP3.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.DASHBOARD.STEP3.TEXT1'), _this.translate.instant('JOYRIDE.DASHBOARD.STEP3.TEXT2')]\n                }\n              }\n            ];\n            if (!$('.project-list .create-project-button').is(':hidden')) {\n              steps.push({\n                element: '.project-list .create-project-button',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP4.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.DASHBOARD.STEP4.TEXT1'), _this.translate.instant('JOYRIDE.DASHBOARD.STEP4.TEXT2')]\n                }\n              });\n            }\n            return steps;\n          };\n        })(this),\n        backlog: (function(_this) {\n          return function() {\n            var steps;\n            steps = [\n              {\n                element: '.summary',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP1.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.BACKLOG.STEP1.TEXT1'), _this.translate.instant('JOYRIDE.BACKLOG.STEP1.TEXT2')]\n                }\n              }, {\n                element: '.backlog-table-empty',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP2.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.BACKLOG.STEP2.TEXT')\n                }\n              }, {\n                element: '.sprints',\n                position: 'left',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP3.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.BACKLOG.STEP3.TEXT')\n                }\n              }\n            ];\n            if (_this.checkPermissionsService.check('add_us')) {\n              steps.push({\n                element: '.new-us',\n                position: 'rigth',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP4.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.BACKLOG.STEP4.TEXT')\n                }\n              });\n            }\n            return steps;\n          };\n        })(this),\n        kanban: (function(_this) {\n          return function() {\n            var steps;\n            steps = [\n              {\n                element: '.kanban-table-inner',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.KANBAN.STEP1.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.KANBAN.STEP1.TEXT')\n                }\n              }, {\n                element: '.card-placeholder',\n                position: 'right',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.KANBAN.STEP2.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.KANBAN.STEP2.TEXT')\n                }\n              }\n            ];\n            if (_this.checkPermissionsService.check('add_us')) {\n              steps.push({\n                element: '.add-action',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.KANBAN.STEP3.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.KANBAN.STEP3.TEXT1'), _this.translate.instant('JOYRIDE.KANBAN.STEP3.TEXT2')]\n                }\n              });\n            }\n            return steps;\n          };\n        })(this)\n      };\n    };\n\n    JoyRideService.prototype.get = function(name) {\n      var joyRide, joyRides;\n      joyRides = this.getConfig();\n      joyRide = joyRides[name].call(this);\n      return _.map(joyRide, function(item) {\n        var html;\n        html = \"\";\n        if (item.joyride.title) {\n          html += \"<h3>\" + item.joyride.title + \"</h3>\";\n        }\n        if (_.isArray(item.joyride.text)) {\n          _.forEach(item.joyride.text, function(text) {\n            return html += \"<p>\" + text + \"</p>\";\n          });\n        } else {\n          html += \"<p>\" + item.joyride.text + \"</p>\";\n        }\n        item.intro = html;\n        return item;\n      });\n    };\n\n    return JoyRideService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgJoyRideService\", JoyRideService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var KanbanBoardZoomDirective;\n\n  KanbanBoardZoomDirective = function(storage, projectService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var getZoomView, zooms;\n      scope.zoomIndex = storage.get(\"kanban_zoom\", 1);\n      scope.levels = 4;\n      zooms = [[\"assigned_to\", \"ref\"], [\"subject\", \"card-data\", \"assigned_to_extended\"], [\"tags\", \"extra_info\", \"unfold\"], [\"related_tasks\", \"attachments\"]];\n      getZoomView = function(zoomIndex) {\n        if (zoomIndex == null) {\n          zoomIndex = 0;\n        }\n        if (zoomIndex > 3) {\n          zoomIndex = 3;\n        }\n        zoomIndex = Number(zoomIndex);\n        if (Number(storage.get(\"kanban_zoom\")) !== zoomIndex) {\n          storage.set(\"kanban_zoom\", zoomIndex);\n        }\n        return _.reduce(zooms, function(result, value, key) {\n          if (key <= zoomIndex) {\n            result = result.concat(value);\n          }\n          return result;\n        });\n      };\n      return scope.$watch('zoomIndex', function(zoomLevel) {\n        var zoom;\n        zoom = getZoomView(zoomLevel);\n        return scope.onZoomChange({\n          zoomLevel: zoomLevel,\n          zoom: zoom\n        });\n      });\n    };\n    return {\n      scope: {\n        onZoomChange: \"&\"\n      },\n      template: \"<tg-board-zoom\\n    class=\\\"board-zoom\\\"\\n    value=\\\"zoomIndex\\\"\\n    levels=\\\"levels\\\"\\n></tg-board-zoom>\",\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgKanbanBoardZoom\", [\"$tgStorage\", \"tgProjectService\", KanbanBoardZoomDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var SelectUserDirective, truncate;\n\n  truncate = taiga.truncate;\n\n  SelectUserDirective = function($rootScope, $repo, $translate, lightboxService, lightboxKeyboardNavigationService, avatarService, projectService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var closeLightbox, confirmSelection, getFilteredUsers, normalize, roles, users;\n      users = [];\n      roles = [];\n      lightboxService.open($el);\n      normalize = function(text) {\n        return text.toUpperCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n      };\n      getFilteredUsers = function(text) {\n        var _filterRows, available, collection, selected;\n        if (text == null) {\n          text = \"\";\n        }\n        selected = _.compact(_.sortBy(_.filter(users, function(x) {\n          return _.includes($scope.currentUsers, x.id);\n        }), 'name'));\n        _filterRows = function(text, row) {\n          var name;\n          if (row.type === 'user' && _.find(selected, ['id', row.id])) {\n            return false;\n          }\n          name = normalize(row.name);\n          text = normalize(text);\n          return _.includes(name, text);\n        };\n        collection = _.union(users, _.filter(roles, (function(_this) {\n          return function(role) {\n            var difference;\n            difference = _.difference(role.userIds, _.map(selected, 'id'));\n            return difference.length > 0;\n          };\n        })(this)));\n        available = _.sortBy(_.filter(collection, _.partial(_filterRows, text)), 'name');\n        if (!text) {\n          $scope.selected = selected;\n          return $scope.collection = _.union(selected, available);\n        } else {\n          $scope.selected = [];\n          return $scope.collection = available;\n        }\n      };\n      closeLightbox = function() {\n        lightboxKeyboardNavigationService.stop();\n        return lightboxService.close($el);\n      };\n      $scope.$on(\"watcher:add\", function(ctx, item) {\n        $scope.item = item;\n        getFilteredUsers();\n        return lightboxService.open($el).then(function() {\n          $el.find(\"input\").focus();\n          return lightboxKeyboardNavigationService.init($el);\n        });\n      });\n      $scope.$watch(\"activeUsers\", function(activeUsers) {\n        var project;\n        if (!activeUsers) {\n          return;\n        }\n        users = _.map(activeUsers, function(user) {\n          return {\n            id: user.id,\n            type: 'user',\n            name: user.full_name_display,\n            avatar: avatarService.getAvatar(user)\n          };\n        });\n        if ($scope.single) {\n          return;\n        }\n        project = projectService.project.toJS();\n        return roles = _.map(project.roles, function(role) {\n          var roleUsers, suffix;\n          roleUsers = _.filter(activeUsers, {\n            'role': role.id\n          });\n          suffix = $translate.instant(\"LIGHTBOX.SELECT_USER.ROLE\");\n          return {\n            id: role.id,\n            type: 'role',\n            name: suffix + \": \" + role.name,\n            avatar: null,\n            userIds: _.map(roleUsers, 'id'),\n            userNames: truncate('(' + _.join(_.map(roleUsers, 'full_name_display'), ', ') + ')', 110)\n          };\n        });\n      });\n      $scope.$watch(\"currentUsers\", function(currentUsers) {\n        if (!currentUsers) {\n          return;\n        }\n        return getFilteredUsers();\n      });\n      $scope.$watch(\"searchText\", function(searchingText) {\n        getFilteredUsers(searchingText);\n        return $el.find(\"input\").focus();\n      });\n      $scope.removeItem = function(user, $event) {\n        $event.preventDefault();\n        $event.stopPropagation();\n        $event.currentTarget.remove();\n        $scope.searchText = null;\n        _.pull($scope.currentUsers, user.id);\n        return getFilteredUsers();\n      };\n      $scope.addItem = function(item) {\n        if (item.type === 'user') {\n          if ($scope.currentUsers.includes(item.id)) {\n            return;\n          }\n          if ($scope.single) {\n            $scope.currentUsers = [item.id];\n            confirmSelection();\n            return;\n          }\n          $scope.currentUsers.push(item.id);\n        }\n        if (item.type === 'role') {\n          $scope.currentUsers = _.union($scope.currentUsers, item.userIds);\n        }\n        $scope.searchText = null;\n        return getFilteredUsers();\n      };\n      $scope.clearSearch = function() {\n        return $scope.searchText = '';\n      };\n      confirmSelection = function() {\n        $scope.loading = true;\n        $scope.onClose($scope.currentUsers);\n        closeLightbox();\n        return $scope.loading = false;\n      };\n      $el.on(\"click\", \".lb-select-user-confirm\", function(event) {\n        if ($scope.loading) {\n          return;\n        }\n        event.preventDefault();\n        return confirmSelection();\n      });\n      $el.on(\"click\", \".close\", function(event) {\n        event.preventDefault();\n        closeLightbox();\n        return $scope.$apply(function() {\n          return $scope.searchText = null;\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      templateUrl: \"components/lb-select-user/lb-select-user.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  SelectUserDirective.$inject = [\"$rootScope\", \"$tgRepo\", \"$translate\", \"lightboxService\", \"lightboxKeyboardNavigationService\", \"tgAvatarService\", \"tgProjectService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgLbSelectUser\", SelectUserDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var LiveAnnouncementDirective;\n\n  LiveAnnouncementDirective = function(liveAnnouncementService) {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      restrict: \"AE\",\n      scope: {},\n      controllerAs: 'vm',\n      controller: function() {\n        this.close = function() {\n          return liveAnnouncementService.open = false;\n        };\n        return Object.defineProperties(this, {\n          open: {\n            get: function() {\n              return liveAnnouncementService.open;\n            }\n          },\n          title: {\n            get: function() {\n              return liveAnnouncementService.title;\n            }\n          },\n          desc: {\n            get: function() {\n              return liveAnnouncementService.desc;\n            }\n          }\n        });\n      },\n      link: link,\n      templateUrl: \"components/live-announcement/live-announcement.html\"\n    };\n  };\n\n  LiveAnnouncementDirective.$inject = [\"tgLiveAnnouncementService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgLiveAnnouncement\", LiveAnnouncementDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var LiveAnnouncementService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  LiveAnnouncementService = (function(superClass) {\n    extend(LiveAnnouncementService, superClass);\n\n    function LiveAnnouncementService() {\n      this.open = false;\n      this.title = \"\";\n      this.desc = \"\";\n    }\n\n    LiveAnnouncementService.prototype.show = function(title, desc) {\n      this.open = true;\n      this.title = title;\n      return this.desc = desc;\n    };\n\n    return LiveAnnouncementService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgLiveAnnouncementService\", LiveAnnouncementService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var MoveToSprintLightboxController, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  MoveToSprintLightboxController = (function() {\n    MoveToSprintLightboxController.$inject = ['$rootScope', '$scope', '$tgResources', 'tgProjectService', '$translate', 'lightboxService', '$tgConfirm', '$q'];\n\n    function MoveToSprintLightboxController(rootScope, scope, rs, projectService, translate, lightboxService, confirm, q) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.rs = rs;\n      this.projectService = projectService;\n      this.translate = translate;\n      this.lightboxService = lightboxService;\n      this.confirm = confirm;\n      this.q = q;\n      this.projectId = this.projectService.project.get('id');\n      this.loading = false;\n      this.someSelected = false;\n      this.selectedSprintId = null;\n      this.typesSelected = {\n        uss: false,\n        tasks: false,\n        issues: false\n      };\n      this.itemsToMove = {};\n      this._loadSprints();\n      this.scope.$watch(\"vm.openItems\", (function(_this) {\n        return function(openItems) {\n          if (!openItems) {\n            return;\n          }\n          return _this._init(openItems);\n        };\n      })(this));\n    }\n\n    MoveToSprintLightboxController.prototype._init = function(openItems) {\n      var ref, ref1, ref2;\n      this.hasManyItemTypes = _.size(this.openItems) > 1;\n      this.ussCount = parseInt((ref = openItems.uss) != null ? ref.length : void 0);\n      this.updateSelected('uss', this.ussCount > 0);\n      this.tasksCount = parseInt((ref1 = openItems.tasks) != null ? ref1.length : void 0);\n      this.updateSelected('tasks', this.tasksCount > 0);\n      this.issuesCount = parseInt((ref2 = openItems.issues) != null ? ref2.length : void 0);\n      return this.updateSelected('issues', this.issuesCount > 0);\n    };\n\n    MoveToSprintLightboxController.prototype._loadSprints = function() {\n      return this.rs.sprints.list(this.projectId, {\n        closed: false\n      }).then((function(_this) {\n        return function(data) {\n          return _this.sprints = _.filter(data.milestones, function(x) {\n            return x.id !== _this.sprint.id;\n          });\n        };\n      })(this));\n    };\n\n    MoveToSprintLightboxController.prototype.updateSelected = function(itemType, value) {\n      this.typesSelected[itemType] = value;\n      this.someSelected = _.some(this.typesSelected);\n      if (value === true) {\n        return this.itemsToMove[itemType] = this.openItems[itemType];\n      } else if (this.itemsToMove[itemType]) {\n        return delete this.itemsToMove[itemType];\n      }\n    };\n\n    MoveToSprintLightboxController.prototype.submit = function() {\n      var itemsNotMoved;\n      itemsNotMoved = {};\n      _.map(this.openItems, (function(_this) {\n        return function(itemsList, itemsType) {\n          if (!_this.itemsToMove[itemsType]) {\n            return itemsNotMoved[itemsType] = true;\n          }\n        };\n      })(this));\n      this.loading = true;\n      return this.moveItems().then((function(_this) {\n        return function() {\n          _this.rootScope.$broadcast(\"taskboard:items:move\", _this.typesSelected);\n          _this.lightboxService.closeAll();\n          _this.loading = false;\n          if (_.size(itemsNotMoved) > 0) {\n            return _this.displayWarning(itemsNotMoved);\n          }\n        };\n      })(this));\n    };\n\n    MoveToSprintLightboxController.prototype.moveItems = function() {\n      var promises;\n      promises = [];\n      if (this.itemsToMove.uss) {\n        promises.push(this.rs.sprints.moveUserStoriesMilestone(this.sprint.id, this.projectId, this.selectedSprintId, this.itemsToMove.uss));\n      }\n      if (this.itemsToMove.tasks) {\n        promises.push(this.rs.sprints.moveTasksMilestone(this.sprint.id, this.projectId, this.selectedSprintId, this.itemsToMove.tasks));\n      }\n      if (this.itemsToMove.issues) {\n        promises.push(this.rs.sprints.moveIssuesMilestone(this.sprint.id, this.projectId, this.selectedSprintId, this.itemsToMove.issues));\n      }\n      return this.q.all(promises);\n    };\n\n    MoveToSprintLightboxController.prototype.displayWarning = function(itemsNotMoved) {\n      var action, desc, ref, title, totalItemsMoved;\n      action = this.translate.instant('COMMON.I_GET_IT');\n      if (_.size(itemsNotMoved) === 1 && itemsNotMoved.issues === true) {\n        title = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_ISSUES_NOT_MOVED_TITLE');\n        desc = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_ISSUES_NOT_MOVED');\n      } else {\n        totalItemsMoved = 0;\n        _.map(this.itemsToMove, function(itemsList, itemsType) {\n          return totalItemsMoved += itemsList.length;\n        });\n        title = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_SPRINT_STILL_OPEN_TITLE', {\n          total: totalItemsMoved\n        }, 'messageformat');\n        desc = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_SPRINT_STILL_OPEN', {\n          sprintName: (ref = this.sprint) != null ? ref.name : void 0\n        });\n      }\n      return this.confirm.success(title, desc, null, action);\n    };\n\n    return MoveToSprintLightboxController;\n\n  })();\n\n  module.controller(\"MoveToSprintLbCtrl\", MoveToSprintLightboxController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, moveToSprintLightboxDirective;\n\n  module = angular.module(\"taigaComponents\");\n\n  moveToSprintLightboxDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return lightboxService.open(el);\n    };\n    return {\n      scope: {},\n      bindToController: {\n        openItems: \"=\",\n        sprint: \"=\"\n      },\n      templateUrl: \"components/move-to-sprint/move-to-sprint-lb/move-to-sprint-lb.html\",\n      controller: \"MoveToSprintLbCtrl\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  moveToSprintLightboxDirective.$inject = [\"lightboxService\"];\n\n  module.directive(\"tgLbMoveToSprint\", moveToSprintLightboxDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var MoveToSprintController, taiga;\n\n  taiga = this.taiga;\n\n  MoveToSprintController = (function() {\n    MoveToSprintController.$inject = ['$scope', 'tgLightboxFactory', 'tgProjectService'];\n\n    function MoveToSprintController(scope, lightboxFactory, projectService) {\n      this.scope = scope;\n      this.lightboxFactory = lightboxFactory;\n      this.projectService = projectService;\n      this.permissions = this.projectService.project.get('my_permissions');\n      this.hasOpenItems = false;\n      this.disabled = false;\n      this.openItems = {\n        uss: [],\n        tasks: [],\n        issues: []\n      };\n      this.scope.$watch(\"vm.uss\", (function(_this) {\n        return function() {\n          return _this.getOpenUss();\n        };\n      })(this));\n      this.scope.$watch(\"vm.unnasignedTasks\", (function(_this) {\n        return function() {\n          return _this.getOpenStorylessTasks();\n        };\n      })(this));\n      this.scope.$watch(\"vm.issues\", (function(_this) {\n        return function() {\n          return _this.getOpenIssues();\n        };\n      })(this));\n    }\n\n    MoveToSprintController.prototype.checkOpenItems = function() {\n      return _.some(Object.keys(this.openItems), (function(_this) {\n        return function(x) {\n          return _this.openItems[x].length > 0;\n        };\n      })(this));\n    };\n\n    MoveToSprintController.prototype.openLightbox = function() {\n      var openItems;\n      if (this.disabled === !true && this.hasOpenItems) {\n        openItems = {};\n        _.map(this.openItems, function(itemsList, itemsType) {\n          if (itemsList.length) {\n            return openItems[itemsType] = itemsList;\n          }\n        });\n        return this.lightboxFactory.create('tg-lb-move-to-sprint', {\n          \"class\": \"lightbox lightbox-move-to-sprint\",\n          \"sprint\": \"sprint\",\n          \"open-items\": \"openItems\"\n        }, {\n          sprint: this.sprint,\n          openItems: openItems\n        });\n      }\n    };\n\n    MoveToSprintController.prototype.getOpenUss = function() {\n      if (!this.uss || this.permissions.indexOf(\"modify_us\") === -1) {\n        return;\n      }\n      this.openItems.uss = [];\n      this.uss.map((function(_this) {\n        return function(us) {\n          if (us.is_closed === false) {\n            return _this.openItems.uss.push({\n              us_id: us.id,\n              order: us.sprint_order\n            });\n          }\n        };\n      })(this));\n      return this.hasOpenItems = this.checkOpenItems();\n    };\n\n    MoveToSprintController.prototype.getOpenStorylessTasks = function() {\n      if (!this.unnasignedTasks || this.permissions.indexOf(\"modify_task\") === -1) {\n        return;\n      }\n      this.openItems.tasks = [];\n      this.unnasignedTasks.map((function(_this) {\n        return function(column) {\n          return column.map(function(taskId) {\n            var task;\n            task = _this.taskMap.get(taskId);\n            if (task.get('model').get('is_closed') === false) {\n              return _this.openItems.tasks.push({\n                task_id: task.get('model').get('id'),\n                order: task.get('model').get('taskboard_order')\n              });\n            }\n          });\n        };\n      })(this));\n      return this.hasOpenItems = this.checkOpenItems();\n    };\n\n    MoveToSprintController.prototype.getOpenIssues = function() {\n      if (!this.issues || this.permissions.indexOf(\"modify_issue\") === -1) {\n        return;\n      }\n      this.openItems.issues = [];\n      this.issues.map((function(_this) {\n        return function(issue) {\n          if (issue.get('status').get('is_closed') === false) {\n            return _this.openItems.issues.push({\n              issue_id: issue.get('id')\n            });\n          }\n        };\n      })(this));\n      return this.hasOpenItems = this.checkOpenItems();\n    };\n\n    return MoveToSprintController;\n\n  })();\n\n  angular.module('taigaComponents').controller('MoveToSprintCtrl', MoveToSprintController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, moveToSprintDirective;\n\n  module = angular.module(\"taigaComponents\");\n\n  moveToSprintDirective = function(taskboardTasksService) {\n    return {\n      controller: \"MoveToSprintCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: 'components/move-to-sprint/move-to-sprint.html',\n      scope: {\n        sprint: '=',\n        uss: '=',\n        unnasignedTasks: '=',\n        issues: '=',\n        disabled: '=',\n        taskMap: '='\n      }\n    };\n  };\n\n  moveToSprintDirective.$inject = ['tgTaskboardTasks'];\n\n  module.directive('tgMoveToSprint', [moveToSprintDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProjectLogoBigSrcDirective;\n\n  ProjectLogoBigSrcDirective = function(projectLogoService) {\n    var link;\n    link = function(scope, el, attrs) {\n      return scope.$watch('project', function(project) {\n        var logo, projectLogo;\n        project = Immutable.fromJS(project);\n        if (!project) {\n          return;\n        }\n        projectLogo = project.get('logo_big_url');\n        if (projectLogo) {\n          el.attr('src', projectLogo);\n          return el.css('background', \"\");\n        } else {\n          logo = projectLogoService.getDefaultProjectLogo(project.get('slug'), project.get('id'));\n          el.attr('src', logo.src);\n          return el.css('background', logo.color);\n        }\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        project: \"=tgProjectLogoBigSrc\"\n      }\n    };\n  };\n\n  ProjectLogoBigSrcDirective.$inject = [\"tgProjectLogoService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgProjectLogoBigSrc\", ProjectLogoBigSrcDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProjectLogoSmallSrcDirective;\n\n  ProjectLogoSmallSrcDirective = function(projectLogoService) {\n    var link;\n    link = function(scope, el, attrs) {\n      return scope.$watch('project', function(project) {\n        var logo, projectLogo;\n        project = Immutable.fromJS(project);\n        if (!project) {\n          return;\n        }\n        projectLogo = project.get('logo_small_url');\n        if (projectLogo) {\n          el.attr('src', projectLogo);\n          return el.css('background', \"\");\n        } else {\n          logo = projectLogoService.getDefaultProjectLogo(project.get('slug'), project.get('id'));\n          el.attr('src', logo.src);\n          return el.css('background', logo.color);\n        }\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        project: \"=tgProjectLogoSmallSrc\"\n      }\n    };\n  };\n\n  ProjectLogoSmallSrcDirective.$inject = [\"tgProjectLogoService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgProjectLogoSmallSrc\", ProjectLogoSmallSrcDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProjectMenuController;\n\n  ProjectMenuController = (function() {\n    ProjectMenuController.$inject = [\"tgProjectService\", \"tgLightboxFactory\"];\n\n    function ProjectMenuController(projectService, lightboxFactory) {\n      this.projectService = projectService;\n      this.lightboxFactory = lightboxFactory;\n      this.project = null;\n      this.menu = Immutable.Map();\n    }\n\n    ProjectMenuController.prototype.show = function() {\n      var ref;\n      this.project = this.projectService.project;\n      this.sprints = (ref = this.project.get('milestones')) != null ? ref.toJS() : void 0;\n      this.active = this._getActiveSection();\n      this.projectMenu = {\n        component: 'tg-project-navigation',\n        params: {\n          project: this.projectService.project.toJS()\n        },\n        events: {\n          search: (function(_this) {\n            return function() {\n              return _this.search();\n            };\n          })(this)\n        }\n      };\n      this._setVideoConference();\n      return this._setMenuPermissions();\n    };\n\n    ProjectMenuController.prototype.hide = function() {\n      this.project = null;\n      return this.menu = {};\n    };\n\n    ProjectMenuController.prototype.search = function() {\n      return this.lightboxFactory.create(\"tg-search-box\", {\n        \"class\": \"lightbox lightbox-search\"\n      });\n    };\n\n    ProjectMenuController.prototype._setVideoConference = function() {\n      var videoconferenceUrl;\n      videoconferenceUrl = this._videoConferenceUrl();\n      if (videoconferenceUrl) {\n        return this.project = this.project.set(\"videoconferenceUrl\", videoconferenceUrl);\n      }\n    };\n\n    ProjectMenuController.prototype._setMenuPermissions = function() {\n      this.menu = Immutable.Map({\n        epics: false,\n        backlog: false,\n        kanban: false,\n        issues: false,\n        wiki: false\n      });\n      if (this.project.get(\"is_epics_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_epics\") !== -1) {\n        this.menu = this.menu.set(\"epics\", true);\n      }\n      if (this.project.get(\"is_backlog_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_us\") !== -1) {\n        this.menu = this.menu.set(\"backlog\", true);\n      }\n      if (this.project.get(\"is_kanban_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_us\") !== -1) {\n        this.menu = this.menu.set(\"kanban\", true);\n      }\n      if (this.project.get(\"is_issues_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_issues\") !== -1) {\n        this.menu = this.menu.set(\"issues\", true);\n      }\n      if (this.project.get(\"is_wiki_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_wiki_pages\") !== -1) {\n        return this.menu = this.menu.set(\"wiki\", true);\n      }\n    };\n\n    ProjectMenuController.prototype._getActiveSection = function() {\n      var indexBacklog, indexKanban, oldSectionName, sectionName, sectionsBreadcrumb;\n      sectionName = this.projectService.section;\n      sectionsBreadcrumb = this.projectService.sectionsBreadcrumb;\n      indexBacklog = sectionsBreadcrumb.lastIndexOf(\"backlog\");\n      indexKanban = sectionsBreadcrumb.lastIndexOf(\"kanban\");\n      if (indexBacklog !== -1 || indexKanban !== -1) {\n        if (indexKanban === -1 || indexBacklog > indexKanban) {\n          oldSectionName = \"backlog\";\n        } else {\n          oldSectionName = \"kanban\";\n        }\n      }\n      if (sectionName === \"backlog-kanban\") {\n        if (oldSectionName === \"backlog\" || oldSectionName === \"kanban\") {\n          sectionName = oldSectionName;\n        } else if (this.project.get(\"is_backlog_activated\") && !this.project.get(\"is_kanban_activated\")) {\n          sectionName = \"backlog\";\n        } else if (!this.project.get(\"is_backlog_activated\") && this.project.get(\"is_kanban_activated\")) {\n          sectionName = \"kanban\";\n        }\n      }\n      return sectionName;\n    };\n\n    ProjectMenuController.prototype._videoConferenceUrl = function() {\n      var baseUrl, url;\n      if (this.project.get(\"videoconferences\") === \"whereby-com\") {\n        baseUrl = \"https://whereby.com/\";\n      } else if (this.project.get(\"videoconferences\") === \"talky\") {\n        baseUrl = \"https://talky.io/\";\n      } else if (this.project.get(\"videoconferences\") === \"jitsi\") {\n        baseUrl = \"https://meet.jit.si/\";\n      } else if (this.project.get(\"videoconferences\") === \"custom\") {\n        return this.project.get(\"videoconferences_extra_data\");\n      } else {\n        return \"\";\n      }\n      if (this.project.get(\"videoconferences_extra_data\")) {\n        url = this.project.get(\"slug\") + \"-\" + taiga.slugify(this.project.get(\"videoconferences_extra_data\"));\n      } else {\n        url = this.project.get(\"slug\");\n      }\n      if (this.project.get(\"videoconferences\") === \"jitsi\") {\n        url = url.replace(/-/g, \"\");\n      }\n      return baseUrl + url;\n    };\n\n    return ProjectMenuController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"ProjectMenu\", ProjectMenuController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProjectMenuDirective, taiga;\n\n  taiga = this.taiga;\n\n  ProjectMenuDirective = function(projectService, lightboxFactory) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var fixed, projectChange, topBarHeight;\n      projectChange = function() {\n        if (projectService.project) {\n          return ctrl.show();\n        } else {\n          return ctrl.hide();\n        }\n      };\n      scope.$watch((function() {\n        return projectService.project;\n      }), projectChange);\n      fixed = false;\n      topBarHeight = 48;\n      return window.addEventListener(\"scroll\", function() {\n        var position;\n        position = $(window).scrollTop();\n        if (position > topBarHeight && fixed === false) {\n          el.find('.sticky-project-menu').addClass('unblock');\n          return fixed = true;\n        } else if (position === 0 && fixed === true) {\n          el.find('.sticky-project-menu').removeClass('unblock');\n          return fixed = false;\n        }\n      });\n    };\n    return {\n      scope: {},\n      controller: \"ProjectMenu\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/project-menu/project-menu.html\",\n      link: link\n    };\n  };\n\n  ProjectMenuDirective.$inject = [\"tgProjectService\", \"tgLightboxFactory\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgProjectMenu\", ProjectMenuDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var PromoteToUsButtonDirective;\n\n  PromoteToUsButtonDirective = function($rootScope, $rs, $confirm, $translate) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var itemType, save;\n      itemType = null;\n      save = function(item, askResponse) {\n        var data, onError, onSuccess;\n        data = {\n          project: item.project\n        };\n        onSuccess = function(response) {\n          askResponse.finish();\n          $confirm.notify(\"success\");\n          return $rootScope.$broadcast(\"promote-\" + itemType + \"-to-us:success\", response.data[0]);\n        };\n        onError = function() {\n          askResponse.finish();\n          return $confirm.notify(\"error\");\n        };\n        return $rs[item._name].promoteToUserStory(item.id, item.project).then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".promote-button\", function(event) {\n        var ctx, item, message, subtitle, title;\n        event.preventDefault();\n        item = $model.$modelValue;\n        itemType = _.get({\n          tasks: 'task',\n          issues: 'issue'\n        }, item._name);\n        ctx = \"COMMON.CONFIRM_PROMOTE.\" + (itemType.toUpperCase());\n        title = $translate.instant(ctx + \".TITLE\");\n        message = $translate.instant(ctx + \".MESSAGE\");\n        subtitle = item.subject;\n        return $confirm.ask(title, subtitle, message).then(function(response) {\n          return save(item, response);\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      restrict: \"AE\",\n      require: \"ngModel\",\n      templateUrl: \"components/promote-to-us/promote-to-us.html\",\n      link: link\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgPromoteToUsButton\", [\"$rootScope\", \"$tgResources\", \"$tgConfirm\", \"$translate\", PromoteToUsButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var groupBy, module, normalizeString, searchListDirective;\n\n  module = angular.module(\"taigaComponents\");\n\n  normalizeString = this.taiga.normalizeString;\n\n  groupBy = this.taiga.groupBy;\n\n  searchListDirective = function($translate) {\n    var link;\n    link = function(scope, el, attrs, model) {\n      var avaliableItems, filtering, isContainedIn, itemsById, parseString, resetAll, resetSelected;\n      scope.templateUrl = \"components/search-list/search-list-\" + scope.itemType + \"-choice.html\";\n      scope.currentSelected = null;\n      filtering = false;\n      avaliableItems = [];\n      itemsById = {};\n      if (scope.itemType === 'issue') {\n        scope.milestonesById = groupBy(scope.project.milestones, function(e) {\n          return e.id;\n        });\n      }\n      if (scope.filterClosed) {\n        scope.showClosed = false;\n        if (scope.itemType === 'sprint') {\n          scope.textShowClosed = $translate.instant(\"BACKLOG.SPRINTS.ACTION_SHOW_CLOSED_SPRINTS\");\n          scope.textHideClosed = $translate.instant(\"BACKLOG.SPRINTS.ACTION_HIDE_CLOSED_SPRINTS\");\n        }\n      }\n      el.on(\"click\", \".choice\", function(event) {\n        var choiceId, ref, value;\n        choiceId = parseInt($(event.currentTarget).data(\"choice-id\"));\n        value = ((ref = attrs.ngModel) != null ? ref.id : void 0) !== choiceId ? itemsById[choiceId] : null;\n        model.$setViewValue(value);\n        scope.currentSelected = value;\n        return scope.$apply();\n      });\n      isContainedIn = function(needle, haystack) {\n        return _.includes(parseString(haystack), parseString(needle));\n      };\n      parseString = function(value) {\n        if (typeof value !== 'string') {\n          value = value.toString();\n        }\n        return normalizeString(value.toUpperCase());\n      };\n      resetSelected = function() {\n        scope.currentSelected = null;\n        return model.$setViewValue(null);\n      };\n      resetAll = function() {\n        resetSelected();\n        scope.searchText = '';\n        avaliableItems = angular.copy(scope.items);\n        return itemsById = groupBy(avaliableItems, function(x) {\n          return x.id;\n        });\n      };\n      scope.isVisible = function(item) {\n        var ref;\n        if (!scope.filterClosed || scope.showClosed) {\n          return true;\n        }\n        if (scope.itemType === 'sprint' && (item.closed || item.is_closed)) {\n          if (((ref = scope.currentSelected) != null ? ref.id : void 0) === item.id) {\n            resetSelected();\n          }\n          return false;\n        }\n        return true;\n      };\n      scope.toggleShowClosed = function(item) {\n        return scope.showClosed = !scope.showClosed;\n      };\n      scope.filterItems = function(searchText) {\n        scope.filtering = true;\n        scope.items = _.filter(avaliableItems, function(item) {\n          var itemAttrs;\n          itemAttrs = item.getAttrs();\n          if (Array.isArray(scope.filterBy)) {\n            return _.some(scope.filterBy, function(attr) {\n              return isContainedIn(searchText, itemAttrs[attr]);\n            });\n          } else {\n            return isContainedIn(searchText, itemAttrs[scope.filterBy]);\n          }\n        });\n        if (!_.find(scope.items, scope.currentSelected)) {\n          return resetSelected();\n        }\n      };\n      return scope.$watch('items', function(items) {\n        if (!scope.filtering && items) {\n          return resetAll();\n        }\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/search-list/search-list.html\",\n      require: \"ngModel\",\n      scope: {\n        label: '@',\n        placeholder: '@',\n        project: '=',\n        filterBy: '=',\n        items: '=',\n        itemType: '@',\n        filterClosed: '=',\n        itemDisabled: '='\n      }\n    };\n  };\n\n  module.directive('tgSearchList', ['$translate', searchListDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var SwimlaneSelector, cancelTimeout, taiga, timeout;\n\n  taiga = this.taiga;\n\n  timeout = this.taiga.timeout;\n\n  cancelTimeout = this.taiga.cancelTimeout;\n\n  SwimlaneSelector = function($timeout, $translate) {\n    var link;\n    link = function(scope, el, attrs) {\n      var getCurrentSwimlane, getSelectedSwimlane, mount;\n      scope.displaySelector = false;\n      scope.selectedSwimlane = null;\n      timeout = null;\n      mount = function() {\n        return getCurrentSwimlane();\n      };\n      getCurrentSwimlane = function() {\n        var filteredSwimlanes;\n        if (scope.userStory.id) {\n          if (scope.userStory.swimlane) {\n            filteredSwimlanes = scope.swimlanes.filter(function(swimlane) {\n              return swimlane.id === scope.userStory.swimlane;\n            });\n            scope.currentSwimlane = filteredSwimlanes.get(0);\n          } else {\n            scope.currentSwimlane = null;\n          }\n        } else {\n          filteredSwimlanes = scope.swimlanes.filter(function(swimlane) {\n            return swimlane.id === scope.defaultSwimlaneId;\n          });\n          scope.currentSwimlane = filteredSwimlanes.get(0);\n        }\n        return getSelectedSwimlane();\n      };\n      getSelectedSwimlane = function() {\n        if (scope.userStory.id) {\n          if (scope.currentSwimlane) {\n            return scope.selectedSwimlane = scope.currentSwimlane.id;\n          } else {\n            return scope.selectedSwimlane = null;\n          }\n        } else {\n          return scope.selectedSwimlane = scope.currentSwimlane.id;\n        }\n      };\n      scope.displayOptions = function() {\n        if (timeout) {\n          $timeout.cancel(timeout);\n          timeout = null;\n        }\n        return scope.displaySelector = true;\n      };\n      scope.hideOptions = function() {\n        return timeout = $timeout((function() {\n          return scope.displaySelector = false;\n        }), 100);\n      };\n      scope.selectSwimlane = function(swimlane) {\n        if (swimlane === 'noSwimlane') {\n          swimlane = {\n            id: null,\n            kanban_order: 1,\n            name: $translate.instant(\"KANBAN.UNCLASSIFIED_USER_STORIES\")\n          };\n          scope.ngModel = swimlane.id;\n          scope.currentSwimlane = swimlane;\n          scope.hideOptions();\n        } else {\n          scope.ngModel = swimlane.id !== -1 ? swimlane.id : null;\n          scope.currentSwimlane = swimlane;\n          scope.hideOptions();\n        }\n        return getSelectedSwimlane();\n      };\n      scope.$watch('userStory', function(userStory) {\n        return getCurrentSwimlane();\n      });\n      return mount();\n    };\n    return {\n      link: link,\n      templateUrl: \"components/swimlane-selector/swimlane-selector.html\",\n      scope: {\n        swimlanes: '<',\n        defaultSwimlaneId: '<',\n        userStory: '<',\n        hasUnclassifiedStories: '<',\n        ngModel: '='\n      },\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgSwimlaneSelector\", ['$timeout', \"$translate\", SwimlaneSelector]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TagOptionDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagOptionDirective = function() {\n    var dispatch, link, select, stop;\n    select = function(selected) {\n      var containerHeight, diff, selectedPosition;\n      selected.addClass('selected');\n      selectedPosition = selected.position().top + selected.outerHeight();\n      containerHeight = selected.parent().outerHeight();\n      if (selectedPosition > containerHeight) {\n        diff = selectedPosition - containerHeight;\n        return selected.parent().scrollTop(selected.parent().scrollTop() + diff);\n      } else if (selected.position().top < 0) {\n        return selected.parent().scrollTop(selected.parent().scrollTop() + selected.position().top);\n      }\n    };\n    dispatch = function(el, code, scope) {\n      var activeElement, next, prev;\n      activeElement = el.find(\".selected\");\n      if (code === 40) {\n        if (!activeElement.length) {\n          return select(el.find('li:first'));\n        } else {\n          next = activeElement.next('li');\n          if (next.length) {\n            activeElement.removeClass('selected');\n            return select(next);\n          }\n        }\n      } else if (code === 38) {\n        if (!activeElement.length) {\n          return select(el.find('li:last'));\n        } else {\n          prev = activeElement.prev('li');\n          if (prev.length) {\n            activeElement.removeClass('selected');\n            return select(prev);\n          }\n        }\n      }\n    };\n    stop = function() {\n      return $(document).off(\".tags-keyboard-navigation\");\n    };\n    link = function(scope, el) {\n      stop();\n      $(el).parent().on(\"keydown.tags-keyboard-navigation\", (function(_this) {\n        return function(event) {\n          var code;\n          code = event.keyCode ? event.keyCode : event.which;\n          if (code === 40 || code === 38) {\n            event.preventDefault();\n            return dispatch(el, code, scope);\n          }\n        };\n      })(this));\n      return scope.$on(\"$destroy\", stop);\n    };\n    return {\n      link: link,\n      templateUrl: \"components/tags/tag-dropdown/tag-dropdown.html\",\n      scope: {\n        onSelectTag: \"&\",\n        colorArray: \"=\",\n        tag: \"=\"\n      }\n    };\n  };\n\n  module.directive(\"tgTagsDropdown\", TagOptionDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TagLineCommonController, module, trim;\n\n  trim = this.taiga.trim;\n\n  module = angular.module('taigaCommon');\n\n  TagLineCommonController = (function() {\n    TagLineCommonController.$inject = [\"tgTagLineService\"];\n\n    function TagLineCommonController(tagLineService) {\n      this.tagLineService = tagLineService;\n      this.disableColorSelection = false;\n      this.newTag = {\n        name: \"\",\n        color: null\n      };\n      this.colorArray = [];\n      this.addTag = false;\n    }\n\n    TagLineCommonController.prototype.checkPermissions = function() {\n      var hasPermissions;\n      hasPermissions = this.tagLineService.checkPermissions(this.project.my_permissions, this.permissions);\n      return hasPermissions;\n    };\n\n    TagLineCommonController.prototype._createColorsArray = function(projectTagColors) {\n      return this.colorArray = this.tagLineService.createColorsArray(projectTagColors);\n    };\n\n    TagLineCommonController.prototype.displayTagInput = function() {\n      return this.addTag = true;\n    };\n\n    TagLineCommonController.prototype.addNewTag = function(name, color) {\n      this.newTag.name = \"\";\n      this.newTag.color = null;\n      if (!name.length) {\n        return;\n      }\n      if (this.disableColorSelection) {\n        if (name.length) {\n          return this.onAddTag({\n            name: name,\n            color: color\n          });\n        }\n      } else {\n        if (this.project.tags_colors[name]) {\n          color = this.project.tags_colors[name];\n        }\n        return this.onAddTag({\n          name: name,\n          color: color\n        });\n      }\n    };\n\n    TagLineCommonController.prototype.selectColor = function(color) {\n      return this.newTag.color = color;\n    };\n\n    return TagLineCommonController;\n\n  })();\n\n  module.controller(\"TagLineCommonCtrl\", TagLineCommonController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TagLineCommonDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagLineCommonDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {\n      var unwatch;\n      if (!_.isUndefined(attr.disableColorSelection)) {\n        ctrl.disableColorSelection = true;\n      }\n      unwatch = scope.$watch(\"vm.project\", function(project) {\n        if (!project || !Object.keys(project).length) {\n          return;\n        }\n        unwatch();\n        if (!ctrl.disableColorSelection) {\n          return ctrl.colorArray = ctrl._createColorsArray(ctrl.project.tags_colors);\n        }\n      });\n      return el.on(\"keydown\", \".tag-input\", function(event) {\n        var tagName;\n        if (event.keyCode === 27) {\n          ctrl.addTag = false;\n          ctrl.newTag.name = \"\";\n          ctrl.newTag.color = \"\";\n          event.stopPropagation();\n        } else if (event.keyCode === 13) {\n          event.preventDefault();\n          if (el.find('.tags-dropdown .selected').length) {\n            tagName = $('.tags-dropdown .selected .tags-dropdown-name').text();\n            ctrl.addNewTag(tagName, null);\n          } else {\n            ctrl.addNewTag(ctrl.newTag.name, ctrl.newTag.color);\n          }\n        }\n        return scope.$apply();\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        permissions: \"@\",\n        loadingAddTag: \"=\",\n        loadingRemoveTag: \"=\",\n        tags: \"=\",\n        project: \"=\",\n        onAddTag: \"&\",\n        onDeleteTag: \"&\"\n      },\n      templateUrl: \"components/tags/tag-line-common/tag-line-common.html\",\n      controller: \"TagLineCommonCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true\n    };\n  };\n\n  module.directive(\"tgTagLineCommon\", TagLineCommonDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TagLineController, module, trim;\n\n  trim = this.taiga.trim;\n\n  module = angular.module('taigaCommon');\n\n  TagLineController = (function() {\n    TagLineController.$inject = [\"$rootScope\", \"$tgConfirm\", \"$tgQueueModelTransformation\"];\n\n    function TagLineController(rootScope, confirm, modelTransform) {\n      this.rootScope = rootScope;\n      this.confirm = confirm;\n      this.modelTransform = modelTransform;\n      this.loadingAddTag = false;\n    }\n\n    TagLineController.prototype.onDeleteTag = function(tag) {\n      var onDeleteTagError, onDeleteTagSuccess, tagName, transform;\n      this.loadingRemoveTag = tag[0];\n      onDeleteTagSuccess = (function(_this) {\n        return function(item) {\n          _this.rootScope.$broadcast(\"object:updated\");\n          _this.loadingRemoveTag = false;\n          return item;\n        };\n      })(this);\n      onDeleteTagError = (function(_this) {\n        return function() {\n          _this.confirm.notify(\"error\");\n          return _this.loadingRemoveTag = false;\n        };\n      })(this);\n      tagName = trim(tag[0].toLowerCase());\n      transform = this.modelTransform.save(function(item) {\n        var itemtags;\n        itemtags = _.clone(item.tags);\n        _.remove(itemtags, function(tag) {\n          return tag[0] === tagName;\n        });\n        item.tags = itemtags;\n        return item;\n      });\n      return transform.then(onDeleteTagSuccess, onDeleteTagError);\n    };\n\n    TagLineController.prototype.onAddTag = function(tag, color) {\n      var onAddTagError, onAddTagSuccess, transform;\n      this.loadingAddTag = true;\n      onAddTagSuccess = (function(_this) {\n        return function(item) {\n          _this.rootScope.$broadcast(\"object:updated\");\n          _this.rootScope.$broadcast(\"tags:updated\");\n          _this.addTag = false;\n          _this.loadingAddTag = false;\n          return item;\n        };\n      })(this);\n      onAddTagError = (function(_this) {\n        return function() {\n          _this.loadingAddTag = false;\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      transform = this.modelTransform.save((function(_this) {\n        return function(item) {\n          var itemtags, value;\n          value = trim(tag.toLowerCase());\n          itemtags = _.clone(item.tags);\n          itemtags.push([tag, color]);\n          item.tags = itemtags;\n          return item;\n        };\n      })(this));\n      return transform.then(onAddTagSuccess, onAddTagError);\n    };\n\n    return TagLineController;\n\n  })();\n\n  module.controller(\"TagLineCtrl\", TagLineController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TagLineDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagLineDirective = function() {\n    return {\n      scope: {\n        item: \"=\",\n        permissions: \"@\",\n        project: \"=\"\n      },\n      templateUrl: \"components/tags/tag-line-detail/tag-line-detail.html\",\n      controller: \"TagLineCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true\n    };\n  };\n\n  module.directive(\"tgTagLine\", TagLineDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TagLineService, module,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  module = angular.module('taigaCommon');\n\n  TagLineService = (function(superClass) {\n    extend(TagLineService, superClass);\n\n    TagLineService.$inject = [];\n\n    function TagLineService() {}\n\n    TagLineService.prototype.checkPermissions = function(myPermissions, projectPermissions) {\n      return _.includes(myPermissions, projectPermissions);\n    };\n\n    TagLineService.prototype.createColorsArray = function(projectTagColors) {\n      return _.map(projectTagColors, function(index, value) {\n        return [value, index];\n      });\n    };\n\n    return TagLineService;\n\n  })(taiga.Service);\n\n  module.service(\"tgTagLineService\", TagLineService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TagDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagDirective = function() {\n    return {\n      templateUrl: \"components/tags/tag/tag.html\",\n      scope: {\n        tag: \"<\",\n        loadingRemoveTag: \"<\",\n        onDeleteTag: \"&\",\n        hasPermissions: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgTag\", TagDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TaskboardZoomDirective;\n\n  TaskboardZoomDirective = function(storage) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var getZoomView, zooms;\n      scope.zoomIndex = storage.get(\"taskboard_zoom\", 2);\n      scope.levels = 4;\n      zooms = [[\"assigned_to\", \"ref\"], [\"subject\"], [\"tags\", \"extra_info\", \"unfold\", \"card-data\", \"assigned_to_extended\"], [\"related_tasks\", \"attachments\"]];\n      getZoomView = function(zoomIndex) {\n        if (zoomIndex == null) {\n          zoomIndex = 0;\n        }\n        zoomIndex = Number(zoomIndex);\n        if (Number(storage.get(\"taskboard_zoom\")) !== zoomIndex) {\n          storage.set(\"taskboard_zoom\", zoomIndex);\n        }\n        return _.reduce(zooms, function(result, value, key) {\n          if (key <= zoomIndex) {\n            result = result.concat(value);\n          }\n          return result;\n        });\n      };\n      return scope.$watch('zoomIndex', function(zoomLevel) {\n        var zoom;\n        zoom = getZoomView(zoomLevel);\n        return scope.onZoomChange({\n          zoomLevel: zoomLevel,\n          zoom: zoom\n        });\n      });\n    };\n    return {\n      scope: {\n        onZoomChange: \"&\"\n      },\n      template: \"<tg-board-zoom\\n    levels=\\\"levels\\\"\\n    class=\\\"board-zoom\\\"\\n    value=\\\"zoomIndex\\\"\\n></tg-board-zoom>\",\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgTaskboardZoom\", [\"$tgStorage\", TaskboardZoomDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TasksSortableDirective;\n\n  TasksSortableDirective = function($parse, projectService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      if (!projectService.hasPermission(\"modify_task\")) {\n        return;\n      }\n      callback = $parse(attrs.tgTasksSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('div.single-related-task.js-related-task');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var itemEl, newIndex, task;\n        itemEl = $(item);\n        task = itemEl.scope().task;\n        newIndex = itemEl.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            task: task,\n            newIndex: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  TasksSortableDirective.$inject = [\"$parse\", \"tgProjectService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgTasksSortable\", TasksSortableDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TermsOfServiceAndPrivacyPolicyNoticeDirective;\n\n  TermsOfServiceAndPrivacyPolicyNoticeDirective = function($config) {\n    var link;\n    link = function(scope, el, attrs) {\n      scope.privacyPolicyUrl = $config.get(\"privacyPolicyUrl\");\n      scope.termsOfServiceUrl = $config.get(\"termsOfServiceUrl\");\n      scope.target = false;\n      if (!scope.privacyPolicyUrl || !scope.termsOfServiceUrl) {\n        scope.target = true;\n      }\n      return el.on(\"change\", \"input[name='accepted_terms']\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        scope.target = target.is(\":checked\");\n        return scope.$apply();\n      });\n    };\n    return {\n      restrict: \"AE\",\n      link: link,\n      scope: {\n        target: \"=\"\n      },\n      templateUrl: \"components/terms-of-service-and-privacy-policy-notice/terms-of-service-and-privacy-policy-notice.html\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgTermsOfServiceAndPrivacyPolicyNotice\", [\"$tgConfig\", TermsOfServiceAndPrivacyPolicyNoticeDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AssignedToDirective;\n\n  AssignedToDirective = function($rootscope, $confirm, $repo, $loading, $modelTransform, $template, $translate, $compile, $currentUserService, avatarService, $lightboxFactory) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var currentUserId, isEditable, isIocaine, isSelfAssigned, ref, render, save;\n      currentUserId = (ref = $currentUserService.getUser()) != null ? ref.get('id') : void 0;\n      isEditable = function() {\n        var ref1, ref2;\n        return ((ref1 = $scope.project) != null ? (ref2 = ref1.my_permissions) != null ? ref2.indexOf($attrs.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      isIocaine = function(item) {\n        return item != null ? item.is_iocaine : void 0;\n      };\n      isSelfAssigned = function() {\n        return $scope.assignedUser && $scope.assignedUser.id === currentUserId;\n      };\n      save = function(userId) {\n        var transform;\n        $scope.loading = true;\n        transform = $modelTransform.save(function(item) {\n          item.assigned_to = userId;\n          return item;\n        });\n        transform.then(function(item) {\n          $attrs.ngModel = item;\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        transform[\"finally\"](function() {\n          return $scope.loading = false;\n        });\n        return transform;\n      };\n      render = function(item) {\n        $scope.assignedUser = $scope.usersById[item != null ? item.assigned_to : void 0];\n        $scope.isEditable = isEditable();\n        $scope.isIocaine = isIocaine(item);\n        return $scope.isSelfAssigned = isSelfAssigned();\n      };\n      $el.on(\"click\", \".remove-user\", function(event) {\n        var title;\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        title = $translate.instant(\"COMMON.ASSIGNED_TO.CONFIRM_UNASSIGNED\");\n        return $confirm.ask(title).then(function(response) {\n          response.finish();\n          return save(null);\n        });\n      });\n      $scope.openAssignedUsers = function() {\n        var item, onClose;\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            return save(assignedUsers.pop() || null);\n          };\n        })(this);\n        item = _.clone($model.$modelValue, false);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": [item.assigned_to],\n          \"activeUsers\": this.activeUsers,\n          \"onClose\": onClose,\n          \"single\": true,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      };\n      $scope.selfAssign = function() {\n        return save(currentUserId);\n      };\n      $scope.$watch($attrs.ngModel, function(item, currentItem) {\n        if (item == null) {\n          return;\n        }\n        return render(item);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/ticket-assigned/assigned-to.html\",\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedTo\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\", \"tgCurrentUserService\", \"tgAvatarService\", \"tgLightboxFactory\", AssignedToDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AssignedUsersDirective,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  AssignedUsersDirective = function($rootscope, $confirm, $repo, $modelTransform, $template, $compile, $translate, $currentUserService, $lightboxFactory) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var currentUserId, deleteAssignedUser, isEditable, ref, render, save;\n      currentUserId = (ref = $currentUserService.getUser()) != null ? ref.get('id') : void 0;\n      $scope.visibleAssignedUsersCount = 4;\n      $scope.displayHidden = false;\n      $scope.toggleFold = function() {\n        return $scope.displayHidden = !$scope.displayHidden;\n      };\n      isEditable = function() {\n        var ref1, ref2;\n        return ((ref1 = $scope.project) != null ? (ref2 = ref1.my_permissions) != null ? ref2.indexOf($attrs.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      save = function(assignedUsersIds, assignedToUser) {\n        var transform;\n        $scope.loading = true;\n        transform = $modelTransform.save(function(item) {\n          item.assigned_users = assignedUsersIds;\n          if (assignedToUser) {\n            item.assigned_to = assignedToUser;\n          } else if (!assignedUsersIds.length) {\n            item.assigned_to = null;\n          } else if (!_.includes(assignedUsersIds, item.assigned_to)) {\n            item.assigned_to = assignedUsersIds[0];\n          }\n          return item;\n        });\n        transform.then(function() {\n          var result;\n          return result = $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          return $scope.loading = false;\n        });\n      };\n      $scope.openAssignedUsers = function() {\n        var item, onClose;\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            return save(assignedUsers);\n          };\n        })(this);\n        item = _.clone($model.$modelValue, false);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": item.assigned_users,\n          \"activeUsers\": $scope.activeUsers,\n          \"onClose\": onClose,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      };\n      $el.on(\"click\", \".user-list-single\", function(event) {\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        return $scope.openAssignedUsers();\n      });\n      $el.on(\"click\", \".remove-user\", function(event) {\n        var assignedUserId, message, target, title;\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        assignedUserId = target.data(\"user-id\");\n        title = $translate.instant(\"COMMON.ASSIGNED_USERS.TITLE_LIGHTBOX_DELETE_ASSIGNED\");\n        message = $scope.usersById[assignedUserId].full_name_display;\n        return $confirm.askOnDelete(title, message).then(function(askResponse) {\n          var assignedUserIds;\n          askResponse.finish();\n          assignedUserIds = _.clone($model.$modelValue.assigned_users, false);\n          assignedUserIds = _.pull(assignedUserIds, assignedUserId);\n          return deleteAssignedUser(assignedUserIds);\n        });\n      });\n      $scope.selfAssign = function() {\n        var assignedUsers;\n        if (!isEditable()) {\n          return;\n        }\n        assignedUsers = _.clone($model.$modelValue.assigned_users, false);\n        assignedUsers.push(currentUserId);\n        assignedUsers = _.uniq(assignedUsers);\n        return save(assignedUsers, currentUserId);\n      };\n      deleteAssignedUser = function(assignedUserIds) {\n        var transform;\n        $scope.loading = true;\n        transform = $modelTransform.save(function(item) {\n          var ref1;\n          item.assigned_users = assignedUserIds;\n          if ((ref1 = item.assigned_to, indexOf.call(assignedUserIds, ref1) < 0) && assignedUserIds.length > 0) {\n            item.assigned_to = assignedUserIds[0];\n          }\n          if (assignedUserIds.length === 0) {\n            item.assigned_to = null;\n          }\n          return item;\n        });\n        transform.then(function() {\n          var item;\n          item = $modelTransform.getObj();\n          $attrs.ngModel = item;\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          item.revert();\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          return $scope.loading = false;\n        });\n      };\n      render = function(assignedUserIds) {\n        var assignedUsers;\n        assignedUsers = _.map(assignedUserIds, function(assignedUserId) {\n          return $scope.usersById[assignedUserId];\n        });\n        $scope.assignedUsers = _.compact(assignedUsers);\n        $scope.selfAssigned = _.includes(assignedUserIds, currentUserId);\n        return $scope.isEditable = isEditable();\n      };\n      $scope.$on(\"assigned-user:deleted\", function(ctx, assignedUserId) {\n        var assignedUsersIds;\n        assignedUsersIds = _.clone($model.$modelValue.assigned_users, false);\n        assignedUsersIds = _.pull(assignedUsersIds, assignedUserId);\n        assignedUsersIds = _.uniq(assignedUsersIds);\n        return deleteAssignedUser(assignedUsersIds);\n      });\n      $scope.$on(\"assigned-user:added\", function(ctx, assignedUserId) {\n        var assignedUsers;\n        assignedUsers = _.clone($model.$modelValue.assigned_users, false);\n        assignedUsers.push(assignedUserId);\n        assignedUsers = _.uniq(assignedUsers);\n        return save(assignedUsers, assignedUserId);\n      });\n      $scope.$watch($attrs.ngModel, function(item, currentItem) {\n        if (item == null) {\n          return;\n        }\n        return render(item.assigned_users);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      templateUrl: \"components/ticket-assigned/assigned-users.html\",\n      link: link,\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedUsers\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", \"$translate\", \"tgCurrentUserService\", \"tgLightboxFactory\", AssignedUsersDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TicketWatchersController;\n\n  TicketWatchersController = (function() {\n    TicketWatchersController.$inject = [\"tgCurrentUserService\", \"$rootScope\", \"tgLightboxFactory\", \"$translate\", \"$tgQueueModelTransformation\"];\n\n    function TicketWatchersController(currentUserService, rootScope, lightboxFactory, translate, modelTransform) {\n      this.currentUserService = currentUserService;\n      this.rootScope = rootScope;\n      this.lightboxFactory = lightboxFactory;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.user = this.currentUserService.getUser();\n      this.loading = false;\n    }\n\n    TicketWatchersController.prototype.openWatchers = function() {\n      var onClose;\n      onClose = (function(_this) {\n        return function(watchersIds) {\n          return _this.save(watchersIds);\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-lb-select-user', {\n        \"class\": \"lightbox lightbox-select-user\"\n      }, {\n        \"currentUsers\": this.item.watchers,\n        \"activeUsers\": this.activeUsers,\n        \"onClose\": onClose,\n        \"lbTitle\": this.translate.instant(\"COMMON.WATCHERS.ADD\")\n      });\n    };\n\n    TicketWatchersController.prototype.getPerms = function() {\n      var name, perms;\n      if (!this.item) {\n        return \"\";\n      }\n      name = this.item._name;\n      perms = {\n        userstories: 'modify_us',\n        issues: 'modify_issue',\n        tasks: 'modify_task',\n        epics: 'modify_epic'\n      };\n      return perms[name];\n    };\n\n    TicketWatchersController.prototype.watch = function() {\n      var promise;\n      this.loading = true;\n      promise = this._watch();\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    TicketWatchersController.prototype.unwatch = function() {\n      var promise;\n      this.loading = true;\n      promise = this._unwatch();\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    TicketWatchersController.prototype.deleteWatcher = function(watcherId) {\n      var watchersIds;\n      watchersIds = _.filter(this.item.watchers, (function(_this) {\n        return function(x) {\n          return x !== watcherId;\n        };\n      })(this));\n      return this.save(watchersIds);\n    };\n\n    TicketWatchersController.prototype.save = function(watchersIds) {\n      var transform;\n      this.loading = true;\n      transform = this.modelTransform.save(function(item) {\n        item.watchers = watchersIds;\n        return item;\n      });\n      transform.then((function(_this) {\n        return function() {\n          return _this.rootScope.$broadcast(\"object:updated\");\n        };\n      })(this));\n      return transform[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    TicketWatchersController.prototype._watch = function() {\n      return this.onWatch();\n    };\n\n    TicketWatchersController.prototype._unwatch = function() {\n      return this.onUnwatch();\n    };\n\n    return TicketWatchersController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"TicketWatchersController\", TicketWatchersController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WatchersDirective;\n\n  WatchersDirective = function($rootscope, $confirm, $repo, $modelTransform, $template, $compile, $translate, $currentUserService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var isEditable, render;\n      $scope.visibleWatchersCount = 4;\n      $scope.displayHidden = false;\n      $scope.isAuthenticated = !!$currentUserService.getUser();\n      isEditable = function() {\n        var ref, ref1;\n        return ((ref = $scope.project) != null ? (ref1 = ref.my_permissions) != null ? ref1.indexOf($attrs.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      render = function() {\n        var ref, watchers, watchersIds;\n        watchersIds = _.clone((ref = $scope.vm.item) != null ? ref.watchers : void 0, false);\n        watchers = _.map(watchersIds, function(watcherId) {\n          return $scope.usersById[watcherId];\n        });\n        watchers = _.filter(watchers, function(it) {\n          return !!it;\n        });\n        $scope.vm.watchers = _.compact(watchers);\n        return $scope.isEditable = isEditable();\n      };\n      $scope.toggleFold = function() {\n        return $scope.displayHidden = !$scope.displayHidden;\n      };\n      $el.on(\"click\", \".user-list-single\", function(event) {\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        return $scope.vm.openWatchers();\n      });\n      $el.on(\"click\", \".remove-user\", function(event) {\n        var message, target, title, watcherId;\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        watcherId = target.data(\"watcher-id\");\n        title = $translate.instant(\"COMMON.WATCHERS.TITLE_LIGHTBOX_DELETE_WARTCHER\");\n        message = $scope.usersById[watcherId].full_name_display;\n        return $confirm.askOnDelete(title, message).then((function(_this) {\n          return function(askResponse) {\n            askResponse.finish();\n            return $scope.vm.deleteWatcher(watcherId);\n          };\n        })(this));\n      });\n      $scope.$on(\"watcher:added\", function(ctx, watcherId) {\n        var watchersIds;\n        watchersIds = _.clone($scope.item.watchers, false);\n        watchersIds.push(watcherId);\n        watchersIds = _.uniq(watchers);\n        return $scope.vm.save(watchersIds);\n      });\n      $scope.$on(\"watchers:selected\", function(ctx, watchersIds) {\n        return $scope.vm.save(watchersIds);\n      });\n      $scope.$watch(\"vm.item\", function(item) {\n        if (!item) {\n          return;\n        }\n        return render();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      controller: \"TicketWatchersController\",\n      bindToController: {\n        item: \"=\",\n        onWatch: \"=\",\n        onUnwatch: \"=\",\n        activeUsers: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/ticket-watchers/ticket-watchers.html\",\n      link: link\n    };\n  };\n\n  WatchersDirective.$inject = [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", \"$translate\", \"tgCurrentUserService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgWatchers\", WatchersDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var module, timeout, tipsDirective;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaComponents\");\n\n  tipsDirective = function(tgLoader, $translate) {\n    var link, randomInt, tips;\n    tips = [\n      {\n        contentType: \"icon\",\n        icon: \"icon-project\",\n        message: \"PROJECTS_ORDER\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-upvote\",\n        message: \"VOTING\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-attach\",\n        message: \"ISSUES_TO_SPRINT\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-clock\",\n        message: \"DUE_DATE\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-iocaine\",\n        message: \"IOCAIN\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-blocked-project\",\n        message: \"BLOCKED\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-promote\",\n        message: \"PROMOTE\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-bulk\",\n        message: \"BULK\"\n      }, {\n        contentType: \"range\",\n        message: \"ZOOM\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-settings\",\n        message: \"CUSTOM_FIELDS\"\n      }, {\n        contentType: \"arrows\",\n        message: \"SLIDE_ARROWS\"\n      }\n    ];\n    randomInt = function(size) {\n      return Math.floor(Math.random() * size) + 1;\n    };\n    link = function(scope, el, attrs) {\n      var loadTip, waitingTimeout;\n      scope.tipLoaded = false;\n      waitingTimeout = null;\n      tgLoader.onStart(function() {\n        return waitingTimeout = timeout(1000, function() {\n          return loadTip();\n        });\n      });\n      tgLoader.onEnd(function() {\n        clearTimeout(waitingTimeout);\n        return scope.tipLoaded = false;\n      });\n      return loadTip = function() {\n        var tip;\n        scope.tipLoaded = true;\n        tip = tips[randomInt(tips.length - 1)];\n        return scope.tip = {\n          contentType: tip.contentType,\n          message: \"TIPS.TIP_\" + tip.message,\n          icon: tip.icon,\n          color: \"tip-color-\" + (randomInt(5))\n        };\n      };\n    };\n    return {\n      link: link,\n      scope: true,\n      templateUrl: \"components/tips/tip.html\"\n    };\n  };\n\n  module.directive('tgTips', ['tgLoader', '$translate', tipsDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TribeButtonDirective;\n\n  TribeButtonDirective = function(configService, locationService) {\n    var link;\n    link = function(scope, el, attrs) {\n      scope.vm = {};\n      scope.vm.tribeHost = configService.config.tribeHost;\n      scope.vm.url = (locationService.protocol()) + \"://\" + (locationService.host());\n      if (locationService.protocol() === \"http\" && locationService.port() !== 80) {\n        return scope.vm.url = scope.vm.url + \":\" + (locationService.port());\n      } else if (locationService.protocol() === \"https\" && locationService.port() !== 443) {\n        return scope.vm.url = scope.vm.url + \":\" + (locationService.port());\n      }\n    };\n    return {\n      scope: {\n        usId: \"=\",\n        projectSlug: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/tribe-button/tribe-button.html\",\n      link: link\n    };\n  };\n\n  TribeButtonDirective.$inject = [\"$tgConfig\", \"$tgLocation\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgTribeButton\", TribeButtonDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TribeLinkedDirective;\n\n  TribeLinkedDirective = function(configService) {\n    var directive, link;\n    link = function(scope, el, attrs) {\n      scope.vm = {};\n      scope.vm.tribeHost = configService.config.tribeHost;\n      scope.vm.show = function() {\n        return scope.vm.open = true;\n      };\n      return scope.vm.hide = function(event) {\n        return scope.vm.open = false;\n      };\n    };\n    directive = {\n      templateUrl: \"components/tribe-button/tribe-linked.html\",\n      scope: {\n        gigTitle: \"=\",\n        gigId: \"=\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  TribeLinkedDirective.$inject = [\"$tgConfig\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgTribeLinked\", TribeLinkedDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var VoteButtonController;\n\n  VoteButtonController = (function() {\n    VoteButtonController.$inject = [\"tgCurrentUserService\"];\n\n    function VoteButtonController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.user = this.currentUserService.getUser();\n      this.loading = false;\n    }\n\n    VoteButtonController.prototype.toggleVote = function() {\n      var promise;\n      this.loading = true;\n      if (!this.item.is_voter) {\n        promise = this.onUpvote();\n      } else {\n        promise = this.onDownvote();\n      }\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    return VoteButtonController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"VoteButton\", VoteButtonController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var VoteButtonDirective;\n\n  VoteButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"VoteButton\",\n      bindToController: {\n        item: \"=\",\n        onUpvote: \"=\",\n        onDownvote: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/vote-button/vote-button.html\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgVoteButton\", VoteButtonDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProjectSwimlanesWipLimitController;\n\n  ProjectSwimlanesWipLimitController = (function() {\n    ProjectSwimlanesWipLimitController.$inject = [\"$scope\", \"$rootScope\", \"$tgResources\"];\n\n    function ProjectSwimlanesWipLimitController(scope, rootscope, rs) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.rs = rs;\n      this.new_wip_limit = this.status.wip_limit;\n    }\n\n    ProjectSwimlanesWipLimitController.prototype.submitSwimlaneNewStatus = function() {\n      this.scope.displayWipLimitSelector = false;\n      if (!!this.status.swimlane_userstory_status_id) {\n        return this.rs.swimlanes.wipLimitUpdate(this.status.swimlane_userstory_status_id, this.new_wip_limit).then((function(_this) {\n          return function() {\n            return _this.rootscope.$broadcast(\"swimlane:load\");\n          };\n        })(this));\n      } else {\n        return this.rs.userstories.editStatus(this.status.id, this.new_wip_limit).then((function(_this) {\n          return function() {\n            return _this.rootscope.$broadcast(\"project:load\");\n          };\n        })(this));\n      }\n    };\n\n    return ProjectSwimlanesWipLimitController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"ProjectSwimlanesWipLimit\", ProjectSwimlanesWipLimitController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WipLimitSelector, cancelTimeout, taiga, timeout;\n\n  taiga = this.taiga;\n\n  timeout = this.taiga.timeout;\n\n  cancelTimeout = this.taiga.cancelTimeout;\n\n  WipLimitSelector = function($timeout) {\n    var link;\n    link = function(scope, el, attrs) {\n      scope.displayWipLimitSelector = false;\n      return scope.toggleWipSelectorVisibility = function() {\n        return scope.displayWipLimitSelector = !scope.displayWipLimitSelector;\n      };\n    };\n    return {\n      link: link,\n      scope: {},\n      templateUrl: \"components/wip-limit-selector/wip-limit-selector.html\",\n      controller: \"ProjectSwimlanesWipLimit\",\n      bindToController: {\n        status: '='\n      },\n      controllerAs: \"vm\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgWipLimitSelector\", [WipLimitSelector]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CommentEditWysiwyg;\n\n  CommentEditWysiwyg = function(attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.uploadFiles = function(file, cb) {\n        var object, projectId;\n        projectId = parseInt($scope.vm.projectId, 10);\n        object = parseInt($scope.vm.object, 10);\n        if (!projectId) {\n          projectId = parseInt($scope.vm.project.id, 10);\n        }\n        return attachmentsFullService.addAttachment(projectId, object, attachmentsFullService.types[$scope.vm.name], file, true, true).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        editonly\\n        required\\n        project=\\\"vm.project\\\"\\n        content='vm.comment.comment'\\n        on-save=\\\"vm.saveComment(text, cb)\\\"\\n        on-cancel=\\\"vm.onEditMode({commentId: vm.comment.id})\\\"\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n</div>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgCommentEditWysiwyg\", [\"tgAttachmentsFullService\", CommentEditWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CommentWysiwyg;\n\n  CommentWysiwyg = function($modelTransform, $rootscope, attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var types;\n      $scope.editableDescription = false;\n      $scope.saveComment = function(description, cb) {\n        var transform;\n        $scope.content = '';\n        $scope.vm.type.comment = description;\n        transform = $modelTransform.save(function(item) {});\n        transform.then(function() {\n          if ($scope.vm.onAddComment) {\n            $scope.vm.onAddComment();\n          }\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        return transform[\"finally\"](cb);\n      };\n      types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\"\n      };\n      $scope.onChange = function(markdown) {\n        return $scope.vm.type.comment = markdown;\n      };\n      $scope.uploadFiles = function(file, cb) {\n        return attachmentsFullService.addAttachment($scope.vm.project.id, $scope.vm.type.id, types[$scope.vm.type._name], file, true, true).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n      $scope.content = '';\n      return $scope.$watch(\"vm.type\", function(value) {\n        if (!value) {\n          return;\n        }\n        return $scope.storageKey = \"comment-\" + value.project + \"-\" + value.id + \"-\" + value._name;\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        required\\n        not-persist\\n        project=\\\"vm.project\\\"\\n        placeholder=\\\"'COMMENTS.TYPE_NEW_COMMENT '| translate\\\"\\n        storage-key='storageKey'\\n        content='content'\\n        on-save='saveComment(text, cb)'\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n</div>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgCommentWysiwyg\", [\"$tgQueueModelTransformation\", \"$rootScope\", \"tgAttachmentsFullService\", CommentWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CustomFieldEditWysiwyg;\n\n  CustomFieldEditWysiwyg = function(attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var types;\n      types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\"\n      };\n      return $scope.uploadFiles = function(file, cb) {\n        return attachmentsFullService.addAttachment($scope.project.id, $scope.ctrl.objectId.toString(), types[$scope.ctrl.type], file).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<tg-wysiwyg\\n    class=\\\"custom-field\\\"\\n    editonly=\\\"!!customAttributeValue.value.length\\\"\\n    project=\\\"project\\\"\\n    content='customAttributeValue.value'\\n    on-save=\\\"saveCustomRichText(text, cb)\\\"\\n    on-cancel=\\\"cancelCustomRichText()\\\"\\n    on-upload-file='uploadFiles'>\\n</tg-wysiwyg>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgCustomFieldEditWysiwyg\", [\"tgAttachmentsFullService\", CustomFieldEditWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ItemWysiwyg;\n\n  ItemWysiwyg = function($modelTransform, $rootscope, $confirm, attachmentsFullService, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var types;\n      $scope.editableDescription = false;\n      $scope.saveDescription = function(description, cb) {\n        var transform;\n        transform = $modelTransform.save(function(item) {\n          item.description = description;\n          return item;\n        });\n        transform.then(function() {\n          $confirm.notify(\"success\");\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](cb);\n      };\n      types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\"\n      };\n      $scope.uploadFiles = function(file, cb) {\n        return attachmentsFullService.addAttachment($scope.project.id, $scope.item.id, types[$attrs.type], file).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n      $scope.$watch($attrs.model, function(value) {\n        if (!value) {\n          return;\n        }\n        $scope.item = value;\n        $scope.version = value.version;\n        return $scope.storageKey = $scope.project.id + \"-\" + value.id + \"-\" + $attrs.type;\n      });\n      return $scope.$watch('project', function(project) {\n        if (!project) {\n          return;\n        }\n        return $scope.editableDescription = project.my_permissions.indexOf($attrs.requiredPerm) !== -1;\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        ng-if=\\\"editableDescription && project\\\"\\n        html-read-mode=\\\"true\\\"\\n        project=\\\"project\\\"\\n        placeholder=\\\"'COMMON.DESCRIPTION.EMPTY '| translate\\\"\\n        version='version'\\n        storage-key='storageKey'\\n        content='item.description'\\n        on-save='saveDescription(text, cb)'\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n    <div\\n        class=\\\"wysiwyg\\\"\\n        ng-if=\\\"!editableDescription && item.description.length\\\"\\n        tg-bind-wysiwyg-html=\\\"item.description\\\"></div>\\n\\n    <div\\n        class=\\\"wysiwyg no-description\\\"\\n        ng-if=\\\"!editableDescription && !item.description.length\\\">\\n        {{'COMMON.DESCRIPTION.NO_DESCRIPTION' | translate}}\\n    </div>\\n</div>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgItemWysiwyg\", [\"$tgQueueModelTransformation\", \"$rootScope\", \"$tgConfirm\", \"tgAttachmentsFullService\", \"$translate\", ItemWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Wysiwyg, taiga;\n\n  taiga = this.taiga;\n\n  Wysiwyg = function($translate, $confirm, $storage, wysiwygService, animationFrame, tgLoader, analytics, $location, $attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var change, clean, create, discardLocalStorage, editorLinks, getCurrentContent, isDraft, isEditOnly, isOutdated, linksEvents, localSave, notPersist, pageAttachments, saveEnd, setHtmlEditor, textEditor, throttleChange, unwatchContent, updateMarkdownWithCurrentHtml;\n      isEditOnly = !!$attrs.$attr.editonly;\n      notPersist = !!$attrs.$attr.notPersist;\n      if ($scope.editonly !== void 0) {\n        isEditOnly = $scope.editonly;\n      }\n      $scope.required = !!$attrs.$attr.required;\n      $scope.editMode = isEditOnly || false;\n      $scope.mode = localStorage.getItem('editor-mode') || 'html';\n      if ($scope.mode !== 'html' && $scope.mode !== 'markdown') {\n        $scope.mode = 'html';\n      }\n      $scope.markdown = '';\n      $scope.html = '';\n      textEditor = null;\n      pageAttachments = $attachmentsFullService.attachments.toJS();\n      editorLinks = [];\n      linksEvents = function() {\n        var initialPos;\n        initialPos = null;\n        $el.on('mousedown', '.js-wysiwyg-html', (function(_this) {\n          return function(e) {\n            return initialPos = {\n              x: e.clientX,\n              y: e.clientY\n            };\n          };\n        })(this));\n        $el.on('click', '.js-wysiwyg-html', (function(_this) {\n          return function(e) {\n            var diffX, diffY;\n            diffX = Math.abs(e.clientX - initialPos.x);\n            diffY = Math.abs(e.clientY - initialPos.y);\n            initialPos = null;\n            if (diffX > 10 || diffY > 10) {\n              return;\n            }\n            if (e.target.tagName !== 'A' && e.target.parentElement.tagName !== 'A') {\n              return $scope.$applyAsync(function() {\n                return $scope.setEditMode(true);\n              });\n            }\n          };\n        })(this));\n        editorLinks = textEditor.querySelectorAll('a[target=\"_blank\"]:not(.link-event)');\n        if (editorLinks.length) {\n          return editorLinks.forEach((function(_this) {\n            return function(link) {\n              link.classList.add('link-event');\n              link.addEventListener('mousedown', function(e) {\n                if (!$scope.editMode) {\n                  e.preventDefault();\n                  return e.stopPropagation();\n                }\n              });\n              return link.addEventListener('click', function(e) {\n                if (!$scope.editMode) {\n                  return window.open(e.currentTarget.getAttribute('href'), '_blank');\n                }\n              });\n            };\n          })(this));\n        }\n      };\n      unwatchContent = $scope.$watch('content', function(content) {\n        var unwatchLoader;\n        if (!_.isUndefined(content)) {\n          $scope.outdated = isOutdated();\n          if (($scope.markdown.length || content.length) && $scope.markdown === content) {\n            return;\n          }\n          content = getCurrentContent();\n          $scope.markdown = content;\n          if (tgLoader.open()) {\n            unwatchLoader = tgLoader.onEnd(function() {\n              return $scope.$evalAsync(function() {\n                create(content);\n                return unwatchLoader();\n              });\n            });\n          } else {\n            create(content);\n          }\n          return unwatchContent();\n        }\n      });\n      create = (function(_this) {\n        return function(text) {\n          if (textEditor) {\n            return;\n          }\n          textEditor = document.createElement('tg-text-editor');\n          textEditor.projectId = $scope.project.id;\n          textEditor.projectSlug = $scope.project.slug;\n          textEditor.placeholder = $scope.placeholder;\n          setHtmlEditor(text);\n          textEditor.mode = $scope.mode;\n          textEditor.lan = $translate.preferredLanguage();\n          textEditor.uploadFunction = $scope.onUploadFile;\n          textEditor.members = $scope.project.members.map(function(member) {\n            return Object.assign(member, {\n              fullNameDisplay: member.full_name_display\n            });\n          });\n          $scope.$applyAsync(function() {\n            return linksEvents();\n          });\n          if (isDraft()) {\n            $scope.setEditMode(true);\n          }\n          textEditor.addEventListener('modeChanged', function(event) {\n            return $scope.$evalAsync(function() {\n              $scope.mode = event.detail;\n              $scope.setEditMode(true);\n              return localStorage.setItem('editor-mode', $scope.mode);\n            });\n          });\n          textEditor.addEventListener('focusChanged', function(event) {\n            if (event.detail) {\n              return $scope.$evalAsync(function() {\n                return $scope.setEditMode(true);\n              });\n            }\n          });\n          textEditor.addEventListener('changed', function(event) {\n            if ($scope.mode === 'html') {\n              $scope.html = event.detail;\n            } else {\n              $scope.markdown = event.detail;\n            }\n            return throttleChange();\n          });\n          return $el.find('.editor-wrapper')[0].appendChild(textEditor);\n        };\n      })(this);\n      setHtmlEditor = function(markdown) {\n        return wysiwygService.refreshAttachmentURLFromMarkdown(markdown).then((function(_this) {\n          return function(markdown) {\n            return textEditor.markdown = markdown;\n          };\n        })(this));\n      };\n      $scope.setEditMode = function(editMode) {\n        $scope.editMode = editMode;\n        if (editMode) {\n          return textEditor.mode = $scope.mode;\n        } else {\n          return textEditor.mode = 'html';\n        }\n      };\n      $scope.save = function(e) {\n        if (e) {\n          e.preventDefault();\n        }\n        setHtmlEditor($scope.markdown);\n        if ($scope.required && !$scope.markdown.length) {\n          return;\n        }\n        $scope.saving = true;\n        $scope.outdated = false;\n        $scope.onSave({\n          text: $scope.markdown,\n          cb: saveEnd\n        });\n        linksEvents();\n      };\n      $scope.cancel = function(e) {\n        if (e) {\n          e.preventDefault();\n        }\n        if (!isEditOnly) {\n          $scope.setEditMode(false);\n        }\n        if (notPersist) {\n          clean();\n        } else {\n          $scope.markdown = $scope.content;\n          setHtmlEditor($scope.content || '');\n        }\n        discardLocalStorage();\n        $scope.outdated = false;\n        $scope.onCancel();\n        linksEvents();\n      };\n      clean = function() {\n        $scope.markdown = '';\n        return setHtmlEditor('');\n      };\n      saveEnd = function() {\n        $scope.saving = false;\n        if (!isEditOnly) {\n          $scope.setEditMode(false);\n        }\n        if (notPersist) {\n          clean();\n        }\n        discardLocalStorage();\n        return analytics.trackEvent('develop', 'save wysiwyg', $scope.mode, 1);\n      };\n      isOutdated = function() {\n        var store;\n        store = $storage.get($scope.storageKey);\n        if (store && store.version && store.version !== $scope.version) {\n          return true;\n        }\n        return false;\n      };\n      isDraft = function() {\n        var store;\n        store = $storage.get($scope.storageKey);\n        if (store) {\n          return true;\n        }\n        return false;\n      };\n      getCurrentContent = function() {\n        var store;\n        store = $storage.get($scope.storageKey);\n        if (store) {\n          return store.text;\n        }\n        return $scope.content;\n      };\n      discardLocalStorage = function() {\n        return $storage.remove($scope.storageKey);\n      };\n      $scope.cancelWithConfirmation = function() {\n        var message, title;\n        if ($scope.content === $scope.markdown) {\n          $scope.cancel();\n          if (document.activeElement.blur) {\n            document.activeElement.blur();\n          }\n          document.body.click();\n          return null;\n        }\n        title = $translate.instant(\"COMMON.CONFIRM_CLOSE_EDIT_MODE_TITLE\");\n        message = $translate.instant(\"COMMON.CONFIRM_CLOSE_EDIT_MODE_MESSAGE\");\n        return $confirm.ask(title, null, message).then(function(askResponse) {\n          $scope.cancel();\n          return askResponse.finish();\n        });\n      };\n      updateMarkdownWithCurrentHtml = function() {\n        return $scope.markdown = wysiwygService.getMarkdown($scope.html);\n      };\n      localSave = function(markdown) {\n        var store;\n        if ($scope.storageKey) {\n          store = {};\n          store.version = $scope.version || 0;\n          store.text = markdown;\n          return $storage.set($scope.storageKey, store);\n        }\n      };\n      change = function() {\n        if (!$scope.editMode) {\n          return;\n        }\n        if ($scope.mode === 'html') {\n          updateMarkdownWithCurrentHtml();\n        }\n        localSave($scope.markdown);\n        return $scope.onChange({\n          markdown: $scope.markdown\n        });\n      };\n      return throttleChange = _.throttle(change, 200);\n    };\n    return {\n      templateUrl: \"common/components/wysiwyg-toolbar.html\",\n      scope: {\n        htmlReadMode: '<',\n        editonly: '<',\n        project: '<',\n        placeholder: '<',\n        version: '<',\n        storageKey: '<',\n        content: '<',\n        onCancel: '&',\n        onSave: '&',\n        onUploadFile: '<',\n        onChange: '&'\n      },\n      link: link\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgWysiwyg\", [\"$translate\", \"$tgConfirm\", \"$tgStorage\", \"tgWysiwygService\", \"animationFrame\", \"tgLoader\", \"$tgAnalytics\", \"$location\", \"tgAttachmentsFullService\", Wysiwyg]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WysiwygService;\n\n  WysiwygService = (function() {\n    WysiwygService.$inject = [\"tgProjectService\", \"tgAttachmentsFullService\", \"tgAttachmentsService\", \"$sce\"];\n\n    function WysiwygService(projectService, attachmentsFullService, attachmentsService, sce) {\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      this.attachmentsService = attachmentsService;\n      this.sce = sce;\n      this.projectDataConversion = {};\n      this.cache = {};\n    }\n\n    WysiwygService.prototype.getMarkdown = function(html) {\n      var projectId;\n      projectId = this.projectService.project.get('id');\n      if (!this.projectDataConversion[projectId]) {\n        this.dataConversion = window.angularDataConversion();\n        this.dataConversion.setUp(this.projectService.project.get('slug'));\n        this.projectDataConversion[projectId] = this.dataConversion;\n      }\n      return this.projectDataConversion[projectId].toMarkdown(html);\n    };\n\n    WysiwygService.prototype.getHTML = function(text) {\n      var projectId;\n      if (!text || !text.length) {\n        return \"\";\n      }\n      projectId = this.projectService.project.get('id');\n      if (!this.projectDataConversion[projectId]) {\n        this.dataConversion = window.angularDataConversion();\n        this.dataConversion.setUp(this.projectService.project.get('slug'));\n        this.projectDataConversion[projectId] = this.dataConversion;\n      }\n      return this.projectDataConversion[projectId].toHtml(text);\n    };\n\n    WysiwygService.prototype.getAttachmentData = function(tokens) {\n      return this.attachmentsService.get(tokens[0], tokens[1]).then((function(_this) {\n        return function(response) {\n          return response.data.url;\n        };\n      })(this));\n    };\n\n    WysiwygService.prototype.getCachedAttachment = function(tokens) {\n      var attachment, attachmentId, attachments, cache_key, cached_result;\n      attachmentId = parseInt(tokens[1], 10);\n      attachments = this.attachmentsFullService.attachments.toJS();\n      attachment = attachments.find((function(_this) {\n        return function(attachment) {\n          return attachment.file.id === attachmentId;\n        };\n      })(this));\n      if (attachment) {\n        return Promise.resolve(attachment.file.url);\n      } else {\n        cache_key = tokens[0] + tokens[1];\n        cached_result = this.cache[cache_key];\n        if (cached_result) {\n          return Promise.resolve(cached_result);\n        } else {\n          return this.getAttachmentData(tokens).then((function(_this) {\n            return function(url) {\n              _this.cache[cache_key] = url;\n              return url;\n            };\n          })(this));\n        }\n      }\n    };\n\n    WysiwygService.prototype.relativePaths = function(html) {\n      var el;\n      el = document.createElement('html');\n      window._extraValidHtmlElments = {\n        input: true\n      };\n      window._extraValidAttrs = {\n        checked: true\n      };\n      el.innerHTML = this.sce.getTrustedHtml(html) || '';\n      el.querySelectorAll('a').forEach((function(_this) {\n        return function(link) {\n          var currentHref, href, newHref;\n          href = link.getAttribute('href');\n          if (href && !href.startsWith('http') && !href.startsWith('/') && !link.classList.contains('mention')) {\n            currentHref = window.location.href.slice(0, window.location.href.lastIndexOf('/') + 1);\n            if (!currentHref.endsWith('/')) {\n              currentHref = currentHref + '/';\n            }\n            newHref = currentHref + link.getAttribute('href');\n            link.removeAttribute('rel');\n            link.removeAttribute('target');\n            link.setAttribute('href', newHref);\n          }\n          if (href.startsWith('project') && link.classList.contains('mention')) {\n            link.removeAttribute('rel');\n            return link.removeAttribute('target');\n          }\n        };\n      })(this));\n      return el.innerHTML;\n    };\n\n    WysiwygService.prototype.refreshAttachmentURLFromMarkdown = function(markdown) {\n      var html;\n      html = this.getHTML(markdown);\n      return this.refreshAttachmentURL(html).then((function(_this) {\n        return function(html) {\n          return _this.getMarkdown(html);\n        };\n      })(this));\n    };\n\n    WysiwygService.prototype.refreshAttachmentURL = function(html) {\n      var el, images, links, promises, regex;\n      el = document.createElement('html');\n      window._extraValidHtmlElments = {\n        input: true\n      };\n      window._extraValidAttrs = {\n        checked: true\n      };\n      el.innerHTML = this.sce.getTrustedHtml(html) || '';\n      regex = /#_taiga-refresh=([a-zA-Z]*\\:\\d+)/;\n      links = {\n        \"elements\": el.querySelectorAll('a'),\n        \"attr\": \"href\"\n      };\n      images = {\n        \"elements\": el.querySelectorAll('img'),\n        \"attr\": \"src\"\n      };\n      promises = [];\n      _.map([links, images], (function(_this) {\n        return function(tag) {\n          return _.map(tag.elements, function(e) {\n            var attrValue, match, promise, tokens;\n            attrValue = e.getAttribute(tag.attr);\n            if (attrValue && attrValue.indexOf && attrValue.indexOf('#_taiga-refresh=') !== -1) {\n              match = attrValue.match(regex);\n              if (match && match.length === 2) {\n                tokens = match[1].split(\":\");\n                promise = _this.getCachedAttachment(tokens).then(function(url) {\n                  return e.setAttribute(tag.attr, url);\n                })[\"catch\"](function() {\n                  return console.warn('attachment ref not found', attrValue);\n                });\n                return promises.push(promise);\n              }\n            }\n          });\n        };\n      })(this));\n      return Promise.all(promises).then(function() {\n        return el.innerHTML;\n      });\n    };\n\n    return WysiwygService;\n\n  })();\n\n  angular.module(\"taigaComponents\").service(\"tgWysiwygService\", WysiwygService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DiscoverHomeOrderByController;\n\n  DiscoverHomeOrderByController = (function() {\n    DiscoverHomeOrderByController.$inject = ['$translate'];\n\n    function DiscoverHomeOrderByController(translate) {\n      this.translate = translate;\n      this.is_open = false;\n      this.texts = {\n        week: this.translate.instant('DISCOVER.FILTERS.WEEK'),\n        month: this.translate.instant('DISCOVER.FILTERS.MONTH'),\n        year: this.translate.instant('DISCOVER.FILTERS.YEAR'),\n        all: this.translate.instant('DISCOVER.FILTERS.ALL_TIME')\n      };\n    }\n\n    DiscoverHomeOrderByController.prototype.currentText = function() {\n      return this.texts[this.currentOrderBy];\n    };\n\n    DiscoverHomeOrderByController.prototype.open = function() {\n      return this.is_open = true;\n    };\n\n    DiscoverHomeOrderByController.prototype.close = function() {\n      return this.is_open = false;\n    };\n\n    DiscoverHomeOrderByController.prototype.orderBy = function(type) {\n      this.currentOrderBy = type;\n      this.is_open = false;\n      return this.onChange({\n        orderBy: this.currentOrderBy\n      });\n    };\n\n    return DiscoverHomeOrderByController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverHomeOrderBy\", DiscoverHomeOrderByController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DiscoverHomeOrderByDirective;\n\n  DiscoverHomeOrderByDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      controller: \"DiscoverHomeOrderBy\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: \"discover/components/discover-home-order-by/discover-home-order-by.html\",\n      scope: {\n        currentOrderBy: \"=orderBy\",\n        onChange: \"&\"\n      },\n      link: link\n    };\n  };\n\n  DiscoverHomeOrderByDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgDiscoverHomeOrderBy\", DiscoverHomeOrderByDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DiscoverSearchBarController;\n\n  DiscoverSearchBarController = (function() {\n    DiscoverSearchBarController.$inject = ['tgDiscoverProjectsService'];\n\n    function DiscoverSearchBarController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.projectsCount;\n        };\n      })(this));\n      this.discoverProjectsService.fetchStats();\n    }\n\n    DiscoverSearchBarController.prototype.selectFilter = function(filter) {\n      return this.onChange({\n        filter: filter,\n        q: this.q\n      });\n    };\n\n    DiscoverSearchBarController.prototype.submitFilter = function() {\n      return this.onChange({\n        filter: this.filter,\n        q: this.q\n      });\n    };\n\n    return DiscoverSearchBarController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverSearchBar\", DiscoverSearchBarController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DiscoverSearchBarDirective;\n\n  DiscoverSearchBarDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {};\n    return {\n      controller: \"DiscoverSearchBar\",\n      controllerAs: \"vm\",\n      templateUrl: 'discover/components/discover-search-bar/discover-search-bar.html',\n      bindToController: true,\n      scope: {\n        q: \"=\",\n        filter: \"=\",\n        onChange: \"&\"\n      },\n      compile: function(element, attrs) {\n        if (!attrs.q) {\n          return attrs.q = '';\n        }\n      },\n      link: link\n    };\n  };\n\n  DiscoverSearchBarDirective.$inject = [];\n\n  angular.module('taigaDiscover').directive('tgDiscoverSearchBar', DiscoverSearchBarDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DiscoverSearchListHeaderController;\n\n  DiscoverSearchListHeaderController = (function() {\n    DiscoverSearchListHeaderController.$inject = [];\n\n    function DiscoverSearchListHeaderController() {\n      this.like_is_open = this.orderBy.indexOf('-total_fans') === 0;\n      this.activity_is_open = this.orderBy.indexOf('-total_activity') === 0;\n    }\n\n    DiscoverSearchListHeaderController.prototype.openLike = function() {\n      this.like_is_open = true;\n      this.activity_is_open = false;\n      return this.setOrderBy('-total_fans_last_week');\n    };\n\n    DiscoverSearchListHeaderController.prototype.openActivity = function() {\n      this.activity_is_open = true;\n      this.like_is_open = false;\n      return this.setOrderBy('-total_activity_last_week');\n    };\n\n    DiscoverSearchListHeaderController.prototype.setOrderBy = function(type) {\n      if (type == null) {\n        type = '';\n      }\n      if (!type) {\n        this.like_is_open = false;\n        this.activity_is_open = false;\n      }\n      return this.onChange({\n        orderBy: type\n      });\n    };\n\n    return DiscoverSearchListHeaderController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverSearchListHeader\", DiscoverSearchListHeaderController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DiscoverSearchListHeaderDirective;\n\n  DiscoverSearchListHeaderDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      controller: \"DiscoverSearchListHeader\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: \"discover/components/discover-search-list-header/discover-search-list-header.html\",\n      scope: {\n        onChange: \"&\",\n        orderBy: \"=\"\n      },\n      link: link\n    };\n  };\n\n  DiscoverSearchListHeaderDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgDiscoverSearchListHeader\", DiscoverSearchListHeaderDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var FeaturedProjectsController;\n\n  FeaturedProjectsController = (function() {\n    FeaturedProjectsController.$inject = [\"tgDiscoverProjectsService\"];\n\n    function FeaturedProjectsController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, \"featured\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.featured;\n        };\n      })(this));\n      this.discoverProjectsService.fetchFeatured();\n    }\n\n    return FeaturedProjectsController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"FeaturedProjects\", FeaturedProjectsController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var FeaturedProjectsDirective;\n\n  FeaturedProjectsDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      controller: \"FeaturedProjects\",\n      controllerAs: \"vm\",\n      templateUrl: \"discover/components/featured-projects/featured-projects.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  FeaturedProjectsDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgFeaturedProjects\", FeaturedProjectsDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var HighlightedDirective;\n\n  HighlightedDirective = function() {\n    return {\n      templateUrl: \"discover/components/highlighted/highlighted.html\",\n      scope: {\n        loading: \"=\",\n        highlighted: \"=\",\n        orderBy: \"=\"\n      }\n    };\n  };\n\n  HighlightedDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgHighlighted\", HighlightedDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var MostActiveController;\n\n  MostActiveController = (function() {\n    MostActiveController.$inject = [\"tgDiscoverProjectsService\"];\n\n    function MostActiveController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, \"highlighted\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.mostActive;\n        };\n      })(this));\n      this.currentOrderBy = 'year';\n      this.order_by = this.getOrderBy();\n    }\n\n    MostActiveController.prototype.fetch = function() {\n      this.loading = true;\n      this.order_by = this.getOrderBy();\n      return this.discoverProjectsService.fetchMostActive({\n        order_by: this.order_by\n      }).then((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    MostActiveController.prototype.orderBy = function(type) {\n      this.currentOrderBy = type;\n      return this.fetch();\n    };\n\n    MostActiveController.prototype.getOrderBy = function(type) {\n      if (this.currentOrderBy === 'all') {\n        return '-total_activity';\n      } else {\n        return '-total_activity_last_' + this.currentOrderBy;\n      }\n    };\n\n    return MostActiveController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"MostActive\", MostActiveController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var MostActiveDirective;\n\n  MostActiveDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.fetch();\n    };\n    return {\n      controller: \"MostActive\",\n      controllerAs: \"vm\",\n      templateUrl: \"discover/components/most-active/most-active.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  MostActiveDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgMostActive\", MostActiveDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var MostLikedController;\n\n  MostLikedController = (function() {\n    MostLikedController.$inject = [\"tgDiscoverProjectsService\"];\n\n    function MostLikedController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, \"highlighted\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.mostLiked;\n        };\n      })(this));\n      this.currentOrderBy = 'year';\n      this.order_by = this.getOrderBy();\n    }\n\n    MostLikedController.prototype.fetch = function() {\n      this.loading = true;\n      this.order_by = this.getOrderBy();\n      return this.discoverProjectsService.fetchMostLiked({\n        order_by: this.order_by\n      }).then((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    MostLikedController.prototype.orderBy = function(type) {\n      this.currentOrderBy = type;\n      return this.fetch();\n    };\n\n    MostLikedController.prototype.getOrderBy = function() {\n      if (this.currentOrderBy === 'all') {\n        return '-total_fans';\n      } else {\n        return '-total_fans_last_' + this.currentOrderBy;\n      }\n    };\n\n    return MostLikedController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"MostLiked\", MostLikedController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var MostLikedDirective;\n\n  MostLikedDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.fetch();\n    };\n    return {\n      controller: \"MostLiked\",\n      controllerAs: \"vm\",\n      templateUrl: \"discover/components/most-liked/most-liked.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  MostLikedDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgMostLiked\", MostLikedDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DiscoverHomeController;\n\n  DiscoverHomeController = (function() {\n    DiscoverHomeController.$inject = ['$tgLocation', '$tgNavUrls', 'tgAppMetaService', '$translate'];\n\n    function DiscoverHomeController(location, navUrls, appMetaService, translate) {\n      var description, title;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      title = this.translate.instant(\"DISCOVER.PAGE_TITLE\");\n      description = this.translate.instant(\"DISCOVER.PAGE_DESCRIPTION\");\n      this.appMetaService.setAll(title, description);\n    }\n\n    DiscoverHomeController.prototype.onSubmit = function(q) {\n      var url;\n      url = this.navUrls.resolve('discover-search');\n      return this.location.search('text', q).path(url);\n    };\n\n    return DiscoverHomeController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverHome\", DiscoverHomeController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DiscoverSearchController;\n\n  DiscoverSearchController = (function() {\n    DiscoverSearchController.$inject = ['$routeParams', 'tgDiscoverProjectsService', '$route', '$tgLocation', '$tgAnalytics', 'tgAppMetaService', '$translate'];\n\n    function DiscoverSearchController(routeParams, discoverProjectsService, route, location, analytics, appMetaService, translate) {\n      var description, title;\n      this.routeParams = routeParams;\n      this.discoverProjectsService = discoverProjectsService;\n      this.route = route;\n      this.location = location;\n      this.analytics = analytics;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.page = 1;\n      taiga.defineImmutableProperty(this, \"searchResult\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.searchResult;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"nextSearchPage\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.nextSearchPage;\n        };\n      })(this));\n      this.q = this.routeParams.text;\n      this.filter = this.routeParams.filter || 'all';\n      this.orderBy = this.routeParams['order_by'] || '';\n      this.loadingGlobal = false;\n      this.loadingList = false;\n      this.loadingPagination = false;\n      title = this.translate.instant(\"DISCOVER.SEARCH.PAGE_TITLE\");\n      description = this.translate.instant(\"DISCOVER.SEARCH.PAGE_DESCRIPTION\");\n      this.appMetaService.setAll(title, description);\n      this.analytics.trackPage(this.location.url(), \"Discover Search\");\n    }\n\n    DiscoverSearchController.prototype.fetch = function() {\n      this.page = 1;\n      this.discoverProjectsService.resetSearchList();\n      return this.search();\n    };\n\n    DiscoverSearchController.prototype.fetchByGlobalSearch = function() {\n      if (this.loadingGlobal) {\n        return;\n      }\n      this.loadingGlobal = true;\n      return this.fetch().then((function(_this) {\n        return function() {\n          return _this.loadingGlobal = false;\n        };\n      })(this));\n    };\n\n    DiscoverSearchController.prototype.fetchByOrderBy = function() {\n      if (this.loadingList) {\n        return;\n      }\n      this.loadingList = true;\n      return this.fetch().then((function(_this) {\n        return function() {\n          return _this.loadingList = false;\n        };\n      })(this));\n    };\n\n    DiscoverSearchController.prototype.showMore = function() {\n      if (this.loadingPagination) {\n        return;\n      }\n      this.loadingPagination = true;\n      this.page++;\n      return this.search().then((function(_this) {\n        return function() {\n          return _this.loadingPagination = false;\n        };\n      })(this));\n    };\n\n    DiscoverSearchController.prototype.search = function() {\n      var filter, params;\n      filter = this.getFilter();\n      params = {\n        page: this.page,\n        q: this.q,\n        order_by: this.orderBy\n      };\n      _.assign(params, filter);\n      return this.discoverProjectsService.fetchSearch(params);\n    };\n\n    DiscoverSearchController.prototype.getFilter = function() {\n      if (this.filter === 'people') {\n        return {\n          is_looking_for_people: true\n        };\n      } else if (this.filter === 'scrum') {\n        return {\n          is_backlog_activated: true\n        };\n      } else if (this.filter === 'kanban') {\n        return {\n          is_kanban_activated: true\n        };\n      }\n      return {};\n    };\n\n    DiscoverSearchController.prototype.onChangeFilter = function(filter, q) {\n      this.filter = filter;\n      this.q = q;\n      this.route.updateParams({\n        filter: this.filter,\n        text: this.q\n      });\n      this.analytics.trackPage(this.location.url(), \"Discover Search\");\n      return this.fetchByGlobalSearch();\n    };\n\n    DiscoverSearchController.prototype.onChangeOrder = function(orderBy) {\n      this.orderBy = orderBy;\n      this.route.updateParams({\n        order_by: orderBy\n      });\n      this.analytics.trackPage(this.location.url(), \"Discover Search\");\n      return this.fetchByOrderBy();\n    };\n\n    return DiscoverSearchController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverSearch\", DiscoverSearchController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DiscoverSearchDirective;\n\n  DiscoverSearchDirective = function() {\n    var link;\n    link = function(scope, element, attrs, ctrl) {\n      return ctrl.fetch();\n    };\n    return {\n      controller: \"DiscoverSearch\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  DiscoverSearchDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgDiscoverSearch\", DiscoverSearchDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DiscoverProjectsService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  DiscoverProjectsService = (function(superClass) {\n    var _discoverParams;\n\n    extend(DiscoverProjectsService, superClass);\n\n    DiscoverProjectsService.$inject = [\"tgResources\", \"tgProjectsService\"];\n\n    _discoverParams = {\n      discover_mode: true\n    };\n\n    function DiscoverProjectsService(rs, projectsService) {\n      this.rs = rs;\n      this.projectsService = projectsService;\n      this._mostLiked = Immutable.List();\n      this._mostActive = Immutable.List();\n      this._featured = Immutable.List();\n      this._searchResult = Immutable.List();\n      this._projectsCount = 0;\n      this.decorate = this.projectsService._decorate.bind(this.projectsService);\n      taiga.defineImmutableProperty(this, \"mostLiked\", (function(_this) {\n        return function() {\n          return _this._mostLiked;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"mostActive\", (function(_this) {\n        return function() {\n          return _this._mostActive;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"featured\", (function(_this) {\n        return function() {\n          return _this._featured;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"searchResult\", (function(_this) {\n        return function() {\n          return _this._searchResult;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"nextSearchPage\", (function(_this) {\n        return function() {\n          return _this._nextSearchPage;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"projectsCount\", (function(_this) {\n        return function() {\n          return _this._projectsCount;\n        };\n      })(this));\n    }\n\n    DiscoverProjectsService.prototype.fetchMostLiked = function(params) {\n      var _params;\n      _params = _.extend({}, _discoverParams, params);\n      return this.rs.projects.getProjects(_params, false).then((function(_this) {\n        return function(result) {\n          var data, projects;\n          data = result.data.slice(0, 4);\n          projects = Immutable.fromJS(data);\n          projects = projects.map(_this.decorate);\n          return _this._mostLiked = projects;\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.fetchMostActive = function(params) {\n      var _params;\n      _params = _.extend({}, _discoverParams, params);\n      return this.rs.projects.getProjects(_params, false).then((function(_this) {\n        return function(result) {\n          var data, projects;\n          data = result.data.slice(0, 4);\n          projects = Immutable.fromJS(data);\n          projects = projects.map(_this.decorate);\n          return _this._mostActive = projects;\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.fetchFeatured = function() {\n      var _params;\n      _params = _.extend({}, _discoverParams);\n      _params.is_featured = true;\n      return this.rs.projects.getProjects(_params, false).then((function(_this) {\n        return function(result) {\n          var data, projects;\n          data = result.data.slice(0, 4);\n          projects = Immutable.fromJS(data);\n          projects = projects.map(_this.decorate);\n          return _this._featured = projects;\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.resetSearchList = function() {\n      return this._searchResult = Immutable.List();\n    };\n\n    DiscoverProjectsService.prototype.fetchStats = function() {\n      return this.rs.stats.discover().then((function(_this) {\n        return function(discover) {\n          return _this._projectsCount = discover.getIn(['projects', 'total']);\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.fetchSearch = function(params) {\n      var _params;\n      _params = _.extend({}, _discoverParams, params);\n      return this.rs.projects.getProjects(_params).then((function(_this) {\n        return function(result) {\n          var projects;\n          _this._nextSearchPage = !!result.headers('X-Pagination-Next');\n          projects = Immutable.fromJS(result.data);\n          projects = projects.map(_this.decorate);\n          return _this._searchResult = _this._searchResult.concat(projects);\n        };\n      })(this));\n    };\n\n    return DiscoverProjectsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaDiscover\").service(\"tgDiscoverProjectsService\", DiscoverProjectsService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CreateEpicController, getRandomDefaultColor, taiga, trim;\n\n  taiga = this.taiga;\n\n  trim = taiga.trim;\n\n  getRandomDefaultColor = taiga.getRandomDefaultColor;\n\n  CreateEpicController = (function() {\n    CreateEpicController.$inject = [\"$tgConfirm\", \"tgProjectService\", \"tgEpicsService\", \"$tgAnalytics\"];\n\n    function CreateEpicController(confirm, projectService, epicsService, analytics) {\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.analytics = analytics;\n      this.project = this.projectService.project.toJS();\n      this.newEpic = {\n        color: getRandomDefaultColor(),\n        status: this.project.default_epic_status,\n        tags: []\n      };\n      this.attachments = Immutable.List();\n      this.loading = false;\n    }\n\n    CreateEpicController.prototype.createEpic = function() {\n      if (!this.validateForm()) {\n        return;\n      }\n      this.loading = true;\n      return this.epicsService.createEpic(this.newEpic, this.attachments).then((function(_this) {\n        return function(response) {\n          _this.analytics.trackEvent(\"epic\", \"create\", \"create epic\", 1);\n          _this.onCreateEpic();\n          return _this.loading = false;\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(response) {\n          _this.loading = false;\n          _this.setFormErrors(response.data);\n          if (response.data._error_message) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          }\n        };\n      })(this));\n    };\n\n    CreateEpicController.prototype.selectColor = function(color) {\n      return this.newEpic.color = color;\n    };\n\n    CreateEpicController.prototype.addTag = function(name, color) {\n      name = trim(name.toLowerCase());\n      if (!_.find(this.newEpic.tags, function(it) {\n        return it[0] === name;\n      })) {\n        return this.newEpic.tags.push([name, color]);\n      }\n    };\n\n    CreateEpicController.prototype.deleteTag = function(tag) {\n      return _.remove(this.newEpic.tags, function(it) {\n        return it[0] === tag[0];\n      });\n    };\n\n    CreateEpicController.prototype.addAttachment = function(attachment) {\n      return this.attachments.push(attachment);\n    };\n\n    return CreateEpicController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"CreateEpicCtrl\", CreateEpicController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CreateEpicDirective;\n\n  CreateEpicDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var form;\n      form = el.find(\"form\").checksley();\n      ctrl.validateForm = (function(_this) {\n        return function() {\n          return form.validate();\n        };\n      })(this);\n      return ctrl.setFormErrors = (function(_this) {\n        return function(errors) {\n          return form.setErrors(errors);\n        };\n      })(this);\n    };\n    return {\n      link: link,\n      templateUrl: \"epics/create-epic/create-epic.html\",\n      controller: \"CreateEpicCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        onCreateEpic: '&'\n      },\n      scope: {}\n    };\n  };\n\n  angular.module('taigaEpics').directive(\"tgCreateEpic\", CreateEpicDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var EpicRowController;\n\n  EpicRowController = (function() {\n    EpicRowController.$inject = [\"$tgConfirm\", \"tgProjectService\", \"tgEpicsService\"];\n\n    function EpicRowController(confirm, projectService, epicsService) {\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.displayUserStories = false;\n      this.displayAssignedTo = false;\n      this.displayStatusList = false;\n      this.loadingStatus = false;\n      this.project = this.projectService.project.toJS();\n      this._calculateProgressBar();\n    }\n\n    EpicRowController.prototype._calculateProgressBar = function() {\n      var progress, total;\n      if (this.epic.getIn(['status_extra_info', 'is_closed']) === true) {\n        return this.percentage = \"100%\";\n      } else {\n        progress = this.epic.getIn(['user_stories_counts', 'progress']);\n        total = this.epic.getIn(['user_stories_counts', 'total']);\n        if (total === 0) {\n          return this.percentage = \"0%\";\n        } else {\n          return this.percentage = (progress * 100 / total) + \"%\";\n        }\n      }\n    };\n\n    EpicRowController.prototype.canEditEpics = function() {\n      return this.projectService.hasPermission(\"modify_epic\");\n    };\n\n    EpicRowController.prototype.toggleUserStoryList = function() {\n      if (!this.displayUserStories) {\n        return this.epicsService.listRelatedUserStories(this.epic).then((function(_this) {\n          return function(userStories) {\n            _this.epicStories = userStories;\n            return _this.displayUserStories = true;\n          };\n        })(this))[\"catch\"]((function(_this) {\n          return function() {\n            return _this.confirm.notify('error');\n          };\n        })(this));\n      } else {\n        return this.displayUserStories = false;\n      }\n    };\n\n    EpicRowController.prototype.updateStatus = function(statusId) {\n      this.displayStatusList = false;\n      this.loadingStatus = true;\n      return this.epicsService.updateEpicStatus(this.epic, statusId)[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify('error');\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loadingStatus = false;\n        };\n      })(this));\n    };\n\n    EpicRowController.prototype.updateAssignedTo = function(member) {\n      this.assignLoader = true;\n      return this.epicsService.updateEpicAssignedTo(this.epic, (member != null ? member.id : void 0) || null)[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify('error');\n        };\n      })(this)).then((function(_this) {\n        return function() {\n          return _this.assignLoader = false;\n        };\n      })(this));\n    };\n\n    return EpicRowController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"EpicRowCtrl\", EpicRowController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var EpicRowDirective;\n\n  EpicRowDirective = function() {\n    return {\n      templateUrl: \"epics/dashboard/epic-row/epic-row.html\",\n      controller: \"EpicRowCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        epic: '=',\n        options: '='\n      }\n    };\n  };\n\n  angular.module('taigaEpics').directive(\"tgEpicRow\", EpicRowDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var EpicsDashboardController, taiga;\n\n  taiga = this.taiga;\n\n  EpicsDashboardController = (function() {\n    EpicsDashboardController.$inject = [\"$routeParams\", \"tgErrorHandlingService\", \"tgLightboxFactory\", \"lightboxService\", \"$tgConfirm\", \"tgProjectService\", \"tgEpicsService\", \"tgAppMetaService\", \"$translate\"];\n\n    function EpicsDashboardController(params, errorHandlingService, lightboxFactory, lightboxService, confirm, projectService, epicsService, appMetaService, translate) {\n      this.params = params;\n      this.errorHandlingService = errorHandlingService;\n      this.lightboxFactory = lightboxFactory;\n      this.lightboxService = lightboxService;\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.sectionName = \"EPICS.SECTION_NAME\";\n      taiga.defineImmutableProperty(this, 'project', (function(_this) {\n        return function() {\n          return _this.projectService.project;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'epics', (function(_this) {\n        return function() {\n          return _this.epicsService.epics;\n        };\n      })(this));\n      this.appMetaService.setfn(this._setMeta.bind(this));\n    }\n\n    EpicsDashboardController.prototype._setMeta = function() {\n      var ctx;\n      if (!this.project) {\n        return null;\n      }\n      ctx = {\n        projectName: this.project.get(\"name\"),\n        projectDescription: this.project.get(\"description\")\n      };\n      return {\n        title: this.translate.instant(\"EPICS.PAGE_TITLE\", ctx),\n        description: this.translate.instant(\"EPICS.PAGE_DESCRIPTION\", ctx)\n      };\n    };\n\n    EpicsDashboardController.prototype.loadInitialData = function() {\n      this.epicsService.clear();\n      return this.projectService.setProjectBySlug(this.params.pslug).then((function(_this) {\n        return function() {\n          if (!_this.projectService.isEpicsDashboardEnabled()) {\n            return _this.errorHandlingService.notFound();\n          }\n          if (!_this.projectService.hasPermission(\"view_epics\")) {\n            return _this.errorHandlingService.permissionDenied();\n          }\n          return _this.epicsService.fetchEpics();\n        };\n      })(this));\n    };\n\n    EpicsDashboardController.prototype.canCreateEpics = function() {\n      return this.projectService.hasPermission(\"add_epic\");\n    };\n\n    EpicsDashboardController.prototype.onCreateEpic = function() {\n      var onCreateEpic;\n      onCreateEpic = (function(_this) {\n        return function() {\n          _this.lightboxService.closeAll();\n          _this.confirm.notify(\"success\");\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-create-epic', {\n        \"class\": \"lightbox lightbox-create-epic open\",\n        \"on-create-epic\": \"onCreateEpic()\"\n      }, {\n        \"onCreateEpic\": onCreateEpic.bind(this)\n      });\n    };\n\n    return EpicsDashboardController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"EpicsDashboardCtrl\", EpicsDashboardController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var EpicsSortableDirective;\n\n  EpicsSortableDirective = function($parse, projectService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      if (!projectService.hasPermission(\"modify_epic\")) {\n        return;\n      }\n      callback = $parse(attrs.tgEpicsSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('div.epics-table-body-row');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var epic, itemEl, newIndex;\n        itemEl = $(item);\n        epic = itemEl.scope().epic;\n        newIndex = itemEl.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            epic: epic,\n            newIndex: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  EpicsSortableDirective.$inject = [\"$parse\", \"tgProjectService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgEpicsSortable\", EpicsSortableDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var EpicsTableController, generateHash, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = this.taiga.generateHash;\n\n  EpicsTableController = (function() {\n    EpicsTableController.$inject = [\"$tgConfirm\", \"tgEpicsService\", \"$timeout\", \"$tgStorage\", \"tgProjectService\"];\n\n    function EpicsTableController(confirm, epicsService, timeout, storage, projectService) {\n      this.confirm = confirm;\n      this.epicsService = epicsService;\n      this.timeout = timeout;\n      this.storage = storage;\n      this.projectService = projectService;\n      this.hash = generateHash([this.projectService.project.get('id'), 'epics']);\n      this.displayOptions = false;\n      this.displayVotes = true;\n      this.options = this.storage.get(this.hash, {\n        votes: true,\n        name: true,\n        project: true,\n        sprint: true,\n        assigned: true,\n        status: true,\n        progress: true,\n        closed: true,\n        closed_us: true\n      });\n      taiga.defineImmutableProperty(this, 'epics', (function(_this) {\n        return function() {\n          return _this.epicsService.epics;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'disabledEpicsPagination', (function(_this) {\n        return function() {\n          return _this.epicsService._disablePagination;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'loadingEpics', (function(_this) {\n        return function() {\n          return _this.epicsService._loadingEpics;\n        };\n      })(this));\n    }\n\n    EpicsTableController.prototype.toggleEpicTableOptions = function() {\n      return this.displayOptions = !this.displayOptions;\n    };\n\n    EpicsTableController.prototype.reorderEpic = function(epic, newIndex) {\n      if (epic.get('epics_order') === newIndex) {\n        return null;\n      }\n      return this.epicsService.reorderEpic(epic, newIndex).then(null, (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n    };\n\n    EpicsTableController.prototype.nextPage = function() {\n      return this.epicsService.nextPage();\n    };\n\n    EpicsTableController.prototype.hoverEpicTableOption = function() {\n      if (this.timer) {\n        return this.timeout.cancel(this.timer);\n      }\n    };\n\n    EpicsTableController.prototype.hideEpicTableOption = function() {\n      return this.timer = this.timeout(((function(_this) {\n        return function() {\n          return _this.displayOptions = false;\n        };\n      })(this)), 400);\n    };\n\n    EpicsTableController.prototype.updateViewOptions = function() {\n      return this.storage.set(this.hash, this.options);\n    };\n\n    return EpicsTableController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"EpicsTableCtrl\", EpicsTableController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var EpicsTableDirective;\n\n  EpicsTableDirective = function() {\n    return {\n      templateUrl: \"epics/dashboard/epics-table/epics-table.html\",\n      controller: \"EpicsTableCtrl\",\n      controllerAs: \"vm\",\n      scope: {}\n    };\n  };\n\n  angular.module('taigaEpics').directive(\"tgEpicsTable\", EpicsTableDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var StoryRowController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  StoryRowController = (function() {\n    StoryRowController.$inject = [];\n\n    function StoryRowController() {\n      this._calculateProgressBar();\n    }\n\n    StoryRowController.prototype._calculateProgressBar = function() {\n      var totalTasks, totalTasksCompleted;\n      if (this.story.get('is_closed') === true) {\n        return this.percentage = \"100%\";\n      } else {\n        totalTasks = this.story.get('tasks').size;\n        totalTasksCompleted = this.story.get('tasks').filter(function(it) {\n          return it.get(\"is_closed\");\n        }).size;\n        if (totalTasks === 0) {\n          return this.percentage = \"0%\";\n        } else {\n          return this.percentage = (totalTasksCompleted * 100 / totalTasks) + \"%\";\n        }\n      }\n    };\n\n    return StoryRowController;\n\n  })();\n\n  module.controller(\"StoryRowCtrl\", StoryRowController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var StoryRowDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  StoryRowDirective = function() {\n    return {\n      templateUrl: \"epics/dashboard/story-row/story-row.html\",\n      controller: \"StoryRowCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        story: '=',\n        options: '='\n      }\n    };\n  };\n\n  module.directive(\"tgStoryRow\", StoryRowDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var EpicsService, taiga;\n\n  taiga = this.taiga;\n\n  EpicsService = (function() {\n    EpicsService.$inject = ['tgProjectService', 'tgAttachmentsService', 'tgResources', 'tgXhrErrorService', '$q'];\n\n    function EpicsService(projectService, attachmentsService, resources, xhrError, q) {\n      this.projectService = projectService;\n      this.attachmentsService = attachmentsService;\n      this.resources = resources;\n      this.xhrError = xhrError;\n      this.q = q;\n      this.clear();\n      taiga.defineImmutableProperty(this, 'epics', (function(_this) {\n        return function() {\n          return _this._epics;\n        };\n      })(this));\n    }\n\n    EpicsService.prototype.clear = function() {\n      this._loadingEpics = false;\n      this._disablePagination = false;\n      this._page = 1;\n      return this._epics = Immutable.List();\n    };\n\n    EpicsService.prototype.fetchEpics = function(reset) {\n      if (reset == null) {\n        reset = false;\n      }\n      this._loadingEpics = true;\n      this._disablePagination = true;\n      return this.resources.epics.list(this.projectService.project.get('id'), this._page).then((function(_this) {\n        return function(result) {\n          if (reset) {\n            _this.clear();\n            _this._epics = result.list;\n          } else {\n            _this._epics = _this._epics.concat(result.list);\n          }\n          _this._loadingEpics = false;\n          return _this._disablePagination = !result.headers('x-pagination-next');\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          return _this.xhrError.response(xhr);\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.nextPage = function() {\n      this._page++;\n      return this.fetchEpics();\n    };\n\n    EpicsService.prototype.listRelatedUserStories = function(epic) {\n      return this.resources.userstories.listInEpic(epic.get('id'));\n    };\n\n    EpicsService.prototype.createEpic = function(epicData, attachments, projectId) {\n      if (projectId) {\n        epicData.project = projectId;\n      } else {\n        epicData.project = this.projectService.project.get('id');\n      }\n      return this.resources.epics.post(epicData).then((function(_this) {\n        return function(epic) {\n          var promises;\n          if (!attachments) {\n            return epic;\n          } else {\n            promises = _.map(attachments.toJS(), function(attachment) {\n              return _this.attachmentsService.upload(attachment.file, epic.get('id'), epic.get('project'), 'epic');\n            });\n            return _this.q.all(promises).then(_this.fetchEpics.bind(_this, true));\n          }\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.reorderEpic = function(epic, newIndex) {\n      var afterDestination, beforeDestination, data, newOrder, orderList, previous, previousWithTheSameOrder, setOrders, withoutMoved;\n      orderList = {};\n      this._epics.forEach(function(it) {\n        return orderList[it.get('id')] = it.get('epics_order');\n      });\n      withoutMoved = this.epics.filter((function(_this) {\n        return function(it) {\n          return it.get('id') !== epic.get('id');\n        };\n      })(this));\n      beforeDestination = withoutMoved.slice(0, newIndex);\n      afterDestination = withoutMoved.slice(newIndex);\n      previous = beforeDestination.last();\n      newOrder = !previous ? 0 : previous.get('epics_order') + 1;\n      orderList[epic.get('id')] = newOrder;\n      previousWithTheSameOrder = beforeDestination.filter((function(_this) {\n        return function(it) {\n          return it.get('epics_order') === previous.get('epics_order');\n        };\n      })(this));\n      setOrders = _.fromPairs(previousWithTheSameOrder.map((function(_this) {\n        return function(it) {\n          return [it.get('id'), it.get('epics_order')];\n        };\n      })(this)).toJS());\n      afterDestination.forEach(function(it) {\n        return orderList[it.get('id')] = it.get('epics_order') + 1;\n      });\n      this._epics = this._epics.map(function(it) {\n        return it.set('epics_order', orderList[it.get('id')]);\n      });\n      this._epics = this._epics.sortBy(function(it) {\n        return it.get('epics_order');\n      });\n      data = {\n        epics_order: newOrder,\n        version: epic.get('version')\n      };\n      return this.resources.epics.reorder(epic.get('id'), data, setOrders).then((function(_this) {\n        return function(newEpic) {\n          return _this._epics = _this._epics.map(function(it) {\n            if (it.get('id') === newEpic.get('id')) {\n              return newEpic;\n            }\n            return it;\n          });\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.reorderRelatedUserstory = function(epic, epicUserstories, userstory, newIndex) {\n      var beforeDestination, data, epicId, newOrder, previous, previousWithTheSameOrder, setOrders, userstoryId, withoutMoved;\n      withoutMoved = epicUserstories.filter((function(_this) {\n        return function(it) {\n          return it.get('id') !== userstory.get('id');\n        };\n      })(this));\n      beforeDestination = withoutMoved.slice(0, newIndex);\n      previous = beforeDestination.last();\n      newOrder = !previous ? 0 : previous.get('epic_order') + 1;\n      previousWithTheSameOrder = beforeDestination.filter((function(_this) {\n        return function(it) {\n          return it.get('epic_order') === previous.get('epic_order');\n        };\n      })(this));\n      setOrders = _.fromPairs(previousWithTheSameOrder.map((function(_this) {\n        return function(it) {\n          return [it.get('id'), it.get('epic_order')];\n        };\n      })(this)).toJS());\n      data = {\n        order: newOrder\n      };\n      epicId = epic.get('id');\n      userstoryId = userstory.get('id');\n      return this.resources.epics.reorderRelatedUserstory(epicId, userstoryId, data, setOrders).then((function(_this) {\n        return function() {\n          return _this.listRelatedUserStories(epic);\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.replaceEpic = function(epic) {\n      return this._epics = this._epics.map(function(it) {\n        if (it.get('id') === epic.get('id')) {\n          return epic;\n        }\n        return it;\n      });\n    };\n\n    EpicsService.prototype.updateEpicStatus = function(epic, statusId) {\n      var data;\n      data = {\n        status: statusId,\n        version: epic.get('version')\n      };\n      return this.resources.epics.patch(epic.get('id'), data).then(this.replaceEpic.bind(this));\n    };\n\n    EpicsService.prototype.updateEpicAssignedTo = function(epic, userId) {\n      var data;\n      data = {\n        assigned_to: userId,\n        version: epic.get('version')\n      };\n      return this.resources.epics.patch(epic.get('id'), data).then(this.replaceEpic.bind(this));\n    };\n\n    return EpicsService;\n\n  })();\n\n  angular.module('taigaEpics').service('tgEpicsService', EpicsService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var RelatedUserStoriesController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  RelatedUserStoriesController = (function() {\n    RelatedUserStoriesController.$inject = [\"tgProjectService\", \"tgEpicsService\"];\n\n    function RelatedUserStoriesController(projectService, epicsService) {\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.sectionName = \"Epics\";\n      this.showCreateRelatedUserstoriesLightbox = false;\n    }\n\n    RelatedUserStoriesController.prototype.showRelatedUserStoriesSection = function() {\n      var ref;\n      return this.projectService.hasPermission(\"view_epics\") || ((ref = this.userstories) != null ? ref.length : void 0) > 0;\n    };\n\n    RelatedUserStoriesController.prototype.userCanSort = function() {\n      return this.projectService.hasPermission(\"modify_epic\");\n    };\n\n    RelatedUserStoriesController.prototype.loadRelatedUserstories = function() {\n      return this.epicsService.listRelatedUserStories(this.epic).then((function(_this) {\n        return function(userstories) {\n          return _this.userstories = userstories;\n        };\n      })(this));\n    };\n\n    RelatedUserStoriesController.prototype.reorderRelatedUserstory = function(us, newIndex) {\n      return this.epicsService.reorderRelatedUserstory(this.epic, this.userstories, us, newIndex).then((function(_this) {\n        return function(userstories) {\n          return _this.userstories = userstories;\n        };\n      })(this));\n    };\n\n    return RelatedUserStoriesController;\n\n  })();\n\n  module.controller(\"RelatedUserStoriesCtrl\", RelatedUserStoriesController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var RelatedUserstoriesCreateController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  RelatedUserstoriesCreateController = (function() {\n    RelatedUserstoriesCreateController.$inject = [\"tgCurrentUserService\", \"tgResources\", \"$tgConfirm\", \"$tgAnalytics\"];\n\n    function RelatedUserstoriesCreateController(currentUserService, rs, confirm, analytics) {\n      this.currentUserService = currentUserService;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.analytics = analytics;\n      this.projects = null;\n      this.projectUserstories = Immutable.List();\n      this.loading = false;\n    }\n\n    RelatedUserstoriesCreateController.prototype.loadProjects = function() {\n      if (this.projects === null) {\n        return this.projects = this.currentUserService.projects.get(\"unblocked\");\n      }\n    };\n\n    RelatedUserstoriesCreateController.prototype.filterUss = function(selectedProjectId, filterText) {\n      var promise;\n      promise = this.rs.userstories.listInAllProjects({\n        project: selectedProjectId,\n        q: filterText\n      }, true).then((function(_this) {\n        return function(data) {\n          var excludeIds, filteredData;\n          excludeIds = _this.epicUserstories.map(function(us) {\n            return us.get('id');\n          });\n          filteredData = data.filter(function(us) {\n            return excludeIds.indexOf(us.get('id')) === -1;\n          });\n          return _this.projectUserstories = filteredData;\n        };\n      })(this));\n      return promise;\n    };\n\n    RelatedUserstoriesCreateController.prototype.saveRelatedUserStory = function(selectedUserstoryId, onSavedRelatedUserstory) {\n      var epicId, onError, onSuccess;\n      if (!this.validateExistingUserstoryForm()) {\n        return;\n      }\n      this.loading = true;\n      onError = (function(_this) {\n        return function(data) {\n          _this.loading = false;\n          _this.confirm.notify(\"error\");\n          return _this.setExistingUserstoryFormErrors(data);\n        };\n      })(this);\n      onSuccess = (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"epic related user story\", \"create\", \"create related user story on epic\", 1);\n          _this.loading = false;\n          if (onSavedRelatedUserstory) {\n            onSavedRelatedUserstory();\n          }\n          return _this.loadRelatedUserstories();\n        };\n      })(this);\n      epicId = this.epic.get('id');\n      return this.rs.epics.addRelatedUserstory(epicId, selectedUserstoryId).then(onSuccess, onError);\n    };\n\n    RelatedUserstoriesCreateController.prototype.bulkCreateRelatedUserStories = function(selectedProjectId, userstoriesText, onCreatedRelatedUserstory) {\n      var epicId, onError, onSuccess;\n      if (!this.validateNewUserstoryForm()) {\n        return;\n      }\n      this.loading = true;\n      onError = (function(_this) {\n        return function(data) {\n          _this.loading = false;\n          _this.confirm.notify(\"error\");\n          return _this.setNewUserstoryFormErrors(data);\n        };\n      })(this);\n      onSuccess = (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"epic related user story\", \"create\", \"create related user story on epic\", 1);\n          _this.loading = false;\n          if (onCreatedRelatedUserstory) {\n            onCreatedRelatedUserstory();\n          }\n          return _this.loadRelatedUserstories();\n        };\n      })(this);\n      epicId = this.epic.get('id');\n      return this.rs.epics.bulkCreateRelatedUserStories(epicId, selectedProjectId, userstoriesText).then(onSuccess, onError);\n    };\n\n    return RelatedUserstoriesCreateController;\n\n  })();\n\n  module.controller(\"RelatedUserstoriesCreateCtrl\", RelatedUserstoriesCreateController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var RelatedUserstoriesCreateDirective, debounceLeading, module;\n\n  module = angular.module('taigaEpics');\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  RelatedUserstoriesCreateDirective = function(lightboxService1) {\n    var link;\n    this.lightboxService = lightboxService1;\n    link = function(scope, el, attrs, ctrl) {\n      var existingUserstoryForm, newUserstoryForm;\n      newUserstoryForm = el.find(\".new-user-story-form\").checksley();\n      existingUserstoryForm = el.find(\".existing-user-story-form\").checksley();\n      ctrl.validateNewUserstoryForm = (function(_this) {\n        return function() {\n          return newUserstoryForm.validate();\n        };\n      })(this);\n      ctrl.setNewUserstoryFormErrors = (function(_this) {\n        return function(errors) {\n          return newUserstoryForm.setErrors(errors);\n        };\n      })(this);\n      ctrl.validateExistingUserstoryForm = (function(_this) {\n        return function() {\n          return existingUserstoryForm.validate();\n        };\n      })(this);\n      ctrl.setExistingUserstoryFormErrors = (function(_this) {\n        return function(errors) {\n          return existingUserstoryForm.setErrors(errors);\n        };\n      })(this);\n      scope.showLightbox = function(selectedProjectId) {\n        ctrl.loadProjects();\n        return scope.selectProject(selectedProjectId).then((function(_this) {\n          return function() {\n            return lightboxService.open(el.find(\".lightbox-create-related-user-stories\"));\n          };\n        })(this));\n      };\n      scope.closeLightbox = function() {\n        scope.selectedUserstory = null;\n        scope.searchUserstory = \"\";\n        scope.relatedUserstoriesText = \"\";\n        return lightboxService.close(el.find(\".lightbox-create-related-user-stories\"));\n      };\n      scope.$watch('vm.project', function(project) {\n        if (project != null) {\n          return scope.selectedProject = project.get('id');\n        }\n      });\n      scope.selectProject = function(selectedProjectId) {\n        scope.selectedUserstory = null;\n        scope.searchUserstory = \"\";\n        return ctrl.filterUss(selectedProjectId, scope.searchUserstory);\n      };\n      return scope.onUpdateSearchUserstory = debounceLeading(300, function() {\n        scope.selectedUserstory = null;\n        return ctrl.filterUss(scope.selectedProject, scope.searchUserstory);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"epics/related-userstories/related-userstories-create/related-userstories-create.html\",\n      controller: \"RelatedUserstoriesCreateCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        showCreateRelatedUserstoriesLightbox: \"=\",\n        project: \"=\",\n        epic: \"=\",\n        epicUserstories: \"=\",\n        loadRelatedUserstories: \"&\"\n      }\n    };\n  };\n\n  RelatedUserstoriesCreateDirective.$inject = [\"lightboxService\"];\n\n  module.directive(\"tgRelatedUserstoriesCreate\", RelatedUserstoriesCreateDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var RelatedUserstoriesSortableDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  RelatedUserstoriesSortableDirective = function($parse, projectService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      if (!projectService.hasPermission(\"modify_epic\")) {\n        return;\n      }\n      callback = $parse(attrs.tgRelatedUserstoriesSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('tg-related-userstory-row');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var itemEl, newIndex, us;\n        itemEl = $(item);\n        us = itemEl.scope().us;\n        newIndex = itemEl.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            us: us,\n            newIndex: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  RelatedUserstoriesSortableDirective.$inject = [\"$parse\", \"tgProjectService\"];\n\n  module.directive(\"tgRelatedUserstoriesSortable\", RelatedUserstoriesSortableDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var RelatedUserStoriesDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  RelatedUserStoriesDirective = function() {\n    return {\n      templateUrl: \"epics/related-userstories/related-userstories.html\",\n      controller: \"RelatedUserStoriesCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        userstories: '=',\n        project: '=',\n        epic: '='\n      }\n    };\n  };\n\n  RelatedUserStoriesDirective.$inject = [];\n\n  module.directive(\"tgRelatedUserstories\", RelatedUserStoriesDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var RelatedUserstoryRowController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  RelatedUserstoryRowController = (function() {\n    RelatedUserstoryRowController.$inject = [\"tgAvatarService\", \"$translate\", \"$tgConfirm\", \"tgResources\"];\n\n    function RelatedUserstoryRowController(avatarService, translate, confirm, rs) {\n      this.avatarService = avatarService;\n      this.translate = translate;\n      this.confirm = confirm;\n      this.rs = rs;\n    }\n\n    RelatedUserstoryRowController.prototype.setAvatarData = function() {\n      var member;\n      member = this.userstory.get('assigned_to_extra_info');\n      return this.avatar = this.avatarService.getAvatar(member);\n    };\n\n    RelatedUserstoryRowController.prototype.getAssignedToFullNameDisplay = function() {\n      if (this.userstory.get('assigned_to')) {\n        return this.userstory.getIn(['assigned_to_extra_info', 'full_name_display']);\n      }\n      return this.translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\");\n    };\n\n    RelatedUserstoryRowController.prototype.onDeleteRelatedUserstory = function() {\n      var message, title;\n      title = this.translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.TITLE\");\n      message = this.translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.MESSAGE\", {\n        epicSubject: this.epic.get('subject')\n      });\n      return this.confirm.ask(title, null, message).then((function(_this) {\n        return function(askResponse) {\n          var epicId, onError, onSuccess, userstoryId;\n          onError = function() {\n            message = _this.translate.instant('EPIC.ERROR_UNLINK_RELATED_USERSTORY', {\n              errorMessage: message\n            });\n            _this.confirm.notify(\"error\", null, message);\n            return askResponse.finish(false);\n          };\n          onSuccess = function() {\n            _this.loadRelatedUserstories();\n            return askResponse.finish();\n          };\n          epicId = _this.epic.get('id');\n          userstoryId = _this.userstory.get('id');\n          return _this.rs.epics.deleteRelatedUserstory(epicId, userstoryId).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    return RelatedUserstoryRowController;\n\n  })();\n\n  module.controller(\"RelatedUserstoryRowCtrl\", RelatedUserstoryRowController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var RelatedUserstoryRowDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  RelatedUserstoryRowDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.setAvatarData();\n    };\n    return {\n      link: link,\n      templateUrl: \"epics/related-userstories/related-userstory-row/related-userstory-row.html\",\n      controller: \"RelatedUserstoryRowCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        userstory: '=',\n        epic: '=',\n        project: '=',\n        loadRelatedUserstories: \"&\"\n      }\n    };\n  };\n\n  RelatedUserstoryRowDirective.$inject = [];\n\n  module.directive(\"tgRelatedUserstoryRow\", RelatedUserstoryRowDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ExternalAppController, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  ExternalAppController = (function(superClass) {\n    extend(ExternalAppController, superClass);\n\n    ExternalAppController.$inject = [\"$routeParams\", \"tgExternalAppsService\", \"$window\", \"tgCurrentUserService\", \"$location\", \"$tgNavUrls\", \"tgXhrErrorService\", \"tgLoader\"];\n\n    function ExternalAppController(routeParams, externalAppsService, window, currentUserService, location, navUrls, xhrError, loader) {\n      var loginUrl, nextUrl;\n      this.routeParams = routeParams;\n      this.externalAppsService = externalAppsService;\n      this.window = window;\n      this.currentUserService = currentUserService;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.xhrError = xhrError;\n      this.loader = loader;\n      this.createApplicationToken = bind(this.createApplicationToken, this);\n      this._getApplicationToken = bind(this._getApplicationToken, this);\n      this._redirect = bind(this._redirect, this);\n      this.loader.start(false);\n      this._applicationId = this.routeParams.application;\n      this._state = this.routeParams.state;\n      this._getApplicationToken();\n      this._user = this.currentUserService.getUser();\n      this._application = null;\n      nextUrl = encodeURIComponent(this.location.url());\n      loginUrl = this.navUrls.resolve(\"login\");\n      this.loginWithAnotherUserUrl = loginUrl + \"?next=\" + nextUrl + \"&force_login=1\";\n      taiga.defineImmutableProperty(this, \"user\", (function(_this) {\n        return function() {\n          return _this._user;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"application\", (function(_this) {\n        return function() {\n          return _this._application;\n        };\n      })(this));\n    }\n\n    ExternalAppController.prototype._redirect = function(applicationToken) {\n      var nextUrl;\n      nextUrl = applicationToken.get(\"next_url\");\n      return this.window.open(nextUrl, \"_self\");\n    };\n\n    ExternalAppController.prototype._getApplicationToken = function() {\n      return this.externalAppsService.getApplicationToken(this._applicationId, this._state).then((function(_this) {\n        return function(data) {\n          _this._application = data.get(\"application\");\n          if (data.get(\"auth_code\")) {\n            return _this._redirect(data);\n          } else {\n            return _this.loader.pageLoaded();\n          }\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          _this.loader.pageLoaded();\n          return _this.xhrError.response(xhr);\n        };\n      })(this));\n    };\n\n    ExternalAppController.prototype.cancel = function() {\n      return this.window.history.back();\n    };\n\n    ExternalAppController.prototype.createApplicationToken = function() {\n      return this.externalAppsService.authorizeApplicationToken(this._applicationId, this._state).then((function(_this) {\n        return function(data) {\n          return _this._redirect(data);\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          return _this.xhrError.response(xhr);\n        };\n      })(this));\n    };\n\n    return ExternalAppController;\n\n  })(taiga.Controller);\n\n  angular.module(\"taigaExternalApps\").controller(\"ExternalApp\", ExternalAppController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ExternalAppsService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  ExternalAppsService = (function(superClass) {\n    extend(ExternalAppsService, superClass);\n\n    ExternalAppsService.$inject = [\"tgResources\"];\n\n    function ExternalAppsService(rs) {\n      this.rs = rs;\n    }\n\n    ExternalAppsService.prototype.getApplicationToken = function(applicationId, state) {\n      return this.rs.externalapps.getApplicationToken(applicationId, state);\n    };\n\n    ExternalAppsService.prototype.authorizeApplicationToken = function(applicationId, state) {\n      return this.rs.externalapps.authorizeApplicationToken(applicationId, state);\n    };\n\n    return ExternalAppsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaExternalApps\").service(\"tgExternalAppsService\", ExternalAppsService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var FeedbackService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  FeedbackService = (function(superClass) {\n    extend(FeedbackService, superClass);\n\n    FeedbackService.$inject = [\"tgLightboxFactory\"];\n\n    function FeedbackService(lightboxFactory) {\n      this.lightboxFactory = lightboxFactory;\n    }\n\n    FeedbackService.prototype.sendFeedback = function() {\n      return this.lightboxFactory.create(\"tg-lb-feedback\", {\n        \"class\": \"lightbox lightbox-feedback lightbox-generic-form\"\n      });\n    };\n\n    return FeedbackService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaFeedback\").service(\"tgFeedbackService\", FeedbackService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ActivityService, taiga;\n\n  taiga = this.taiga;\n\n  ActivityService = (function() {\n    ActivityService.$inject = ['tgResources', 'tgXhrErrorService'];\n\n    function ActivityService(rs, xhrError) {\n      this.rs = rs;\n      this.xhrError = xhrError;\n      this._contentType = null;\n      this._objectId = null;\n      this.clear();\n    }\n\n    ActivityService.prototype.clear = function() {\n      this.page = 1;\n      this.loadingEntries = false;\n      this.disablePagination = false;\n      this.entries = Immutable.List();\n      return this.count = null;\n    };\n\n    ActivityService.prototype.fetchEntries = function(reset) {\n      if (reset == null) {\n        reset = false;\n      }\n      if (reset) {\n        this.page = 1;\n      }\n      this.loadingEntries = true;\n      this.disablePagination = true;\n      if (!this._contentType || !this._objectId) {\n        return;\n      }\n      return this.rs.history.getHistory('activity', this._contentType, this._objectId, this.page).then((function(_this) {\n        return function(result) {\n          if (reset) {\n            _this.clear();\n            _this.entries = result.list;\n          } else {\n            _this.entries = _this.entries.concat(result.list);\n          }\n          _this.loadingEntries = false;\n          _this.disablePagination = !result.headers('x-pagination-next');\n          _this.count = result.headers('x-pagination-count');\n          return _this.entries;\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          return _this.xhrError.response(_this.entries);\n        };\n      })(this));\n    };\n\n    ActivityService.prototype.nextPage = function(historyType) {\n      if (historyType == null) {\n        historyType = 'comment';\n      }\n      this.page++;\n      return this.fetchEntries();\n    };\n\n    ActivityService.prototype.init = function(contentType, objectId) {\n      this._contentType = contentType;\n      this._objectId = objectId;\n      return this.clear();\n    };\n\n    return ActivityService;\n\n  })();\n\n  angular.module('taigaHistory').service('tgActivityService', ActivityService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CommentController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  CommentController = (function() {\n    CommentController.$inject = [\"tgCurrentUserService\", \"tgCheckPermissionsService\", \"tgLightboxFactory\"];\n\n    function CommentController(currentUserService, permissionService, lightboxFactory) {\n      this.currentUserService = currentUserService;\n      this.permissionService = permissionService;\n      this.lightboxFactory = lightboxFactory;\n      this.hiddenDeletedComment = true;\n    }\n\n    CommentController.prototype.showDeletedComment = function() {\n      return this.hiddenDeletedComment = false;\n    };\n\n    CommentController.prototype.hideDeletedComment = function() {\n      return this.hiddenDeletedComment = true;\n    };\n\n    CommentController.prototype.checkCancelComment = function(event) {\n      if (event.keyCode === 27) {\n        return this.onEditMode({\n          commentId: this.comment.id\n        });\n      }\n    };\n\n    CommentController.prototype.canEditDeleteComment = function() {\n      if (this.currentUserService.getUser()) {\n        this.user = this.currentUserService.getUser();\n        return this.user.get('id') === this.comment.user.pk || this.permissionService.check('modify_project');\n      }\n    };\n\n    CommentController.prototype.saveComment = function(text, cb) {\n      return this.onEditComment({\n        commentId: this.comment.id,\n        commentData: text,\n        callback: cb\n      });\n    };\n\n    CommentController.prototype.displayCommentHistory = function() {\n      return this.lightboxFactory.create('tg-lb-display-historic', {\n        \"class\": \"lightbox lightbox-display-historic\",\n        \"comment\": \"comment\",\n        \"name\": \"name\",\n        \"object\": \"object\"\n      }, {\n        \"comment\": this.comment,\n        \"name\": this.name,\n        \"object\": this.object\n      });\n    };\n\n    return CommentController;\n\n  })();\n\n  module.controller(\"CommentCtrl\", CommentController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CommentDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  CommentDirective = function() {\n    return {\n      scope: {\n        name: \"@\",\n        projectId: \"@\",\n        object: \"@\",\n        comment: \"<\",\n        type: \"<\",\n        loading: \"<\",\n        editing: \"<\",\n        deleting: \"<\",\n        objectId: \"<\",\n        editMode: \"<\",\n        project: \"<\",\n        onEditMode: \"&\",\n        onDeleteComment: \"&\",\n        onRestoreDeletedComment: \"&\",\n        onEditComment: \"&\"\n      },\n      templateUrl: \"history/comments/comment.html\",\n      bindToController: true,\n      controller: 'CommentCtrl',\n      controllerAs: \"vm\"\n    };\n  };\n\n  module.directive(\"tgComment\", CommentDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CommentsController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  CommentsController = (function() {\n    CommentsController.$inject = [];\n\n    function CommentsController() {}\n\n    CommentsController.prototype.initializePermissions = function() {\n      return this.canAddCommentPermission = 'comment_' + this.name;\n    };\n\n    return CommentsController;\n\n  })();\n\n  module.controller(\"CommentsCtrl\", CommentsController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CommentsDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  CommentsDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.initializePermissions();\n    };\n    return {\n      scope: {\n        type: \"<\",\n        name: \"@\",\n        object: \"@\",\n        comments: \"<\",\n        onEditMode: \"&\",\n        onDeleteComment: \"&\",\n        onRestoreDeletedComment: \"&\",\n        onAddComment: \"&\",\n        onEditComment: \"&\",\n        editMode: \"<\",\n        loading: \"<\",\n        deleting: \"<\",\n        editing: \"<\",\n        project: \"=\",\n        reverse: \"=\"\n      },\n      templateUrl: \"history/comments/comments.html\",\n      bindToController: true,\n      controller: 'CommentsCtrl',\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgComments\", CommentsDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var LightboxDisplayHistoricController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  LightboxDisplayHistoricController = (function() {\n    LightboxDisplayHistoricController.$inject = [\"$tgResources\"];\n\n    function LightboxDisplayHistoricController(rs) {\n      this.rs = rs;\n    }\n\n    LightboxDisplayHistoricController.prototype._loadHistoric = function() {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.object;\n      activityId = this.comment.id;\n      return this.rs.history.getCommentHistory(type, objectId, activityId).then((function(_this) {\n        return function(data) {\n          return _this.commentHistoryEntries = data;\n        };\n      })(this));\n    };\n\n    return LightboxDisplayHistoricController;\n\n  })();\n\n  module.controller(\"LightboxDisplayHistoricCtrl\", LightboxDisplayHistoricController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var LightboxDisplayHistoricDirective;\n\n  LightboxDisplayHistoricDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      ctrl._loadHistoric();\n      return lightboxService.open(el);\n    };\n    return {\n      scope: {},\n      bindToController: {\n        name: '=',\n        object: '=',\n        comment: '='\n      },\n      templateUrl: \"history/history-lightbox/comment-history-lightbox.html\",\n      controller: \"LightboxDisplayHistoricCtrl\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  LightboxDisplayHistoricDirective.$inject = [\"lightboxService\"];\n\n  angular.module('taigaHistory').directive(\"tgLbDisplayHistoric\", LightboxDisplayHistoricDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var HistoryEntryDirective;\n\n  HistoryEntryDirective = function() {\n    return {\n      scope: {\n        entry: \"<\"\n      },\n      templateUrl: \"history/history-lightbox/history-entry.html\"\n    };\n  };\n\n  angular.module('taigaHistory').directive(\"tgHistoryEntry\", HistoryEntryDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var HistoryTabsDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  HistoryTabsDirective = function() {\n    return {\n      templateUrl: \"history/history-tabs/history-tabs.html\",\n      scope: {\n        showCommentTab: \"&\",\n        showActivityTab: \"&\",\n        onActiveComments: \"&\",\n        onActiveActivities: \"&\",\n        onOrderComments: \"&\",\n        activeTab: \"<\",\n        commentsNum: \"<\",\n        activitiesNum: \"<\",\n        onReverse: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgHistoryTabs\", HistoryTabsDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var HistorySectionController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  HistorySectionController = (function() {\n    HistorySectionController.$inject = [\"$tgResources\", \"$tgRepo\", \"$tgStorage\", \"tgProjectService\", \"tgActivityService\", \"tgWysiwygService\"];\n\n    function HistorySectionController(rs, repo, storage, projectService, activityService, wysiwygService) {\n      this.rs = rs;\n      this.repo = repo;\n      this.storage = storage;\n      this.projectService = projectService;\n      this.activityService = activityService;\n      this.wysiwygService = wysiwygService;\n      this.editing = null;\n      this.deleting = null;\n      this.editMode = {};\n      this.viewComments = true;\n      this.reverse = this.storage.get(\"orderComments\");\n      taiga.defineImmutableProperty(this, 'disabledActivityPagination', (function(_this) {\n        return function() {\n          return _this.activityService.disablePagination;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'loadingActivity', (function(_this) {\n        return function() {\n          return _this.activityService.loading;\n        };\n      })(this));\n    }\n\n    HistorySectionController.prototype._loadHistory = function() {\n      if (this.totalComments === 0) {\n        this.commentsNum = 0;\n      } else {\n        this._loadComments();\n      }\n      return this._loadActivity();\n    };\n\n    HistorySectionController.prototype._loadActivity = function() {\n      this.activityService.init(this.name, this.id);\n      return this.activityService.fetchEntries().then((function(_this) {\n        return function(response) {\n          _this.activitiesNum = _this.activityService.count;\n          return _this.activities = response.toJS();\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype._loadComments = function() {\n      return this.rs.history.get(this.name, this.id, 'comment').then((function(_this) {\n        return function(comments) {\n          _this.comments = _.filter(comments, function(item) {\n            return item.comment !== \"\";\n          });\n          if (_this.reverse) {\n            _this.comments - _.reverse(_this.comments);\n          }\n          return _this.commentsNum = _this.comments.length;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.nextActivityPage = function() {\n      return this.activityService.nextPage().then((function(_this) {\n        return function(response) {\n          return _this.activities = response.toJS();\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.showHistorySection = function() {\n      return this.showCommentTab() || this.showActivityTab();\n    };\n\n    HistorySectionController.prototype.showCommentTab = function() {\n      return this.commentsNum > 0 || this.projectService.hasPermission(\"comment_\" + this.name);\n    };\n\n    HistorySectionController.prototype.showActivityTab = function() {\n      return this.activitiesNum > 0;\n    };\n\n    HistorySectionController.prototype.toggleEditMode = function(commentId) {\n      return this.editMode[commentId] = !this.editMode[commentId];\n    };\n\n    HistorySectionController.prototype.onActiveHistoryTab = function(active) {\n      return this.viewComments = active;\n    };\n\n    HistorySectionController.prototype.deleteComment = function(commentId) {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.id;\n      activityId = commentId;\n      this.deleting = commentId;\n      return this.rs.history.deleteComment(type, objectId, activityId).then((function(_this) {\n        return function() {\n          _this._loadComments();\n          return _this.deleting = null;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.editComment = function(commentId, comment) {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.id;\n      activityId = commentId;\n      this.editing = commentId;\n      return this.rs.history.editComment(type, objectId, activityId, comment).then((function(_this) {\n        return function() {\n          _this._loadComments();\n          _this.toggleEditMode(commentId);\n          return _this.editing = null;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.restoreDeletedComment = function(commentId) {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.id;\n      activityId = commentId;\n      this.editing = commentId;\n      return this.rs.history.undeleteComment(type, objectId, activityId).then((function(_this) {\n        return function() {\n          _this._loadComments();\n          return _this.editing = null;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.addComment = function() {\n      this.editMode = {};\n      this.editing = null;\n      return this._loadComments();\n    };\n\n    HistorySectionController.prototype.onOrderComments = function() {\n      this.reverse = !this.reverse;\n      this.storage.set(\"orderComments\", this.reverse);\n      return this._loadComments();\n    };\n\n    return HistorySectionController;\n\n  })();\n\n  module.controller(\"HistorySection\", HistorySectionController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var HistorySectionDirective, bindOnce, module;\n\n  module = angular.module('taigaHistory');\n\n  bindOnce = this.taiga.bindOnce;\n\n  HistorySectionDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {\n      scope.$on(\"object:updated\", function() {\n        return ctrl._loadActivity();\n      });\n      return scope.$watch('vm.id', function(value) {\n        return ctrl._loadHistory();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"history/history.html\",\n      controller: \"HistorySection\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        type: \"=\",\n        name: \"@\",\n        id: \"=\",\n        project: \"=\",\n        totalComments: \"=\"\n      }\n    };\n  };\n\n  HistorySectionDirective.$inject = [];\n\n  module.directive(\"tgHistorySection\", HistorySectionDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ActivitiesDiffController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  ActivitiesDiffController = (function() {\n    ActivitiesDiffController.$inject = [];\n\n    function ActivitiesDiffController() {}\n\n    ActivitiesDiffController.prototype.diffTags = function() {\n      var diff;\n      if (this.type === 'tags') {\n        this.diffRemoveTags = _.difference(this.diff[0], this.diff[1]).toString();\n        return this.diffAddTags = _.difference(this.diff[1], this.diff[0]).toString();\n      } else if (this.type === 'promoted_to') {\n        diff = _.difference(this.diff[1], this.diff[0]);\n        return this.promotedTo = _.filter(this.model.generated_user_stories, (function(_this) {\n          return function(x) {\n            return _.includes(diff, x.id);\n          };\n        })(this));\n      }\n    };\n\n    return ActivitiesDiffController;\n\n  })();\n\n  module.controller(\"ActivitiesDiffCtrl\", ActivitiesDiffController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var HistoryDiffDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  HistoryDiffDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.diffTags();\n    };\n    return {\n      scope: {\n        model: \"<\",\n        type: \"<\",\n        diff: \"<\"\n      },\n      templateUrl: \"history/history/history-diff.html\",\n      controller: \"ActivitiesDiffCtrl\",\n      controllerAs: 'vm',\n      bindToController: true,\n      link: link\n    };\n  };\n\n  module.directive(\"tgHistoryDiff\", HistoryDiffDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var HistoryDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  HistoryDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      scope: {\n        activities: \"<\",\n        model: \"<\"\n      },\n      templateUrl: \"history/history/history.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgHistory\", HistoryDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DutyDirective;\n\n  DutyDirective = function(navurls, $translate) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.vm = {};\n      scope.vm.duty = scope.duty;\n      scope.vm.type = scope.type;\n      scope.vm.isHidden = scope.isHidden;\n      scope.vm.getDutyType = function() {\n        if (scope.vm.duty) {\n          if (scope.vm.duty.get('_name') === \"epics\") {\n            return $translate.instant(\"COMMON.EPIC\");\n          }\n          if (scope.vm.duty.get('_name') === \"userstories\") {\n            return $translate.instant(\"COMMON.USER_STORY\");\n          }\n          if (scope.vm.duty.get('_name') === \"tasks\") {\n            return $translate.instant(\"COMMON.TASK\");\n          }\n          if (scope.vm.duty.get('_name') === \"issues\") {\n            return $translate.instant(\"COMMON.ISSUE\");\n          }\n        }\n      };\n      return el.on(\"click\", \".button-hide\", function(event) {\n        event.preventDefault();\n        el.remove();\n        return scope.$emit('duty:toggle-hidden', scope.vm.duty, scope.vm.type);\n      });\n    };\n    return {\n      templateUrl: \"home/duties/duty.html\",\n      scope: {\n        \"duty\": \"=tgDuty\",\n        \"isHidden\": \"=\",\n        \"type\": \"@\"\n      },\n      link: link\n    };\n  };\n\n  DutyDirective.$inject = [\"$tgNavUrls\", \"$translate\"];\n\n  angular.module(\"taigaHome\").directive(\"tgDuty\", DutyDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var HomeController;\n\n  HomeController = (function() {\n    HomeController.$inject = [\"tgCurrentUserService\", \"$location\", \"$tgNavUrls\"];\n\n    function HomeController(currentUserService, location, navUrls) {\n      this.currentUserService = currentUserService;\n      this.location = location;\n      this.navUrls = navUrls;\n      if (!this.currentUserService.getUser()) {\n        this.location.path(this.navUrls.resolve(\"discover\"));\n      }\n    }\n\n    return HomeController;\n\n  })();\n\n  angular.module(\"taigaHome\").controller(\"Home\", HomeController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var HomeService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  HomeService = (function(superClass) {\n    extend(HomeService, superClass);\n\n    HomeService.$inject = [\"$tgNavUrls\", \"tgResources\", \"tgProjectsService\", \"$q\"];\n\n    function HomeService(navurls, rs, projectsService, q) {\n      this.navurls = navurls;\n      this.rs = rs;\n      this.projectsService = projectsService;\n      this.q = q;\n    }\n\n    HomeService.prototype._attachProjectInfoToWorkInProgress = function(workInProgress, projectsById) {\n      var _attachProjectInfoToDuty, _duties, _getValidDutiesAndAttachProjectInfo, assignedTo, watching;\n      _attachProjectInfoToDuty = (function(_this) {\n        return function(duty, objType) {\n          var ctx, project, url;\n          project = projectsById.get(String(duty.get('project')));\n          ctx = {\n            project: project.get('slug'),\n            ref: duty.get('ref')\n          };\n          url = _this.navurls.resolve(\"project-\" + objType + \"-detail\", ctx);\n          duty = duty.set('url', url);\n          duty = duty.set('project', project);\n          duty = duty.set(\"_name\", objType);\n          return duty;\n        };\n      })(this);\n      _getValidDutiesAndAttachProjectInfo = function(duties, dutyType) {\n        duties = duties.filter(function(duty) {\n          return projectsById.get(String(duty.get('project')));\n        });\n        duties = duties.map(function(duty) {\n          return _attachProjectInfoToDuty(duty, dutyType);\n        });\n        return duties;\n      };\n      assignedTo = workInProgress.get(\"assignedTo\");\n      if (assignedTo.get(\"epics\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"epics\"), \"epics\");\n        assignedTo = assignedTo.set(\"epics\", _duties);\n      }\n      if (assignedTo.get(\"userStories\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"userStories\"), \"userstories\");\n        assignedTo = assignedTo.set(\"userStories\", _duties);\n      }\n      if (assignedTo.get(\"tasks\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"tasks\"), \"tasks\");\n        assignedTo = assignedTo.set(\"tasks\", _duties);\n      }\n      if (assignedTo.get(\"issues\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"issues\"), \"issues\");\n        assignedTo = assignedTo.set(\"issues\", _duties);\n      }\n      watching = workInProgress.get(\"watching\");\n      if (watching.get(\"epics\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"epics\"), \"epics\");\n        watching = watching.set(\"epics\", _duties);\n      }\n      if (watching.get(\"userStories\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"userStories\"), \"userstories\");\n        watching = watching.set(\"userStories\", _duties);\n      }\n      if (watching.get(\"tasks\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"tasks\"), \"tasks\");\n        watching = watching.set(\"tasks\", _duties);\n      }\n      if (watching.get(\"issues\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"issues\"), \"issues\");\n        watching = watching.set(\"issues\", _duties);\n      }\n      workInProgress = workInProgress.set(\"assignedTo\", assignedTo);\n      return workInProgress = workInProgress.set(\"watching\", watching);\n    };\n\n    HomeService.prototype.getWorkInProgress = function(userId) {\n      var assignedEpicsPromise, assignedIssuesPromise, assignedTasksPromise, assignedTo, assignedUserStoriesPromise, params_epics, params_issues, params_tasks, params_uss, projectsById, projectsPromise, watching, watchingEpicsPromise, watchingIssuesPromise, watchingTasksPromise, watchingUserStoriesPromise, workInProgress;\n      projectsById = Immutable.Map();\n      projectsPromise = this.projectsService.getListProjectsByUserId(userId).then(function(projects) {\n        return projectsById = Immutable.fromJS(groupBy(projects.toJS(), function(p) {\n          return p.id;\n        }));\n      });\n      assignedTo = Immutable.Map();\n      params_epics = {\n        status__is_closed: false,\n        assigned_to: userId\n      };\n      params_uss = {\n        is_closed: false,\n        assigned_users: userId,\n        dashboard: true\n      };\n      params_tasks = {\n        status__is_closed: false,\n        assigned_to: userId\n      };\n      params_issues = {\n        status__is_closed: false,\n        assigned_to: userId\n      };\n      assignedEpicsPromise = this.rs.epics.listInAllProjects(params_epics).then(function(epics) {\n        return assignedTo = assignedTo.set(\"epics\", epics);\n      });\n      assignedUserStoriesPromise = this.rs.userstories.listInAllProjects(params_uss).then(function(userstories) {\n        return assignedTo = assignedTo.set(\"userStories\", userstories);\n      });\n      assignedTasksPromise = this.rs.tasks.listInAllProjects(params_tasks).then(function(tasks) {\n        return assignedTo = assignedTo.set(\"tasks\", tasks);\n      });\n      assignedIssuesPromise = this.rs.issues.listInAllProjects(params_issues).then(function(issues) {\n        return assignedTo = assignedTo.set(\"issues\", issues);\n      });\n      params_epics = {\n        status__is_closed: false,\n        watchers: userId\n      };\n      params_uss = {\n        is_closed: false,\n        watchers: userId,\n        dashboard: true\n      };\n      params_tasks = {\n        status__is_closed: false,\n        watchers: userId\n      };\n      params_issues = {\n        status__is_closed: false,\n        watchers: userId\n      };\n      watching = Immutable.Map();\n      watchingEpicsPromise = this.rs.epics.listInAllProjects(params_epics).then(function(epics) {\n        return watching = watching.set(\"epics\", epics);\n      });\n      watchingUserStoriesPromise = this.rs.userstories.listInAllProjects(params_uss).then(function(userstories) {\n        return watching = watching.set(\"userStories\", userstories);\n      });\n      watchingTasksPromise = this.rs.tasks.listInAllProjects(params_tasks).then(function(tasks) {\n        return watching = watching.set(\"tasks\", tasks);\n      });\n      watchingIssuesPromise = this.rs.issues.listInAllProjects(params_issues).then(function(issues) {\n        return watching = watching.set(\"issues\", issues);\n      });\n      workInProgress = Immutable.Map();\n      return this.q.all([projectsPromise, assignedEpicsPromise, watchingEpicsPromise, assignedUserStoriesPromise, watchingUserStoriesPromise, assignedTasksPromise, watchingTasksPromise, assignedIssuesPromise, watchingIssuesPromise]).then((function(_this) {\n        return function() {\n          workInProgress = workInProgress.set(\"assignedTo\", assignedTo);\n          workInProgress = workInProgress.set(\"watching\", watching);\n          workInProgress = _this._attachProjectInfoToWorkInProgress(workInProgress, projectsById);\n          return workInProgress;\n        };\n      })(this));\n    };\n\n    return HomeService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaHome\").service(\"tgHomeService\", HomeService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var HomeProjectListDirective;\n\n  HomeProjectListDirective = function(currentUserService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.vm = {};\n      return taiga.defineImmutableProperty(scope.vm, \"projects\", function() {\n        return currentUserService.projects.get(\"recents\");\n      });\n    };\n    directive = {\n      templateUrl: \"home/projects/home-project-list.html\",\n      scope: {},\n      link: link\n    };\n    return directive;\n  };\n\n  HomeProjectListDirective.$inject = [\"tgCurrentUserService\"];\n\n  angular.module(\"taigaHome\").directive(\"tgHomeProjectList\", HomeProjectListDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WorkingOnController;\n\n  WorkingOnController = (function() {\n    WorkingOnController.$inject = [\"tgHomeService\"];\n\n    function WorkingOnController(homeService) {\n      this.homeService = homeService;\n      this.assignedTo = Immutable.Map();\n      this.hiddenAssignedTo = [];\n      this.showHiddenAssignedTo = false;\n      this.watching = Immutable.Map();\n      this.showHiddenWatching = false;\n    }\n\n    WorkingOnController.prototype._setAssignedTo = function(workInProgress) {\n      var epics, issues, tasks, userStories;\n      epics = workInProgress.get(\"assignedTo\").get(\"epics\");\n      userStories = workInProgress.get(\"assignedTo\").get(\"userStories\");\n      tasks = workInProgress.get(\"assignedTo\").get(\"tasks\");\n      issues = workInProgress.get(\"assignedTo\").get(\"issues\");\n      this.assignedTo = userStories.concat(tasks).concat(issues).concat(epics);\n      if (this.assignedTo.size > 0) {\n        return this.assignedTo = this.assignedTo.sortBy(function(elem) {\n          return elem.get(\"modified_date\");\n        }).reverse();\n      }\n    };\n\n    WorkingOnController.prototype._setWatching = function(workInProgress) {\n      var epics, issues, tasks, userStories;\n      epics = workInProgress.get(\"watching\").get(\"epics\");\n      userStories = workInProgress.get(\"watching\").get(\"userStories\");\n      tasks = workInProgress.get(\"watching\").get(\"tasks\");\n      issues = workInProgress.get(\"watching\").get(\"issues\");\n      this.watching = userStories.concat(tasks).concat(issues).concat(epics);\n      if (this.watching.size > 0) {\n        return this.watching = this.watching.sortBy(function(elem) {\n          return elem.get(\"modified_date\");\n        }).reverse();\n      }\n    };\n\n    WorkingOnController.prototype.getWorkInProgress = function(userId) {\n      return this.homeService.getWorkInProgress(userId).then((function(_this) {\n        return function(workInProgress) {\n          _this._setAssignedTo(workInProgress);\n          return _this._setWatching(workInProgress);\n        };\n      })(this));\n    };\n\n    return WorkingOnController;\n\n  })();\n\n  angular.module(\"taigaHome\").controller(\"WorkingOn\", WorkingOnController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WorkingOnDirective, generateHash, taiga,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  generateHash = this.taiga.generateHash;\n\n  WorkingOnDirective = function(homeService, currentUserService, storage) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var getHiddenDuties, getShowHiddenDuties, i, len, slot, slots, toggleDutyHidden, updateHiddenDuties, updateShowHiddenDuties, user, userId;\n      updateShowHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['ShowHiddenDashboardDuties', slot]);\n        return storage.set(hash, scope.showHiddenDuties[slot]);\n      };\n      getShowHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['ShowHiddenDashboardDuties', slot]);\n        return storage.get(hash) || false;\n      };\n      updateHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['HiddenDashboardDuties', slot]);\n        return storage.set(hash, scope.hiddenDuties[slot]);\n      };\n      getHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['HiddenDashboardDuties', slot]);\n        return storage.get(hash) || [];\n      };\n      toggleDutyHidden = function(duty, slot) {\n        var ref;\n        if (ref = duty.get('id'), indexOf.call(scope.hiddenDuties[slot], ref) >= 0) {\n          scope.hiddenDuties[slot].splice(scope.hiddenDuties[slot].indexOf(duty.get('id')), 1);\n        } else {\n          scope.hiddenDuties[slot].push(duty.get('id'));\n        }\n        updateHiddenDuties(slot);\n        return scope.$apply();\n      };\n      user = currentUserService.getUser();\n      if (!user) {\n        return;\n      }\n      userId = user.get(\"id\");\n      ctrl.getWorkInProgress(userId);\n      slots = ['working-on', 'watching'];\n      scope.hiddenDuties = {};\n      scope.showHiddenDuties = {};\n      scope.toggleShowHiddenDuties = function(slot) {\n        if (!(indexOf.call(slots, slot) >= 0)) {\n          return console.error(\"Invalid duties slot `\" + slot + \"`\");\n        }\n        scope.showHiddenDuties[slot] = !scope.showHiddenDuties[slot];\n        return updateShowHiddenDuties(slot);\n      };\n      for (i = 0, len = slots.length; i < len; i++) {\n        slot = slots[i];\n        scope.hiddenDuties[slot] = getHiddenDuties(slot);\n        scope.showHiddenDuties[slot] = getShowHiddenDuties(slot);\n      }\n      return scope.$on(\"duty:toggle-hidden\", (function(_this) {\n        return function(event, duty, slot) {\n          if (!(indexOf.call(slots, slot) >= 0)) {\n            return console.error(\"Invalid duties slot `\" + slot + \"`\");\n          }\n          return toggleDutyHidden(duty, slot);\n        };\n      })(this));\n    };\n    return {\n      controller: \"WorkingOn\",\n      controllerAs: \"vm\",\n      templateUrl: \"home/working-on/working-on.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  WorkingOnDirective.$inject = [\"tgHomeService\", \"tgCurrentUserService\", \"$tgStorage\"];\n\n  angular.module(\"taigaHome\").directive(\"tgWorkingOn\", WorkingOnDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var InviteMembersFormController, taiga;\n\n  taiga = this.taiga;\n\n  InviteMembersFormController = (function() {\n    InviteMembersFormController.$inject = [\"tgProjectService\", \"$tgResources\", \"lightboxService\", \"$tgConfirm\", \"$rootScope\"];\n\n    function InviteMembersFormController(projectService, rs, lightboxService, confirm, rootScope) {\n      this.projectService = projectService;\n      this.rs = rs;\n      this.lightboxService = lightboxService;\n      this.confirm = confirm;\n      this.rootScope = rootScope;\n      this.project = this.projectService.project;\n      this.roles = this.projectService.project.get('roles');\n      this.rolesValues = {};\n      this.loading = false;\n      this.defaultMaxInvites = 4;\n    }\n\n    InviteMembersFormController.prototype._areRolesValidated = function() {\n      return Object.defineProperty(this, 'areRolesValidated', {\n        get: (function(_this) {\n          return function() {\n            var roleIds;\n            roleIds = _.filter(_.values(_this.rolesValues), function(it) {\n              return it;\n            });\n            return roleIds.length === _this.contactsToInvite.size + _this.emailsToInvite.size;\n          };\n        })(this)\n      });\n    };\n\n    InviteMembersFormController.prototype._checkLimitMemberships = function() {\n      var pendingMembersCount;\n      if (this.project.get('max_memberships') === null) {\n        this.membersLimit = this.defaultMaxInvites;\n      } else {\n        pendingMembersCount = Math.max(this.project.get('max_memberships') - this.project.get('total_memberships'), 0);\n        this.membersLimit = Math.min(pendingMembersCount, this.defaultMaxInvites);\n      }\n      return this.showWarningMessage = this.membersLimit < this.defaultMaxInvites;\n    };\n\n    InviteMembersFormController.prototype.sendInvites = function() {\n      this.setInvitedContacts = [];\n      _.forEach(this.rolesValues, (function(_this) {\n        return function(key, value) {\n          return _this.setInvitedContacts.push({\n            'role_id': key,\n            'username': value\n          });\n        };\n      })(this));\n      this.loading = true;\n      return this.rs.memberships.bulkCreateMemberships(this.project.get('id'), this.setInvitedContacts, this.inviteContactsMessage).then((function(_this) {\n        return function(response) {\n          return _this.projectService.fetchProject().then(function() {\n            _this.loading = false;\n            _this.lightboxService.closeAll();\n            _this.rootScope.$broadcast(\"membersform:new:success\");\n            return _this.confirm.notify('success');\n          });\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(response) {\n          _this.loading = false;\n          if (response.data._error_message) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          } else if (response.data.__all__) {\n            return _this.confirm.notify(\"error\", response.data.__all__[0]);\n          }\n        };\n      })(this));\n    };\n\n    return InviteMembersFormController;\n\n  })();\n\n  angular.module(\"taigaAdmin\").controller(\"InviteMembersFormCtrl\", InviteMembersFormController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var InviteMembersFormDirective;\n\n  InviteMembersFormDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      ctrl._areRolesValidated();\n      return ctrl._checkLimitMemberships();\n    };\n    return {\n      scope: {},\n      templateUrl: \"invite-members/invite-members-form/invite-members-form.html\",\n      controller: \"InviteMembersFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        contactsToInvite: '<',\n        emailsToInvite: '=',\n        onDisplayContactList: '&',\n        onRemoveInvitedContact: '&',\n        onRemoveInvitedEmail: '&',\n        onSendInvites: '&'\n      },\n      link: link\n    };\n  };\n\n  angular.module(\"taigaAdmin\").directive(\"tgInviteMembersForm\", InviteMembersFormDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AddMembersController, taiga;\n\n  taiga = this.taiga;\n\n  AddMembersController = (function() {\n    AddMembersController.$inject = [\"tgUserService\", \"tgCurrentUserService\", \"tgProjectService\"];\n\n    function AddMembersController(userService, currentUserService, projectService) {\n      this.userService = userService;\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n      this.contactsToInvite = Immutable.List();\n      this.emailsToInvite = Immutable.List();\n      this.contacts = Immutable.List();\n      this.displayContactList = false;\n    }\n\n    AddMembersController.prototype._getContacts = function() {\n      var excludeProjectId, userId;\n      userId = this.currentUserService.getUser().get(\"id\");\n      excludeProjectId = this.projectService.project.get(\"id\");\n      return this.userService.getContacts(userId, excludeProjectId).then((function(_this) {\n        return function(contacts) {\n          return _this.contacts = contacts;\n        };\n      })(this));\n    };\n\n    AddMembersController.prototype._filterContacts = function(invited) {\n      return this.contacts = this.contacts.filter((function(_this) {\n        return function(contact) {\n          return contact.get('id') !== invited.get('id');\n        };\n      })(this));\n    };\n\n    AddMembersController.prototype.inviteSuggested = function(contact) {\n      this.contactsToInvite = this.contactsToInvite.push(contact);\n      this._filterContacts(contact);\n      return this.displayContactList = true;\n    };\n\n    AddMembersController.prototype.removeContact = function(invited) {\n      this.contactsToInvite = this.contactsToInvite.filter((function(_this) {\n        return function(contact) {\n          return contact.get('id') !== invited.id;\n        };\n      })(this));\n      invited = Immutable.fromJS(invited);\n      this.contacts = this.contacts.push(invited);\n      return this.testEmptyContacts();\n    };\n\n    AddMembersController.prototype.inviteEmail = function(email) {\n      var emailData;\n      emailData = Immutable.Map({\n        'email': email\n      });\n      this.emailsToInvite = this.emailsToInvite.push(emailData);\n      return this.displayContactList = true;\n    };\n\n    AddMembersController.prototype.removeEmail = function(invited) {\n      this.emailsToInvite = this.emailsToInvite.filter((function(_this) {\n        return function(email) {\n          return email.get('email') !== invited.email;\n        };\n      })(this));\n      return this.testEmptyContacts();\n    };\n\n    AddMembersController.prototype.testEmptyContacts = function() {\n      if (this.emailsToInvite.size + this.contactsToInvite.size === 0) {\n        return this.displayContactList = false;\n      }\n    };\n\n    return AddMembersController;\n\n  })();\n\n  angular.module(\"taigaAdmin\").controller(\"AddMembersCtrl\", AddMembersController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var LightboxAddMembersDirective;\n\n  LightboxAddMembersDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      lightboxService.open(el);\n      return ctrl._getContacts();\n    };\n    return {\n      scope: {},\n      templateUrl: \"invite-members/lightbox-add-members.html\",\n      controller: \"AddMembersCtrl\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  angular.module(\"taigaAdmin\").directive(\"tgLbAddMembers\", [\"lightboxService\", LightboxAddMembersDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var SuggestAddMembersController, taiga;\n\n  taiga = this.taiga;\n\n  SuggestAddMembersController = (function() {\n    SuggestAddMembersController.$inject = [];\n\n    function SuggestAddMembersController() {\n      this.contactQuery = \"\";\n    }\n\n    SuggestAddMembersController.prototype.isEmail = function() {\n      return taiga.isEmail(this.contactQuery);\n    };\n\n    SuggestAddMembersController.prototype.filterContacts = function() {\n      return this.filteredContacts = this.contacts.filter((function(_this) {\n        return function(contact) {\n          return contact.get('full_name_display').toLowerCase().includes(_this.contactQuery.toLowerCase()) || contact.get('username').toLowerCase().includes(_this.contactQuery.toLowerCase());\n        };\n      })(this)).slice(0, 12);\n    };\n\n    SuggestAddMembersController.prototype.setInvited = function(contact) {\n      return this.onInviteSuggested({\n        'contact': contact\n      });\n    };\n\n    return SuggestAddMembersController;\n\n  })();\n\n  angular.module(\"taigaAdmin\").controller(\"SuggestAddMembersCtrl\", SuggestAddMembersController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var SuggestAddMembersDirective;\n\n  SuggestAddMembersDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.$watch(\"vm.contacts\", (function(_this) {\n        return function(contacts) {\n          if (contacts) {\n            return ctrl.filterContacts();\n          }\n        };\n      })(this));\n    };\n    return {\n      scope: {},\n      templateUrl: \"invite-members/suggest-add-members/suggest-add-members.html\",\n      controller: \"SuggestAddMembersCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        contacts: '=',\n        onInviteSuggested: '&',\n        onInviteEmail: '&'\n      },\n      link: link\n    };\n  };\n\n  angular.module(\"taigaAdmin\").directive(\"tgSuggestAddMembers\", [\"lightboxService\", SuggestAddMembersDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DropdownNotificationsDirective, timeout;\n\n  timeout = this.taiga.timeout;\n\n  DropdownNotificationsDirective = function($rootScope, notificationsService, currentUserService) {\n    var directive, link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      $scope.notificationsList = [];\n      $scope.loading = false;\n      $scope.$on(\"notifications:loaded\", function(event, total) {\n        $scope.loading = false;\n        if ($scope.total !== void 0 && total > $scope.total) {\n          $scope.newEvent = true;\n          timeout(100, function() {\n            $scope.total = total;\n            return $scope.$apply();\n          });\n          return timeout(2000, function() {\n            return $scope.newEvent = false;\n          });\n        } else {\n          return $scope.total = total;\n        }\n      });\n      $scope.$on(\"notifications:loading\", function() {\n        return $scope.loading = true;\n      });\n      return $scope.setAllAsRead = function() {\n        return notificationsService.setNotificationsAsRead().then(function() {\n          return $rootScope.$emit(\"notifications:dismiss-all\");\n        });\n      };\n    };\n    directive = {\n      templateUrl: \"navigation-bar/dropdown-notifications/dropdown-notifications.html\",\n      scope: {\n        active: \"=\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgDropdownNotifications\", [\"$rootScope\", \"tgNotificationsService\", \"tgCurrentUserService\", DropdownNotificationsDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DropdownProjectListDirective;\n\n  DropdownProjectListDirective = function(rootScope, currentUserService, projectsService, projectService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      var updateLinks;\n      scope.vm = {};\n      taiga.defineImmutableProperty(scope.vm, \"projects\", function() {\n        return currentUserService.projects.get(\"recents\");\n      });\n      taiga.defineImmutableProperty(scope.vm, \"currentProject\", function() {\n        if (projectService.project) {\n          return projectService.project.get('id');\n        }\n        return null;\n      });\n      scope.vm.newProject = function() {\n        return projectsService.newProject();\n      };\n      updateLinks = function() {\n        return el.find(\".dropdown-project-list ul li a\").data(\"fullUrl\", \"\");\n      };\n      return rootScope.$on(\"dropdown-project-list:updated\", updateLinks);\n    };\n    directive = {\n      templateUrl: \"navigation-bar/dropdown-project-list/dropdown-project-list.html\",\n      scope: {\n        active: \"=\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  DropdownProjectListDirective.$inject = [\"$rootScope\", \"tgCurrentUserService\", \"tgProjectsService\", \"tgProjectService\"];\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgDropdownProjectList\", DropdownProjectListDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DropdownUserDirective;\n\n  DropdownUserDirective = function(authService, configService, locationService, navUrlsService, $rootScope) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.vm = {};\n      scope.vm.isFeedbackEnabled = configService.get(\"feedbackEnabled\");\n      scope.vm.customSupportUrl = configService.get(\"supportUrl\");\n      taiga.defineImmutableProperty(scope.vm, \"user\", function() {\n        return authService.userData;\n      });\n      scope.vm.logout = function() {\n        authService.logout();\n        locationService.url(navUrlsService.resolve(\"discover\"));\n        return locationService.search({});\n      };\n      return scope.vm.userSettingsPlugins = _.filter($rootScope.userSettingsPlugins, {\n        userMenu: true\n      });\n    };\n    directive = {\n      templateUrl: \"navigation-bar/dropdown-user/dropdown-user.html\",\n      scope: {},\n      link: link\n    };\n    return directive;\n  };\n\n  DropdownUserDirective.$inject = [\"$tgAuth\", \"$tgConfig\", \"$tgLocation\", \"$tgNavUrls\", \"$rootScope\"];\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgDropdownUser\", DropdownUserDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var NavigationBarDirective;\n\n  NavigationBarDirective = function(currentUserService, navigationBarService, locationService, navUrlsService, config, feedbackService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      var attempts, loadUserPilot, userPilotInterval;\n      scope.vm = {};\n      taiga.defineImmutableProperty(scope.vm, \"projects\", function() {\n        return currentUserService.projects.get(\"recents\");\n      });\n      taiga.defineImmutableProperty(scope.vm, \"isAuthenticated\", function() {\n        return currentUserService.isAuthenticated();\n      });\n      taiga.defineImmutableProperty(scope.vm, \"isEnabledHeader\", function() {\n        return navigationBarService.isEnabledHeader();\n      });\n      scope.vm.publicRegisterEnabled = config.get(\"publicRegisterEnabled\");\n      scope.vm.customSupportUrl = config.get(\"supportUrl\");\n      scope.vm.isFeedbackEnabled = config.get(\"feedbackEnabled\");\n      loadUserPilot = (function(_this) {\n        return function() {\n          var userPilotIframe;\n          userPilotIframe = document.querySelector('#userpilot-resource-centre-frame');\n          if (userPilotIframe) {\n            return scope.$applyAsync(function() {\n              var userPilotIframeDocument, widget;\n              userPilotIframeDocument = userPilotIframe.contentWindow.document.body;\n              widget = userPilotIframeDocument.querySelector('#widget-title');\n              if (widget) {\n                scope.vm.userPilotTitle = widget.innerText;\n                return clearInterval(userPilotInterval);\n              }\n            });\n          }\n        };\n      })(this);\n      attempts = 10;\n      if (window.TAIGA_USER_PILOT_TOKEN) {\n        scope.vm.userPilotTitle = 'Help center';\n        scope.vm.userpilotEnabled = true;\n        userPilotInterval = setInterval((function(_this) {\n          return function() {\n            loadUserPilot();\n            attempts--;\n            if (!attempts) {\n              return clearInterval(userPilotInterval);\n            }\n          };\n        })(this), 1000);\n      }\n      scope.vm.login = function() {\n        var nextUrl;\n        nextUrl = encodeURIComponent(locationService.url());\n        locationService.url(navUrlsService.resolve(\"login\"));\n        return locationService.search({\n          next: nextUrl\n        });\n      };\n      scope.vm.sendFeedback = function() {\n        return feedbackService.sendFeedback();\n      };\n      window._taigaSendFeedback = scope.vm.sendFeedback;\n      return scope.$on(\"$routeChangeSuccess\", function() {\n        var path;\n        scope.vm.active = null;\n        path = locationService.path();\n        switch (path) {\n          case \"/\":\n            return scope.vm.active = 'dashboard';\n          case \"/discover\":\n            return scope.vm.active = 'discover';\n          case \"/notifications\":\n            return scope.vm.active = 'notifications';\n          case \"/projects/\":\n            return scope.vm.active = 'projects';\n          default:\n            if (path.startsWith('/project')) {\n              return scope.vm.active = 'project';\n            }\n        }\n      });\n    };\n    directive = {\n      templateUrl: \"navigation-bar/navigation-bar.html\",\n      scope: {},\n      link: link\n    };\n    return directive;\n  };\n\n  NavigationBarDirective.$inject = [\"tgCurrentUserService\", \"tgNavigationBarService\", \"$tgLocation\", \"$tgNavUrls\", \"$tgConfig\", \"tgFeedbackService\"];\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgNavigationBar\", NavigationBarDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var NavigationBarService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NavigationBarService = (function(superClass) {\n    extend(NavigationBarService, superClass);\n\n    function NavigationBarService() {\n      this.disableHeader();\n    }\n\n    NavigationBarService.prototype.enableHeader = function() {\n      return this.enabledHeader = true;\n    };\n\n    NavigationBarService.prototype.disableHeader = function() {\n      return this.enabledHeader = false;\n    };\n\n    NavigationBarService.prototype.isEnabledHeader = function() {\n      return this.enabledHeader;\n    };\n\n    return NavigationBarService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaNavigationBar\").service(\"tgNavigationBarService\", NavigationBarService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var NotificationsListDirective;\n\n  NotificationsListDirective = function() {\n    return {\n      templateUrl: \"notifications/notifications-list/notifications-list.html\",\n      controller: \"Notifications\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        infiniteScrollContainer: \"@\",\n        infiniteScrollDistance: \"=\",\n        infiniteScrollDisabled: \"=\",\n        onlyUnread: \"=onlyUnread\"\n      }\n    };\n  };\n\n  angular.module(\"taigaNotifications\").directive(\"tgNotificationsList\", NotificationsListDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var NotificationsController, debounceLeading, mixOf, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  NotificationsController = (function(superClass) {\n    extend(NotificationsController, superClass);\n\n    NotificationsController.$inject = [\"$rootScope\", \"$scope\", \"tgNotificationsService\", \"tgCurrentUserService\", \"$tgEvents\", \"$location\", \"$window\"];\n\n    function NotificationsController(rootScope, scope, notificationsService, currentUserService, events, location, window) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.notificationsService = notificationsService;\n      this.currentUserService = currentUserService;\n      this.events = events;\n      this.location = location;\n      this.window = window;\n      this.total = 0;\n      this.user = this.currentUserService.getUser();\n      this.scrollDisabled = false;\n      this.initList();\n      this.loadNotifications();\n      this.rootScope.$on(\"notifications:dismiss\", (function(_this) {\n        return function(event) {\n          if (_this.onlyUnread) {\n            return _this.reloadList();\n          }\n        };\n      })(this));\n      this.rootScope.$on(\"notifications:new\", (function(_this) {\n        return function(event) {\n          return _this.reloadList();\n        };\n      })(this));\n      this.rootScope.$on(\"notifications:dismiss-all\", (function(_this) {\n        return function(event) {\n          return _this.reloadList();\n        };\n      })(this));\n    }\n\n    NotificationsController.prototype.initList = function() {\n      this.notificationsList = Immutable.List();\n      if (this.user) {\n        this.list = this.notificationsService.getNotificationsList(this.user.get(\"id\"), this.onlyUnread != null);\n      }\n      return this.loading = this.list == null;\n    };\n\n    NotificationsController.prototype.reloadList = function() {\n      this.initList();\n      return this.loadNotifications();\n    };\n\n    NotificationsController.prototype.loadNotifications = function() {\n      this.scrollDisabled = true;\n      this.loading = true;\n      this.scope.$emit(\"notifications:loading\");\n      return this.list.next().then((function(_this) {\n        return function(response) {\n          _this.notificationsList = _this.notificationsList.concat(response.get(\"items\"));\n          if (!_this.infiniteScrollDisabled && response.get(\"next\")) {\n            _this.scrollDisabled = false;\n          }\n          _this.total = response.get(\"total\");\n          _this.scope.$emit(\"notifications:loaded\", _this.total);\n          _this.loading = false;\n          return _this.notificationsList;\n        };\n      })(this));\n    };\n\n    NotificationsController.prototype.setAsRead = function(notification, url) {\n      return this.notificationsService.setNotificationAsRead(notification.get(\"id\")).then((function(_this) {\n        return function() {\n          if (_this.location.$$url === url) {\n            _this.window.location.reload();\n          } else {\n            _this.location.path(url);\n          }\n          return _this.rootScope.$broadcast(\"notifications:dismiss\");\n        };\n      })(this));\n    };\n\n    NotificationsController.prototype.setAllAsRead = function() {\n      return this.notificationsService.setNotificationsAsRead().then((function(_this) {\n        return function() {\n          return _this.rootScope.$broadcast(\"notifications:dismiss-all\");\n        };\n      })(this));\n    };\n\n    return NotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  angular.module(\"taigaNotifications\").controller(\"Notifications\", NotificationsController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var NotificationsService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  NotificationsService = (function(superClass) {\n    var _notificationTypes, _params;\n\n    extend(NotificationsService, superClass);\n\n    NotificationsService.$inject = [\"tgResources\", \"tgUserTimelinePaginationSequenceService\", \"$translate\", \"$tgNavUrls\", \"$tgSections\"];\n\n    _notificationTypes = [\n      {\n        check: function(notification) {\n          return notification.get('event_type') === 1;\n        },\n        key: 'EVENTS.ASSIGNED_YOU',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 2;\n        },\n        key: 'EVENTS.MENTIONED_YOU',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 3;\n        },\n        key: 'EVENTS.ADDED_YOU_AS_WATCHER',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 4;\n        },\n        key: 'EVENTS.ADDED_YOU_AS_MEMBER',\n        translate_params: ['username']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 5;\n        },\n        key: 'EVENTS.COMMENTED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 6;\n        },\n        key: 'EVENTS.MENTIONED_YOU_IN_COMMENT',\n        translate_params: ['username', 'obj_name']\n      }\n    ];\n\n    _params = {\n      username: function(notification) {\n        var title_attr, url, user;\n        user = notification.getIn(['data', 'user']);\n        if (user.get('is_profile_visible')) {\n          title_attr = this.translate.instant('COMMON.SEE_USER_PROFILE', {\n            username: user.get('username')\n          });\n          url = this.navUrls.resolve('user-profile', {\n            username: notification.getIn(['data', 'user', 'username'])\n          });\n          return this._getLink(notification, url, user.get('name'), 'user-link', title_attr);\n        } else {\n          return this._getUsernameSpan(user.get('name'));\n        }\n      },\n      project_name: function(notification) {\n        var url;\n        url = this.navUrls.resolve('project', {\n          project: notification.getIn(['data', 'project', 'slug'])\n        });\n        return this._getLink(notification, url, notification.getIn([\"data\", \"project\", \"name\"]), 'project-link');\n      },\n      obj_name: function(notification) {\n        var obj, text, url;\n        obj = this._getNotificationObject(notification);\n        url = this._getDetailObjUrl(notification, obj.get('content_type'));\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(notification, url, text, 'object-link');\n      }\n    };\n\n    function NotificationsService(rs, userTimelinePaginationSequenceService, translate, navUrls, tgSections) {\n      this.rs = rs;\n      this.userTimelinePaginationSequenceService = userTimelinePaginationSequenceService;\n      this.translate = translate;\n      this.navUrls = navUrls;\n      this.tgSections = tgSections;\n    }\n\n    NotificationsService.prototype.getNotificationsList = function(userId, onlyUnread) {\n      var config, total;\n      total = 0;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.users.getNotifications(userId, page, onlyUnread).then(function(response) {\n            return response;\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addNotificationAttributes(obj);\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    NotificationsService.prototype.setNotificationAsRead = function(notificationId) {\n      return this.rs.users.setNotificationAsRead(notificationId);\n    };\n\n    NotificationsService.prototype.setNotificationsAsRead = function() {\n      return this.rs.users.setNotificationsAsRead();\n    };\n\n    NotificationsService.prototype._getNotificationObject = function(notification) {\n      if (notification.get('data').get('obj')) {\n        return notification.get('data').get('obj');\n      }\n    };\n\n    NotificationsService.prototype._getType = function(notification) {\n      return _.find(_notificationTypes, function(obj) {\n        return obj.check(notification);\n      });\n    };\n\n    NotificationsService.prototype._addNotificationAttributes = function(notification) {\n      var event_type, projectSectionPath, projectSlug, projectUrl, title, type;\n      event_type = notification.get('event_type');\n      type = this._getType(notification);\n      title = this._getTitle(notification, event_type, type);\n      notification = notification.set('title_html', title);\n      projectSlug = notification.getIn(['data', 'project', 'slug']);\n      projectSectionPath = this.tgSections.getPath(projectSlug);\n      projectUrl = this.navUrls.resolve(\"project-\" + projectSectionPath, {\n        project: projectSlug\n      });\n      notification = notification.set('projectUrl', projectUrl);\n      notification = notification.set('obj', this._getNotificationObject(notification));\n      return notification;\n    };\n\n    NotificationsService.prototype._translateTitleParams = function(param, notification, event) {\n      return _params[param].call(this, notification, event);\n    };\n\n    NotificationsService.prototype._getDetailObjUrl = function(notification, contentType) {\n      var url, urlMapping;\n      urlMapping = {\n        \"issue\": \"project-issues-detail\",\n        \"task\": \"project-tasks-detail\",\n        \"userstory\": \"project-userstories-detail\"\n      };\n      url = this.navUrls.resolve(urlMapping[contentType], {\n        project: notification.getIn(['data', 'project', 'slug']),\n        ref: notification.getIn(['data', 'obj', 'ref'])\n      });\n      return url;\n    };\n\n    NotificationsService.prototype._getLink = function(notification, url, text, css, title) {\n      var span;\n      title = title || text;\n      span = $('<span>').attr('ng-non-bindable', true).text(text);\n      return $('<a href=\"\">').attr('title', title).attr('class', css).attr('ng-click', \"vm.setAsRead(notification, \\\"\" + url + \"\\\")\").append(span).prop('outerHTML');\n    };\n\n    NotificationsService.prototype._getUsernameSpan = function(text) {\n      var title;\n      title = title || text;\n      return $('<span>').addClass('username').text(text).prop('outerHTML');\n    };\n\n    NotificationsService.prototype._getParams = function(notification, event_type, notification_type) {\n      var params;\n      params = {};\n      notification_type.translate_params.forEach((function(_this) {\n        return function(param) {\n          return params[param] = _this._translateTitleParams(param, notification, event_type);\n        };\n      })(this));\n      return params;\n    };\n\n    NotificationsService.prototype._getTitle = function(notification, event_type, notification_type) {\n      var params, paramsKeys, translation;\n      params = this._getParams(notification, event_type, notification_type);\n      paramsKeys = {};\n      Object.keys(params).forEach(function(key) {\n        return paramsKeys[key] = '{{' + key + '}}';\n      });\n      translation = this.translate.instant(notification_type.key, paramsKeys);\n      Object.keys(params).forEach(function(key) {\n        var find;\n        find = '{{' + key + '}}';\n        return translation = translation.replace(new RegExp(find, 'g'), params[key]);\n      });\n      return translation;\n    };\n\n    return NotificationsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaNotifications\").service(\"tgNotificationsService\", NotificationsService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProfileBarController;\n\n  ProfileBarController = (function() {\n    ProfileBarController.$inject = [\"tgUserService\"];\n\n    function ProfileBarController(userService) {\n      this.userService = userService;\n      this.loadStats();\n    }\n\n    ProfileBarController.prototype.loadStats = function() {\n      return this.userService.getStats(this.user.get(\"id\")).then((function(_this) {\n        return function(stats) {\n          return _this.stats = stats;\n        };\n      })(this));\n    };\n\n    return ProfileBarController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileBar\", ProfileBarController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProfileBarDirective;\n\n  ProfileBarDirective = function() {\n    return {\n      templateUrl: \"profile/profile-bar/profile-bar.html\",\n      controller: \"ProfileBar\",\n      controllerAs: \"vm\",\n      scope: {\n        user: \"=user\",\n        isCurrentUser: \"=iscurrentuser\"\n      },\n      bindToController: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileBar\", ProfileBarDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProfileContactsController;\n\n  ProfileContactsController = (function() {\n    ProfileContactsController.$inject = [\"tgUserService\", \"tgCurrentUserService\"];\n\n    function ProfileContactsController(userService, currentUserService) {\n      this.userService = userService;\n      this.currentUserService = currentUserService;\n      this.currentUser = this.currentUserService.getUser();\n      this.isCurrentUser = false;\n      if (this.currentUser && this.currentUser.get(\"id\") === this.user.get(\"id\")) {\n        this.isCurrentUser = true;\n      }\n    }\n\n    ProfileContactsController.prototype.loadContacts = function() {\n      return this.userService.getContacts(this.user.get(\"id\")).then((function(_this) {\n        return function(contacts) {\n          return _this.contacts = contacts;\n        };\n      })(this));\n    };\n\n    return ProfileContactsController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileContacts\", ProfileContactsController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProfileContactsDirective;\n\n  ProfileContactsDirective = function() {\n    var link;\n    link = function(scope, elm, attrs, ctrl) {\n      return ctrl.loadContacts();\n    };\n    return {\n      templateUrl: \"profile/profile-contacts/profile-contacts.html\",\n      scope: {\n        user: \"=\"\n      },\n      controllerAs: \"vm\",\n      controller: \"ProfileContacts\",\n      link: link,\n      bindToController: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileContacts\", ProfileContactsDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var FavItemDirective;\n\n  FavItemDirective = function() {\n    var link, templateUrl;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.vm = {\n        item: scope.item\n      };\n    };\n    templateUrl = function(el, attrs) {\n      if (attrs.itemType === \"project\") {\n        return \"profile/profile-favs/items/project.html\";\n      } else {\n        return \"profile/profile-favs/items/ticket.html\";\n      }\n    };\n    return {\n      scope: {\n        \"item\": \"=tgFavItem\"\n      },\n      link: link,\n      templateUrl: templateUrl\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgFavItem\", FavItemDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var FavsBaseController, ProfileLikedController, ProfileVotedController, ProfileWatchedController, debounceLeading,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  FavsBaseController = (function() {\n    function FavsBaseController() {\n      this._init();\n    }\n\n    FavsBaseController.prototype._init = function() {\n      this.enableFilterByAll = true;\n      this.enableFilterByProjects = true;\n      this.enableFilterByEpics = true;\n      this.enableFilterByUserStories = true;\n      this.enableFilterByTasks = true;\n      this.enableFilterByIssues = true;\n      this.enableFilterByTextQuery = true;\n      this._resetList();\n      this.q = null;\n      return this.type = null;\n    };\n\n    FavsBaseController.prototype._resetList = function() {\n      this.items = Immutable.List();\n      this.scrollDisabled = false;\n      return this._page = 1;\n    };\n\n    FavsBaseController.prototype._enableLoadingSpinner = function() {\n      return this.isLoading = true;\n    };\n\n    FavsBaseController.prototype._disableLoadingSpinner = function() {\n      return this.isLoading = false;\n    };\n\n    FavsBaseController.prototype._enableScroll = function() {\n      return this.scrollDisabled = false;\n    };\n\n    FavsBaseController.prototype._disableScroll = function() {\n      return this.scrollDisabled = true;\n    };\n\n    FavsBaseController.prototype._checkIfHasMorePages = function(hasNext) {\n      if (hasNext) {\n        this._page += 1;\n        return this._enableScroll();\n      } else {\n        return this._disableScroll();\n      }\n    };\n\n    FavsBaseController.prototype._checkIfHasNoResults = function() {\n      return this.hasNoResults = this.items.size === 0;\n    };\n\n    FavsBaseController.prototype.loadItems = function() {\n      this._enableLoadingSpinner();\n      this._disableScroll();\n      return this._getItems(this.user.get(\"id\"), this._page, this.type, this.q).then((function(_this) {\n        return function(response) {\n          _this.items = _this.items.concat(response.get(\"data\"));\n          _this._checkIfHasMorePages(response.get(\"next\"));\n          _this._checkIfHasNoResults();\n          _this._disableLoadingSpinner();\n          return _this.items;\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function() {\n          _this._disableLoadingSpinner();\n          return _this.items;\n        };\n      })(this));\n    };\n\n    FavsBaseController.prototype.filterByTextQuery = debounceLeading(500, function() {\n      this._resetList();\n      return this.loadItems();\n    });\n\n    FavsBaseController.prototype.showAll = function() {\n      if (this.type !== null) {\n        this.type = null;\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showProjectsOnly = function() {\n      if (this.type !== \"project\") {\n        this.type = \"project\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showEpicsOnly = function() {\n      if (this.type !== \"epic\") {\n        this.type = \"epic\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showUserStoriesOnly = function() {\n      if (this.type !== \"userstory\") {\n        this.type = \"userstory\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showTasksOnly = function() {\n      if (this.type !== \"task\") {\n        this.type = \"task\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showIssuesOnly = function() {\n      if (this.type !== \"issue\") {\n        this.type = \"issue\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    return FavsBaseController;\n\n  })();\n\n  ProfileLikedController = (function(superClass) {\n    extend(ProfileLikedController, superClass);\n\n    ProfileLikedController.$inject = [\"tgUserService\"];\n\n    function ProfileLikedController(userService) {\n      this.userService = userService;\n      ProfileLikedController.__super__.constructor.call(this);\n      this.tabName = 'likes';\n      this.enableFilterByAll = false;\n      this.enableFilterByProjects = false;\n      this.enableFilterByEpics = false;\n      this.enableFilterByUserStories = false;\n      this.enableFilterByTasks = false;\n      this.enableFilterByIssues = false;\n      this.enableFilterByTextQuery = true;\n      this._getItems = this.userService.getLiked;\n    }\n\n    return ProfileLikedController;\n\n  })(FavsBaseController);\n\n  angular.module(\"taigaProfile\").controller(\"ProfileLiked\", ProfileLikedController);\n\n  ProfileVotedController = (function(superClass) {\n    extend(ProfileVotedController, superClass);\n\n    ProfileVotedController.$inject = [\"tgUserService\"];\n\n    function ProfileVotedController(userService) {\n      this.userService = userService;\n      ProfileVotedController.__super__.constructor.call(this);\n      this.tabName = 'upvotes';\n      this.enableFilterByAll = true;\n      this.enableFilterByProjects = false;\n      this.enableFilterByEpics = true;\n      this.enableFilterByUserStories = true;\n      this.enableFilterByTasks = true;\n      this.enableFilterByIssues = true;\n      this.enableFilterByTextQuery = true;\n      this._getItems = this.userService.getVoted;\n    }\n\n    return ProfileVotedController;\n\n  })(FavsBaseController);\n\n  angular.module(\"taigaProfile\").controller(\"ProfileVoted\", ProfileVotedController);\n\n  ProfileWatchedController = (function(superClass) {\n    extend(ProfileWatchedController, superClass);\n\n    ProfileWatchedController.$inject = [\"tgUserService\"];\n\n    function ProfileWatchedController(userService) {\n      this.userService = userService;\n      ProfileWatchedController.__super__.constructor.call(this);\n      this.tabName = 'watchers';\n      this._getItems = this.userService.getWatched;\n    }\n\n    return ProfileWatchedController;\n\n  })(FavsBaseController);\n\n  angular.module(\"taigaProfile\").controller(\"ProfileWatched\", ProfileWatchedController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProfileLikedDirective, ProfileVotedDirective, ProfileWatchedDirective, base;\n\n  base = {\n    scope: {},\n    bindToController: {\n      user: \"=\",\n      type: \"@\",\n      q: \"@\",\n      scrollDisabled: \"@\",\n      isLoading: \"@\",\n      hasNoResults: \"@\"\n    },\n    controller: null,\n    controllerAs: \"vm\",\n    templateUrl: \"profile/profile-favs/profile-favs.html\"\n  };\n\n  ProfileLikedDirective = function() {\n    return _.extend({}, base, {\n      controller: \"ProfileLiked\"\n    });\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileLiked\", ProfileLikedDirective);\n\n  ProfileVotedDirective = function() {\n    return _.extend({}, base, {\n      controller: \"ProfileVoted\"\n    });\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileVoted\", ProfileVotedDirective);\n\n  ProfileWatchedDirective = function() {\n    return _.extend({}, base, {\n      controller: \"ProfileWatched\"\n    });\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileWatched\", ProfileWatchedDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProfileHints;\n\n  ProfileHints = (function() {\n    ProfileHints.prototype.HINTS = [\n      {\n        url: \"https://community.taiga.io/t/import-export-taiga-projects/168\"\n      }, {\n        url: \"https://community.taiga.io/t/customisation-for-your-projects/127#tier-4-custom-fields-and-due-dates-5\"\n      }, {}, {}\n    ];\n\n    function ProfileHints(translate) {\n      var hintKey;\n      this.translate = translate;\n      hintKey = Math.floor(Math.random() * this.HINTS.length) + 1;\n      this.hint = this.HINTS[hintKey - 1];\n      this.hint.linkText = this.hint.linkText || 'HINTS.LINK';\n      this.hint.title = this.translate.instant(\"HINTS.HINT\" + hintKey + \"_TITLE\");\n      this.hint.text = this.translate.instant(\"HINTS.HINT\" + hintKey + \"_TEXT\");\n    }\n\n    return ProfileHints;\n\n  })();\n\n  ProfileHints.$inject = [\"$translate\"];\n\n  angular.module(\"taigaProfile\").controller(\"ProfileHints\", ProfileHints);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProfileHints;\n\n  ProfileHints = function($translate) {\n    return {\n      scope: {},\n      controller: \"ProfileHints\",\n      controllerAs: \"vm\",\n      templateUrl: \"profile/profile-hints/profile-hints.html\"\n    };\n  };\n\n  ProfileHints.$inject = [\"$translate\"];\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileHints\", ProfileHints);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProfileProjectsController;\n\n  ProfileProjectsController = (function() {\n    ProfileProjectsController.$inject = [\"tgProjectsService\", \"tgUserService\"];\n\n    function ProfileProjectsController(projectsService, userService) {\n      this.projectsService = projectsService;\n      this.userService = userService;\n    }\n\n    ProfileProjectsController.prototype.loadProjects = function() {\n      return this.projectsService.getProjectsByUserId(this.user.get(\"id\")).then((function(_this) {\n        return function(projects) {\n          return _this.userService.attachUserContactsToProjects(_this.user.get(\"id\"), projects);\n        };\n      })(this)).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    return ProfileProjectsController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileProjects\", ProfileProjectsController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProfileProjectsDirective;\n\n  ProfileProjectsDirective = function() {\n    var link;\n    link = function(scope, elm, attr, ctrl) {\n      return ctrl.loadProjects();\n    };\n    return {\n      templateUrl: \"profile/profile-projects/profile-projects.html\",\n      scope: {\n        user: \"=\"\n      },\n      link: link,\n      bindToController: true,\n      controllerAs: \"vm\",\n      controller: \"ProfileProjects\"\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileProjects\", ProfileProjectsDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProfileTabDirective;\n\n  ProfileTabDirective = function() {\n    var link;\n    link = function(scope, element, attrs, ctrl, transclude) {\n      scope.tab = {};\n      attrs.$observe(\"tgProfileTab\", function(name) {\n        return scope.tab.name = name;\n      });\n      attrs.$observe(\"tabTitle\", function(title) {\n        return scope.tab.title = title;\n      });\n      scope.tab.icon = attrs.tabIcon;\n      scope.tab.active = !!attrs.tabActive;\n      if (scope.$eval(attrs.tabDisabled) !== true) {\n        return ctrl.addTab(scope.tab);\n      }\n    };\n    return {\n      templateUrl: \"profile/profile-tab/profile-tab.html\",\n      scope: {},\n      require: \"^tgProfileTabs\",\n      link: link,\n      transclude: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileTab\", ProfileTabDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProfileTabsController;\n\n  ProfileTabsController = (function() {\n    function ProfileTabsController() {\n      this.tabs = [];\n    }\n\n    ProfileTabsController.prototype.addTab = function(tab) {\n      return this.tabs.push(tab);\n    };\n\n    ProfileTabsController.prototype.toggleTab = function(tab) {\n      _.map(this.tabs, function(tab) {\n        return tab.active = false;\n      });\n      return tab.active = true;\n    };\n\n    return ProfileTabsController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileTabs\", ProfileTabsController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProfileTabsDirective;\n\n  ProfileTabsDirective = function() {\n    return {\n      scope: {},\n      controller: \"ProfileTabs\",\n      controllerAs: \"vm\",\n      templateUrl: \"profile/profile-tabs/profile-tabs.html\",\n      transclude: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileTabs\", ProfileTabsDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProfileController;\n\n  ProfileController = (function() {\n    ProfileController.$inject = [\"tgAppMetaService\", \"tgCurrentUserService\", \"$routeParams\", \"tgUserService\", \"tgXhrErrorService\", \"$translate\"];\n\n    function ProfileController(appMetaService, currentUserService, routeParams, userService, xhrError, translate) {\n      this.appMetaService = appMetaService;\n      this.currentUserService = currentUserService;\n      this.routeParams = routeParams;\n      this.userService = userService;\n      this.xhrError = xhrError;\n      this.translate = translate;\n      this.isCurrentUser = false;\n      if (this.routeParams.slug) {\n        this.userService.getUserByUserName(this.routeParams.slug).then((function(_this) {\n          return function(user) {\n            if (!user.get('is_active')) {\n              return _this.xhrError.notFound();\n            } else {\n              _this.user = user;\n              _this.isCurrentUser = false;\n              _this._setMeta(_this.user);\n              return user;\n            }\n          };\n        })(this))[\"catch\"]((function(_this) {\n          return function(xhr) {\n            return _this.xhrError.response(xhr);\n          };\n        })(this));\n      } else {\n        this.user = this.currentUserService.getUser();\n        this.isCurrentUser = true;\n        this._setMeta(this.user);\n      }\n    }\n\n    ProfileController.prototype._setMeta = function(user) {\n      var ctx, description, title;\n      ctx = {\n        userFullName: user.get(\"full_name_display\"),\n        userUsername: user.get(\"username\")\n      };\n      title = this.translate.instant(\"USER.PROFILE.PAGE_TITLE\", ctx);\n      description = user.get(\"bio\");\n      return this.appMetaService.setAll(title, description);\n    };\n\n    return ProfileController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"Profile\", ProfileController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var BlockedProjectExplanationDirective;\n\n  BlockedProjectExplanationDirective = function() {\n    return {\n      templateUrl: \"projects/project/blocked-project-explanation.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgBlockedProjectExplanation\", BlockedProjectExplanationDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ContactProjectButtonController;\n\n  ContactProjectButtonController = (function() {\n    ContactProjectButtonController.$inject = ['tgLightboxFactory'];\n\n    function ContactProjectButtonController(lightboxFactory) {\n      this.lightboxFactory = lightboxFactory;\n    }\n\n    ContactProjectButtonController.prototype.launchContactForm = function() {\n      return this.lightboxFactory.create('tg-lb-contact-project', {\n        \"class\": \"lightbox lightbox-contact-project e2e-lightbox-contact-project\",\n        \"project\": \"project\"\n      }, {\n        \"project\": this.project\n      });\n    };\n\n    return ContactProjectButtonController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ContactProjectButtonCtrl\", ContactProjectButtonController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ContactProjectButtonDirective;\n\n  ContactProjectButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"ContactProjectButtonCtrl\",\n      bindToController: {\n        project: '=',\n        layout: '@'\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/contact-project-button/contact-project-button.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgContactProjectButton\", ContactProjectButtonDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ContactProjectLbController;\n\n  ContactProjectLbController = (function() {\n    ContactProjectLbController.$inject = [\"lightboxService\", \"tgResources\", \"$tgConfirm\"];\n\n    function ContactProjectLbController(lightboxService, rs, confirm) {\n      this.lightboxService = lightboxService;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.contact = {};\n    }\n\n    ContactProjectLbController.prototype.contactProject = function() {\n      var message, project, promise;\n      project = this.project.get('id');\n      message = this.contact.message;\n      promise = this.rs.projects.contactProject(project, message);\n      this.sendingFeedback = true;\n      return promise.then((function(_this) {\n        return function() {\n          _this.lightboxService.closeAll();\n          _this.sendingFeedback = false;\n          return _this.confirm.notify(\"success\");\n        };\n      })(this));\n    };\n\n    return ContactProjectLbController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ContactProjectLbCtrl\", ContactProjectLbController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ContactProjectLbDirective;\n\n  ContactProjectLbDirective = function(lightboxService) {\n    var link;\n    this.inject = ['lightboxService'];\n    link = function(scope, el) {\n      return lightboxService.open(el);\n    };\n    return {\n      controller: \"ContactProjectLbCtrl\",\n      bindToController: {\n        project: '='\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/lb-contact-project/lb-contact-project.html\",\n      link: link\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgLbContactProject\", [\"lightboxService\", ContactProjectLbDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var LikeProjectButtonController;\n\n  LikeProjectButtonController = (function() {\n    LikeProjectButtonController.$inject = [\"$tgConfirm\", \"tgLikeProjectButtonService\"];\n\n    function LikeProjectButtonController(confirm, likeButtonService) {\n      this.confirm = confirm;\n      this.likeButtonService = likeButtonService;\n      this.isMouseOver = false;\n      this.loading = false;\n    }\n\n    LikeProjectButtonController.prototype.showTextWhenMouseIsOver = function() {\n      return this.isMouseOver = true;\n    };\n\n    LikeProjectButtonController.prototype.showTextWhenMouseIsLeave = function() {\n      return this.isMouseOver = false;\n    };\n\n    LikeProjectButtonController.prototype.toggleLike = function() {\n      var promise;\n      this.loading = true;\n      if (!this.project.get(\"is_fan\")) {\n        promise = this._like();\n      } else {\n        promise = this._unlike();\n      }\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    LikeProjectButtonController.prototype._like = function() {\n      return this.likeButtonService.like(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.showTextWhenMouseIsLeave();\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n    };\n\n    LikeProjectButtonController.prototype._unlike = function() {\n      return this.likeButtonService.unlike(this.project.get('id'))[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n    };\n\n    return LikeProjectButtonController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"LikeProjectButton\", LikeProjectButtonController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var LikeProjectButtonDirective;\n\n  LikeProjectButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"LikeProjectButton\",\n      bindToController: {\n        project: '='\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/like-project-button/like-project-button.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgLikeProjectButton\", LikeProjectButtonDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var LikeProjectButtonService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  LikeProjectButtonService = (function(superClass) {\n    extend(LikeProjectButtonService, superClass);\n\n    LikeProjectButtonService.$inject = [\"tgResources\", \"tgCurrentUserService\", \"tgProjectService\"];\n\n    function LikeProjectButtonService(rs, currentUserService, projectService) {\n      this.rs = rs;\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n    }\n\n    LikeProjectButtonService.prototype._getProjectIndex = function(projectId) {\n      return this.currentUserService.projects.get('all').findIndex(function(project) {\n        return project.get('id') === projectId;\n      });\n    };\n\n    LikeProjectButtonService.prototype._updateProjects = function(projectId, isFan) {\n      var projectIndex, projects;\n      projectIndex = this._getProjectIndex(projectId);\n      if (projectIndex === -1) {\n        return;\n      }\n      projects = this.currentUserService.projects.get('all').update(projectIndex, function(project) {\n        var totalFans;\n        totalFans = project.get(\"total_fans\");\n        if (isFan) {\n          totalFans++;\n        } else {\n          totalFans--;\n        }\n        return project.merge({\n          is_fan: isFan,\n          total_fans: totalFans\n        });\n      });\n      return this.currentUserService.setProjects(projects);\n    };\n\n    LikeProjectButtonService.prototype._updateCurrentProject = function(isFan) {\n      var project, totalFans;\n      totalFans = this.projectService.project.get(\"total_fans\");\n      if (isFan) {\n        totalFans++;\n      } else {\n        totalFans--;\n      }\n      project = this.projectService.project.merge({\n        is_fan: isFan,\n        total_fans: totalFans\n      });\n      return this.projectService.setProject(project);\n    };\n\n    LikeProjectButtonService.prototype.like = function(projectId) {\n      return this.rs.projects.likeProject(projectId).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, true);\n          return _this._updateCurrentProject(true);\n        };\n      })(this));\n    };\n\n    LikeProjectButtonService.prototype.unlike = function(projectId) {\n      return this.rs.projects.unlikeProject(projectId).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, false);\n          return _this._updateCurrentProject(false);\n        };\n      })(this));\n    };\n\n    return LikeProjectButtonService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgLikeProjectButtonService\", LikeProjectButtonService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var SortProjectsDirective;\n\n  SortProjectsDirective = function(currentUserService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      var drake, itemEl, scroll;\n      itemEl = null;\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).hasClass('list-itemtype-project');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var i, index, len, project, sortData, sorted_project_ids, value;\n        itemEl = $(item);\n        project = itemEl.scope().project;\n        index = itemEl.index();\n        sorted_project_ids = _.map(scope.projects.toJS(), function(p) {\n          return p.id;\n        });\n        sorted_project_ids = _.without(sorted_project_ids, project.get(\"id\"));\n        sorted_project_ids.splice(index, 0, project.get('id'));\n        sortData = [];\n        for (index = i = 0, len = sorted_project_ids.length; i < len; index = ++i) {\n          value = sorted_project_ids[index];\n          sortData.push({\n            \"project_id\": value,\n            \"order\": index\n          });\n        }\n        return currentUserService.bulkUpdateProjectsOrder(sortData);\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    directive = {\n      scope: {\n        projects: \"=tgSortProjects\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgSortProjects\", [\"tgCurrentUserService\", SortProjectsDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WatchProjectButtonController;\n\n  WatchProjectButtonController = (function() {\n    WatchProjectButtonController.$inject = [\"$tgConfirm\", \"tgWatchProjectButtonService\"];\n\n    function WatchProjectButtonController(confirm, watchButtonService) {\n      this.confirm = confirm;\n      this.watchButtonService = watchButtonService;\n      this.showWatchOptions = false;\n      this.loading = false;\n    }\n\n    WatchProjectButtonController.prototype.toggleWatcherOptions = function() {\n      return this.showWatchOptions = !this.showWatchOptions;\n    };\n\n    WatchProjectButtonController.prototype.closeWatcherOptions = function() {\n      return this.showWatchOptions = false;\n    };\n\n    WatchProjectButtonController.prototype.watch = function(notifyLevel) {\n      if (notifyLevel === this.project.get('notify_level')) {\n        return;\n      }\n      this.loading = true;\n      this.closeWatcherOptions();\n      return this.watchButtonService.watch(this.project.get('id'), notifyLevel)[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    WatchProjectButtonController.prototype.unwatch = function() {\n      this.loading = true;\n      this.closeWatcherOptions();\n      return this.watchButtonService.unwatch(this.project.get('id'))[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    return WatchProjectButtonController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"WatchProjectButton\", WatchProjectButtonController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WatchProjectButtonDirective;\n\n  WatchProjectButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"WatchProjectButton\",\n      bindToController: {\n        project: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/watch-project-button/watch-project-button.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgWatchProjectButton\", WatchProjectButtonDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WatchProjectButtonService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  WatchProjectButtonService = (function(superClass) {\n    extend(WatchProjectButtonService, superClass);\n\n    WatchProjectButtonService.$inject = [\"tgResources\", \"tgCurrentUserService\", \"tgProjectService\"];\n\n    function WatchProjectButtonService(rs, currentUserService, projectService) {\n      this.rs = rs;\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n    }\n\n    WatchProjectButtonService.prototype._getProjectIndex = function(projectId) {\n      return this.currentUserService.projects.get('all').findIndex(function(project) {\n        return project.get('id') === projectId;\n      });\n    };\n\n    WatchProjectButtonService.prototype._updateProjects = function(projectId, notifyLevel, isWatcher) {\n      var projectIndex, projects;\n      projectIndex = this._getProjectIndex(projectId);\n      if (projectIndex === -1) {\n        return;\n      }\n      projects = this.currentUserService.projects.get('all').update(projectIndex, (function(_this) {\n        return function(project) {\n          var totalWatchers;\n          totalWatchers = project.get('total_watchers');\n          if (!_this.projectService.project.get('is_watcher') && isWatcher) {\n            totalWatchers++;\n          } else if (_this.projectService.project.get('is_watcher') && !isWatcher) {\n            totalWatchers--;\n          }\n          return project.merge({\n            is_watcher: isWatcher,\n            total_watchers: totalWatchers,\n            notify_level: notifyLevel\n          });\n        };\n      })(this));\n      return this.currentUserService.setProjects(projects);\n    };\n\n    WatchProjectButtonService.prototype._updateCurrentProject = function(notifyLevel, isWatcher) {\n      var project, totalWatchers;\n      totalWatchers = this.projectService.project.get(\"total_watchers\");\n      if (!this.projectService.project.get('is_watcher') && isWatcher) {\n        totalWatchers++;\n      } else if (this.projectService.project.get('is_watcher') && !isWatcher) {\n        totalWatchers--;\n      }\n      project = this.projectService.project.merge({\n        is_watcher: isWatcher,\n        notify_level: notifyLevel,\n        total_watchers: totalWatchers\n      });\n      return this.projectService.setProject(project);\n    };\n\n    WatchProjectButtonService.prototype.watch = function(projectId, notifyLevel) {\n      return this.rs.projects.watchProject(projectId, notifyLevel).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, notifyLevel, true);\n          return _this._updateCurrentProject(notifyLevel, true);\n        };\n      })(this));\n    };\n\n    WatchProjectButtonService.prototype.unwatch = function(projectId) {\n      return this.rs.projects.unwatchProject(projectId).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, null, false);\n          return _this._updateCurrentProject(null, false);\n        };\n      })(this));\n    };\n\n    return WatchProjectButtonService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgWatchProjectButtonService\", WatchProjectButtonService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AsanaImportProjectFormController;\n\n  AsanaImportProjectFormController = (function() {\n    AsanaImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function AsanaImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.platformName = \"Asana\";\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      this.projectForm.project_type = \"scrum\";\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    AsanaImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    AsanaImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    AsanaImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    AsanaImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return AsanaImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('AsanaImportProjectFormCtrl', AsanaImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AsanaImportProjectFormDirective;\n\n  AsanaImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/asana-import/asana-import-project-form/asana-import-project-form.html\",\n      controller: \"AsanaImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  AsanaImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgAsanaImportProjectForm\", AsanaImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AsanaImportController;\n\n  AsanaImportController = (function() {\n    AsanaImportController.$inject = ['tgAsanaImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function AsanaImportController(asanaImportService, confirm, translate, importProjectService) {\n      this.asanaImportService = asanaImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.step = 'autorization-asana';\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.asanaImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.asanaImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    AsanaImportController.prototype.startProjectSelector = function() {\n      this.step = 'project-select-asana';\n      return this.asanaImportService.fetchProjects();\n    };\n\n    AsanaImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-asana';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.asanaImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    AsanaImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-asana';\n    };\n\n    AsanaImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-asana';\n    };\n\n    AsanaImportController.prototype.startImport = function(users) {\n      var loader, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.asanaImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'), this.project.get('project_type'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    AsanaImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return AsanaImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('AsanaImportCtrl', AsanaImportController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AsanaImportDirective;\n\n  AsanaImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/asana-import/asana-import.html\",\n      controller: \"AsanaImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  AsanaImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgAsanaImport\", AsanaImportDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AsanaImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  AsanaImportService = (function(superClass) {\n    extend(AsanaImportService, superClass);\n\n    AsanaImportService.$inject = ['tgResources', '$location', '$q'];\n\n    function AsanaImportService(resources, location, q) {\n      this.resources = resources;\n      this.location = location;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n      this.token = null;\n    }\n\n    AsanaImportService.prototype.setToken = function(token) {\n      return this.token = token;\n    };\n\n    AsanaImportService.prototype.fetchProjects = function() {\n      return this.resources.asanaImporter.listProjects(this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    AsanaImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.asanaImporter.listUsers(this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    AsanaImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      return this.resources.asanaImporter.importProject(this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType);\n    };\n\n    AsanaImportService.prototype.getAuthUrl = function() {\n      return this.q((function(_this) {\n        return function(resolve) {\n          return _this.resources.asanaImporter.getAuthUrl().then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          });\n        };\n      })(this));\n    };\n\n    AsanaImportService.prototype.authorize = function(code) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.asanaImporter.authorize(code).then((function(response) {\n            _this.token = response.data.token;\n            return resolve(_this.token);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return AsanaImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgAsanaImportService\", AsanaImportService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CreatetProjectFormController;\n\n  CreatetProjectFormController = (function() {\n    CreatetProjectFormController.$inject = [\"tgCurrentUserService\", \"tgProjectsService\", \"$projectUrl\", \"$location\", \"$tgNavUrls\", \"$tgAnalytics\"];\n\n    function CreatetProjectFormController(currentUserService, projectsService, projectUrl, location, navUrls, analytics) {\n      this.currentUserService = currentUserService;\n      this.projectsService = projectsService;\n      this.projectUrl = projectUrl;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.errorList = [];\n      this.projectForm = {\n        is_private: false\n      };\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n      if (this.type === 'scrum') {\n        this.projectForm.creation_template = 1;\n      } else {\n        this.projectForm.creation_template = 2;\n      }\n    }\n\n    CreatetProjectFormController.prototype.submit = function() {\n      this.errorList = [];\n      if (!this.projectForm.name) {\n        this.errorList.push('name');\n      }\n      if (!this.projectForm.description) {\n        this.errorList.push('description');\n      }\n      if (this.errorList.length === 0) {\n        this.formSubmitLoading = true;\n        return this.projectsService.create(this.projectForm).then((function(_this) {\n          return function(project) {\n            _this.analytics.trackEvent(\"project\", \"create\", \"project creation\", {\n              slug: project.get('slug'),\n              id: project.get('id')\n            });\n            _this.location.url(_this.projectUrl.get(project));\n            return _this.currentUserService.loadProjects();\n          };\n        })(this));\n      }\n    };\n\n    CreatetProjectFormController.prototype.onCancelForm = function() {\n      return this.location.path(this.navUrls.resolve(\"create-project\"));\n    };\n\n    CreatetProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    CreatetProjectFormController.prototype.isDisabled = function() {\n      return this.formSubmitLoading || !this.canCreateProject();\n    };\n\n    return CreatetProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('CreateProjectFormCtrl', CreatetProjectFormController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CreateProjectFormDirective;\n\n  CreateProjectFormDirective = function() {\n    return {\n      templateUrl: \"projects/create/create-project-form/create-project-form.html\",\n      controller: \"CreateProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        type: '@'\n      }\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgCreateProjectForm\", CreateProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var createProjectMembersRestrictionsDirective, module;\n\n  module = angular.module(\"taigaProject\");\n\n  createProjectMembersRestrictionsDirective = function() {\n    return {\n      scope: {\n        isPrivate: '=',\n        limitMembersPrivateProject: '=',\n        limitMembersPublicProject: '='\n      },\n      templateUrl: \"projects/create/create-project-members-restrictions/create-project-members-restrictions.html\"\n    };\n  };\n\n  module.directive('tgCreateProjectMembersRestrictions', [createProjectMembersRestrictionsDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var createProjectRestrictionsDirective, module;\n\n  module = angular.module(\"taigaProject\");\n\n  createProjectRestrictionsDirective = function() {\n    return {\n      scope: {\n        isPrivate: '=',\n        canCreatePrivateProjects: '=',\n        canCreatePublicProjects: '='\n      },\n      templateUrl: \"projects/create/create-project-restrictions/create-project-restrictions.html\"\n    };\n  };\n\n  module.directive('tgCreateProjectRestrictions', [createProjectRestrictionsDirective]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CreateProjectController;\n\n  CreateProjectController = (function() {\n    CreateProjectController.$inject = [\"tgAppMetaService\", \"$translate\", \"tgProjectService\", \"$tgAuth\", \"tgLightboxFactory\", \"tgResources\", \"$tgConfig\"];\n\n    function CreateProjectController(appMetaService, translate, projectService, authService, lightboxFactory, rs, config) {\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      this.authService = authService;\n      this.lightboxFactory = lightboxFactory;\n      this.rs = rs;\n      this.config = config;\n      taiga.defineImmutableProperty(this, \"project\", (function(_this) {\n        return function() {\n          return _this.projectService.project;\n        };\n      })(this));\n      this.appMetaService.setfn(this._setMeta.bind(this));\n      this.authService.refresh();\n      this.displayScrumDesc = false;\n      this.dontAsk = false;\n      if (!this.config.get(\"isSaas\")) {\n        this.rs.user.getUserStorage('dont_ask_premise_newsletter').then((function(_this) {\n          return function(storageState) {\n            _this.dontAsk = storageState;\n            return _this.displayOnPremise();\n          };\n        })(this))[\"catch\"]((function(_this) {\n          return function(storageError) {\n            if (storageError.status = 404) {\n              _this.rs.user.createUserStorage('dont_ask_premise_newsletter', false);\n              _this.dontAsk = false;\n              return _this.displayOnPremise();\n            }\n          };\n        })(this));\n      }\n    }\n\n    CreateProjectController.prototype._setMeta = function() {\n      var ctx;\n      if (!this.project) {\n        return null;\n      }\n      ctx = {\n        projectName: this.project.get(\"name\")\n      };\n      return {\n        title: this.translate.instant(\"PROJECT.PAGE_TITLE\", ctx),\n        description: this.project.get(\"description\")\n      };\n    };\n\n    CreateProjectController.prototype.displayOnPremise = function() {\n      if (!this.dontAsk) {\n        return this.lightboxFactory.create(\"tg-newsletter-email-lightbox\", {\n          \"class\": \"lightbox newsletter-email\"\n        });\n      }\n    };\n\n    CreateProjectController.prototype.displayHelp = function(type, $event) {\n      $event.stopPropagation();\n      $event.preventDefault();\n      if (type === 'scrum') {\n        this.displayScrumDesc = !this.displayScrumDesc;\n      }\n      if (type === 'kanban') {\n        return this.displayKanbanDesc = !this.displayKanbanDesc;\n      }\n    };\n\n    return CreateProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"CreateProjectCtrl\", CreateProjectController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DuplicateProjectController;\n\n  DuplicateProjectController = (function() {\n    DuplicateProjectController.$inject = [\"tgCurrentUserService\", \"tgProjectsService\", \"$tgLocation\", \"$tgNavUrls\"];\n\n    function DuplicateProjectController(currentUserService, projectsService, location, navUrls) {\n      this.currentUserService = currentUserService;\n      this.projectsService = projectsService;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.user = this.currentUserService.getUser();\n      this.members = Immutable.List();\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.currentUserService.projects.get(\"all\");\n        };\n      })(this));\n      this.projectForm = {\n        is_private: false\n      };\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    DuplicateProjectController.prototype.refreshReferenceProject = function(slug) {\n      return this.projectsService.getProjectBySlug(slug).then((function(_this) {\n        return function(project) {\n          _this.referenceProject = project;\n          _this.members = project.get('members').filter(function(it) {\n            return it.get('id') !== _this.user.get('id');\n          });\n          _this.invitedMembers = _this.members.map(function(it) {\n            return it.get('id');\n          });\n          return _this.checkUsersLimit();\n        };\n      })(this));\n    };\n\n    DuplicateProjectController.prototype.toggleInvitedMember = function(member) {\n      if (this.invitedMembers.includes(member)) {\n        this.invitedMembers = this.invitedMembers.filter(function(it) {\n          return it !== member;\n        });\n      } else {\n        this.invitedMembers = this.invitedMembers.push(member);\n      }\n      return this.checkUsersLimit();\n    };\n\n    DuplicateProjectController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.invitedMembers.size + 1);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.invitedMembers.size + 1);\n    };\n\n    DuplicateProjectController.prototype.submit = function() {\n      var data, projectId;\n      projectId = this.referenceProject.get('id');\n      data = this.projectForm;\n      data.users = this.invitedMembers;\n      this.formSubmitLoading = true;\n      return this.projectsService.duplicate(projectId, data).then((function(_this) {\n        return function(newProject) {\n          _this.formSubmitLoading = false;\n          _this.location.path(_this.navUrls.resolve(\"project\", {\n            project: newProject.data.slug\n          }));\n          return _this.currentUserService.loadProjects();\n        };\n      })(this));\n    };\n\n    DuplicateProjectController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid && this.limitMembersPrivateProject.valid;\n      } else {\n        return this.canCreatePublicProjects.valid && this.limitMembersPublicProject.valid;\n      }\n    };\n\n    DuplicateProjectController.prototype.isDisabled = function() {\n      return this.formSubmitLoading || !this.canCreateProject();\n    };\n\n    DuplicateProjectController.prototype.onCancelForm = function() {\n      return this.location.path(this.navUrls.resolve(\"create-project\"));\n    };\n\n    return DuplicateProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"DuplicateProjectCtrl\", DuplicateProjectController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var DuplicateProjectDirective;\n\n  DuplicateProjectDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {};\n    return {\n      link: link,\n      templateUrl: \"projects/create/duplicate/duplicate-project.html\",\n      controller: \"DuplicateProjectCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {}\n    };\n  };\n\n  DuplicateProjectDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgDuplicateProject\", DuplicateProjectDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var GithubImportProjectFormController;\n\n  GithubImportProjectFormController = (function() {\n    GithubImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function GithubImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.platformName = \"Github\";\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      this.projectForm.project_type = \"kanban\";\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    GithubImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    GithubImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    GithubImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    GithubImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return GithubImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('GithubImportProjectFormCtrl', GithubImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var GithubImportProjectFormDirective;\n\n  GithubImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/github-import/github-import-project-form/github-import-project-form.html\",\n      controller: \"GithubImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  GithubImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgGithubImportProjectForm\", GithubImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var GithubImportController;\n\n  GithubImportController = (function() {\n    GithubImportController.$inject = ['tgGithubImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function GithubImportController(githubImportService, confirm, translate, importProjectService) {\n      this.githubImportService = githubImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.step = 'autorization-github';\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.githubImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.githubImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    GithubImportController.prototype.startProjectSelector = function() {\n      this.step = 'project-select-github';\n      return this.githubImportService.fetchProjects();\n    };\n\n    GithubImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-github';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.githubImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    GithubImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-github';\n    };\n\n    GithubImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-github';\n    };\n\n    GithubImportController.prototype.startImport = function(users) {\n      var loader, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.githubImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'), this.project.get('project_type'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    GithubImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return GithubImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('GithubImportCtrl', GithubImportController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var GithubImportDirective;\n\n  GithubImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/github-import/github-import.html\",\n      controller: \"GithubImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  GithubImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgGithubImport\", GithubImportDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var GithubImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  GithubImportService = (function(superClass) {\n    extend(GithubImportService, superClass);\n\n    GithubImportService.$inject = ['tgResources', '$q'];\n\n    function GithubImportService(resources, q) {\n      this.resources = resources;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n    }\n\n    GithubImportService.prototype.setToken = function(token) {\n      return this.token = token;\n    };\n\n    GithubImportService.prototype.fetchProjects = function() {\n      return this.resources.githubImporter.listProjects(this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    GithubImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.githubImporter.listUsers(this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    GithubImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      return this.resources.githubImporter.importProject(this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType);\n    };\n\n    GithubImportService.prototype.getAuthUrl = function(callbackUri) {\n      return this.q((function(_this) {\n        return function(resolve) {\n          return _this.resources.githubImporter.getAuthUrl(callbackUri).then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          });\n        };\n      })(this));\n    };\n\n    GithubImportService.prototype.authorize = function(code) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.githubImporter.authorize(code).then((function(response) {\n            _this.token = response.data.token;\n            return resolve(_this.token);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return GithubImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgGithubImportService\", GithubImportService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ImportProjectMembersController;\n\n  ImportProjectMembersController = (function() {\n    ImportProjectMembersController.$inject = ['tgCurrentUserService', 'tgUserService'];\n\n    function ImportProjectMembersController(currentUserService, userService) {\n      this.currentUserService = currentUserService;\n      this.userService = userService;\n      this.selectImportUserLightbox = false;\n      this.warningImportUsers = false;\n      this.displayEmailSelector = true;\n      this.cancelledUsers = Immutable.List();\n      this.selectedUsers = Immutable.List();\n      this.selectableUsers = Immutable.List();\n      this.userContacts = Immutable.List();\n    }\n\n    ImportProjectMembersController.prototype.fetchUser = function() {\n      this.currentUser = this.currentUserService.getUser();\n      return this.userService.getContacts(this.currentUser.get('id')).then((function(_this) {\n        return function(userContacts) {\n          _this.userContacts = userContacts;\n          return _this.refreshSelectableUsers();\n        };\n      })(this));\n    };\n\n    ImportProjectMembersController.prototype.searchUser = function(user) {\n      this.selectImportUserLightbox = true;\n      return this.searchingUser = user;\n    };\n\n    ImportProjectMembersController.prototype.beforeSubmitUsers = function() {\n      if (this.selectedUsers.size !== this.members.size) {\n        return this.warningImportUsers = true;\n      } else {\n        return this.submit();\n      }\n    };\n\n    ImportProjectMembersController.prototype.confirmUser = function(externalUser, taigaUser) {\n      var user;\n      this.selectImportUserLightbox = false;\n      user = Immutable.Map();\n      user = user.set('user', externalUser);\n      user = user.set('taigaUser', taigaUser);\n      this.selectedUsers = this.selectedUsers.push(user);\n      this.discardSuggestedUser(externalUser);\n      return this.refreshSelectableUsers();\n    };\n\n    ImportProjectMembersController.prototype.unselectUser = function(user) {\n      var index;\n      index = this.selectedUsers.findIndex(function(it) {\n        return it.getIn(['user', 'id']) === user.get('id');\n      });\n      this.selectedUsers = this.selectedUsers[\"delete\"](index);\n      return this.refreshSelectableUsers();\n    };\n\n    ImportProjectMembersController.prototype.discardSuggestedUser = function(member) {\n      return this.cancelledUsers = this.cancelledUsers.push(member.get('id'));\n    };\n\n    ImportProjectMembersController.prototype.getSelectedMember = function(member) {\n      return this.selectedUsers.find(function(it) {\n        return it.getIn(['user', 'id']) === member.get('id');\n      });\n    };\n\n    ImportProjectMembersController.prototype.isMemberSelected = function(member) {\n      return !!this.getSelectedMember(member);\n    };\n\n    ImportProjectMembersController.prototype.getUser = function(user) {\n      var userSelected;\n      userSelected = this.getSelectedMember(user);\n      if (userSelected) {\n        return userSelected.get('taigaUser');\n      } else {\n        return null;\n      }\n    };\n\n    ImportProjectMembersController.prototype.submit = function() {\n      var users;\n      this.warningImportUsers = false;\n      users = Immutable.Map();\n      this.selectedUsers.map(function(it) {\n        var id;\n        id = '';\n        if (_.isString(it.get('taigaUser'))) {\n          id = it.get('taigaUser');\n        } else {\n          id = it.getIn(['taigaUser', 'id']);\n        }\n        return users = users.set(it.getIn(['user', 'id']), id);\n      });\n      return this.onSubmit({\n        users: users\n      });\n    };\n\n    ImportProjectMembersController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size + 1);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size + 1);\n    };\n\n    ImportProjectMembersController.prototype.showSuggestedMatch = function(member) {\n      return member.get('user') && this.cancelledUsers.indexOf(member.get('id')) === -1 && !this.isMemberSelected(member);\n    };\n\n    ImportProjectMembersController.prototype.getDistinctSelectedTaigaUsers = function() {\n      var ids, users;\n      ids = [];\n      users = this.selectedUsers.filter(function(it) {\n        var id;\n        id = it.getIn(['taigaUser', 'id']);\n        if (ids.indexOf(id) === -1) {\n          ids.push(id);\n          return true;\n        }\n        return false;\n      });\n      return users.filter((function(_this) {\n        return function(it) {\n          return it.getIn(['taigaUser', 'id']) !== _this.currentUser.get('id');\n        };\n      })(this));\n    };\n\n    ImportProjectMembersController.prototype.refreshSelectableUsers = function() {\n      var users;\n      this.importMoreUsersDisabled = this.isImportMoreUsersDisabled();\n      if (this.importMoreUsersDisabled) {\n        users = this.getDistinctSelectedTaigaUsers();\n        this.selectableUsers = users.map(function(it) {\n          return it.get('taigaUser');\n        });\n        this.displayEmailSelector = false;\n      } else {\n        this.selectableUsers = this.userContacts;\n        this.displayEmailSelector = true;\n      }\n      return this.selectableUsers = this.selectableUsers.push(this.currentUser);\n    };\n\n    ImportProjectMembersController.prototype.isImportMoreUsersDisabled = function() {\n      var total, users;\n      users = this.getDistinctSelectedTaigaUsers();\n      total = users.size + 2;\n      if (this.project.get('is_private')) {\n        return !this.currentUserService.canAddMembersPrivateProject(total).valid;\n      } else {\n        return !this.currentUserService.canAddMembersPublicProject(total).valid;\n      }\n    };\n\n    return ImportProjectMembersController;\n\n  })();\n\n  angular.module('taigaProjects').controller('ImportProjectMembersCtrl', ImportProjectMembersController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ImportProjectMembersDirective;\n\n  ImportProjectMembersDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        ctrl.fetchUser();\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/import-project-members/import-project-members.html\",\n      controller: \"ImportProjectMembersCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSubmit: '&',\n        platform: '@',\n        logo: '@',\n        onCancel: '&'\n      }\n    };\n  };\n\n  ImportProjectMembersDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgImportProjectMembers\", ImportProjectMembersDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ImportProjectSelectorController;\n\n  ImportProjectSelectorController = (function() {\n    function ImportProjectSelectorController() {}\n\n    ImportProjectSelectorController.prototype.selectProject = function(project) {\n      return this.onSelectProject({\n        project: Immutable.fromJS(project)\n      });\n    };\n\n    return ImportProjectSelectorController;\n\n  })();\n\n  angular.module('taigaProjects').controller('ImportProjectSelectorCtrl', ImportProjectSelectorController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ImportProjectSelectorDirective;\n\n  ImportProjectSelectorDirective = function() {\n    return {\n      templateUrl: \"projects/create/import-project-selector/import-project-selector.html\",\n      controller: \"ImportProjectSelectorCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        projects: '<',\n        onCancel: '&',\n        onSelectProject: '&',\n        logo: '@',\n        noProjectsMsg: '@',\n        search: '@'\n      }\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgImportProjectSelector\", ImportProjectSelectorDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ImportTaigaController;\n\n  ImportTaigaController = (function() {\n    ImportTaigaController.$inject = ['$tgConfirm', '$tgResources', 'tgImportProjectService', '$translate', '$tgAnalytics'];\n\n    function ImportTaigaController(confirm, rs, importProjectService, translate, analytics) {\n      this.confirm = confirm;\n      this.rs = rs;\n      this.importProjectService = importProjectService;\n      this.translate = translate;\n      this.analytics = analytics;\n    }\n\n    ImportTaigaController.prototype.importTaiga = function(files) {\n      var file, loader, promise;\n      this.analytics.trackEvent(\"import\", \"taiga\", \"Start import from taiga\", 1);\n      file = files[0];\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.rs.projects[\"import\"](file, loader.update);\n      this.importProjectService.importPromise(promise)[\"finally\"](function() {\n        return loader.stop();\n      });\n    };\n\n    return ImportTaigaController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ImportTaigaCtrl\", ImportTaigaController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ImportTaigaDirective;\n\n  ImportTaigaDirective = function() {\n    return {\n      templateUrl: \"projects/create/import-taiga/import-taiga.html\",\n      controller: \"ImportTaigaCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {}\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgImportTaiga\", ImportTaigaDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var LbImportErrorDirective;\n\n  LbImportErrorDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs) {\n      lightboxService.open(el);\n      return scope.close = function() {\n        lightboxService.close(el);\n      };\n    };\n    return {\n      templateUrl: \"projects/create/import/import-project-error-lb.html\",\n      link: link\n    };\n  };\n\n  LbImportErrorDirective.$inject = [\"lightboxService\"];\n\n  angular.module(\"taigaProjects\").directive(\"tgLbImportError\", LbImportErrorDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ImportProjectController;\n\n  ImportProjectController = (function() {\n    ImportProjectController.$inject = ['tgTrelloImportService', 'tgJiraImportService', 'tgGithubImportService', 'tgAsanaImportService', '$location', '$window', '$routeParams', '$tgNavUrls', '$tgConfig', '$tgConfirm', '$tgAnalytics'];\n\n    function ImportProjectController(trelloService, jiraService, githubService, asanaService, location, window, routeParams, tgNavUrls, config, confirm, analytics) {\n      this.trelloService = trelloService;\n      this.jiraService = jiraService;\n      this.githubService = githubService;\n      this.asanaService = asanaService;\n      this.location = location;\n      this.window = window;\n      this.routeParams = routeParams;\n      this.tgNavUrls = tgNavUrls;\n      this.config = config;\n      this.confirm = confirm;\n      this.analytics = analytics;\n    }\n\n    ImportProjectController.prototype.start = function() {\n      var asanaOauthToken, githubOauthToken, jiraOauthToken, jiraOauthVerifier, locationSearch, trelloOauthToken;\n      this.token = null;\n      this.from = this.routeParams.platform;\n      locationSearch = this.location.search();\n      if (this.from) {\n        this.analytics.trackEvent(\"import\", this.from, \"Start import from \" + this.from, 1);\n      }\n      if (this.from === \"asana\") {\n        asanaOauthToken = locationSearch.code;\n        if (locationSearch.code) {\n          asanaOauthToken = locationSearch.code;\n          return this.asanaService.authorize(asanaOauthToken).then(((function(_this) {\n            return function(token) {\n              return _this.location.search({\n                token: encodeURIComponent(JSON.stringify(token))\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else {\n          this.token = JSON.parse(decodeURIComponent(locationSearch.token));\n          this.asanaService.setToken(this.token);\n        }\n      }\n      if (this.from === 'trello') {\n        if (locationSearch.oauth_verifier) {\n          trelloOauthToken = locationSearch.oauth_verifier;\n          return this.trelloService.authorize(trelloOauthToken).then(((function(_this) {\n            return function(token) {\n              return _this.location.search({\n                token: token\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else if (locationSearch.token) {\n          this.token = locationSearch.token;\n          this.trelloService.setToken(locationSearch.token);\n        }\n      }\n      if (this.from === \"github\") {\n        if (locationSearch.code) {\n          githubOauthToken = locationSearch.code;\n          return this.githubService.authorize(githubOauthToken).then(((function(_this) {\n            return function(token) {\n              return _this.location.search({\n                token: token\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else if (locationSearch.token) {\n          this.token = locationSearch.token;\n          this.githubService.setToken(locationSearch.token);\n        }\n      }\n      if (this.from === \"jira\") {\n        jiraOauthToken = locationSearch.oauth_token;\n        if (jiraOauthToken) {\n          jiraOauthVerifier = locationSearch.oauth_verifier;\n          return this.jiraService.authorize(jiraOauthVerifier).then(((function(_this) {\n            return function(data) {\n              return _this.location.search({\n                token: data.token,\n                url: data.url\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else {\n          this.token = locationSearch.token;\n          return this.jiraService.setToken(locationSearch.token, locationSearch.url);\n        }\n      }\n    };\n\n    ImportProjectController.prototype.select = function(from) {\n      var callbackUri;\n      if (from === \"trello\") {\n        return this.trelloService.getAuthUrl().then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this));\n      } else if (from === \"jira\") {\n        return this.jiraService.getAuthUrl(this.jiraUrl).then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this), (function(_this) {\n          return function(err) {\n            return _this.confirm.notify('error', err);\n          };\n        })(this));\n      } else if (from === \"github\") {\n        callbackUri = this.location.absUrl() + \"/github\";\n        return this.githubService.getAuthUrl(callbackUri).then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this));\n      } else if (from === \"asana\") {\n        return this.asanaService.getAuthUrl().then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this));\n      } else {\n        return this.from = from;\n      }\n    };\n\n    ImportProjectController.prototype.unfoldOptions = function(options) {\n      return this.unfoldedOptions = options;\n    };\n\n    ImportProjectController.prototype.isActiveImporter = function(importer) {\n      switch (importer) {\n        case \"asana\":\n          return this.config.get('enableAsanaImporter');\n        case \"github\":\n          return this.config.get('enableGithubImporter');\n        case \"jira\":\n          return this.config.get('enableJiraImporter');\n        case \"trello\":\n          return this.config.get('enableTrelloImporter');\n        default:\n          return false;\n      }\n    };\n\n    ImportProjectController.prototype.cancelCurrentImport = function() {\n      return this.location.url(this.tgNavUrls.resolve('create-project-import'));\n    };\n\n    ImportProjectController.prototype.backToCreate = function() {\n      return this.location.url(this.tgNavUrls.resolve('create-project'));\n    };\n\n    return ImportProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ImportProjectCtrl\", ImportProjectController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ImportProjectDirective;\n\n  ImportProjectDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {\n      return ctrl.start();\n    };\n    return {\n      link: link,\n      templateUrl: \"projects/create/import/import-project.html\",\n      controller: \"ImportProjectCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancelImport: '&'\n      }\n    };\n  };\n\n  ImportProjectDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgImportProject\", ImportProjectDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ImportProjectService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  ImportProjectService = (function(superClass) {\n    extend(ImportProjectService, superClass);\n\n    ImportProjectService.$inject = ['tgCurrentUserService', '$tgAuth', 'tgLightboxFactory', '$translate', '$tgConfirm', '$location', '$tgNavUrls'];\n\n    function ImportProjectService(currentUserService, tgAuth, lightboxFactory, translate, confirm, location, tgNavUrls) {\n      this.currentUserService = currentUserService;\n      this.tgAuth = tgAuth;\n      this.lightboxFactory = lightboxFactory;\n      this.translate = translate;\n      this.confirm = confirm;\n      this.location = location;\n      this.tgNavUrls = tgNavUrls;\n    }\n\n    ImportProjectService.prototype.importPromise = function(promise) {\n      return promise.then(this.importSuccess.bind(this), this.importError.bind(this));\n    };\n\n    ImportProjectService.prototype.importSuccess = function(result) {\n      var promise;\n      promise = this.currentUserService.loadProjects();\n      promise.then((function(_this) {\n        return function() {\n          var ctx, message, msg, title;\n          if (result.status === 202) {\n            title = _this.translate.instant('PROJECT.IMPORT.ASYNC_IN_PROGRESS_TITLE');\n            message = _this.translate.instant('PROJECT.IMPORT.ASYNC_IN_PROGRESS_MESSAGE');\n            _this.location.path(_this.tgNavUrls.resolve('home'));\n            return _this.confirm.success(title, message);\n          } else {\n            ctx = {\n              project: result.data.slug\n            };\n            _this.location.path(_this.tgNavUrls.resolve('project-admin-project-profile-details', ctx));\n            msg = _this.translate.instant('PROJECT.IMPORT.SYNC_SUCCESS');\n            return _this.confirm.notify('success', msg);\n          }\n        };\n      })(this));\n      return promise;\n    };\n\n    ImportProjectService.prototype.importError = function(result) {\n      var promise;\n      promise = this.tgAuth.refresh();\n      promise.then((function(_this) {\n        return function() {\n          var errorMsg, ref, restrictionError;\n          restrictionError = _this.getRestrictionError(result);\n          if (restrictionError) {\n            return _this.lightboxFactory.create('tg-lb-import-error', {\n              \"class\": 'lightbox lightbox-import-error'\n            }, restrictionError);\n          } else {\n            errorMsg = _this.translate.instant(\"PROJECT.IMPORT.ERROR\");\n            if (result.status === 429) {\n              errorMsg = _this.translate.instant(\"PROJECT.IMPORT.ERROR_TOO_MANY_REQUEST\");\n            } else if ((ref = result.data) != null ? ref._error_message : void 0) {\n              errorMsg = _this.translate.instant(\"PROJECT.IMPORT.ERROR_MESSAGE\", {\n                error_message: result.data._error_message\n              });\n            }\n            return _this.confirm.notify(\"error\", errorMsg);\n          }\n        };\n      })(this));\n      return promise;\n    };\n\n    ImportProjectService.prototype.getRestrictionError = function(result) {\n      var errorKey, maxMemberships, membersError, privateError, publicError, user;\n      if (result.headers) {\n        errorKey = '';\n        user = this.currentUserService.getUser();\n        maxMemberships = null;\n        if (result.headers.isPrivate) {\n          privateError = !this.currentUserService.canCreatePrivateProjects().valid;\n          if (user.get('max_memberships_private_projects') !== null && result.headers.memberships >= user.get('max_memberships_private_projects')) {\n            membersError = true;\n          } else {\n            membersError = false;\n          }\n          if (privateError && membersError) {\n            errorKey = 'private-space-members';\n            maxMemberships = user.get('max_memberships_private_projects');\n          } else if (privateError) {\n            errorKey = 'private-space';\n          } else if (membersError) {\n            errorKey = 'private-members';\n            maxMemberships = user.get('max_memberships_private_projects');\n          }\n        } else {\n          publicError = !this.currentUserService.canCreatePublicProjects().valid;\n          if (user.get('max_memberships_public_projects') !== null && result.headers.memberships >= user.get('max_memberships_public_projects')) {\n            membersError = true;\n          } else {\n            membersError = false;\n          }\n          if (publicError && membersError) {\n            errorKey = 'public-space-members';\n            maxMemberships = user.get('max_memberships_public_projects');\n          } else if (publicError) {\n            errorKey = 'public-space';\n          } else if (membersError) {\n            errorKey = 'public-members';\n            maxMemberships = user.get('max_memberships_public_projects');\n          }\n        }\n        if (!errorKey) {\n          return false;\n        }\n        return {\n          key: errorKey,\n          values: {\n            max_memberships: maxMemberships,\n            members: result.headers.memberships\n          }\n        };\n      } else {\n        return false;\n      }\n    };\n\n    return ImportProjectService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgImportProjectService\", ImportProjectService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var InviteMembersController;\n\n  InviteMembersController = (function() {\n    function InviteMembersController() {}\n\n    InviteMembersController.$inject = [];\n\n    InviteMembersController.prototype.isDisabled = function(id) {\n      return this.invitedMembers.indexOf(id) === -1;\n    };\n\n    return InviteMembersController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"InviteMembersCtrl\", InviteMembersController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var InviteMembersDirective;\n\n  InviteMembersDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {};\n    return {\n      link: link,\n      templateUrl: \"projects/create/invite-members/invite-members.html\",\n      controller: \"InviteMembersCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        invitedMembers: '<',\n        members: '<',\n        onToggleInvitedMember: '&'\n      }\n    };\n  };\n\n  InviteMembersDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgInviteMembers\", InviteMembersDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var SingleMemberDirective;\n\n  SingleMemberDirective = function() {\n    return {\n      templateUrl: \"projects/create/invite-members/single-member/single-member.html\",\n      scope: {\n        disabled: \"<\",\n        avatar: \"=\"\n      }\n    };\n  };\n\n  SingleMemberDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgSingleMember\", SingleMemberDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var JiraImportProjectFormController;\n\n  JiraImportProjectFormController = (function() {\n    JiraImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function JiraImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      if (this.projectForm.importer_type === \"agile\") {\n        this.projectForm.project_type = null;\n      } else {\n        this.projectForm.project_type = \"scrum\";\n      }\n      this.projectForm.create_subissues = true;\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    JiraImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    JiraImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    JiraImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    JiraImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return JiraImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('JiraImportProjectFormCtrl', JiraImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var JiraImportProjectFormDirective;\n\n  JiraImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/jira-import/jira-import-project-form/jira-import-project-form.html\",\n      controller: \"JiraImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  JiraImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgJiraImportProjectForm\", JiraImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var JiraImportController;\n\n  JiraImportController = (function() {\n    JiraImportController.$inject = ['tgJiraImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function JiraImportController(jiraImportService, confirm, translate, importProjectService) {\n      this.jiraImportService = jiraImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.step = 'autorization-jira';\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.jiraImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.jiraImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    JiraImportController.prototype.startProjectSelector = function() {\n      this.step = 'project-select-jira';\n      return this.jiraImportService.fetchProjects();\n    };\n\n    JiraImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-jira';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.jiraImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    JiraImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-jira';\n    };\n\n    JiraImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-jira';\n    };\n\n    JiraImportController.prototype.startImport = function(users) {\n      var loader, projectType, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      projectType = this.project.get('project_type');\n      if (projectType === \"issues\" && this.project.get('create_subissues')) {\n        projectType = \"issues-with-subissues\";\n      }\n      promise = this.jiraImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'), projectType, this.project.get('importer_type'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    JiraImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return JiraImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('JiraImportCtrl', JiraImportController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var JiraImportDirective;\n\n  JiraImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/jira-import/jira-import.html\",\n      controller: \"JiraImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  JiraImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgJiraImport\", JiraImportDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var JiraImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  JiraImportService = (function(superClass) {\n    extend(JiraImportService, superClass);\n\n    JiraImportService.$inject = ['tgResources', '$location', '$q'];\n\n    function JiraImportService(resources, location, q) {\n      this.resources = resources;\n      this.location = location;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n    }\n\n    JiraImportService.prototype.setToken = function(token, url) {\n      this.token = token;\n      return this.url = url;\n    };\n\n    JiraImportService.prototype.fetchProjects = function() {\n      return this.resources.jiraImporter.listProjects(this.url, this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    JiraImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.jiraImporter.listUsers(this.url, this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    JiraImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType) {\n      return this.resources.jiraImporter.importProject(this.url, this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType);\n    };\n\n    JiraImportService.prototype.getAuthUrl = function(url) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.jiraImporter.getAuthUrl(url).then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          }, function(err) {\n            return reject(err.data._error_message);\n          });\n        };\n      })(this));\n    };\n\n    JiraImportService.prototype.authorize = function(oauth_verifier) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.jiraImporter.authorize(oauth_verifier).then((function(response) {\n            _this.token = response.data.token;\n            _this.url = response.data.url;\n            return resolve(response.data);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return JiraImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgJiraImportService\", JiraImportService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var NewsletterEmailLightboxDirective;\n\n  NewsletterEmailLightboxDirective = function(lightboxService, lightboxKeyboardNavigationService, $storageService, $rs, $currentUserService, $rs2, $confirm) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      lightboxService.open(el);\n      scope.dontAsk = false;\n      scope.preference = false;\n      scope.$watch('vm.visible', function(visible) {\n        if (visible && !el.hasClass('open')) {\n          ctrl.start();\n          return lightboxService.open(el, null, scope.vm.onClose).then(function() {\n            el.find('input').focus();\n            return lightboxKeyboardNavigationService.init(el);\n          });\n        } else if (!visible && el.hasClass('open')) {\n          return lightboxService.close(el).then(function() {\n            ctrl.userEmail = '';\n            return ctrl.usersSearch = '';\n          });\n        }\n      });\n      scope.closeLightbox = function() {\n        return lightboxService.close(el);\n      };\n      return scope.setEmail = function() {\n        if (scope.preference) {\n          return $rs2.onPremise.subscribeOnPremiseNewsletter({\n            \"email\": $currentUserService.getUser().get('email'),\n            \"full_name\": $currentUserService.getUser().get('full_name'),\n            \"origin_form\": 'Newsletter sign-up create'\n          }).then((function(_this) {\n            return function() {\n              $rs.user.setUserStorage('dont_ask_premise_newsletter', true);\n              return scope.closeLightbox();\n            };\n          })(this))[\"catch\"]((function(_this) {\n            return function() {\n              return $confirm.notify(\"light-error\", \"\");\n            };\n          })(this));\n        } else {\n          $rs.user.setUserStorage('dont_ask_premise_newsletter', scope.dontAsk);\n          return scope.closeLightbox();\n        }\n      };\n    };\n    return {\n      scope: {\n        visible: '<',\n        openNewsletter: '<',\n        onClose: '&',\n        onSelectUser: '&'\n      },\n      templateUrl: 'projects/create/newsletter-email-lightbox/newsletter-email-lightbox.html',\n      link: link\n    };\n  };\n\n  NewsletterEmailLightboxDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService', \"$tgStorage\", \"tgResources\", \"tgCurrentUserService\", \"tgResources\", \"$tgConfirm\"];\n\n  angular.module(\"taigaProjects\").directive(\"tgNewsletterEmailLightbox\", NewsletterEmailLightboxDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var SelectImportUserLightboxCtrl;\n\n  SelectImportUserLightboxCtrl = (function() {\n    SelectImportUserLightboxCtrl.$inject = [];\n\n    function SelectImportUserLightboxCtrl() {}\n\n    SelectImportUserLightboxCtrl.prototype.start = function() {\n      this.mode = 'search';\n      return this.invalid = false;\n    };\n\n    SelectImportUserLightboxCtrl.prototype.assignUser = function() {\n      return this.onSelectUser({\n        user: this.user,\n        taigaUser: this.userEmail\n      });\n    };\n\n    SelectImportUserLightboxCtrl.prototype.selectUser = function(taigaUser) {\n      return this.onSelectUser({\n        user: this.user,\n        taigaUser: Immutable.fromJS(taigaUser)\n      });\n    };\n\n    return SelectImportUserLightboxCtrl;\n\n  })();\n\n  angular.module('taigaProjects').controller('SelectImportUserLightboxCtrl', SelectImportUserLightboxCtrl);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var SelectImportUserLightboxDirective;\n\n  SelectImportUserLightboxDirective = function(lightboxService, lightboxKeyboardNavigationService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.$watch('vm.visible', function(visible) {\n        if (visible && !el.hasClass('open')) {\n          ctrl.start();\n          return lightboxService.open(el, null, scope.vm.onClose).then(function() {\n            el.find('input').focus();\n            return lightboxKeyboardNavigationService.init(el);\n          });\n        } else if (!visible && el.hasClass('open')) {\n          return lightboxService.close(el).then(function() {\n            ctrl.userEmail = '';\n            return ctrl.usersSearch = '';\n          });\n        }\n      });\n    };\n    return {\n      controller: \"SelectImportUserLightboxCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        user: '<',\n        visible: '<',\n        onClose: '&',\n        onSelectUser: '&',\n        selectableUsers: '<',\n        isPrivate: '<',\n        limitMembersPrivateProject: '<',\n        limitMembersPublicProject: '<',\n        displayEmailSelector: '<'\n      },\n      templateUrl: 'projects/create/select-import-user-lightbox/select-import-user-lightbox.html',\n      link: link\n    };\n  };\n\n  SelectImportUserLightboxDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService'];\n\n  angular.module(\"taigaProjects\").directive(\"tgSelectImportUserLightbox\", SelectImportUserLightboxDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TrelloImportProjectFormController;\n\n  TrelloImportProjectFormController = (function() {\n    TrelloImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function TrelloImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.platformName = \"Trello\";\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    TrelloImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    TrelloImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    TrelloImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    TrelloImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return TrelloImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('TrelloImportProjectFormCtrl', TrelloImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TrelloImportProjectFormDirective;\n\n  TrelloImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/trello-import/trello-import-project-form/trello-import-project-form.html\",\n      controller: \"TrelloImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  TrelloImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgTrelloImportProjectForm\", TrelloImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TrelloImportController;\n\n  TrelloImportController = (function() {\n    TrelloImportController.$inject = ['tgTrelloImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function TrelloImportController(trelloImportService, confirm, translate, importProjectService) {\n      this.trelloImportService = trelloImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.trelloImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.trelloImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    TrelloImportController.prototype.startProjectSelector = function() {\n      return this.trelloImportService.fetchProjects().then((function(_this) {\n        return function() {\n          return _this.step = 'project-select-trello';\n        };\n      })(this));\n    };\n\n    TrelloImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-trello';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.trelloImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    TrelloImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-trello';\n    };\n\n    TrelloImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-trello';\n    };\n\n    TrelloImportController.prototype.startImport = function(users) {\n      var loader, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.trelloImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    TrelloImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return TrelloImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('TrelloImportCtrl', TrelloImportController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TrelloImportDirective;\n\n  TrelloImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/trello-import/trello-import.html\",\n      controller: \"TrelloImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  TrelloImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgTrelloImport\", TrelloImportDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TrelloImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  TrelloImportService = (function(superClass) {\n    extend(TrelloImportService, superClass);\n\n    TrelloImportService.$inject = ['tgResources', '$q'];\n\n    function TrelloImportService(resources, q) {\n      this.resources = resources;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n      this.token = null;\n    }\n\n    TrelloImportService.prototype.setToken = function(token) {\n      return this.token = token;\n    };\n\n    TrelloImportService.prototype.fetchProjects = function() {\n      return this.resources.trelloImporter.listProjects(this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    TrelloImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.trelloImporter.listUsers(this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    TrelloImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate) {\n      return this.resources.trelloImporter.importProject(this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate);\n    };\n\n    TrelloImportService.prototype.getAuthUrl = function() {\n      return this.q((function(_this) {\n        return function(resolve) {\n          return _this.resources.trelloImporter.getAuthUrl().then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          });\n        };\n      })(this));\n    };\n\n    TrelloImportService.prototype.authorize = function(verifyCode) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.trelloImporter.authorize(verifyCode).then((function(response) {\n            _this.token = response.data.token;\n            return resolve(_this.token);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return TrelloImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgTrelloImportService\", TrelloImportService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WarningUserImportDirective;\n\n  WarningUserImportDirective = function(lightboxService, lightboxKeyboardNavigationService) {\n    return {\n      link: function(scope, el, attr) {\n        return scope.$watch('visible', function(visible) {\n          if (visible && !el.hasClass('open')) {\n            return lightboxService.open(el, scope.onClose).then(function() {\n              el.find('input').focus();\n              return lightboxKeyboardNavigationService.init(el);\n            });\n          } else if (!visible && el.hasClass('open')) {\n            return lightboxService.close(el);\n          }\n        });\n      },\n      templateUrl: \"projects/create/warning-user-import-lightbox/warning-user-import-lightbox.html\",\n      scope: {\n        visible: '<',\n        onClose: '&',\n        onConfirm: '&'\n      }\n    };\n  };\n\n  WarningUserImportDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService'];\n\n  angular.module(\"taigaProjects\").directive(\"tgWarningUserImportLightbox\", WarningUserImportDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProjectsListingController;\n\n  ProjectsListingController = (function() {\n    ProjectsListingController.$inject = [\"tgCurrentUserService\"];\n\n    function ProjectsListingController(currentUserService) {\n      this.currentUserService = currentUserService;\n      taiga.defineImmutableProperty(this, \"projects\", (function(_this) {\n        return function() {\n          return _this.currentUserService.projects.get(\"all\");\n        };\n      })(this));\n    }\n\n    return ProjectsListingController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ProjectsListing\", ProjectsListingController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProjectRouterController;\n\n  ProjectRouterController = (function() {\n    ProjectRouterController.$inject = [\"$routeParams\", \"$location\", \"tgProjectService\", \"$tgResources\", \"$tgSections\"];\n\n    function ProjectRouterController(routeParams, location, projectService, rs, tgSections) {\n      this.routeParams = routeParams;\n      this.location = location;\n      this.projectService = projectService;\n      this.rs = rs;\n      this.tgSections = tgSections;\n      this.getProjectHomepage().then((function(_this) {\n        return function(section) {\n          if (section) {\n            return _this.location.url(\"project/\" + _this.routeParams.pslug + \"/\" + section);\n          } else {\n            return _this.gotoDefaultProjectHomepage();\n          }\n        };\n      })(this)).then(null, function() {\n        return this.gotoDefaultProjectHomepage();\n      });\n    }\n\n    ProjectRouterController.prototype.gotoDefaultProjectHomepage = function() {\n      return this.location.url(\"project/\" + this.routeParams.pslug + \"/timeline\");\n    };\n\n    ProjectRouterController.prototype.getProjectHomepage = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rs.userProjectSettings.list({\n        project: project.id\n      }).then((function(_this) {\n        return function(userProjectSettings) {\n          var settings;\n          settings = _.find(userProjectSettings, {\n            \"project\": project.id\n          });\n          if (!settings) {\n            return;\n          }\n          return _this.tgSections.getPath(project.slug, settings.homepage);\n        };\n      })(this));\n    };\n\n    return ProjectRouterController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ProjectRouter\", ProjectRouterController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProjectController;\n\n  ProjectController = (function() {\n    ProjectController.$inject = [\"$routeParams\", \"tgAppMetaService\", \"$tgAuth\", \"$translate\", \"tgProjectService\", \"$tgConfig\", \"$tgNavUrls\", \"$location\"];\n\n    function ProjectController(routeParams, appMetaService, auth, translate, projectService, config, navUrls, location) {\n      var nextUrl;\n      this.routeParams = routeParams;\n      this.appMetaService = appMetaService;\n      this.auth = auth;\n      this.translate = translate;\n      this.projectService = projectService;\n      this.config = config;\n      this.navUrls = navUrls;\n      this.location = location;\n      this.user = this.auth.userData;\n      taiga.defineImmutableProperty(this, \"project\", (function(_this) {\n        return function() {\n          return _this.projectService.project;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"members\", (function(_this) {\n        return function() {\n          return _this.projectService.activeMembers;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"isAuthenticated\", (function(_this) {\n        return function() {\n          return !!_this.user;\n        };\n      })(this));\n      nextUrl = this.location.url();\n      this.registerUrl = (this.navUrls.resolve(\"register\")) + \"?next=\" + nextUrl;\n      this.loginUrl = (this.navUrls.resolve(\"login\")) + \"?next=\" + nextUrl;\n      this.publicRegisterEnabled = this.config.get(\"publicRegisterEnabled\");\n      this.appMetaService.setfn(this._setMeta.bind(this));\n    }\n\n    ProjectController.prototype._setMeta = function() {\n      var ctx;\n      if (!this.project) {\n        return null;\n      }\n      ctx = {\n        projectName: this.project.get(\"name\")\n      };\n      return {\n        title: this.translate.instant(\"PROJECT.PAGE_TITLE\", ctx),\n        description: this.project.get(\"description\")\n      };\n    };\n\n    return ProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"Project\", ProjectController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProjectsService, groupBy, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  ProjectsService = (function(superClass) {\n    extend(ProjectsService, superClass);\n\n    ProjectsService.$inject = [\"tgResources\", \"$projectUrl\"];\n\n    function ProjectsService(rs, projectUrl) {\n      this.rs = rs;\n      this.projectUrl = projectUrl;\n    }\n\n    ProjectsService.prototype.create = function(data) {\n      return this.rs.projects.create(data);\n    };\n\n    ProjectsService.prototype.duplicate = function(projectId, data) {\n      return this.rs.projects.duplicate(projectId, data);\n    };\n\n    ProjectsService.prototype.getProjectBySlug = function(projectSlug) {\n      return this.rs.projects.getProjectBySlug(projectSlug).then((function(_this) {\n        return function(project) {\n          return _this._decorate(project);\n        };\n      })(this));\n    };\n\n    ProjectsService.prototype.getProjectStats = function(projectId) {\n      return this.rs.projects.getProjectStats(projectId);\n    };\n\n    ProjectsService.prototype.getProjectsByUserId = function(userId, paginate) {\n      return this.rs.projects.getProjectsByUserId(userId, paginate).then((function(_this) {\n        return function(projects) {\n          return projects.map(_this._decorate.bind(_this));\n        };\n      })(this));\n    };\n\n    ProjectsService.prototype.getListProjectsByUserId = function(userId, paginate) {\n      return this.rs.projects.getListProjectsByUserId(userId, paginate).then((function(_this) {\n        return function(projects) {\n          return projects.map(_this._decorate.bind(_this));\n        };\n      })(this));\n    };\n\n    ProjectsService.prototype._decorate = function(project) {\n      var url;\n      url = this.projectUrl.get(project.toJS());\n      project = project.set(\"url\", url);\n      return project;\n    };\n\n    ProjectsService.prototype.bulkUpdateProjectsOrder = function(sortData) {\n      return this.rs.projects.bulkUpdateOrder(sortData);\n    };\n\n    ProjectsService.prototype.transferValidateToken = function(projectId, token) {\n      return this.rs.projects.transferValidateToken(projectId, token);\n    };\n\n    ProjectsService.prototype.transferAccept = function(projectId, token, reason) {\n      return this.rs.projects.transferAccept(projectId, token, reason);\n    };\n\n    ProjectsService.prototype.transferReject = function(projectId, token, reason) {\n      return this.rs.projects.transferReject(projectId, token, reason);\n    };\n\n    return ProjectsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgProjectsService\", ProjectsService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CantOwnProjectExplanationDirective;\n\n  CantOwnProjectExplanationDirective = function() {\n    return {\n      templateUrl: \"projects/transfer/cant-own-project-explanation.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgCantOwnProjectExplanation\", CantOwnProjectExplanationDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TransferProject, module;\n\n  module = angular.module('taigaProjects');\n\n  TransferProject = (function() {\n    TransferProject.$inject = [\"$routeParams\", \"tgProjectsService\", \"tgProjectService\", \"$location\", \"$tgAuth\", \"tgCurrentUserService\", \"$tgNavUrls\", \"$translate\", \"$tgConfirm\", \"tgErrorHandlingService\"];\n\n    function TransferProject(routeParams, projectsService, projectService, location, authService, currentUserService, navUrls, translate, confirmService, errorHandlingService) {\n      this.routeParams = routeParams;\n      this.projectsService = projectsService;\n      this.projectService = projectService;\n      this.location = location;\n      this.authService = authService;\n      this.currentUserService = currentUserService;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.confirmService = confirmService;\n      this.errorHandlingService = errorHandlingService;\n    }\n\n    TransferProject.prototype.initialize = function() {\n      this.projectId = this.project.get(\"id\");\n      this.token = this.routeParams.token;\n      this.showAddComment = false;\n      return this._refreshUserData();\n    };\n\n    TransferProject.prototype._validateToken = function() {\n      return this.projectsService.transferValidateToken(this.projectId, this.token).then(null, (function(_this) {\n        return function(data, status) {\n          return _this.errorHandlingService.notfound();\n        };\n      })(this));\n    };\n\n    TransferProject.prototype._refreshUserData = function() {\n      return this.authService.refresh().then((function(_this) {\n        return function() {\n          _this._validateToken();\n          _this._setProjectData();\n          return _this._checkOwnerData();\n        };\n      })(this));\n    };\n\n    TransferProject.prototype._setProjectData = function() {\n      return this.canBeOwnedByUser = this.currentUserService.canOwnProject(this.project);\n    };\n\n    TransferProject.prototype._checkOwnerData = function() {\n      var currentUser, maxMemberships;\n      currentUser = this.currentUserService.getUser();\n      if (this.project.get('is_private')) {\n        this.currentProjects = currentUser.get('total_private_projects');\n        this.maxProjects = currentUser.get('max_private_projects');\n        maxMemberships = currentUser.get('max_memberships_private_projects');\n        if (this.maxProjects === null) {\n          this.maxProjects = this.translate.instant('ADMIN.PROJECT_TRANSFER.UNLIMITED_PROJECTS');\n          this.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PRIVATE';\n        } else {\n          if (this.currentProjects < this.maxProjects) {\n            this.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PRIVATE';\n          } else {\n            this.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PRIVATE_EXCEEDED';\n          }\n        }\n      } else {\n        this.currentProjects = currentUser.get('total_public_projects');\n        this.maxProjects = currentUser.get('max_public_projects');\n        maxMemberships = currentUser.get('max_memberships_public_projects');\n        if (this.maxProjects === null) {\n          this.maxProjects = this.translate.instant('ADMIN.PROJECT_TRANSFER.UNLIMITED_PROJECTS');\n          this.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PUBLIC';\n        } else {\n          if (this.currentProjects < this.maxProjects) {\n            this.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PUBLIC';\n          } else {\n            this.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PUBLIC_EXCEEDED';\n          }\n        }\n      }\n      return this.validNumberOfMemberships = maxMemberships === null || this.project.get('total_memberships') <= maxMemberships;\n    };\n\n    TransferProject.prototype.transferAccept = function(token, reason) {\n      this.loadingAccept = true;\n      return this.projectsService.transferAccept(this.project.get(\"id\"), token, reason).then((function(_this) {\n        return function() {\n          return _this.projectService.fetchProject().then(function() {\n            var newUrl;\n            newUrl = _this.navUrls.resolve(\"project-admin-project-profile-details\", {\n              project: _this.project.get(\"slug\")\n            });\n            _this.loadingAccept = false;\n            _this.location.path(newUrl);\n            _this.confirmService.notify(\"success\", _this.translate.instant(\"ADMIN.PROJECT_TRANSFER.ACCEPTED_PROJECT_OWNERNSHIP\"), '', 5000);\n          });\n        };\n      })(this));\n    };\n\n    TransferProject.prototype.transferReject = function(token, reason) {\n      this.loadingReject = true;\n      return this.projectsService.transferReject(this.project.get(\"id\"), token, reason).then((function(_this) {\n        return function() {\n          var newUrl;\n          newUrl = _this.navUrls.resolve(\"home\", {\n            project: _this.project.get(\"slug\")\n          });\n          _this.loadingReject = false;\n          _this.location.path(newUrl);\n          _this.confirmService.notify(\"success\", _this.translate.instant(\"ADMIN.PROJECT_TRANSFER.REJECTED_PROJECT_OWNERNSHIP\"), '', 5000);\n        };\n      })(this));\n    };\n\n    TransferProject.prototype.addComment = function() {\n      return this.showAddComment = true;\n    };\n\n    TransferProject.prototype.hideComment = function() {\n      this.showAddComment = false;\n      return this.reason = '';\n    };\n\n    return TransferProject;\n\n  })();\n\n  module.controller(\"TransferProjectController\", TransferProject);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var TransferProjectDirective, module;\n\n  module = angular.module('taigaProjects');\n\n  TransferProjectDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.initialize();\n    };\n    return {\n      link: link,\n      scope: {},\n      bindToController: {\n        project: \"=\"\n      },\n      templateUrl: \"projects/transfer/transfer-project.html\",\n      controller: 'TransferProjectController',\n      controllerAs: 'vm'\n    };\n  };\n\n  module.directive('tgTransferProject', TransferProjectDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Resource, module, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  Resource = function(urlsService, http, config, $rootScope, $q, storage) {\n    var service;\n    service = {};\n    service.list = function(type, objectId, projectId) {\n      var httpOptions, params, url, urlname;\n      urlname = \"attachments/\" + type;\n      params = {\n        object_id: objectId,\n        project: projectId\n      };\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      url = urlsService.resolve(urlname);\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.get = function(type, id) {\n      var url, urlname;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname) + (\"/\" + id);\n      return http.get(url);\n    };\n    service[\"delete\"] = function(type, id) {\n      var url, urlname;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname) + (\"/\" + id);\n      return http[\"delete\"](url);\n    };\n    service.patch = function(type, id, patch) {\n      var url, urlname;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname) + (\"/\" + id);\n      return http.patch(url, patch);\n    };\n    service.bulkAttachments = function(objectId, type, afterAttachmentId, bulkAttachments) {\n      var url, urlname;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname) + \"/bulk_update_order\";\n      return http.post(url, {\n        object_id: objectId,\n        after_attachment_id: afterAttachmentId,\n        bulk_attachments: bulkAttachments\n      });\n    };\n    service.create = function(type, projectId, objectId, file, from_comment) {\n      var data, defered, maxFileSize, response, token, uploadComplete, uploadFailed, uploadProgress, url, urlname, xhr;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname);\n      defered = $q.defer();\n      if (file === void 0) {\n        defered.reject(null);\n        return defered.promise;\n      }\n      maxFileSize = config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        response = {\n          status: 413,\n          data: {\n            _error_message: \"'\" + file.name + \"' (\" + (sizeFormat(file.size)) + \") is too heavy for our oompa loompas, try it with a smaller than (\" + (sizeFormat(maxFileSize)) + \")\"\n          }\n        };\n        defered.reject(response);\n        return defered.promise;\n      }\n      uploadProgress = (function(_this) {\n        return function(evt) {\n          return $rootScope.$apply(function() {\n            file.status = \"in-progress\";\n            file.size = sizeFormat(evt.total);\n            file.progressMessage = \"upload \" + (sizeFormat(evt.loaded)) + \" of \" + (sizeFormat(evt.total));\n            return file.progressPercent = \"\" + (Math.round((evt.loaded / evt.total) * 100));\n          });\n        };\n      })(this);\n      uploadComplete = (function(_this) {\n        return function(evt) {\n          return $rootScope.$apply(function() {\n            var attachment, ref, status;\n            file.status = \"done\";\n            status = evt.target.status;\n            try {\n              attachment = JSON.parse(evt.target.responseText);\n            } catch (error) {\n              attachment = {};\n            }\n            if (status >= 200 && status < 400) {\n              attachment = Immutable.fromJS(attachment);\n              return defered.resolve(attachment);\n            } else {\n              response = {\n                status: status,\n                data: {\n                  _error_message: (ref = data['attached_file']) != null ? ref[0] : void 0\n                }\n              };\n              return defered.reject(response);\n            }\n          });\n        };\n      })(this);\n      uploadFailed = (function(_this) {\n        return function(evt) {\n          return $rootScope.$apply(function() {\n            file.status = \"error\";\n            return defered.reject(\"fail\");\n          });\n        };\n      })(this);\n      data = new FormData();\n      data.append(\"project\", projectId);\n      data.append(\"object_id\", objectId);\n      data.append(\"attached_file\", file);\n      data.append(\"from_comment\", from_comment);\n      xhr = new XMLHttpRequest();\n      xhr.upload.addEventListener(\"progress\", uploadProgress, false);\n      xhr.addEventListener(\"load\", uploadComplete, false);\n      xhr.addEventListener(\"error\", uploadFailed, false);\n      token = storage.get('token');\n      xhr.open(\"POST\", url);\n      xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send(data);\n      return defered.promise;\n    };\n    return function() {\n      return {\n        \"attachments\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"$tgConfig\", \"$rootScope\", \"$q\", \"$tgStorage\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgAttachmentsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"epics\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.list = function(projectId, page) {\n      var params, url;\n      if (page == null) {\n        page = 0;\n      }\n      url = urlsService.resolve(\"epics\");\n      params = {\n        project: projectId,\n        page: page\n      };\n      return http.get(url, params).then(function(result) {\n        return {\n          list: Immutable.fromJS(result.data),\n          headers: result.headers\n        };\n      });\n    };\n    service.patch = function(id, patch) {\n      var url;\n      url = urlsService.resolve(\"epics\") + (\"/\" + id);\n      return http.patch(url, patch).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.post = function(params) {\n      var url;\n      url = urlsService.resolve(\"epics\");\n      return http.post(url, params).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.reorder = function(id, data, setOrders) {\n      var options, url;\n      url = urlsService.resolve(\"epics\") + (\"/\" + id);\n      options = {\n        \"headers\": {\n          \"set-orders\": JSON.stringify(setOrders)\n        }\n      };\n      return http.patch(url, data, null, options).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.addRelatedUserstory = function(epicId, userstoryId) {\n      var params, url;\n      url = urlsService.resolve(\"epic-related-userstories\", epicId);\n      params = {\n        user_story: userstoryId,\n        epic: epicId\n      };\n      return http.post(url, params);\n    };\n    service.reorderRelatedUserstory = function(epicId, userstoryId, data, setOrders) {\n      var options, url;\n      url = urlsService.resolve(\"epic-related-userstories\", epicId) + (\"/\" + userstoryId);\n      options = {\n        \"headers\": {\n          \"set-orders\": JSON.stringify(setOrders)\n        }\n      };\n      return http.patch(url, data, null, options);\n    };\n    service.bulkCreateRelatedUserStories = function(epicId, projectId, bulk_userstories) {\n      var params, url;\n      url = urlsService.resolve(\"epic-related-userstories-bulk-create\", epicId);\n      params = {\n        bulk_userstories: bulk_userstories,\n        project_id: projectId\n      };\n      return http.post(url, params);\n    };\n    service.deleteRelatedUserstory = function(epicId, userstoryId) {\n      var url;\n      url = urlsService.resolve(\"epic-related-userstories\", epicId) + (\"/\" + userstoryId);\n      return http[\"delete\"](url);\n    };\n    return function() {\n      return {\n        \"epics\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgEpicsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getApplicationToken = function(applicationId, state) {\n      var url;\n      url = urlsService.resolve(\"applications\");\n      url = url + \"/\" + applicationId + \"/token?state=\" + state;\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.authorizeApplicationToken = function(applicationId, state) {\n      var data, url;\n      url = urlsService.resolve(\"application-tokens\");\n      url = url + \"/authorize\";\n      data = {\n        \"state\": state,\n        \"application\": applicationId\n      };\n      return http.post(url, data).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"externalapps\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgExternalAppsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getHistory = function(historyType, contentType, objectId, page) {\n      var url;\n      url = urlsService.resolve(\"history/\" + contentType);\n      return http.get(url + \"/\" + objectId, {\n        page: page,\n        type: historyType\n      }).then(function(result) {\n        return {\n          list: Immutable.fromJS(result.data),\n          headers: result.headers\n        };\n      });\n    };\n    return function() {\n      return {\n        \"history\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgHistory\", Resource);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AsanaResource, GithubResource, JiraResource, TrelloResource, module, taiga;\n\n  taiga = this.taiga;\n\n  TrelloResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function(url) {\n      url = urlsService.resolve(\"importers-trello-auth-url\");\n      return http.get(url);\n    };\n    service.authorize = function(verifyCode) {\n      var url;\n      url = urlsService.resolve(\"importers-trello-authorize\");\n      return http.post(url, {\n        code: verifyCode\n      });\n    };\n    service.listProjects = function(token) {\n      var url;\n      url = urlsService.resolve(\"importers-trello-list-projects\");\n      return http.post(url, {\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-trello-list-users\");\n      return http.post(url, {\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(token, name, description, projectId, userBindings, keepExternalReference, isPrivate) {\n      var data, url;\n      url = urlsService.resolve(\"importers-trello-import-project\");\n      data = {\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        template: \"kanban\"\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"trelloImporter\": service\n      };\n    };\n  };\n\n  TrelloResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  JiraResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function(jira_url) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-auth-url\") + \"?url=\" + jira_url;\n      return http.get(url);\n    };\n    service.authorize = function(oauth_verifier) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-authorize\");\n      return http.post(url, {\n        oauth_verifier: oauth_verifier\n      });\n    };\n    service.listProjects = function(jira_url, token) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-list-projects\");\n      return http.post(url, {\n        url: jira_url,\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(jira_url, token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-list-users\");\n      return http.post(url, {\n        url: jira_url,\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(jira_url, token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType) {\n      var data, projectTemplate, url;\n      url = urlsService.resolve(\"importers-jira-import-project\");\n      projectTemplate = \"kanban\";\n      if (projectType !== \"kanban\") {\n        projectTemplate = \"scrum\";\n      }\n      data = {\n        url: jira_url,\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        project_type: projectType,\n        importer_type: importerType,\n        template: projectTemplate\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"jiraImporter\": service\n      };\n    };\n  };\n\n  JiraResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  GithubResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function(callbackUri) {\n      var url;\n      url = urlsService.resolve(\"importers-github-auth-url\") + \"?uri=\" + callbackUri;\n      return http.get(url);\n    };\n    service.authorize = function(code) {\n      var url;\n      url = urlsService.resolve(\"importers-github-authorize\");\n      return http.post(url, {\n        code: code\n      });\n    };\n    service.listProjects = function(token) {\n      var url;\n      url = urlsService.resolve(\"importers-github-list-projects\");\n      return http.post(url, {\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-github-list-users\");\n      return http.post(url, {\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      var data, url;\n      url = urlsService.resolve(\"importers-github-import-project\");\n      data = {\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        template: projectType\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"githubImporter\": service\n      };\n    };\n  };\n\n  GithubResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  AsanaResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function() {\n      var url;\n      url = urlsService.resolve(\"importers-asana-auth-url\");\n      return http.get(url);\n    };\n    service.authorize = function(code) {\n      var url;\n      url = urlsService.resolve(\"importers-asana-authorize\");\n      return http.post(url, {\n        code: code\n      });\n    };\n    service.listProjects = function(token) {\n      var url;\n      url = urlsService.resolve(\"importers-asana-list-projects\");\n      return http.post(url, {\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-asana-list-users\");\n      return http.post(url, {\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      var data, url;\n      url = urlsService.resolve(\"importers-asana-import-project\");\n      data = {\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        template: projectType\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"asanaImporter\": service\n      };\n    };\n  };\n\n  AsanaResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgTrelloImportResource\", TrelloResource);\n\n  module.factory(\"tgJiraImportResource\", JiraResource);\n\n  module.factory(\"tgGithubImportResource\", GithubResource);\n\n  module.factory(\"tgAsanaImportResource\", AsanaResource);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"issues\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"issues\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgIssuesResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http, config) {\n    var service;\n    service = {};\n    service.subscribeOnPremiseNewsletter = function(requestParams) {\n      var params;\n      params = {\n        url: config.get(\"newsletterSubscriberUrl\") + \"/subscribe/\",\n        method: \"POST\",\n        cancelable: true,\n        data: requestParams\n      };\n      return http.request(params).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"onPremise\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"$tgConfig\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgOnPremiseResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Resource, module, pagination;\n\n  pagination = function() {};\n\n  Resource = function(urlsService, http, paginateResponseService) {\n    var service;\n    service = {};\n    service.create = function(data) {\n      var url;\n      url = urlsService.resolve('projects');\n      return http.post(url, JSON.stringify(data)).then((function(_this) {\n        return function(result) {\n          return Immutable.fromJS(result.data);\n        };\n      })(this));\n    };\n    service.duplicate = function(projectId, data) {\n      var members, params, url;\n      url = urlsService.resolve(\"projects\");\n      url = url + \"/\" + projectId + \"/duplicate\";\n      members = data.users.map((function(_this) {\n        return function(member) {\n          return {\n            \"id\": member\n          };\n        };\n      })(this));\n      params = {\n        \"name\": data.name,\n        \"description\": data.description,\n        \"is_private\": data.is_private,\n        \"users\": members\n      };\n      return http.post(url, params);\n    };\n    service.getProjects = function(params, pagination) {\n      var httpOptions, url;\n      if (params == null) {\n        params = {};\n      }\n      if (pagination == null) {\n        pagination = true;\n      }\n      url = urlsService.resolve(\"projects\");\n      httpOptions = {};\n      if (!pagination) {\n        httpOptions = {\n          headers: {\n            \"x-lazy-pagination\": true\n          }\n        };\n      }\n      return http.get(url, params, httpOptions);\n    };\n    service.getProjectBySlug = function(projectSlug) {\n      var url;\n      url = urlsService.resolve(\"projects\");\n      url = url + \"/by_slug?slug=\" + projectSlug;\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getProjectsByUserId = function(userId, paginate) {\n      var httpOptions, params, url;\n      if (paginate == null) {\n        paginate = false;\n      }\n      url = urlsService.resolve(\"projects\");\n      httpOptions = {};\n      if (!paginate) {\n        httpOptions.headers = {\n          \"x-disable-pagination\": \"1\"\n        };\n      }\n      params = {\n        \"member\": userId,\n        \"order_by\": \"user_order\"\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getListProjectsByUserId = function(userId, paginate) {\n      var httpOptions, params, url;\n      if (paginate == null) {\n        paginate = false;\n      }\n      url = urlsService.resolve(\"projects\");\n      httpOptions = {};\n      if (!paginate) {\n        httpOptions.headers = {\n          \"x-disable-pagination\": \"1\"\n        };\n      }\n      params = {\n        \"member\": userId,\n        \"order_by\": \"user_order\",\n        \"slight\": true\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getProjectStats = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"projects\");\n      url = url + \"/\" + projectId;\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.bulkUpdateOrder = function(bulkData) {\n      var url;\n      url = urlsService.resolve(\"bulk-update-projects-order\");\n      return http.post(url, bulkData);\n    };\n    service.getTimeline = function(projectId, page) {\n      var params, url;\n      params = {\n        page: page,\n        only_relevant: true\n      };\n      url = urlsService.resolve(\"timeline-project\");\n      url = url + \"/\" + projectId;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.likeProject = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-like\", projectId);\n      return http.post(url);\n    };\n    service.unlikeProject = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-unlike\", projectId);\n      return http.post(url);\n    };\n    service.watchProject = function(projectId, notifyLevel) {\n      var data, url;\n      data = {\n        notify_level: notifyLevel,\n        live_notify_level: notifyLevel\n      };\n      url = urlsService.resolve(\"project-watch\", projectId);\n      return http.post(url, data);\n    };\n    service.unwatchProject = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-unwatch\", projectId);\n      return http.post(url);\n    };\n    service.contactProject = function(projectId, message) {\n      var params, url;\n      params = {\n        project: projectId,\n        comment: message\n      };\n      url = urlsService.resolve(\"project-contact\");\n      return http.post(url, params);\n    };\n    service.transferValidateToken = function(projectId, token) {\n      var data, url;\n      data = {\n        token: token\n      };\n      url = urlsService.resolve(\"project-transfer-validate-token\", projectId);\n      return http.post(url, data);\n    };\n    service.transferAccept = function(projectId, token, reason) {\n      var data, url;\n      data = {\n        token: token,\n        reason: reason\n      };\n      url = urlsService.resolve(\"project-transfer-accept\", projectId);\n      return http.post(url, data);\n    };\n    service.transferReject = function(projectId, token, reason) {\n      var data, url;\n      data = {\n        token: token,\n        reason: reason\n      };\n      url = urlsService.resolve(\"project-transfer-reject\", projectId);\n      return http.post(url, data);\n    };\n    service.transferRequest = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-transfer-request\", projectId);\n      return http.post(url);\n    };\n    service.transferStart = function(projectId, userId, reason) {\n      var data, url;\n      data = {\n        user: userId,\n        reason: reason\n      };\n      url = urlsService.resolve(\"project-transfer-start\", projectId);\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"projects\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"tgPaginateResponseService\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgProjectsResources\", Resource);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Resources, services;\n\n  services = [\"tgProjectsResources\", \"tgUserResources\", \"tgUsersResources\", \"tgUserstoriesResource\", \"tgTasksResource\", \"tgIssuesResource\", \"tgExternalAppsResource\", \"tgAttachmentsResource\", \"tgStatsResource\", \"tgHistory\", \"tgEpicsResource\", \"tgTrelloImportResource\", \"tgJiraImportResource\", \"tgGithubImportResource\", \"tgAsanaImportResource\", \"tgOnPremiseResource\"];\n\n  Resources = function($injector) {\n    var i, j, len, len1, ref, service, serviceFn, serviceName, serviceProperty;\n    for (i = 0, len = services.length; i < len; i++) {\n      serviceName = services[i];\n      serviceFn = $injector.get(serviceName);\n      service = $injector.invoke(serviceFn);\n      ref = Object.keys(service);\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        serviceProperty = ref[j];\n        if (this[serviceProperty]) {\n          console.warn(\"repeated resource \" + serviceProperty);\n        }\n        this[serviceProperty] = service[serviceProperty];\n      }\n    }\n    return this;\n  };\n\n  Resources.$inject = [\"$injector\"];\n\n  angular.module(\"taigaResources2\").service(\"tgResources\", Resources);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.discover = function(applicationId, state) {\n      var url;\n      url = urlsService.resolve(\"stats-discover\");\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"stats\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgStatsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"tasks\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"tasks\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgTasksResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http, paginateResponseService) {\n    var service;\n    service = {};\n    service.getUserStorage = function(key) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"user-storage\");\n      if (key) {\n        url += '/' + key;\n      }\n      httpOptions = {};\n      return http.get(url, {}).then(function(response) {\n        return response.data.value;\n      });\n    };\n    service.setUserStorage = function(key, value) {\n      var params, url;\n      url = urlsService.resolve(\"user-storage\") + '/' + key;\n      params = {\n        key: key,\n        value: value\n      };\n      return http.put(url, params);\n    };\n    service.createUserStorage = function(key, value) {\n      var params, url;\n      url = urlsService.resolve(\"user-storage\");\n      params = {\n        key: key,\n        value: value\n      };\n      return http.post(url, params);\n    };\n    return function() {\n      return {\n        \"user\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgUserResources\", Resource);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http, paginateResponseService) {\n    var service;\n    service = {};\n    service.getUserByUsername = function(username) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"by_username\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      params = {\n        username: username\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getStats = function(userId) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"user-stats\", userId);\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, {}, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getContacts = function(userId, excludeProjectId) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"user-contacts\", userId);\n      params = {};\n      if (excludeProjectId != null) {\n        params.exclude_project = excludeProjectId;\n      }\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getLiked = function(userId, page, type, q) {\n      var params, url;\n      url = urlsService.resolve(\"user-liked\", userId);\n      params = {};\n      if (page != null) {\n        params.page = page;\n      }\n      if (type != null) {\n        params.type = type;\n      }\n      if (q != null) {\n        params.q = q;\n      }\n      params.only_relevant = true;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getVoted = function(userId, page, type, q) {\n      var params, url;\n      url = urlsService.resolve(\"user-voted\", userId);\n      params = {};\n      if (page != null) {\n        params.page = page;\n      }\n      if (type != null) {\n        params.type = type;\n      }\n      if (q != null) {\n        params.q = q;\n      }\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getWatched = function(userId, page, type, q) {\n      var params, url;\n      url = urlsService.resolve(\"user-watched\", userId);\n      params = {};\n      if (page != null) {\n        params.page = page;\n      }\n      if (type != null) {\n        params.type = type;\n      }\n      if (q != null) {\n        params.q = q;\n      }\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getProfileTimeline = function(userId, page) {\n      var params, url;\n      params = {\n        page: page\n      };\n      url = urlsService.resolve(\"timeline-profile\");\n      url = url + \"/\" + userId;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getUserTimeline = function(userId, page) {\n      var params, url;\n      params = {\n        page: page,\n        only_relevant: true\n      };\n      url = urlsService.resolve(\"timeline-user\");\n      url = url + \"/\" + userId;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getNotifications = function(userId, page, onlyUnread) {\n      var params, url;\n      params = {\n        page: page\n      };\n      if (onlyUnread) {\n        params['only_unread'] = true;\n      }\n      url = urlsService.resolve(\"notifications\");\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        var paginateResponse;\n        result = Immutable.fromJS(result);\n        paginateResponse = Immutable.Map({\n          \"data\": result.get(\"data\").get(\"objects\"),\n          \"next\": !!result.get(\"headers\")(\"x-pagination-next\"),\n          \"prev\": !!result.get(\"headers\")(\"x-pagination-prev\"),\n          \"current\": result.get(\"headers\")(\"x-pagination-current\"),\n          \"count\": result.get(\"headers\")(\"x-pagination-count\"),\n          \"total\": result.get(\"data\").get(\"total\")\n        });\n        return paginateResponse;\n      });\n    };\n    service.setNotificationAsRead = function(notificationId) {\n      var url;\n      url = (urlsService.resolve(\"notifications\")) + \"/\" + notificationId + \"/set-as-read\";\n      return http.patch(url).then(function(result) {\n        return result;\n      });\n    };\n    service.setNotificationsAsRead = function() {\n      var url;\n      url = (urlsService.resolve(\"notifications\")) + \"/set-as-read\";\n      return http.post(url).then(function(result) {\n        return result;\n      });\n    };\n    return function() {\n      return {\n        \"users\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"tgPaginateResponseService\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgUsersResources\", Resource);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params, pagination) {\n      var httpOptions, url;\n      if (pagination == null) {\n        pagination = false;\n      }\n      url = urlsService.resolve(\"userstories\");\n      if (!pagination) {\n        httpOptions = {\n          headers: {\n            \"x-disable-pagination\": \"1\"\n          }\n        };\n      }\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.listAllInProject = function(projectId) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"userstories\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      params = {\n        project: projectId\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.listInEpic = function(epicIid) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"userstories\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      params = {\n        epic: epicIid,\n        order_by: 'epic_order',\n        include_tasks: true\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"userstories\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgUserstoriesResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AppMetaService, taiga, truncate;\n\n  taiga = this.taiga;\n\n  truncate = taiga.truncate;\n\n  AppMetaService = (function() {\n    AppMetaService.$inject = [\"$rootScope\"];\n\n    function AppMetaService(rootScope) {\n      this.rootScope = rootScope;\n    }\n\n    AppMetaService.prototype._set = function(key, value) {\n      var meta;\n      if (!key) {\n        return;\n      }\n      if (key === \"title\") {\n        meta = $(\"head title\");\n        if (meta.length === 0) {\n          meta = $(\"<title></title>\");\n          $(\"head\").append(meta);\n        }\n        return meta.html(value || \"\");\n      } else if (key.indexOf(\"og:\") === 0) {\n        meta = $(\"head meta[property='\" + key + \"']\");\n        if (meta.length === 0) {\n          meta = $(\"<meta property='\" + key + \"'/>\");\n          $(\"head\").append(meta);\n        }\n        return meta.attr(\"content\", value || \"\");\n      } else {\n        meta = $(\"head meta[name='\" + key + \"']\");\n        if (meta.length === 0) {\n          meta = $(\"<meta name='\" + key + \"'/>\");\n          $(\"head\").append(meta);\n        }\n        return meta.attr(\"content\", value || \"\");\n      }\n    };\n\n    AppMetaService.prototype.setTitle = function(title) {\n      return this._set('title', title);\n    };\n\n    AppMetaService.prototype.setDescription = function(description) {\n      return this._set(\"description\", truncate(description, 250));\n    };\n\n    AppMetaService.prototype.setTwitterMetas = function(title, description) {\n      this._set(\"twitter:card\", \"summary\");\n      this._set(\"twitter:site\", \"@taigaio\");\n      this._set(\"twitter:title\", title);\n      this._set(\"twitter:description\", truncate(description, 300));\n      return this._set(\"twitter:image\", window.location.origin + \"/\" + window._version + \"/images/logo-color.png\");\n    };\n\n    AppMetaService.prototype.setOpenGraphMetas = function(title, description) {\n      this._set(\"og:type\", \"object\");\n      this._set(\"og:site_name\", \"Taiga - Love your projects\");\n      this._set(\"og:title\", title);\n      this._set(\"og:description\", truncate(description, 300));\n      this._set(\"og:image\", window.location.origin + \"/\" + window._version + \"/images/logo-color.png\");\n      return this._set(\"og:url\", window.location.href);\n    };\n\n    AppMetaService.prototype.setAll = function(title, description) {\n      this.setTitle(title);\n      this.setDescription(description);\n      this.setTwitterMetas(title, description);\n      return this.setOpenGraphMetas(title, description);\n    };\n\n    AppMetaService.prototype.addMobileViewport = function() {\n      return $(\"head\").append(\"<meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\\\">\");\n    };\n\n    AppMetaService.prototype.removeMobileViewport = function() {\n      return $(\"head meta[name=\\\"viewport\\\"]\").remove();\n    };\n\n    AppMetaService.prototype.setfn = function(fn) {\n      if (this.listener) {\n        this._listener();\n      }\n      return this._listener = this.rootScope.$watchCollection(fn, (function(_this) {\n        return function(metas) {\n          if (metas) {\n            _this.setAll(metas.title, metas.description);\n            return _this._listener();\n          }\n        };\n      })(this));\n    };\n\n    return AppMetaService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgAppMetaService\", AppMetaService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AttachmentsService, sizeFormat;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  AttachmentsService = (function() {\n    AttachmentsService.$inject = [\"$tgConfirm\", \"$tgConfig\", \"$translate\", \"tgResources\"];\n\n    function AttachmentsService(confirm, config, translate, rs) {\n      this.confirm = confirm;\n      this.config = config;\n      this.translate = translate;\n      this.rs = rs;\n      this.types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\",\n        wiki: \"wiki\",\n        wikipage: \"wiki\"\n      };\n      this.maxFileSize = this.getMaxFileSize();\n      if (this.maxFileSize) {\n        this.maxFileSizeFormated = sizeFormat(this.maxFileSize);\n      }\n    }\n\n    AttachmentsService.prototype.sizeError = function(file) {\n      var message;\n      message = this.translate.instant(\"ATTACHMENT.ERROR_MAX_SIZE_EXCEEDED\", {\n        fileName: file.name,\n        fileSize: sizeFormat(file.size),\n        maxFileSize: this.maxFileSizeFormated\n      });\n      return this.confirm.notify(\"error\", message);\n    };\n\n    AttachmentsService.prototype.validate = function(file) {\n      if (this.maxFileSize && file.size > this.maxFileSize) {\n        this.sizeError(file);\n        return false;\n      }\n      return true;\n    };\n\n    AttachmentsService.prototype.getMaxFileSize = function() {\n      return this.config.get(\"maxUploadFileSize\", null);\n    };\n\n    AttachmentsService.prototype.list = function(type, objId, projectId) {\n      return this.rs.attachments.list(type, objId, projectId).then((function(_this) {\n        return function(attachments) {\n          return attachments.sortBy(function(attachment) {\n            return attachment.get('order');\n          });\n        };\n      })(this));\n    };\n\n    AttachmentsService.prototype.get = function(type, id) {\n      return this.rs.attachments.get(this.types[type], id);\n    };\n\n    AttachmentsService.prototype[\"delete\"] = function(type, id) {\n      return this.rs.attachments[\"delete\"](type, id);\n    };\n\n    AttachmentsService.prototype.saveError = function(file, data) {\n      var message;\n      message = \"\";\n      if (file) {\n        message = this.translate.instant(\"ATTACHMENT.ERROR_UPLOAD_ATTACHMENT\", {\n          fileName: file.name,\n          errorMessage: data.data._error_message\n        });\n      }\n      return this.confirm.notify(\"error\", message);\n    };\n\n    AttachmentsService.prototype.upload = function(file, objId, projectId, type, from_comment) {\n      var promise;\n      if (from_comment == null) {\n        from_comment = false;\n      }\n      promise = this.rs.attachments.create(type, projectId, objId, file, from_comment);\n      promise.then(null, this.saveError.bind(this, file));\n      return promise;\n    };\n\n    AttachmentsService.prototype.bulkUpdateOrder = function(objectId, type, afterAttachmentId, bulkAttachments) {\n      var promise;\n      promise = this.rs.attachments.bulkAttachments(objectId, type, afterAttachmentId, bulkAttachments);\n      promise.then(null, this.saveError.bind(this, null));\n      return promise;\n    };\n\n    AttachmentsService.prototype.patch = function(id, type, patch) {\n      var promise;\n      promise = this.rs.attachments.patch(type, id, patch);\n      promise.then(null, this.saveError.bind(this, null));\n      return promise;\n    };\n\n    return AttachmentsService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgAttachmentsService\", AttachmentsService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var AvatarService,\n    modulo = function(a, b) { return (+a % (b = +b) + b) % b; };\n\n  AvatarService = (function() {\n    function AvatarService(config) {\n      var COLORS, IMAGES;\n      this.config = config;\n      IMAGES = [window._version + \"/images/user-avatars/user-avatar-01.png\", window._version + \"/images/user-avatars/user-avatar-02.png\", window._version + \"/images/user-avatars/user-avatar-03.png\", window._version + \"/images/user-avatars/user-avatar-04.png\", window._version + \"/images/user-avatars/user-avatar-05.png\"];\n      COLORS = [\"rgba( 178, 176, 204, 1 )\", \"rgba( 183, 203, 131, 1 )\", \"rgba( 210, 198, 139, 1 )\", \"rgba( 214, 161, 212, 1 )\", \"rgba( 247, 154, 154, 1 )\"];\n      this.logos = _.cartesianProduct(IMAGES, COLORS);\n    }\n\n    AvatarService.prototype.getDefault = function(key) {\n      var idx, logo;\n      idx = modulo(murmurhash3_32_gc(key, 42), this.logos.length);\n      logo = this.logos[idx];\n      return {\n        src: logo[0],\n        color: logo[1]\n      };\n    };\n\n    AvatarService.prototype.getUnnamed = function() {\n      return {\n        url: window._version + \"/images/unnamed.png\",\n        username: ''\n      };\n    };\n\n    AvatarService.prototype.getAvatar = function(user, type) {\n      var avatarParamName, fullName, gravatar, logo, logoUrl, photo, root, username;\n      if (!user) {\n        return this.getUnnamed();\n      }\n      avatarParamName = 'photo';\n      if (type === 'avatarBig') {\n        avatarParamName = 'big_photo';\n      }\n      photo = null;\n      if (user instanceof Immutable.Map) {\n        gravatar = user.get('gravatar_id');\n        photo = user.get(avatarParamName);\n        username = \"@\" + (user.get('username'));\n        fullName = user.get('full_name_display');\n      } else {\n        gravatar = user.gravatar_id;\n        photo = user[avatarParamName];\n        username = \"@\" + user.username;\n        fullName = user.full_name_display;\n      }\n      if (!gravatar) {\n        return this.getUnnamed();\n      }\n      if (photo) {\n        return {\n          url: photo,\n          username: username,\n          fullName: fullName\n        };\n      } else if (location.host.indexOf('localhost') !== -1 || !this.config.get(\"gravatar\", true)) {\n        root = location.protocol + '//' + location.host + this.config.get('baseHref');\n        logo = this.getDefault(gravatar);\n        return {\n          url: root + logo.src,\n          bg: logo.color,\n          username: username,\n          fullName: fullName\n        };\n      } else {\n        root = location.protocol + '//' + location.host + this.config.get('baseHref');\n        logo = this.getDefault(gravatar);\n        logoUrl = encodeURIComponent(root + logo.src);\n        return {\n          url: 'https://www.gravatar.com/avatar/' + gravatar + \"?s=200&d=\" + logoUrl,\n          bg: logo.color,\n          username: username,\n          fullName: fullName\n        };\n      }\n    };\n\n    return AvatarService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgAvatarService\", [\"$tgConfig\", AvatarService]);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CheckPermissionsService, taiga;\n\n  taiga = this.taiga;\n\n  CheckPermissionsService = (function() {\n    CheckPermissionsService.$inject = [\"tgProjectService\"];\n\n    function CheckPermissionsService(projectService) {\n      this.projectService = projectService;\n    }\n\n    CheckPermissionsService.prototype.check = function(permission) {\n      if (!this.projectService.project) {\n        return false;\n      }\n      return this.projectService.project.get('my_permissions').indexOf(permission) !== -1;\n    };\n\n    return CheckPermissionsService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgCheckPermissionsService\", CheckPermissionsService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var CurrentUserService, groupBy, taiga;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  CurrentUserService = (function() {\n    CurrentUserService.$inject = [\"tgProjectsService\", \"$tgStorage\", \"tgResources\", \"$q\"];\n\n    function CurrentUserService(projectsService, storageService, rs, q) {\n      this.projectsService = projectsService;\n      this.storageService = storageService;\n      this.rs = rs;\n      this.q = q;\n      this._user = null;\n      this._projects = Immutable.Map();\n      this._projectsById = Immutable.Map();\n      this._joyride = null;\n      taiga.defineImmutableProperty(this, \"projects\", (function(_this) {\n        return function() {\n          return _this._projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"projectsById\", (function(_this) {\n        return function() {\n          return _this._projectsById;\n        };\n      })(this));\n    }\n\n    CurrentUserService.prototype.isAuthenticated = function() {\n      if (this.getUser() !== null) {\n        return true;\n      }\n      return false;\n    };\n\n    CurrentUserService.prototype.getUser = function() {\n      var userData;\n      if (!this._user) {\n        userData = this.storageService.get(\"userInfo\");\n        if (userData) {\n          userData = Immutable.fromJS(userData);\n          this.setUser(userData);\n        }\n      }\n      return this._user;\n    };\n\n    CurrentUserService.prototype.removeUser = function() {\n      this._user = null;\n      this._projects = Immutable.Map();\n      this._projectsById = Immutable.Map();\n      return this._joyride = null;\n    };\n\n    CurrentUserService.prototype.setUser = function(user) {\n      this._user = user;\n      return this._loadUserInfo();\n    };\n\n    CurrentUserService.prototype.bulkUpdateProjectsOrder = function(sortData) {\n      return this.projectsService.bulkUpdateProjectsOrder(sortData).then((function(_this) {\n        return function() {\n          return _this.loadProjects();\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype.loadProjects = function() {\n      return this.projectsService.getProjectsByUserId(this._user.get(\"id\")).then((function(_this) {\n        return function(projects) {\n          return _this.setProjects(projects);\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype.loadProjectsList = function() {\n      return this.projectsService.getListProjectsByUserId(this._user.get(\"id\"), null).then((function(_this) {\n        return function(projects) {\n          return _this.setProjects(projects);\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype.disableJoyRide = function(section) {\n      if (!this.isAuthenticated()) {\n        return;\n      }\n      if (section) {\n        this._joyride[section] = false;\n      } else {\n        this._joyride = {\n          backlog: false,\n          kanban: false,\n          dashboard: false\n        };\n      }\n      return this.rs.user.setUserStorage('joyride', this._joyride);\n    };\n\n    CurrentUserService.prototype.loadJoyRideConfig = function() {\n      return this.q((function(_this) {\n        return function(resolve) {\n          if (_this._joyride !== null) {\n            resolve(_this._joyride);\n            return;\n          }\n          return _this.rs.user.getUserStorage('joyride').then(function(config) {\n            _this._joyride = config;\n            return resolve(_this._joyride);\n          })[\"catch\"](function() {\n            _this._joyride = {\n              backlog: true,\n              kanban: true,\n              dashboard: true\n            };\n            _this.rs.user.createUserStorage('joyride', _this._joyride);\n            return resolve(_this._joyride);\n          });\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype._loadUserInfo = function() {\n      return this.q.all([this.loadProjectsList()]);\n    };\n\n    CurrentUserService.prototype.setProjects = function(projects) {\n      this._projects = this._projects.set(\"all\", projects);\n      this._projects = this._projects.set(\"recents\", projects.slice(0, 4));\n      this._projects = this._projects.set(\"unblocked\", projects.filter(function(project) {\n        return project.toJS().blocked_code === null;\n      }));\n      this._projectsById = Immutable.fromJS(groupBy(projects.toJS(), function(p) {\n        return p.id;\n      }));\n      return this.projects;\n    };\n\n    CurrentUserService.prototype.canCreatePrivateProjects = function() {\n      var user;\n      user = this.getUser();\n      if (user.get('max_private_projects') !== null && user.get('total_private_projects') >= user.get('max_private_projects')) {\n        return {\n          valid: false,\n          reason: 'max_private_projects',\n          type: 'private_project',\n          current: user.get('total_private_projects'),\n          max: user.get('max_private_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canCreatePublicProjects = function() {\n      var user;\n      user = this.getUser();\n      if (user && user.get('max_public_projects') !== null && user.get('total_public_projects') >= user.get('max_public_projects')) {\n        return {\n          valid: false,\n          reason: 'max_public_projects',\n          type: 'public_project',\n          current: user.get('total_public_projects'),\n          max: user.get('max_public_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canAddMembersPublicProject = function(totalMembers) {\n      var user;\n      user = this.getUser();\n      if (user.get('max_memberships_public_projects') !== null && totalMembers > user.get('max_memberships_public_projects')) {\n        return {\n          valid: false,\n          reason: 'max_members_public_projects',\n          type: 'public_project',\n          current: totalMembers,\n          max: user.get('max_memberships_public_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canAddMembersPrivateProject = function(totalMembers) {\n      var user;\n      user = this.getUser();\n      if (user.get('max_memberships_private_projects') !== null && totalMembers > user.get('max_memberships_private_projects')) {\n        return {\n          valid: false,\n          reason: 'max_members_private_projects',\n          type: 'private_project',\n          current: totalMembers,\n          max: user.get('max_memberships_private_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canOwnProject = function(project) {\n      var membersResult, result, user;\n      user = this.getUser();\n      if (project.get('is_private')) {\n        result = this.canCreatePrivateProjects();\n        if (!result.valid) {\n          return result;\n        }\n        membersResult = this.canAddMembersPrivateProject(project.get('total_memberships'));\n        if (!membersResult.valid) {\n          return membersResult;\n        }\n      } else {\n        result = this.canCreatePublicProjects();\n        if (!result.valid) {\n          return result;\n        }\n        membersResult = this.canAddMembersPublicProject(project.get('total_memberships'));\n        if (!membersResult.valid) {\n          return membersResult;\n        }\n      }\n      return {\n        valid: true\n      };\n    };\n\n    return CurrentUserService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgCurrentUserService\", CurrentUserService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ErrorHandlingService, taiga;\n\n  taiga = this.taiga;\n\n  ErrorHandlingService = (function() {\n    ErrorHandlingService.$inject = [\"$rootScope\"];\n\n    function ErrorHandlingService(rootScope) {\n      this.rootScope = rootScope;\n    }\n\n    ErrorHandlingService.prototype.init = function() {\n      return this.rootScope.errorHandling = {};\n    };\n\n    ErrorHandlingService.prototype.notfound = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.notfound = true;\n    };\n\n    ErrorHandlingService.prototype.error = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.error = true;\n    };\n\n    ErrorHandlingService.prototype.permissionDenied = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.permissionDenied = true;\n    };\n\n    ErrorHandlingService.prototype.block = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.blocked = true;\n    };\n\n    return ErrorHandlingService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgErrorHandlingService\", ErrorHandlingService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var LightboxFactory;\n\n  LightboxFactory = (function() {\n    LightboxFactory.$inject = [\"$rootScope\", \"$compile\"];\n\n    function LightboxFactory(rootScope, compile) {\n      this.rootScope = rootScope;\n      this.compile = compile;\n    }\n\n    LightboxFactory.prototype.create = function(name, attrs, scopeAttrs) {\n      var elm, html, scope;\n      scope = this.rootScope.$new();\n      scope = _.merge(scope, scopeAttrs);\n      elm = $(\"<div>\").attr(name, true).attr(\"tg-bind-scope\", true);\n      if (attrs) {\n        elm.attr(attrs);\n      }\n      elm.addClass(\"remove-on-close\");\n      html = this.compile(elm)(scope);\n      $(document.body).append(html);\n    };\n\n    return LightboxFactory;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgLightboxFactory\", LightboxFactory);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var PaginateResponse;\n\n  PaginateResponse = function() {\n    return function(result) {\n      var paginateResponse;\n      paginateResponse = Immutable.Map({\n        \"data\": result.get(\"data\"),\n        \"next\": !!result.get(\"headers\")(\"x-pagination-next\"),\n        \"prev\": !!result.get(\"headers\")(\"x-pagination-prev\"),\n        \"current\": result.get(\"headers\")(\"x-pagination-current\"),\n        \"count\": result.get(\"headers\")(\"x-pagination-count\")\n      });\n      return paginateResponse;\n    };\n  };\n\n  angular.module(\"taigaCommon\").factory(\"tgPaginateResponseService\", PaginateResponse);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProjectLogoService,\n    modulo = function(a, b) { return (+a % (b = +b) + b) % b; };\n\n  ProjectLogoService = (function() {\n    function ProjectLogoService() {\n      var COLORS, IMAGES;\n      IMAGES = [window._version + \"/images/project-logos/project-logo-01.png\", window._version + \"/images/project-logos/project-logo-02.png\", window._version + \"/images/project-logos/project-logo-03.png\", window._version + \"/images/project-logos/project-logo-04.png\", window._version + \"/images/project-logos/project-logo-05.png\"];\n      COLORS = [\"rgba( 153,  214, 220, 1 )\", \"rgba( 213,  156,  156, 1 )\", \"rgba( 214, 161, 212,  1 )\", \"rgba( 164, 162, 219, 1 )\", \"rgba( 152, 224, 168,  1 )\"];\n      this.logos = _.cartesianProduct(IMAGES, COLORS);\n    }\n\n    ProjectLogoService.prototype.getDefaultProjectLogo = function(slug, id) {\n      var idx, key, logo;\n      key = slug + \"-\" + id;\n      idx = modulo(murmurhash3_32_gc(key, 42), this.logos.length);\n      logo = this.logos[idx];\n      return {\n        src: logo[0],\n        color: logo[1]\n      };\n    };\n\n    return ProjectLogoService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgProjectLogoService\", ProjectLogoService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ProjectService, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  ProjectService = (function() {\n    ProjectService.$inject = [\"$rootScope\", \"tgProjectsService\", \"tgXhrErrorService\", \"tgUserActivityService\", \"$interval\", \"$q\"];\n\n    function ProjectService(rootScope, projectsService, xhrError, userActivityService, interval, q) {\n      this.rootScope = rootScope;\n      this.projectsService = projectsService;\n      this.xhrError = xhrError;\n      this.userActivityService = userActivityService;\n      this.interval = interval;\n      this.q = q;\n      this.manageProjectSignal = bind(this.manageProjectSignal, this);\n      this._project = null;\n      this._section = null;\n      this._sectionsBreadcrumb = Immutable.List();\n      this._activeMembers = Immutable.List();\n      taiga.defineImmutableProperty(this, \"project\", (function(_this) {\n        return function() {\n          return _this._project;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"section\", (function(_this) {\n        return function() {\n          return _this._section;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"sectionsBreadcrumb\", (function(_this) {\n        return function() {\n          return _this._sectionsBreadcrumb;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"activeMembers\", (function(_this) {\n        return function() {\n          return _this._activeMembers;\n        };\n      })(this));\n      if (!window.localStorage.e2e) {\n        this.autoRefresh();\n      }\n      this.watchSignals();\n    }\n\n    ProjectService.prototype.watchSignals = function() {\n      var fetchRequiredSignals, i, len, results, signal;\n      fetchRequiredSignals = [\"admin:project-modules:updated\", \"admin:project-roles:updated\", \"admin:project-default-values:updated\", \"admin:project-values:updated\", \"admin:project-values:move\", \"admin:project-custom-attributes:updated\", \"sprintform:create:success\", \"sprintform:edit:success\", \"sprintform:remove:success\", \"tags:updated\"];\n      results = [];\n      for (i = 0, len = fetchRequiredSignals.length; i < len; i++) {\n        signal = fetchRequiredSignals[i];\n        results.push(this.rootScope.$on(signal, this.manageProjectSignal));\n      }\n      return results;\n    };\n\n    ProjectService.prototype.manageProjectSignal = function(ctx) {\n      return this.fetchProject();\n    };\n\n    ProjectService.prototype.cleanProject = function() {\n      this._project = null;\n      this._activeMembers = Immutable.List();\n      this._section = null;\n      return this._sectionsBreadcrumb = Immutable.List();\n    };\n\n    ProjectService.prototype.autoRefresh = function() {\n      var intervalId;\n      intervalId = this.interval((function(_this) {\n        return function() {\n          return _this.fetchProject();\n        };\n      })(this), 60 * 10 * 1000);\n      this.userActivityService.onInactive((function(_this) {\n        return function() {\n          return _this.interval.cancel(intervalId);\n        };\n      })(this));\n      return this.userActivityService.onActive((function(_this) {\n        return function() {\n          _this.fetchProject();\n          return _this.autoRefresh();\n        };\n      })(this));\n    };\n\n    ProjectService.prototype.setSection = function(section) {\n      this._section = section;\n      if (section) {\n        return this._sectionsBreadcrumb = this._sectionsBreadcrumb.push(this._section);\n      } else {\n        return this._sectionsBreadcrumb = Immutable.List();\n      }\n    };\n\n    ProjectService.prototype.setProject = function(project) {\n      this._project = project;\n      return this._activeMembers = this._project.get('members').filter(function(member) {\n        return member.get('is_active');\n      });\n    };\n\n    ProjectService.prototype.setProjectBySlug = function(pslug) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          if (!_this.project || _this.project.get('slug') !== pslug) {\n            return _this.projectsService.getProjectBySlug(pslug).then(function(project) {\n              _this.setProject(project);\n              return resolve();\n            })[\"catch\"](function(xhr) {\n              return _this.xhrError.response(xhr);\n            });\n          } else {\n            return resolve();\n          }\n        };\n      })(this));\n    };\n\n    ProjectService.prototype.fetchProject = function() {\n      var pslug;\n      if (!this.project) {\n        return;\n      }\n      pslug = this.project.get('slug');\n      return this.projectsService.getProjectBySlug(pslug).then((function(_this) {\n        return function(project) {\n          return _this.setProject(project);\n        };\n      })(this));\n    };\n\n    ProjectService.prototype.hasPermission = function(permission) {\n      return this._project.get('my_permissions').indexOf(permission) !== -1;\n    };\n\n    ProjectService.prototype.isEpicsDashboardEnabled = function() {\n      return this._project.get(\"is_epics_activated\");\n    };\n\n    return ProjectService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgProjectService\", ProjectService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var ThemeService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  ThemeService = (function(superClass) {\n    extend(ThemeService, superClass);\n\n    function ThemeService() {\n      return ThemeService.__super__.constructor.apply(this, arguments);\n    }\n\n    ThemeService.prototype.use = function(themeName) {\n      var stylesheetEl;\n      stylesheetEl = $(\"link[rel='stylesheet']:first\");\n      if (stylesheetEl.length === 0) {\n        stylesheetEl = $(\"<link rel='stylesheet' href='' type='text/css'>\");\n        $(\"head\").append(stylesheetEl);\n      }\n      return stylesheetEl.attr(\"href\", window._version + \"/styles/theme-\" + themeName + \".css\");\n    };\n\n    return ThemeService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaCommon\").service(\"tgThemeService\", ThemeService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserActivityService, groupBy, taiga;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  UserActivityService = (function() {\n    UserActivityService.$inject = ['$timeout'];\n\n    UserActivityService.prototype.idleTimeout = 60 * 5 * 1000;\n\n    function UserActivityService(timeout) {\n      this.timeout = timeout;\n      if (window.localStorage.e2e) {\n        return null;\n      }\n      window.addEventListener('mousemove', this.resetTimer.bind(this), false);\n      window.addEventListener('mousedown', this.resetTimer.bind(this), false);\n      window.addEventListener('keypress', this.resetTimer.bind(this), false);\n      window.addEventListener('mousewheel', this.resetTimer.bind(this), false);\n      window.addEventListener('touchmove', this.resetTimer.bind(this), false);\n      this.subscriptionsActive = [];\n      this.subscriptionsInactive = [];\n      this.isActive = true;\n      this.startTimer();\n    }\n\n    UserActivityService.prototype.startTimer = function() {\n      return this.timerId = this.timeout(this._fireInactive.bind(this), this.idleTimeout);\n    };\n\n    UserActivityService.prototype.resetTimer = function() {\n      if (!this.isActive) {\n        this._fireActive();\n      }\n      this.timeout.cancel(this.timerId);\n      this.startTimer();\n      return this.isActive = true;\n    };\n\n    UserActivityService.prototype.onActive = function(cb) {\n      this.subscriptionsActive.push(cb);\n      return this._unSubscriptionsActive.bind(this, cb);\n    };\n\n    UserActivityService.prototype.onInactive = function(cb) {\n      this.subscriptionsInactive.push(cb);\n      return this._unSubscriptionsInactive.bind(this, cb);\n    };\n\n    UserActivityService.prototype._fireActive = function() {\n      return this.subscriptionsActive.forEach(function(it) {\n        return it();\n      });\n    };\n\n    UserActivityService.prototype._fireInactive = function() {\n      this.isActive = false;\n      return this.subscriptionsInactive.forEach(function(it) {\n        return it();\n      });\n    };\n\n    UserActivityService.prototype._unSubscriptionsActive = function(cb) {\n      return this.subscriptionsActive = this.subscriptionsActive.filter(function(fn) {\n        return fn !== cb;\n      });\n    };\n\n    UserActivityService.prototype._unSubscriptionsInactive = function(cb) {\n      return this.subscriptionsInactive = this.subscriptionsInactive.filter(function(fn) {\n        return fn !== cb;\n      });\n    };\n\n    return UserActivityService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgUserActivityService\", UserActivityService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserListService, normalizeString, taiga;\n\n  taiga = this.taiga;\n\n  normalizeString = this.taiga.normalizeString;\n\n  UserListService = (function() {\n    UserListService.$inject = [\"tgCurrentUserService\", \"tgProjectService\"];\n\n    function UserListService(currentUserService, projectService) {\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n    }\n\n    UserListService.prototype.filterUsers = function(text, user) {\n      var username;\n      username = user.full_name_display.toUpperCase();\n      username = normalizeString(username);\n      text = text.toUpperCase();\n      text = normalizeString(text);\n      return _.includes(username, text);\n    };\n\n    UserListService.prototype.searchUsers = function(text, excludedUser) {\n      var users;\n      this.currentUser = this.currentUserService.getUser();\n      users = _.clone(this.projectService.activeMembers.toJS(), true);\n      if (excludedUser) {\n        users = _.reject(users, {\n          \"id\": excludedUser.id\n        });\n      }\n      users = _.sortBy(users, (function(_this) {\n        return function(o) {\n          var ref;\n          if (o.id === ((ref = _this.currentUser) != null ? ref.get('id') : void 0)) {\n            return 0;\n          } else {\n            return o.id;\n          }\n        };\n      })(this));\n      if (text != null) {\n        users = _.filter(users, _.partial(this.filterUsers, text));\n      }\n      return users;\n    };\n\n    return UserListService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgUserListService\", UserListService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserService, bindMethods, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  bindMethods = taiga.bindMethods;\n\n  UserService = (function(superClass) {\n    extend(UserService, superClass);\n\n    UserService.$inject = [\"tgResources\"];\n\n    function UserService(rs) {\n      this.rs = rs;\n      bindMethods(this);\n    }\n\n    UserService.prototype.getUserByUserName = function(username) {\n      return this.rs.users.getUserByUsername(username);\n    };\n\n    UserService.prototype.getContacts = function(userId, excludeProjectId) {\n      return this.rs.users.getContacts(userId, excludeProjectId);\n    };\n\n    UserService.prototype.getLiked = function(userId, pageNumber, objectType, textQuery) {\n      return this.rs.users.getLiked(userId, pageNumber, objectType, textQuery);\n    };\n\n    UserService.prototype.getVoted = function(userId, pageNumber, objectType, textQuery) {\n      return this.rs.users.getVoted(userId, pageNumber, objectType, textQuery);\n    };\n\n    UserService.prototype.getWatched = function(userId, pageNumber, objectType, textQuery) {\n      return this.rs.users.getWatched(userId, pageNumber, objectType, textQuery);\n    };\n\n    UserService.prototype.getStats = function(userId) {\n      return this.rs.users.getStats(userId);\n    };\n\n    UserService.prototype.attachUserContactsToProjects = function(userId, projects) {\n      return this.getContacts(userId).then(function(contacts) {\n        projects = projects.map(function(project) {\n          var contactsFiltered;\n          contactsFiltered = contacts.filter(function(contact) {\n            var contactId;\n            contactId = contact.get(\"id\");\n            return project.get('members').indexOf(contactId) !== -1;\n          });\n          project = project.set(\"contacts\", contactsFiltered);\n          return project;\n        });\n        return projects;\n      });\n    };\n\n    return UserService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaCommon\").service(\"tgUserService\", UserService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var xhrError,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  xhrError = (function(superClass) {\n    extend(xhrError, superClass);\n\n    xhrError.$inject = [\"$q\", \"tgErrorHandlingService\"];\n\n    function xhrError(q, errorHandlingService) {\n      this.q = q;\n      this.errorHandlingService = errorHandlingService;\n    }\n\n    xhrError.prototype.notFound = function() {\n      return this.errorHandlingService.notfound();\n    };\n\n    xhrError.prototype.permissionDenied = function() {\n      return this.errorHandlingService.permissionDenied();\n    };\n\n    xhrError.prototype.response = function(xhr) {\n      if (xhr) {\n        if (xhr.status === 404) {\n          this.notFound();\n        } else if (xhr.status === 403) {\n          this.permissionDenied();\n        }\n      }\n      return this.q.reject(xhr);\n    };\n\n    return xhrError;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaCommon\").service(\"tgXhrErrorService\", xhrError);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserTimelineAttachmentDirective;\n\n  UserTimelineAttachmentDirective = function(template, $compile) {\n    var isImage, link, validFileExtensions;\n    validFileExtensions = [\".jpg\", \".jpeg\", \".bmp\", \".gif\", \".png\"];\n    isImage = function(url) {\n      url = url.toLowerCase();\n      return _.some(validFileExtensions, function(extension) {\n        return url.indexOf(extension, url - extension.length) !== -1;\n      });\n    };\n    link = function(scope, el) {\n      var is_image, templateHtml;\n      is_image = isImage(scope.attachment.get('url'));\n      if (is_image) {\n        templateHtml = template.get(\"user-timeline/user-timeline-attachment/user-timeline-attachment-image.html\");\n      } else {\n        templateHtml = template.get(\"user-timeline/user-timeline-attachment/user-timeline-attachment.html\");\n      }\n      el.html(templateHtml);\n      $compile(el.contents())(scope);\n      return el.find(\"img\").error(function() {\n        return this.remove();\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        attachment: \"=tgUserTimelineAttachment\"\n      }\n    };\n  };\n\n  UserTimelineAttachmentDirective.$inject = [\"$tgTemplate\", \"$compile\"];\n\n  angular.module(\"taigaUserTimeline\").directive(\"tgUserTimelineAttachment\", UserTimelineAttachmentDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserTimelineItemTitle, unslugify;\n\n  unslugify = this.taiga.unslugify;\n\n  UserTimelineItemTitle = (function() {\n    UserTimelineItemTitle.$inject = [\"$translate\", \"$sce\"];\n\n    UserTimelineItemTitle.prototype._fieldTranslationKey = {\n      'status': 'COMMON.FIELDS.STATUS',\n      'subject': 'COMMON.FIELDS.SUBJECT',\n      'description_diff': 'COMMON.FIELDS.DESCRIPTION',\n      'points': 'COMMON.FIELDS.POINTS',\n      'assigned_to': 'COMMON.FIELDS.ASSIGNED_TO',\n      'assigned_users': 'COMMON.FIELDS.ASSIGNED_USERS',\n      'severity': 'ISSUES.FIELDS.SEVERITY',\n      'priority': 'ISSUES.FIELDS.PRIORITY',\n      'type': 'ISSUES.FIELDS.TYPE',\n      'is_iocaine': 'TASK.FIELDS.IS_IOCAINE',\n      'is_blocked': 'COMMON.FIELDS.IS_BLOCKED',\n      'color': 'COMMON.FIELDS.COLOR',\n      'due_date': 'COMMON.FIELDS.DUE_DATE',\n      'due_date_reason': 'COMMON.FIELDS.DUE_DATE_REASON',\n      'milestone': 'COMMON.FIELDS.SPRINT'\n    };\n\n    UserTimelineItemTitle.prototype._params = {\n      username: function(timeline, event) {\n        var title_attr, url, user;\n        user = timeline.getIn(['data', 'user']);\n        if (user.get('is_profile_visible')) {\n          title_attr = this.translate.instant('COMMON.SEE_USER_PROFILE', {\n            username: user.get('username')\n          });\n          url = \"user-profile:username=timeline.getIn(['data', 'user', 'username'])\";\n          return this._getLink(url, user.get('name'), title_attr);\n        } else {\n          return this._getUsernameSpan(user.get('name'));\n        }\n      },\n      field_name: function(timeline, event) {\n        var field_name;\n        field_name = timeline.getIn(['data', 'value_diff', 'key']);\n        return this.translate.instant(this._fieldTranslationKey[field_name]);\n      },\n      project_name: function(timeline, event) {\n        var url;\n        url = \"project:project=timeline.getIn(['data', 'project', 'slug'])\";\n        return this._getLink(url, timeline.getIn([\"data\", \"project\", \"name\"]));\n      },\n      new_value: function(timeline, event) {\n        var new_value, prettyDate, value;\n        if (_.isArray(timeline.getIn([\"data\", \"value_diff\", \"value\"]).toJS())) {\n          value = timeline.getIn([\"data\", \"value_diff\", \"value\"]).get(1);\n          if (value === null && timeline.getIn([\"data\", \"value_diff\", \"key\"]) === 'assigned_to') {\n            value = this.translate.instant('ACTIVITY.VALUES.UNASSIGNED');\n          }\n          if (value === null && timeline.getIn([\"data\", \"value_diff\", \"key\"]) === 'assigned_users') {\n            value = this.translate.instant('ACTIVITY.VALUES.UNASSIGNED');\n          } else if (timeline.getIn([\"data\", \"value_diff\", \"key\"]) === 'due_date') {\n            if (value) {\n              prettyDate = this.translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n              value = moment(value, \"YYYY-MM-DD\").format(prettyDate);\n            } else {\n              value = this.translate.instant('ACTIVITY.VALUES.NOT_SET');\n            }\n          } else if (timeline.getIn([\"data\", \"value_diff\", \"key\"]) === 'color') {\n            if (value) {\n              return value;\n            }\n          }\n          new_value = value;\n        } else {\n          new_value = timeline.getIn([\"data\", \"value_diff\", \"value\"]).first().get(1);\n        }\n        return $('<span>').attr('ng-non-bindable', true).text(new_value).prop('outerHTML');\n      },\n      sprint_name: function(timeline, event) {\n        var url;\n        url = \"project-taskboard:project=timeline.getIn(['data', 'project', 'slug']),sprint=timeline.getIn(['data', 'milestone', 'slug'])\";\n        return this._getLink(url, timeline.getIn(['data', 'milestone', 'name']));\n      },\n      us_name: function(timeline, event) {\n        var event_us, obj, text, url;\n        obj = this._getTimelineObj(timeline, event).get('userstory');\n        event_us = {\n          obj: 'parent_userstory'\n        };\n        url = this._getDetailObjUrl(event_us);\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(url, text);\n      },\n      related_us_name: function(timeline, event) {\n        var obj, text, url;\n        obj = timeline.getIn([\"data\", \"userstory\"]);\n        url = \"project-userstories-detail:project=timeline.getIn(['data', 'userstory', 'project', 'slug']),ref=timeline.getIn(['data', 'userstory', 'ref'])\";\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(url, text);\n      },\n      epic_name: function(timeline, event) {\n        var obj, text, url;\n        obj = timeline.getIn([\"data\", \"epic\"]);\n        url = \"project-epics-detail:project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['data', 'epic', 'ref'])\";\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(url, text);\n      },\n      obj_name: function(timeline, event) {\n        var obj, text, url;\n        obj = this._getTimelineObj(timeline, event);\n        url = this._getDetailObjUrl(event);\n        if (event.obj === 'wikipage') {\n          text = unslugify(obj.get('slug'));\n        } else if (event.obj === 'milestone') {\n          text = obj.get('name');\n        } else {\n          text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        }\n        return this._getLink(url, text);\n      },\n      role_name: function(timeline, event) {\n        return _.escape(timeline.getIn(['data', 'value_diff', 'value']).keySeq().first());\n      }\n    };\n\n    function UserTimelineItemTitle(translate, sce) {\n      this.translate = translate;\n      this.sce = sce;\n    }\n\n    UserTimelineItemTitle.prototype._translateTitleParams = function(param, timeline, event) {\n      return this._params[param].call(this, timeline, event);\n    };\n\n    UserTimelineItemTitle.prototype._getTimelineObj = function(timeline, event) {\n      return timeline.getIn(['data', event.obj]);\n    };\n\n    UserTimelineItemTitle.prototype._getDetailObjUrl = function(event) {\n      var url;\n      url = {\n        \"issue\": [\"project-issues-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\n        \"wikipage\": [\"project-wiki-page\", \":project=timeline.getIn(['data', 'project', 'slug']),slug=timeline.getIn(['obj', 'slug'])\"],\n        \"task\": [\"project-tasks-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\n        \"userstory\": [\"project-userstories-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\n        \"parent_userstory\": [\"project-userstories-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'userstory', 'ref'])\"],\n        \"milestone\": [\"project-taskboard\", \":project=timeline.getIn(['data', 'project', 'slug']),sprint=timeline.getIn(['obj', 'slug'])\"],\n        \"epic\": [\"project-epics-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"]\n      };\n      return url[event.obj][0] + url[event.obj][1];\n    };\n\n    UserTimelineItemTitle.prototype._getLink = function(url, text, title) {\n      var span;\n      title = title || text;\n      span = $('<span>').attr('ng-non-bindable', true).text(text);\n      return $('<a>').attr('tg-nav', url).append(span).prop('outerHTML');\n    };\n\n    UserTimelineItemTitle.prototype._getUsernameSpan = function(text) {\n      var title;\n      title = title || text;\n      return $('<span>').addClass('username').text(text).prop('outerHTML');\n    };\n\n    UserTimelineItemTitle.prototype._getParams = function(timeline, event, timeline_type) {\n      var params;\n      params = {};\n      timeline_type.translate_params.forEach((function(_this) {\n        return function(param) {\n          return params[param] = _this._translateTitleParams(param, timeline, event);\n        };\n      })(this));\n      return params;\n    };\n\n    UserTimelineItemTitle.prototype.getTitle = function(timeline, event, type) {\n      var params, paramsKeys, translation;\n      params = this._getParams(timeline, event, type);\n      paramsKeys = {};\n      Object.keys(params).forEach(function(key) {\n        return paramsKeys[key] = '{{' + key + '}}';\n      });\n      translation = this.translate.instant(type.key, paramsKeys);\n      Object.keys(params).forEach(function(key) {\n        var find;\n        find = '{{' + key + '}}';\n        return translation = translation.replace(new RegExp(find, 'g'), params[key]);\n      });\n      return translation;\n    };\n\n    return UserTimelineItemTitle;\n\n  })();\n\n  angular.module(\"taigaUserTimeline\").service(\"tgUserTimelineItemTitle\", UserTimelineItemTitle);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserTimelineType, timelineType;\n\n  timelineType = function(timeline, event) {\n    var types;\n    types = [\n      {\n        check: function(timeline, event) {\n          return event.obj === 'membership';\n        },\n        key: 'TIMELINE.NEW_MEMBER',\n        translate_params: ['project_name'],\n        member: function(timeline) {\n          return Immutable.Map({\n            user: timeline.getIn(['data', 'user']),\n            role: timeline.getIn(['data', 'role'])\n          });\n        }\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'project' && event.type === 'create';\n        },\n        key: 'TIMELINE.NEW_PROJECT',\n        translate_params: ['username', 'project_name'],\n        description: function(timeline) {\n          return timeline.getIn(['data', 'project', 'description']);\n        }\n      }, {\n        check: function(timeline, event) {\n          return event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'attachments';\n        },\n        key: 'TIMELINE.UPLOAD_ATTACHMENT',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'create';\n        },\n        key: 'TIMELINE.US_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'issue' && event.type === 'create';\n        },\n        key: 'TIMELINE.ISSUE_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'wikipage' && event.type === 'create';\n        },\n        key: 'TIMELINE.WIKI_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'create' && !timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'create' && timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_CREATED_WITH_US',\n        translate_params: ['username', 'project_name', 'obj_name', 'us_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'milestone' && event.type === 'create';\n        },\n        key: 'TIMELINE.MILESTONE_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'create';\n        },\n        key: 'TIMELINE.EPIC_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'relateduserstory' && event.type === 'create';\n        },\n        key: 'TIMELINE.EPIC_RELATED_USERSTORY_CREATED',\n        translate_params: ['username', 'project_name', 'related_us_name', 'epic_name']\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'userstory';\n        },\n        key: 'TIMELINE.NEW_COMMENT_US',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'issue';\n        },\n        key: 'TIMELINE.NEW_COMMENT_ISSUE',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'task';\n        },\n        key: 'TIMELINE.NEW_COMMENT_TASK',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'epic';\n        },\n        key: 'TIMELINE.NEW_COMMENT_EPIC',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'moveInBacklog' && timeline.hasIn(['data', 'value_diff', 'value', 'backlog_order']) && event.type === 'change';\n        },\n        key: 'TIMELINE.US_MOVED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          if (timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'moveInBacklog' && event.type === 'change' && event.obj === 'userstory') {\n            return timeline.getIn(['data', 'value_diff', 'value', 'milestone']).get(1) === null;\n          }\n          return false;\n        },\n        key: 'TIMELINE.US_REMOVED_FROM_MILESTONE',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'moveInBacklog' && event.type === 'change' && event.obj === 'userstory';\n        },\n        key: 'TIMELINE.US_ADDED_MILESTONE',\n        translate_params: ['username', 'obj_name', 'sprint_name']\n      }, {\n        check: function(timeline, event) {\n          if (timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'blocked' && event.type === 'change') {\n            return timeline.getIn(['data', 'value_diff', 'value', 'is_blocked']).get(1) === true;\n          }\n          return false;\n        },\n        key: 'TIMELINE.BLOCKED',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          if (timeline.hasIn(['data', 'value_diff', 'value', 'blocked_note_html'])) {\n            text = timeline.getIn(['data', 'value_diff', 'value', 'blocked_note_html']).get(1);\n            return $($.parseHTML(text)).text();\n          } else {\n            return false;\n          }\n        }\n      }, {\n        check: function(timeline, event) {\n          if (timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'blocked' && event.type === 'change') {\n            return timeline.getIn(['data', 'value_diff', 'value', 'is_blocked']).get(1) === false;\n          }\n          return false;\n        },\n        key: 'TIMELINE.UNBLOCKED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'milestone' && event.type === 'change';\n        },\n        key: 'TIMELINE.MILESTONE_UPDATED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'wikipage' && event.type === 'change';\n        },\n        key: 'TIMELINE.WIKI_UPDATED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'points';\n        },\n        key: 'TIMELINE.US_UPDATED_POINTS',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value', 'role_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.US_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'change';\n        },\n        key: 'TIMELINE.US_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'issue' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.ISSUE_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'issue' && event.type === 'change';\n        },\n        key: 'TIMELINE.ISSUE_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && !timeline.getIn(['data', 'task', 'userstory']) && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.TASK_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && timeline.getIn(['data', 'task', 'userstory']) && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.TASK_UPDATED_WITH_US',\n        translate_params: ['username', 'field_name', 'obj_name', 'us_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && !timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_UPDATED_WITH_US_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'us_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.EPIC_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'color';\n        },\n        key: 'TIMELINE.EPIC_UPDATED_WITH_NEW_COLOR',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'change';\n        },\n        key: 'TIMELINE.EPIC_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'user' && event.type === 'create';\n        },\n        key: 'TIMELINE.NEW_USER',\n        translate_params: ['username']\n      }\n    ];\n    return _.find(types, function(obj) {\n      return obj.check(timeline, event);\n    });\n  };\n\n  UserTimelineType = (function() {\n    function UserTimelineType() {}\n\n    UserTimelineType.prototype.getType = function(timeline, event) {\n      return timelineType(timeline, event);\n    };\n\n    return UserTimelineType;\n\n  })();\n\n  angular.module(\"taigaUserTimeline\").service(\"tgUserTimelineItemType\", UserTimelineType);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserTimelineItemDirective;\n\n  UserTimelineItemDirective = function() {\n    return {\n      templateUrl: \"user-timeline/user-timeline-item/user-timeline-item.html\",\n      scope: {\n        timeline: \"=tgUserTimelineItem\"\n      }\n    };\n  };\n\n  angular.module(\"taigaUserTimeline\").directive(\"tgUserTimelineItem\", UserTimelineItemDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserTimelinePaginationSequence;\n\n  UserTimelinePaginationSequence = function() {\n    var obj;\n    obj = {};\n    obj.generate = function(config) {\n      var getContent, items, next, page;\n      page = 1;\n      items = Immutable.List();\n      config.minItems = config.minItems || 20;\n      next = function() {\n        items = Immutable.List();\n        return getContent();\n      };\n      getContent = function() {\n        return config.fetch(page).then(function(response) {\n          var data, pagination;\n          page++;\n          data = response.get(\"data\");\n          if (config.filter) {\n            data = config.filter(data);\n          }\n          if (config.map && data) {\n            data = data.map(config.map);\n          }\n          items = items.concat(data);\n          if (items.size < config.minItems && response.get(\"next\")) {\n            return getContent();\n          }\n          pagination = Immutable.Map({\n            items: items,\n            total: response.get(\"total\"),\n            next: response.get(\"next\")\n          });\n          return pagination;\n        });\n      };\n      return {\n        next: function() {\n          return next();\n        }\n      };\n    };\n    return obj;\n  };\n\n  angular.module(\"taigaUserTimeline\").factory(\"tgUserTimelinePaginationSequenceService\", UserTimelinePaginationSequence);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserTimelineController, mixOf, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  UserTimelineController = (function(superClass) {\n    extend(UserTimelineController, superClass);\n\n    UserTimelineController.$inject = [\"tgUserTimelineService\"];\n\n    function UserTimelineController(userTimelineService) {\n      this.userTimelineService = userTimelineService;\n      this.timelineList = Immutable.List();\n      this.scrollDisabled = false;\n      this.timeline = null;\n      if (this.projectId) {\n        this.timeline = this.userTimelineService.getProjectTimeline(this.projectId);\n      } else if (this.currentUser) {\n        this.timeline = this.userTimelineService.getProfileTimeline(this.user.get(\"id\"));\n      } else {\n        this.timeline = this.userTimelineService.getUserTimeline(this.user.get(\"id\"));\n      }\n      this.loadTimeline();\n    }\n\n    UserTimelineController.prototype.loadTimeline = function() {\n      this.scrollDisabled = true;\n      return this.timeline.next().then((function(_this) {\n        return function(response) {\n          _this.timelineList = _this.timelineList.concat(response.get(\"items\"));\n          if (response.get(\"next\")) {\n            _this.scrollDisabled = false;\n          }\n          return _this.timelineList;\n        };\n      })(this));\n    };\n\n    return UserTimelineController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  angular.module(\"taigaUserTimeline\").controller(\"UserTimeline\", UserTimelineController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserTimelineDirective;\n\n  UserTimelineDirective = function() {\n    return {\n      templateUrl: \"user-timeline/user-timeline/user-timeline.html\",\n      controller: \"UserTimeline\",\n      controllerAs: \"vm\",\n      scope: {\n        projectId: \"=projectid\",\n        user: \"=\",\n        currentUser: \"=\"\n      },\n      bindToController: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgUserTimeline\", UserTimelineDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var UserTimelineService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  UserTimelineService = (function(superClass) {\n    extend(UserTimelineService, superClass);\n\n    UserTimelineService.$inject = [\"tgResources\", \"tgUserTimelinePaginationSequenceService\", \"tgUserTimelineItemType\", \"tgUserTimelineItemTitle\"];\n\n    function UserTimelineService(rs, userTimelinePaginationSequenceService, userTimelineItemType, userTimelineItemTitle) {\n      this.rs = rs;\n      this.userTimelinePaginationSequenceService = userTimelinePaginationSequenceService;\n      this.userTimelineItemType = userTimelineItemType;\n      this.userTimelineItemTitle = userTimelineItemTitle;\n    }\n\n    UserTimelineService.prototype._valid_fields = ['status', 'subject', 'description_diff', 'assigned_users', 'assigned_to', 'points', 'severity', 'priority', 'type', 'attachments', 'is_iocaine', 'content_diff', 'name', 'estimated_finish', 'estimated_start', 'blocked', 'moveInBacklog', 'milestone', 'color', 'due_date', 'due_date_reason'];\n\n    UserTimelineService.prototype._invalid = [\n      {\n        check: function(timeline) {\n          var fieldKey, value_diff;\n          value_diff = timeline.get(\"data\").get(\"value_diff\");\n          if (value_diff) {\n            fieldKey = value_diff.get('key');\n            if (this._valid_fields.indexOf(fieldKey) === -1) {\n              return true;\n            } else if (fieldKey === 'attachments' && value_diff.get('value').get('new').size === 0) {\n              return true;\n            }\n          }\n          return false;\n        }\n      }, {\n        check: function(timeline) {\n          var event, value_diff;\n          event = timeline.get('event_type').split(\".\");\n          value_diff = timeline.get(\"data\").get(\"value_diff\");\n          return event[2] === 'change' && value_diff === void 0;\n        }\n      }, {\n        check: function(timeline) {\n          var event;\n          event = timeline.get('event_type').split(\".\");\n          return event[2] === 'delete';\n        }\n      }, {\n        check: function(timeline) {\n          var event;\n          event = timeline.get('event_type').split(\".\");\n          return event[1] === 'project' && event[2] === 'change';\n        }\n      }, {\n        check: function(timeline) {\n          return !!timeline.get(\"data\").get(\"comment_deleted\");\n        }\n      }, {\n        check: function(timeline) {\n          var event, value_diff;\n          event = timeline.get('event_type').split(\".\");\n          value_diff = timeline.get(\"data\").get(\"value_diff\");\n          if (value_diff && event[1] === \"task\" && event[2] === \"change\" && value_diff.get(\"key\") === \"milestone\") {\n            return timeline.get(\"data\").get(\"value_diff\").get(\"value\");\n          }\n          return false;\n        }\n      }\n    ];\n\n    UserTimelineService.prototype._isInValidTimeline = function(timeline) {\n      return _.some(this._invalid, (function(_this) {\n        return function(invalid) {\n          return invalid.check.call(_this, timeline);\n        };\n      })(this));\n    };\n\n    UserTimelineService.prototype._parseEventType = function(event_type) {\n      event_type = event_type.split(\".\");\n      return {\n        section: event_type[0],\n        obj: event_type[1],\n        type: event_type[2]\n      };\n    };\n\n    UserTimelineService.prototype._getTimelineObject = function(timeline, event) {\n      if (timeline.get('data').get(event.obj)) {\n        return timeline.get('data').get(event.obj);\n      }\n    };\n\n    UserTimelineService.prototype._attachExtraInfoToTimelineEntry = function(timeline, event, type) {\n      var title;\n      title = this.userTimelineItemTitle.getTitle(timeline, event, type);\n      timeline = timeline.set('title_html', title);\n      timeline = timeline.set('obj', this._getTimelineObject(timeline, event));\n      if (type.description) {\n        timeline = timeline.set('description', type.description(timeline));\n      }\n      if (type.member) {\n        timeline = timeline.set('member', type.member(timeline));\n      }\n      if (timeline.getIn(['data', 'value_diff', 'key']) === 'attachments' && timeline.hasIn(['data', 'value_diff', 'value', 'new'])) {\n        timeline = timeline.set('attachments', timeline.getIn(['data', 'value_diff', 'value', 'new']));\n      }\n      return timeline;\n    };\n\n    UserTimelineService.prototype._parseTimeline = function(response) {\n      var newdata;\n      newdata = Immutable.List();\n      response.get('data').forEach((function(_this) {\n        return function(item) {\n          var data, event, newItem, values_diff;\n          event = _this._parseEventType(item.get('event_type'));\n          data = item.get('data');\n          values_diff = data.get('values_diff');\n          if (values_diff && values_diff.count()) {\n            if (values_diff.has('is_blocked')) {\n              values_diff = Immutable.Map({\n                'blocked': values_diff\n              });\n            }\n            if (values_diff.has('milestone')) {\n              if (event.obj === 'userstory') {\n                values_diff = Immutable.Map({\n                  'moveInBacklog': values_diff\n                });\n              } else {\n                values_diff = values_diff.deleteIn(['values_diff', 'milestone']);\n              }\n            } else if (event.obj === 'milestone') {\n              values_diff = Immutable.Map({\n                'milestone': values_diff\n              });\n            }\n            return values_diff.forEach(function(value, key) {\n              var newItem, obj;\n              obj = Immutable.Map({\n                key: key,\n                value: value\n              });\n              newItem = item.setIn(['data', 'value_diff'], obj);\n              newItem = newItem.deleteIn(['data', 'values_diff']);\n              return newdata = newdata.push(newItem);\n            });\n          } else {\n            newItem = item.deleteIn(['data', 'values_diff']);\n            return newdata = newdata.push(newItem);\n          }\n        };\n      })(this));\n      return response.set('data', newdata);\n    };\n\n    UserTimelineService.prototype._addEntyAttributes = function(item) {\n      var event, type;\n      event = this._parseEventType(item.get('event_type'));\n      type = this.userTimelineItemType.getType(item, event);\n      return this._attachExtraInfoToTimelineEntry(item, event, type);\n    };\n\n    UserTimelineService.prototype.getProfileTimeline = function(userId) {\n      var config;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.users.getProfileTimeline(userId, page).then(function(response) {\n            return _this._parseTimeline(response);\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addEntyAttributes(obj);\n        };\n      })(this);\n      config.filter = (function(_this) {\n        return function(items) {\n          return items.filterNot(function(item) {\n            return _this._isInValidTimeline(item);\n          });\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    UserTimelineService.prototype.getUserTimeline = function(userId) {\n      var config;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.users.getUserTimeline(userId, page).then(function(response) {\n            return _this._parseTimeline(response);\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addEntyAttributes(obj);\n        };\n      })(this);\n      config.filter = (function(_this) {\n        return function(items) {\n          return items.filterNot(function(item) {\n            return _this._isInValidTimeline(item);\n          });\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    UserTimelineService.prototype.getProjectTimeline = function(projectId) {\n      var config;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.projects.getTimeline(projectId, page).then(function(response) {\n            return _this._parseTimeline(response);\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addEntyAttributes(obj);\n        };\n      })(this);\n      config.filter = (function(_this) {\n        return function(items) {\n          return items.filterNot(function(item) {\n            return _this._isInValidTimeline(item);\n          });\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    return UserTimelineService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaUserTimeline\").service(\"tgUserTimelineService\", UserTimelineService);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var IsolateClickDirective;\n\n  IsolateClickDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {\n      return el.on('click', (function(_this) {\n        return function(e) {\n          return e.stopPropagation();\n        };\n      })(this));\n    };\n    return {\n      link: link\n    };\n  };\n\n  angular.module(\"taigaUtils\").directive(\"tgIsolateClick\", IsolateClickDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WikiHistoryDiffDirective, module;\n\n  module = angular.module('taigaWikiHistory');\n\n  WikiHistoryDiffDirective = function() {\n    return {\n      templateUrl: \"wiki/history/wiki-history-diff.html\",\n      scope: {\n        key: \"<\",\n        diff: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgWikiHistoryDiff\", WikiHistoryDiffDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WikiHistoryEntryDirective, module;\n\n  module = angular.module('taigaWikiHistory');\n\n  WikiHistoryEntryDirective = function() {\n    var link;\n    link = function(scope, el, attr) {\n      return scope.singleHistoryEntry = scope.historyEntry.toJS();\n    };\n    return {\n      link: link,\n      templateUrl: \"wiki/history/wiki-history-entry.html\",\n      scope: {\n        historyEntry: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgWikiHistoryEntry\", WikiHistoryEntryDirective);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WikiHistoryController, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaWikiHistory\");\n\n  WikiHistoryController = (function() {\n    WikiHistoryController.$inject = [\"tgActivityService\"];\n\n    function WikiHistoryController(activityService) {\n      this.activityService = activityService;\n      taiga.defineImmutableProperty(this, 'historyEntries', (function(_this) {\n        return function() {\n          return _this.activityService.entries;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'disablePagination', (function(_this) {\n        return function() {\n          return _this.activityService.disablePagination;\n        };\n      })(this));\n      this.toggle = false;\n    }\n\n    WikiHistoryController.prototype.initializeHistory = function(wikiId) {\n      if (wikiId) {\n        this.activityService.init('wiki', wikiId);\n      }\n      return this.loadHistory();\n    };\n\n    WikiHistoryController.prototype.loadHistory = function() {\n      return this.activityService.fetchEntries();\n    };\n\n    WikiHistoryController.prototype.nextPage = function() {\n      return this.activityService.nextPage();\n    };\n\n    return WikiHistoryController;\n\n  })();\n\n  module.controller(\"WikiHistoryCtrl\", WikiHistoryController);\n\n}).call(this);\n\n\n/*\n * This source code is licensed under the terms of the\n * GNU Affero General Public License found in the LICENSE file in\n * the root directory of this source tree.\n *\n * Copyright (c) 2021-present Kaleidos INC\n */\n\n(function() {\n  var WikiHistoryDirective, bindOnce, module;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module('taigaWikiHistory');\n\n  WikiHistoryDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return bindOnce(scope, 'vm.wikiId', function(value) {\n        return ctrl.initializeHistory(value);\n      });\n    };\n    return {\n      scope: {},\n      bindToController: {\n        wikiId: \"<\"\n      },\n      controller: \"WikiHistoryCtrl\",\n      controllerAs: \"vm\",\n      templateUrl: \"wiki/history/wiki-history.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgWikiHistory\", WikiHistoryDirective);\n\n}).call(this);\n\n//# sourceMappingURL=maps/app.js.map\n"],"names":["configure","i18nInit","init","oldWindowOpen","pluginsWithModule","taiga","this","emojis","window","taigaContribPlugins","generateHash","components","_","map","x","JSON","stringify","hex_sha1","join","generateUniqueSessionIdentifier","date","Date","getTime","randomNumber","Math","floor","random","sessionId","open","url","name","config","startsWith","document","baseURI","$routeProvider","$locationProvider","$httpProvider","$provide","$tgEventsProvider","$compileProvider","$translateProvider","$translatePartialLoaderProvider","$animateProvider","$logProvider","originalWhen","userInfo","classNameFilter","when","path","route","resolve","angular","extend","languageLoad","$q","$translate","deferred","defer","then","promise","projectLoaded","projectService","$route","ref","setSection","current","$$route","section","params","pslug","setProjectBySlug","cleanProject","call","templateUrl","controller","controllerAs","loader","title","description","joyride","reloadOnSearch","access","requiresLogin","template","redirectTo","disableHeader","taigaConfig","publicRegisterEnabled","mobileViewport","otherwise","html5Mode","enabled","requireBase","defaultHeaders","Content-Type","Accept-Language","defaultLanguage","X-Session-Id","defaults","headers","patch","post","put","get","useApplyAsync","setSessionId","factory","$location","$navUrls","$lightboxService","errorHandlingService","$injector","urls","storage","retry","inProgress","responseError","response","includes","status","cancelable","closeAll","error","indexOf","Promise","reject","refreshToken","search","$http","removeUser","remove","refreshTokenReponse","responseRefresh","set","data","auth_token","refresh","Authorization","result","errorToken","nextUrl","force_next","location","href","err","apiUrl","request","interceptors","push","loaderService","logRequest","requestError","rejection","logResponse","version","element","injector","invoke","$confirm","versionErrorMsg","instant","notify","redirectToBlockedPage","block","blocked_code","debugInfoEnabled","debugInfo","preferedLangCode","localStorage","parse","lang","addPart","useLoader","urlTemplate","_version","useSanitizeValueStrategy","addInterpolation","preferredLanguage","useMissingTranslationHandlerLog","fallbackLanguage","decorators","getDecorators","each","decorator","provider","debugEnabled","debug","console","info","moment","locale","querySelector","setAttribute","ljs","load","messages","defaultMessage","type","email","urlstrict","number","digits","dateIso","alphanum","phone","notnull","notblank","required","regexp","min","max","range","minlength","maxlength","rangelength","mincheck","maxcheck","rangecheck","equalto","linewidth","pikaday","checksley","updateMessages","$log","$rootscope","$auth","$events","$analytics","$tagManager","$userPilot","appMetaService","navigationBarService","lightboxService","$tgConfig","un","$on","updateValidators","val","width","lines","nl2br","split","every","line","length","prettyDate","isValid","RegExp","test","contribPlugins","adminPlugins","filter","authPlugins","userSettingsPlugins","e","ctx","language","rtlLanguages","isRTL","translations","translationTable","getTranslationTable","lan","setupConnection","isAuthenticated","getUser","initialize","identify","event","getLightboxOpen","preventDefault","next","start","project","setAll","addMobileViewport","removeMobileViewport","enableHeader","module","value","plugin","pluginsModules","modules","concat","run","child","parent","key","hasProp","ctor","constructor","prototype","__super__","TaigaBase","TaigaController","TaigaService","hasOwnProperty","apply","arguments","fn","me","onInitialDataError","xhr","notfound","permissionDenied","q","Base","Service","Controller","DEFAULT_COLOR_LIST","findScope","getDefaulColorList","getMatches","getRandomDefaultColor","isEmail","isImage","isPdf","normalizeString","randomInt","item","i","l","slice","addClass","el","className","classList","add","str","replace","bindMethods","object","dependencies","keys","methods","forIn","isFunction","bindAll","bindOnce","scope","attr","continuation","delBind","$eval","$watch","mixOf","method","base","mixins","Mixed","trim","char","slugify","toString","toLowerCase","unslugify","capitalize","toggleText","texts","nextTextPosition","text","groupBy","coll","pred","len","timeout","wait","setTimeout","cancelTimeout","timeoutVar","clearTimeout","scopeDefer","func","$apply","isNumber","isString","isPlainObject","isUndefined","joinStr","debounce","leading","trailing","debounceLeading","startswith","str1","str2","truncate","maxLength","suffix","out","String","substring","lastIndexOf","sizeFormat","input","precision","units","isNaN","parseFloat","isFinite","log","pow","toFixed","stripTags","exception","pattern","replaceTags","tags","defineImmutableProperty","obj","Object","defineProperty","fn_result","isObject","size","mixin","removeKeys","chain","flatten","reduce","cartesianProduct","reduceRight","a","b","y","match","oldImmutable","newImmutable","pathObj","forEach","newValue","toJS","sample","clone","string","regex","index","matches","exec","end","interval","normalizedString","$scope","condition","$parent","PageMixin","FiltersMixin","UsFiltersMixin","fillUsersAndRoles","users","roles","computableRoles","activeUsers","user","is_active","sortBy","activeUsersById","id","usersById","members","uniq","loadUsersAndRoles","_this","all","rs","projects","usersList","projectId","rolesList","results","excludePrefix","selectFilter","mode","existing","compact","isInCurrentRouteParams","noreload","replaceFilter","replaceAllFilters","filters","unselectFilter","parsedValues","newValues","isEmpty","applyStoredFilters","projectSlug","validKeys","getFilters","pick","storeFilters","filtersHashSuffix","hash","formatSelectedFilters","list","urlIds","selectedFilters","selectedIds","it","invalidTags","find","sit","invalidAppliedTags","dataType","validAppliedTags","color","filterCategories","excludeFilters","changeQ","filterQ","filtersReloadContent","removeFilter","generateFilters","addFilter","newFilter","category","selectCustomFilter","customFilter","saveCustomFilter","excludeKey","urlfilters","filterRemoteStorageService","storeCustomFiltersName","userFilters","removeCustomFilter","isFilterDataTypeSelected","filterDataType","milestone","loadFilters","storeFiltersName","userstories","filtersData","j","len1","ref1","selected","tagsWithAtLeastOneElement","customFiltersRaw","dataCollection","statuses","tag","count","assigned_users","full_name","assigned_to","role","owner","owners","epic","epics","subject","translate","content","hideEmpty","totalTaggedElements","customFilters","forOwn","$translateMissingTranslationHandlerLog","translationId","$inject","displayName","LoginPage","currentUserService","$routeParams","decodeURIComponent","clear","removeToken","AuthService","superClass","rootscope","model","http","config1","userpilot","currentUserService1","themeService","analytics","userModel","_currentTheme","_getUserTheme","setUserdata","userData","Immutable","fromJS","getAttrs","setUser","setUserId","compiledThemes","_taigaAvailableThemes","defaultTheme","theme","ref2","_setTheme","newTheme","use","_setLocales","make_model","auth","setRefreshToken","token","getRefreshToken","setToken","getToken","$broadcast","login","logout","register","getInvitation","invitations","acceptInvitiationWithNewUser","forgotPassword","changePasswordFromRecovery","changeEmail","cancelAccount","exportProfile","sendVerificationEmail","service","directive","$config","templates","restrict","encodeURIComponent","$window","link","$el","$attrs","onError","onSuccess","submit","form","Form","defaultLoginEnabled","trackEvent","onKeyUp","currentTarget","iscapsLockActivated","loginFormType","validate","username","password","on","prerenderReady","off","onErrorSubmit","onSuccessSubmit","onlyOneErrorElement","_error_message","setErrors","message","success","$params","tokenInParams","loginForm","onErrorSubmitLogin","onErrorSubmitRegister","onSuccessSubmitLogin","onSuccessSubmitRegister","registerForm","submitRegister","invitation","dataLogin","project_slug","project_name","submitLogin","invitation_token","dataRegister","$repo","$model","email_token","queryOne","cancel_token","onresize","home","not-found","permission-denied","discover","discover-search","forgot-password","change-password","change-email","verified-email","cancel-account","create-project","create-project-scrum","create-project-kanban","create-project-duplicate","create-project-import","create-project-import-platform","profile","user-profile","blocked-project","project-detail-ref","project-backlog","project-taskboard","project-kanban","project-issues","project-epics","project-search","project-timeline","project-epics-detail","project-userstories-detail","project-tasks-detail","project-issues-detail","project-wiki","project-wiki-list","project-wiki-page","project-team","project-admin-home","project-admin-project-profile-details","project-admin-project-profile-default-values","project-admin-project-profile-modules","project-admin-project-profile-export","project-admin-project-profile-reports","project-admin-project-values-status","project-admin-project-values-points","project-admin-project-values-priorities","project-admin-project-values-severities","project-admin-project-values-types","project-admin-project-values-custom-fields","project-admin-project-values-tags","project-admin-project-values-due-dates","project-admin-project-values-kanban-power-ups","project-admin-memberships","project-admin-roles","project-admin-third-parties-webhooks","project-admin-third-parties-github","project-admin-third-parties-gitlab","project-admin-third-parties-bitbucket","project-admin-third-parties-gogs","project-admin-contrib","user-settings-user-profile","user-settings-user-change-password","user-settings-user-avatar","user-settings-user-project-settings","user-settings-mail-notifications","user-settings-live-notifications","user-settings-web-notifications","user-settings-contrib","notifications","$navurls","update","QueueModelTransformation","i18n","previousMonth","nextMonth","months","weekdays","weekdaysShort","firstDay","parseInt","format","$document","getSelection","selection","createRange","CheckPermissionDirective","render","permission","removeClass","unObserve","unwatch","tgCheckPermission","$observe","unbindWatcher","checkPermissions","negation","my_permissions","classes","animationFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","performAnimation","time","tail","shift","slug","is_backlog_activated","is_kanban_activated","is_wiki_activated","is_issues_activated","lastPromise","qqueue","bindAdd","args","qqueue1","repo","model1","setObject","scope1","prop","attrs","cloneDeep","_attrs","_name","getObj","save","transformation","defered","comment","modified","omit","_modifiedAttrs","assign","$templateCache","lodash","tmp","svgIcon","svgTitle","svgTitleTranslate","svgTitleTranslateValues","svgFill","$timeout","$parse","$element","ngShow","focus","spinner","preload","src","onLoad","image","Image","onload","transclude","show","prepend","hide","DetailController","navurls","issue","task","us","wikipage","EventsService","win","liveAnnouncementService1","rootScope","liveAnnouncementService","processMessage","EventsProvider","subscriptions","connected","pendingMessages","reconnectTryInterval","maxConnectionErrors","errors","missedHeartbeats","heartbeatInterval","WebSocket","loc","scheme","stopExistingConnection","protocol","trimStart","host","ws","addEventListener","onOpen","onMessage","onClose","removeEventListener","stopHeartBeatMessages","close","subscribe","desc","$digest","liveNotifications","userId","notification","Notification","icon","body","onshow","onclick","requestPermission","webNotifications","routingKey","startHeartBeatMessages","maxMissedHeartbeats","heartbeatIntervalTime","setInterval","Error","sendMessage","cmd","error1","clearInterval","processHeartBeatPongMessage","serialize","msg","send","subscription","routing_key","callback","options","unsubscribe","randomTryInterval","$get","$win","$conf","$rootScope","$loading","feedbackService","currentLoading","target","submitButton","create","feedback","finish","openLightbox","$compile","$template","$emojis","templateView","templateEdit","saveTask","renderEdit","childScope","$destroy","$new","html","keyCode","$modelValue","renderView","perms","modify_task","delete_task","emojify","replaceEmojiNameByHtmlImgs","escape","select","askOnDelete","askResponse","$emit","ngModel","require","$tgmodel","newTask","createTask","default_task_status","openNewRelatedTask","reset","_isVisible","reorderTask","newIndex","showAddTaks","showRelatedTasks","avatarService","$lightboxFactory","updateRelatedTask","member","avatar","getAvatar","imgurl","bg","full_name_display","tgRelatedTaskAssignedToInlineEdition","autoSave","notAutoSave","stopPropagation","class","currentUsers","assignedUsers","pop","single","lbTitle","unbind","ResourcesService","auth-register","by_username","users-password-recovery","users-change-password-from-recovery","users-change-password","users-change-email","users-cancel-account","users-export","user-stats","user-liked","user-voted","user-watched","user-contacts","user-me","user-send-verification-email","permissions","notify-policies","user-project-settings","user-storage","memberships","bulk-create-memberships","resolver","project-templates","project-modules","bulk-update-projects-order","project-like","project-unlike","project-watch","project-unwatch","project-contact","project-transfer-validate-token","project-transfer-accept","project-transfer-reject","project-transfer-request","project-transfer-start","epic-statuses","userstory-statuses","userstory-due-dates","userstory-due-dates-create-default","points","task-statuses","task-due-dates","task-due-dates-create-default","issue-statuses","issue-due-dates","issue-due-dates-create-default","issue-types","priorities","severities","milestones","move-userstories-to-milestone","move-tasks-to-milestone","move-issues-to-milestone","epic-upvote","epic-downvote","epic-watch","epic-unwatch","epic-related-userstories","epic-related-userstories-bulk-create","bulk-create-us","bulk-update-us-backlog-order","bulk-update-us-milestone","bulk-update-us-miles-order","bulk-update-us-kanban-order","userstories-filters","userstory-upvote","userstory-downvote","userstory-watch","userstory-unwatch","tasks","bulk-create-tasks","bulk-update-task-taskboard-order","bulk-update-task-milestone","task-upvote","task-downvote","task-watch","task-unwatch","task-filters","promote-task-to-us","issues","bulk-create-issues","bulk-update-issue-milestone","issues-filters","issue-upvote","issue-downvote","issue-watch","issue-unwatch","promote-issue-to-us","swimlanes","swimlane-userstory-statuses","wiki","wiki-restore","wiki-links","history/epic","history/us","history/issue","history/task","history/wiki","attachments/epic","attachments/us","attachments/issue","attachments/task","attachments/wiki_page","attachments/wikipage","attachments/wiki","custom-attributes/epic","custom-attributes/userstory","custom-attributes/task","custom-attributes/issue","custom-attributes-values/epic","custom-attributes-values/userstory","custom-attributes-values/task","custom-attributes-values/issue","webhooks","webhooks-test","webhooklogs","webhooklogs-resend","epics-csv","userstories-csv","tasks-csv","issues-csv","timeline-profile","timeline-user","timeline-project","exporter","importer","locales","applications","application-tokens","stats-discover","importers-trello-auth-url","importers-trello-authorize","importers-trello-list-projects","importers-trello-list-users","importers-trello-import-project","importers-jira-auth-url","importers-jira-authorize","importers-jira-list-projects","importers-jira-list-users","importers-jira-import-project","importers-github-auth-url","importers-github-authorize","importers-github-list-projects","importers-github-list-users","importers-github-import-project","importers-asana-auth-url","importers-asana-authorize","importers-asana-list-projects","importers-asana-list-users","importers-asana-import-project","initUrls","$urls","initResources","$rs","providers","toArray","SearchController","navUrls","projectService1","sectionName","loadInitialData","projectName","projectDescription","searchTerm","t","loadSearchData","searchResults","term","loadProject","epicStatusById","epic_statuses","issueStatusById","issue_statuses","taskStatusById","task_statuses","severityById","priorityById","usStatusById","us_statuses","loading","_loadSearchData","_promise","abort","SearchBoxDirective","reload","$templatecache","$routeparams","linkTable","$ctrl","applyAutoTab","activeSectionName","tabsDom","currentSearchResults","getActiveSection","maxVal","selectedSection","renderFilterTabs","markSectionTabActive","wikipages","renderTableContent","oldElements","children","oldScope","parseHTML","activeSection","trackPage","sectionData","searchText","AnalyticsService","doc","initialized","conf","accountId","pageEvent","trackRoutes","ignoreFirstPageLoad","injectAnalytics","ga","getUrl","uuid","s","o","g","r","m","createElement","getElementsByTagName","async","parentNode","insertBefore","page","action","label","ecViewPlan","plan","plan_id","quantity","position","ecClickPlan","ecListPlans","arg","plans","ecAddToCart","plan_name","plan_price","price","ecConfirmChange","step","ecPurchase","revenue","jQuery","CompileHtmlDirective","tgCompileHtml","oldValue","contents","renderRange","first","second","startDate","endDate","tgDateRange","valFirst","valSecond","datePickerConfigService","datePickerConfig","merge","field","picker","Pikaday","destroy","setDate","renderProgress","percentage","visual_percentage","hasClass","css","tgSprintProgressbar","sprint","closedPoints","closed_points","totalPoints","total_points","round","owner_extra_info","created_date","tgUserId","isEditable","onDeleteGoToUrl","onDeleteTitle","subtitle","tgListitemEpicStatus","tgListitemUsStatus","tgListitemTaskStatus","tgListitemAssignedto","tgListitemIssueStatus","issueTypeById","domNode","tgListitemType","priority","tgListitemPriority","severity","tgListitemSeverity","tgProgressBar","i18nSectionName","NOTIFICATION_MSG","light-error","ConfirmService","ask","lightboxSelector","currentWidth","ok","askDelete","lightbox","askChoice","choices","replacement","warning","choicesField","append","detailImage","svgContainer","useSVG","$","createElementNS","setAttributeNS","appendChild","spin","stop","percent","selector","tsem","one","DATE_TYPE","DROPDOWN_TYPE","CHECKBOX_TYPE","NUMBER_TYPE","CustomAttributesValuesController","confirm","objectId","customAttributes","customAttributesValues","loadCustomAttributesValues","getAttributeValue","attribute","attributeValue","attributes_values","updateAttributeValue","attributesValues","$templates","$storage","collapsedHash","$ctrls","collapsed","toggleCollapse","requiredEditionPerm","$selectedText","wysiwygService","setFocusAndSelectOnInputField","edit","editable","attributeHtml","getHTML","extra","onSelect","selectedDate","saveCustomRichText","markdown","cancelCustomRichText","formControl","checked","tgCustomAttributeValue","customAttributeValue","bind","EmojisService","replaceEmojiNameByImgs","replaceImgsByEmojiName","getEmojiByName","getEmojiById","searchByName","emojisById","keyBy","emojisByName","emojiId","regexImgs","emojiIds","emoji","escapeRegExp","$tgEstimationsService","estimationProcess","onSelectedPointForRole","roleId","pointId","$setViewValue","calculateTotalPoints","calculateRoles","$modelTransform","$watchCollection","$qqueue","EstimationProcess","pointsTemplate","$el1","us1","project1","bindClickEvents","pointsById","revert","values","v","k","notNullValues","acc","num","pointObj","renderPointsSelector","siblings","popover","point","horizontalList","some","horizontal","closest","offset","top","height","clientHeight","defaultValue","without_suffix","fromNow","memoizedMutable","memoize","js","List","$filterFilter","cleanRef","substr","luminosity","c","newColor","wysiwigService","$filter","arrayFilter","listItem","unescape","LightboxService","LightboxKeyboardNavigationService","onEsc","ignoreEsc","lightboxContent","not","firstField","activeElement","blur","which","$applyAsync","docEl","removeAttr","lightboxEl","dispatch","code","prev","trigger","$attr","visible","elm","$tgrepo","unblock","finishCallback","transform","is_blocked","blocked_note","ngmodel","watch","getCurrentStatus","displayStatusSelector","currentStatus","statusId","toggleStatus","displayStatus","hideStatus","setStatus","swimlaneId","bulk","us_position","swimlane","default_swimlane","bulkCreate","swimlane_id","parents","due_date","new_due_date","unit","due_date_reason","attachmentsService","checkClose","createAttachments","deleteAttachments","getSchema","mount","resetAttachments","saveItem","sprintChangeConfirmAndSave","schema","attachmentsToAdd","attachmentsToDelete","schemas","objName","include_attachments","include_tasks","translationID","translationIDPlural","statusList","initialData","default_us_status","is_archived","sprintId","user_story","usId","typeById","issue_types","typeList","severityList","priorityList","milestonesById","default_priority","default_severity","default_issue_status","default_issue_type","setMode","getOrCreate","existingFilterText","listInAllProjects","existingItems","copy","objType","attachments","lightboxOpen","addAttachment","attachment","deleteAttachment","addTag","projectTags","tags_colors","itemtags","deleteTag","pull","promises","upload","file","addExistingToSprint","oldSprintName","newSprintName","relatedObjectId","setAttr","relatedField","isDisabledExisting","broadcastEvent","isLoading","getByRef","isModified","team_requirement","client_requirement","is_iocaine","isTeamRequirement","isClientRequirement","selectedStatus","is_closed","templateScope","compiledTemplate","$tgCurrentUserService","tgResources","$tgResources","$epicsService","tgAnalytics","existingEpicForm","filterEpics","loadProjects","newEpicForm","selectProject","projectEpics","selectedProject","selectedProjectId","filterText","is_epics_activated","project__blocked_code","excludeIds","filteredData","selectedEpic","searchEpic","onUpdateSearchEpic","saveRelatedEpic","selectedEpicId","onSavedRelatedEpic","addRelatedUserstory","createEpic","epicSubject","onCreateEpic","epicId","compile","$event","Loader","tgLoader","onStart","onEnd","minTime","startLoadTime","requestCount","lastResponseDate","pageLoaded","force","timeoutValue","diff","autoClose","intervalAuto","auto","TgLoadingService","settings","removeClasses","classess","timeoutId","tgLoading","showLoading","usStatusDomParent","usStatusDom","statusElement","tgUsStatus","onUpdate","selectionTemplate","updateTaskStatus","taskStatusDomParent","taskStatusDom","tgRelatedTaskStatus","isVisible","docViewBottom","docViewRight","docViewTop","elemBottom","elemLeft","elemTop","elemWidth","display","visibility","scrollTop","left","elemRight","closePopover","fadeOut","fadeIn","globalPopover","cb","createSvg","elementPosition","followElement","ul","wrapper","attrHref","tgSvg","svg","xlink","createAttribute","setAttributeNode","rect","getBoundingClientRect","right","paddingTop","paddingLeft","style","option","li","button","innerHTML","createTextNode","ravenConfig","Raven","install","cause","captureException","SectionsService","SECTIONS","1","2","3","4","5","6","getPath","sectionId","defaultHomePage","p","TagManagerService","injectTagManager","w","d","gtm.start","f","dl","formatter","isArray","parser","$formatters","$parsers","tgColorizeBacklogTags","templateTags","autocomplete","withoutColors","has","renderTags","tagsColors","showSaveButton","hideSaveButton","resetInput","addValue","deleteValue","saveInputTag","fromCharCode","Awesomplete","UserPilotService","checkZendeskConditions","hasPaidPlan","is_new_user","getJoinedLimit","userPilotCustomer","userPilotId","getItem","calculateUserPilotId","prepareUserPilotCustomer","zE","setZendeskWidgetStatus","created_at","now","taiga_id","taiga_username","taiga_date_joined","taiga_lang","taiga_max_private_projects","taiga_max_memberships_private_projects","taiga_verified_email","taiga_total_private_projects","taiga_total_public_projects","taiga_roles","maxPrivateProjects","limit","getDate","supress","webWidget","chat","suppress","contactForm","helpCenter","talk","answerBot","getLastSprint","openFn","resetSprint","ussToAdd","hasErrors","createSprint","newSprint","createEditOpen","estimated_start","estimated_finish","estimated_end","realClone","sprintsCounter","sprints","__all__","milestonesCounter","openSprints","closed","sortedSprints","uss","lastSprint","lastSprintNameDom","estimatedStart","estimatedFinish","editSprint","BacklogController","params1","events","rs2","modelTransform","backlogOrder","milestonesOrder","disablePagination","firstLoadComplete","translationData","totalUserStories","pendingDrag","noSwimlaneUserStories","swimlanesList","validQueryParams","showTags","activeFilters","showGraphPlaceholder","displayVelocity","initializeEventHandlers","loadSwimlanes","getShowTags","newUs","preloadUsIds","usIds","loadNextPage","lastLoadUserstoriesParams","only_ref","listUnassigned","header","storeBacklog","loadUserstories","loadProjectStats","els","moveUsToTopOfBacklog","ussToMove","loadSprints","toggleVelocityForecasting","loadClosedSprints","findIndex","moveUs","resetFirstStoryIndicator","unloadClosedSprints","initializeSubscription","routingKey1","loadAllPaginatedUserstories","routingKey2","selfNotification","toggleShowTags","storeShowTags","toggleActiveFilters","calculateForecasting","visibleUserStories","forecastedStories","stats","defined_points","completedPercentage","total_milestones","setMilestonesOrder","user_stories","results1","sprint_order","closedSprints","totalClosedMilestones","closedSprintsById","totalMilestones","totalOpenMilestones","sprintsById","currentSprint","findCurrentSprint","resetPagination","pageSize","loadingUserstories","storeQueryParams","parseLoadUserstoriesResponse","backlog_order","loadBacklog","getLinkParams","ParsedLastLoadUserstoriesParams","pickBy","identity","sprintTotalPoints","backlog_points_sum","forecastNewSprint","speed","closedMilestones","total_closed_milestones","usStatusList","toggleTags","prepareBulkUpdateData","uses","us_id","order","first_us_in_backlog","nextUs","Array","usList","newUsIndex","newSprintId","previousUs","bulkUserstories","currentSprintId","len2","targetList","oldSprintId","splice","bulkUpdateBacklogOrder","updatedUs","n","len3","updateUserStoryStatus","editUserStory","deleteUserStory","without","addNewUs","addNewSprint","currentDate","addFilterBacklog","removeFilterBacklog","doomLineTemplate","linkDoomLine","reloadDoomLine","current_sum","domElement","removeDoomlineDom","assigned_points","addDoomLineDom","before","linkToolbar","checkSelected","lastChecked","shiftPressed","getUsToMove","ussDom","itemScope","moveUssToSprint","selectedUss","ussCurrent","extraPoints","totalExtraPoints","union","bulkUpdateMilestone","moveToCurrentSprint","moveToLatestSprint","partial","toggleClass","moveToSprintDom","shiftKey","elements","prevAll","nextAll","nextUntil","prevUntil","showHideTags","ussToMoveList","openFilterInit","showHideFilter","linkFilters","filtersSearch","$tgTemplate","mainTemplate","removePopupOpenState","contains","roleName","is","rolesTemplate","bindClickElements","renderRolesSelector","updatingSelectedRoleId","selectedRoleId","tgBacklogUsPoints","popRolesDom","firstLoad","toggleGraph","isBurndownGraphCollapsed","redrawChart","dataToDraw","zero_line","milestonesRange","ml","zip","fillColor","optimal_line","optimal","evolution_line","evolution","client_increment_line","team_increment_line","colors","grid","borderWidth","bottom","borderColor","hoverable","margin","xaxis","ticks","axisLabel","axisLabelUseCanvas","axisLabelFontSizePixels","axisLabelFontFamily","axisLabelPadding","tickFormatter","axis","yaxis","series","shadowSize","fill","radius","lineWidth","tooltip","tooltipOpts","xval","yval","flotItem","seriesIndex","sprintName","abs","empty","plot","projectPointsPercentaje","closedPointsPercentaje","adjustPercentaje","adjusted","tgBacklogProgressBar","definedPoints","deleteElement","ctrl","drake","initIsBacklog","oldIndex","emptyBacklog","dragula","copySortSource","isContainer","moves","source","sibling","dataset","Number","container","parentEl","dragMultiple","firstElement","dragMultipleItems","getElements","sameContainer","isBacklog","autoScroll","pixels","scrollWhenOutside","down","dragging","SprintDirective","slideOptions","duration","easing","toggleSprint","sprintTable","tgBacklogSprint","slideToggle","taskboardUrl","estimatedDateRange","excludeClosedSprints","loadingElm","after","days","utc","day","unshift","open_points","optimal_points","tickSize","last","daysNames","formattedDate","roundedValue","TaskboardController","rs1","q1","taskboardTasksService","taskboardIssuesService","lightboxFactory","timeout1","openFilter","backToBacklogUrl","usTasks","taskMap","milestoneIssues","tasksByUs","milestoneIssue","issuesRaw","rawIssue","getQueryParams","_setMeta","setZoom","zoomLevel","zoom","previousZoomLevel","isFirstLoad","resetFolds","zoomLoading","loadTasks","loadIssues","completedPoints","completedPointsSum","totalPointsSum","openTasks","totalTasks","total_tasks","refreshTagsColors","replaceModel","taskMove","onAssignedToChanged","itemsMoved","userid","getName","loadTaskboard","loadSprintStats","loadSprint","pointsList","roleById","taskStatusList","res","completed_points","remainingPointsSum","remainingTasks","completed_tasks","setUserstories","locationParams","listInProject","initIssues","notFoundTasks","initialLoad","sslug","getSprintShowTags","setRolePoints","storeSprintShowTags","showPlaceHolder","tasksRaw","editTask","getTask","getIn","editingTask","editIssue","getIssue","editingIssue","deleteTask","deletingTask","deleteIssue","deletingIssue","removeIssueFromSprint","removingIssue","oldStatusId","movingTask","getTaskModel","moveUpdateData","move","status__is_archived","set-orders","set_orders","reloadUserStory","assignOrders","userStoryId","addNewTask","addNewIssue","targetName","toggleFold","modelName","openUsersSelection","changeTaskAssignedTo","changeIssueAssignedTo","getIssueModel","getPoint","pointsByRole","getRole","getIssuesOrderBy","order_by","scrollLeft","getCeilWidth","recalculateStatusColumnWidth","recalculateTaskboardWidth","setStatusColumnWidth","statusesFolded","getStatusColumnModes","usFolded","getUsRowModes","foldStatus","storeStatusColumnModes","foldUs","rowId","storeUsRowModes","isStatusFolded","isUSFolded","columns","ceil","avatarWidth","statusFoldedWidth","initialWidth","total","filterError","initialContainer","itemEl","newParentScope","oldParentScope","$tgConfirm","containers","accepts","cancel","itemIndex","itemTask","newStatusId","newUsId","oldUsId","st","tableBody","TaskboardIssuesService","foldStatusChanged","issueId","issueModel","images","thumbnail_card_url","colorized_tags","TaskboardTasksService","Map","taskId","refreshRawOrder","taskboard_order","invert","afterDestination","beforeDestination","previous","previousWithTheSameOrder","setOrders","taskByUsStatus","taksWithoutMoved","task_id","taskModel","KanbanUserstoriesService","resetSwimlanesList","resetArchivedStatus","resetHideStatud","userstoriesRaw","usByStatus","usMap","usByStatusSwimlanes","statusHide","archivedStatus","refreshUserStory","initUsByStatusList","usModel","refreshSwimlanes","retrieveUserStoryData","addArchivedStatus","isUsInArchivedHiddenStatus","deleteStatus","showStatus","getStatus","toDelete","archived","difference","kanban_order","previousCard","nextCard","initialLength","previousUsIndex","previousUsOrder","usByStatusWithoutMoved","listIt","moveIt","getUsModel","afterUserstoryId","beforeUserstoryId","moveToEnd","usItem","getUs","assignedUserId","assignedUserData","assigned_users_preview","refreshUsMap","collection","emptySwimlaneExists","userstoriesNoSwimlane","emptySwimlane","insert","swimlaneUsByStatus","usListSwimlanes","CardSvgTemplate","KanbanController","kanbanUserstoriesService1","kanbanUserstoriesService","renderUserStories","changeUsAssignedUsers","movedUs","foldedSwimlane","renderBatching","isLightboxOpened","isRefreshNeeded","cleanSelectedUss","toggleSelectedUs","moveToTopDropdown","moveUsToTop","nextUsId","lastUsId","newOrder","loadUserStoriesForStatus","hideUserStoriesForStatus","refreshAfterSwimlanesOrUserstoryStatusesHaveChanged","fetchProject","randomTimeout","routingKeyUserstories","eventsLoadUserstories","routingKeyProject","editUs","editingUserStory","deleteUs","deletingUserStory","firstStatus","firstSwimlane","toggleSwimlane","kanban","storeSwimlanesModes","assignedUsersIds","renderBatch","clean","renderInProgress","take","queue","batchSize","rendered","drop","batchTimings","userstoriesMap","loadUserstoriesParams","modifiedUs","eventUserstories","pk","raw","listAll","newUss","archivedPromises","lastSearch","openArchived","loadPromises","archivedStatusId","archivedRedult","notFoundUserstories","filteredStatus","waitEmptyQuote","loadKanban","swimlanesStatuses","usCardVisibility","getSwimlanesModes","newSwimlaneId","apiNewSwimlaneId","bulkUpdateKanbanOrder","_tableBody","watchKanbanSize","kanbanStyles","getComputedStyle","columnMargin","getPropertyValue","resizeObserver","ResizeObserver","entries","column","offsetWidth","unobserve","setProperty","observe","board","initBoard","visibleEntries","entry","$evalAsync","taskColumnLoaded","addSwimlane","cardLoaded","addCard","isTableLoaded","kanbanTableLoaded","tableHeaderDom","openSwimlane","scroll","tgKanbanArchivedShowStatusHeader","tgKanbanArchivedStatusIntro","userStoriesLoaded","folds","unfold","archivedFolds","tgKanbanWipLimit","redrawWipLimit","cards","wipLimitClass","wip_limit","svgTemplate","vm","avatars","checkPermission","svgData","initializeZoom","onChange","ctrlKey","metaKey","onClickAssignedTo","dueDateService","emptyTask","dueDateColor","dueDate","isClosed","dueDateTitle","totalAttachments","openPopup","actions","getModifyPermisionKey","onClickEdit","getDeletePermisionKey","onClickDelete","isFirst","onClickMoveToTop","currentSwimlane","mouseleaveSwimlane","mouseoverSwimlane","querySelectorAll","dropTarget","finalUsList","newStatus","newSwimlane","oldSwimlaneId","oldStatus","tableLoaded","isSwimlane","EpicDetailController","attachmentsFullService","epicRef","epicref","attachmentsReady","initializeOnDeleteGoToUrl","epicStatus","statusById","epicDescription","description_html","loadAttachments","loadEpic","immutableProject","immutableEpic","commentModel","neighbors","previousUrl","listInEpic","onUpvote","upvote","onDownvote","downvote","onWatch","onUnwatch","onSelectColor","onSelectColorSuccess","onSelectColorError","IssueDetailController","issueRef","issueref","issueSubject","issueStatus","issueType","issueSeverity","issuePriority","ref3","issueDescription","loadIssue","milestoneId","typees","severityes","priorityes","existsMilestone","avaliableMilestones","selectedSprint","needle","haystack","toUpperCase","filterMilestones","saveIssueToSprint","IssuesController","voting","isOrderedBy","myFiltersHashSuffix","storeIssuesShowTags","fieldName","orderBy","types","issueStatusList","issueTypes","loadIssuesRequests","models","paginatedBy","getIssuesShowTags","addIssuesInBulk","linkPagination","$pagEl","getNumPages","numPages","renderPagination","cpage","pages","showPrevious","showNext","pagenum","linkOrdering","colHeadElement","currentOrder","finalOrder","updateIssueStatus","issueStatusDomParent","issueStatusDom","tgIssueStatusInlineEdition","_isModified","updateIssue","tgIssueAssignedToInlineEdition","UserStoryDetailController","configService","tgmodel","sce","usRef","usref","tribeEnabled","tribeHost","closedTasks","progressPercentage","userStoryRef","userStorySubject","descriptionHtml","getTrustedHtml","userStoryStatus","userStoryPoints","userStoryDescription","userStoryClosedTasks","userStoryTotalTasks","userStoryProgressPercentage","relateToEpic","allClosed","loadUs","kanbanHttpParams","locationSearch","backlogHttpParams","legacyChannel","onTribeInfo","publishTitle","alt","publishDesc","withoutMoved","orderList","us_order","fromPairs","reorder","canEdit","isRequired","TaskDetailController","taskRef","taskref","taskSubject","taskStatus","taskDescription","loadTask","loadUserStory","isIocaine","TeamController","setRole","filtersRole","loadMembers","totals","currentUser","issuesEnabled","tasksEnabled","wikiEnabled","loadMemberStats","memberStats","vals","statsKey","sum","_processStats","_processStat","stat","singleStat","userRoles","filtersQ","leaveConfirm","leave_project_text","confirm_leave_project_text","leave","isCurrentUser","WikiDetailController","attachmentsFullService1","moveLink","loadWiki","wikiSlug","linksVisible","wikiPageName","wikiPageContent","totalEditions","editions","lastModifiedDate","modified_date","wikiId","getBySlug","loadWikiLinks","listLinks","wikiLinks","checkLinksPerms","saveAll","last_modifier","wikiPage","activityService","editableDescription","saveDescription","fetchEntries","uploadFiles","default","storageKey","linkWikiLinks","addWikiLinkPermission","tdom","deleteWikiLinkPermission","direction","mirrorContainer","linkId","newLink","loadPromise","WikiPagesListController","loadWikiPages","ChangeOwnerLightboxController","lightboxService1","commentOpen","confirmService","transferRequest","filterUsers","getUsers","currentOwnerId","totalUsers","userSearch","selectUser","transferStart","lightboxKeyboardNavigationService","bindToController","MembershipsController","lightboxFactory1","i_am_admin","canAddUsers","max_memberships","total_memberships","httpFilters","getUrlFilters","membership","is_user_active","is_owner","projectOwnerEmail","user_email","addNewMembers","showLimitUsersWarningMessage","pending","isOwner","tgMembershipsRowAvatar","tgMembershipsRowAdminCheckbox","inputId","is_admin","roleList","selectedRole","tgMembershipsRowRoleSelector","newRole","tgMembershipsRowActions","resendInvitation","defaultMsg","ownerEmail","AdminNavigationDirective","tgAdminNavigation","CsvExporterTasksController","CsvExporterUserstoriesController","ProjectProfileController","tgAuth","CsvExporterController","_deleteUuid","_generateUuid","setCsvUuid","csvUrl","resolveAbsolute","CsvExporterEpicsController","CsvExporterIssuesController","epicStatusList","issueTypesList","prioritiesList","severitiesList","canCreatePrivateProjects","valid","openDeleteLightbox","privacyChanged","isAttributeModified","newUrl","is_private","initializeFields","newVal","oldVal","videoconferences_extra_data","videoconferences","isVideoconferenceActivated","buttonsEl","showButtons","hideButtons","resultEl","showResult","hideResult","spinnerEl","showSpinner","hideSpinner","resultTitleEl","loading_title","loading_msg","dump_ready_text","asyn_message","syn_message","setLoadingTitle","setAsyncTitle","setSyncTitle","resultMessageEl","setLoadingMessage","setAsyncMessage","setSyncMessage","showLoadingMode","showExportResultAsyncMode","showExportResultSyncMode","showErrorMode","dumpUrl","errorMsg","csvUuid","regenerateUuid","deleteUuid","sectionTitle","showSizeInfo","click","logoAttachment","changeLogo","removeLogo","modelSetter","tgProjectLogoModel","files","requestOwnership","canRequest","changeOwner","project-id","active-users","current-owner-id","ProjectValuesDirective","TYPE_CHOICES","defaultColor","ProjectValuesSectionController","ProjectValuesController","moveValue","loadValues","resource","ProjectSwimlanesValuesController","removeSwimlane","filterArchivedSwimlaneStatus","filterArchivedProjectStatuses","updatedSwimlanePosition","setDefaultSwimlane","updateSwimlane","ProjectDueDatesValuesController","displayValues","createDefaultValues","ProjectCustomAttributesController","moveCustomAttributes","deleteCustomAttribute","saveCustomAttribute","createCustomAttribute","loadCustomAttributes","_onCustomAttributesModified","ProjectTagsController","mixingClass","cancelMixingTags","confirmMixingTags","toggleMixingFromTags","startMixingTags","editTag","createTag","filterAndSortTags","loadTags","listValues","maxValueOrder","maxBy","itemValue","swimlaneAdded","hideSwimlaneForm","patch_default_swimlane","prevSwimlane","swimlanesOrderArrayFiltered","newSwimlanesOrder","bulkUpdateOrder","moveTo","isFormVisible","isNewSwimlane","displaySwimlaneForm","$animate","displaySwimlaneSingleForm","swimlaneSingleForm","getDefaultTitle","removeSwimlaneTitle","editSwimlaneSingleForm","cancelEditSwimlaneSingleForm","removeSwimlaneDialog","phase","deletingSwimlane","days_to_due_abs","days_to_due","sign","linkDragAndDrop","linkValue","goToBottomList","saveNewValue","saveValue","valueType","objname","initializeNewValue","initializeTextTranslations","addNewElementText","table","formEl","row","editionRow","onSucces","parentDirective","linkDueDateStatusValue","_setDaysToDue","_valueFromEventTarget","due_date_status_name","_parseAttributesExtra","_parseAttributeExtra","maxOrder","attrValues","attrModel","idx","_manageExtraFormEvent","_manageFormEvent","addExtraOption","cancelCreate","cancelUpdate","hideAddButton","hideCancelButton","hideCreateForm","hideEditForm","hideExtra","initAttrType","initDraggable","removeExtraOption","resetNewAttr","revertChangesInCustomAttribute","showAddButton","showCancelButton","showCreateForm","showEditForm","showExtra","isExtraVisible","sortableChildren","sortableEl","handle","childItem","itemAttr","attrExtra","sourceIndex","$index","targetIndex","newAttr","toggleExtraVisible","formExtraEl","formScope","projectTagsAll","tagsFilter","from_tag","to_tag","loadingDelete","mixingTags","toTag","fromTags","loadingMixing","mixTags","initializeTagsFilter","initializeMixingTags","originalTag","loadingEdit","loadingCreate","wipClosed","toggleWipVisibility","publicPermissions","RolesController","_disableComputable","_enableComputable","anyComputableRole","computable","loadRoles","public_permission","external_user","public_permissions","forceLoadProject","askOnSuccess","askOnError","toggleComputable","toggleView","toggle","DEFAULT_PERMISSIONS","insertPosition","resumeTemplate","categoryTemplate","baseTemplate","generateCategoriesFromRole","setActivePermissions","active","isPermissionEditable","setActivePermissionsPerCategory","cat","activePermissions","categories","renderResume","renderCategory","renderPermissions","getActivePermissions","categoryId","anon_permissions","WebhooksController","loadWebhooks","GithubController","GitlabController","loadModules","BitbucketController","GogsController","webhook","tgWebhook","updateLogs","validStatus","prettySentHeaders","toPairs","request_headers","prettySentData","request_data","created","logs_counter","logs","updateShowHideHistoryText","textElement","showVisualizationMode","showEditMode","openHistory","resend","formDOMNode","addWebhookDOMNode","github","gitlab","bitbucket","execCommand","saveAttribute","$ngModel","gogs","GogsWebhooksDirective","projectToDelete","BindOnceBindDirective","tgBoBind","BindOnceHtmlDirective","tgBoHtml","BindOnceRefDirective","tgBoRef","BindOnceSrcDirective","tgBoSrc","BindOnceHrefDirective","tgBoHref","BindOnceAltDirective","tgBoAlt","BindOnceTitleDirective","tgBoTitle","BindTitleDirective","tgTitleHtml","BindHtmlDirective","tgBindHtml","ConfigurationService","ContribController","currentPlugin","head","ContribUserSettingsController","FiltersStorageService","HttpService","cacheFactory","cache","removeAll","responseType","tgLoadElement","legacyObj","component","locationFactory","lastRoute","Model","dataTypes","_dataTypes","setAttrs","instance","applyCasts","attrName","castName","castMethod","casts","getIdAttrName","self","getter","setter","enumerable","configurable","markSaved","desSerialize","sdata","ddata","ModelService","$gmUrls","$gmStorage","cls","int","float","NavigationUrlsService","formatUrl","_resolve","tgSections","bindOnceP","parseNav","param","tgNavGetParams","tgNav","fullUrl","getURLParams","getURLParamsStr","RepositoryService","resolveUrlForModel","idAttrName","resolveUrlForAttributeModel","extraParams","_data","_status","returnHeaders","queryMany","httpOptions","enablePagination","queryOneAttribute","queryOneRaw","queryPaginated","queryOnePaginatedRaw","StorageService","_default","serializedValue","setItem","removeItem","fmt","UrlsService","mainUrl","trimEnd","resourceProvider","_get","userstory","_list","hashSuffix","contentType","entryType","editComment","activityId","getCommentHistory","deleteComment","undeleteComment","history","hashSprintShowTags","hashIssuesShowTags","project_id","milestone_id","bulk_issues","promoteToUserStory","hashSuffixStatusColumnModes","hashSuffixSwimlanesModes","mdrender","listByUser","bulkCreateMemberships","invitation_extra_text","bulk_memberships","notifyPolicies","listByMember","memberId","bulkData","regenerate_epics_csv_uuid","regenerate_userstories_csv_uuid","regenerate_tasks_csv_uuid","regenerate_issues_csv_uuid","delete_epics_csv_uuid","delete_userstories_csv_uuid","delete_tasks_csv_uuid","delete_issues_csv_uuid","from_tags","export","import","statusUpdater","complete","failed","uploadComplete","uploadFailed","maxFileSize","fileName","fileSize","uploadProgress","evt","loaded","uploadedSize","totalSize","responseText","getResponseHeader","isPrivate","FormData","XMLHttpRequest","setRequestHeader","transformRequest","do","deferredAbort","get_all","noop","u","moveUserStoriesMilestone","currentMilestoneId","bulk_stories","moveTasksMilestone","bulk_tasks","moveIssuesMilestone","swimlanesOrder","bulk_swimlanes","wipLimitUpdate","delete","hashSuffixUsRowModes","bulkUpdateTaskTaskboardOrder","userProjectSettings","changeAvatar","removeAvatar","changePassword","currentPassword","newPassword","current_password","userSettings","contacts","hashShowTags","store","page_size","status_id","bulk_userstories","after_userstory_id","before_userstory_id","editStatus","ids","getBacklog","webhookId","webhooklogId","UserChangePasswordController","newPassword1","newPassword2","UserLiveNotificationsController","policyIndex","policy","prev_level","live_notify_level","UserSettingsController","window1","getLan","getTheme","maxFileSizeMsg","availableThemes","verifyEmail","avatarAttachment","tgAvatarModel","UserSettingsNavigationDirective","tgUserSettingsNavigation","UserNotificationsController","resources","isSaas","onPremiseSubscribed","loadPremise","subscribed","onPremise","subscribeOnPremiseNewsletter","origin_form","getUserStorage","storageState","setUserStorage","storageError","createUserStorage","notify_level","UserProjectSettingsController","sections","updateCustomHomePage","projectSettings","filteredSections","allowed_sections","UserWebNotificationsController","web_notify_level","AnimatedCounter","lastCount","renderData","transitionEnd","nextUp","renderCount","nextDown","counter","getCounter","wip","disabled","AssignedToInlineDirective","$currentUserService","$userListService","requiredPerm","renderUserList","selectedId","searchUsers","visibleUsers","showMore","renderUser","assignedObject","assigned_to_extra_info","fullName","isUnassigned","fullNameVisible","usersSearch","selfAssign","unassign","searchingText","AssignedUsersInlineDirective","currentAssignedIds","currentAssignedTo","isAssigned","renderUsersList","renderUsers","hiddenUsers","applyToModel","AttachmentLinkDirective","attachmentsPreviewService","tgAttachmentLink","fileId","AttachmentGalleryDirective","onDelete","AttachmentController","is_deprecated","editMode","mergeIn","AttachmentDirective","AttachmentsDropDirective","eventAttr","tgAttachmentsDrop","dataTransfer","originalEvent","AttachmentsFullController","deprecatedsCount","attachmentsVisible","deprecatedsVisible","uploadingAttachments","objId","toggleDeprecatedsVisible","addAttachments","toDeleteAttachment","errorMessage","reorderAttachment","updateAttachment","toUpdateAttachment","_isEditable","hasPermission","editPermission","showAttachments","AttachmentsFullDirective","displayAttachmentInput","AttachmentsFullService","_attachments","_deprecatedsCount","_attachmentsVisible","_deprecatedsVisible","regenerate","uploading","from_comment","setIn","afterAttachmentId","oldAttachment","setAttachments","AttachmentsPreviewController","getCurrent","hasPagination","getIndex","attachmentIndex","findLast","AttachmentPreviewLightboxDirective","AttachmentsPreviewService","AttachmentsSimpleController","onAdd","AttachmentsSimpleDirective","AttachmentSortableDirective","tgAttachmentsSortable","AutoSelectDirective","AvatarDirective","attributeName","tgAvatarBig","avatarBig","$rs2","updateEpics","userStory","removeEpicRelationship","deleteRelatedUserstory","epicsLength","immutable_epics","isIterable","BindCode","$sce","tElement","tAttrs","tgBindWysiwygHtmlGetter","tgBindWysiwygHtml","tgBindWysiwygHtmlWatch","$$addBindingClass","_extraValidHtmlElments","_extraValidAttrs","matchResult","blockClasses","hljs","getLanguage","highlightBlock","node","getAttribute","scrollIntoView","$$addBindingInfo","relativePaths","refreshAttachmentURL","BoardZoomDirective","levels","CardSlideshowController","CardController","hasTasks","getTagColor","hasMultipleAssignedUsers","hasVisibleAttachments","onToggleFold","getClosedTasks","closedTasksPercent","_setVisibility","related","slides","isRelatedTasksVisible","isSlideshowVisible","getNavKey","onClickRemove","inViewPort","folded","ClickInputFile","inputFile","ColorSelectorController","colorList","checkIsColorRequired","displayColorList","userCanChangeColor","isColorRequired","dropRight","setColor","customColor","resetColor","initColor","toggleColorList","onSelectDropdownColor","onKeyDown","ColorSelectorDirective","_timeout","mouseenter","mouseleave","DetailHeaderController","loadingSubject","originalSubject","_checkPermissions","cancelEdit","editSubject","saveSubject","onEditSubjectError","onEditSubjectSuccess","$tgWysiwygService","blocked_html_note","html_note","DetailNavController","_checkNav","noMilestone","project_extra_info","DueDateController","tgLightboxFactory","_getScope","setDueDate","bound","getMoment","DueDateService","defaultConfig","by_default","_formatTitle","_getAppearance","_getDefaultAppearance","defaultAppearance","currentAppearance","appearance","formatedDate","FileChangeDirective","tgFileChange","FilterRemoteStorageService","myFilters","innerPromise","FilterSlideDownDirective","ngIf","contentHeight","outerHeight","context","nextSibling","FilterController","opened","filterModeOptions","filterModeLabels","include","exclude","filterMode","customFilterForm","customFilterName","$onChanges","changes","getIncludedFilters","getExcludedFilters","includedFilters","excludedFilters","activeCustomFilter","repeatedFilterError","lengthZeroError","toggleFilterCategory","filterName","isOpen","openCustomFilter","onSaveCustomFilter","onRemoveFilter","filterCategory","onAddFilter","onRemoveCustomFilter","onSelectCustomFilter","isFilterSelected","FilterDirective","onChangeQ","watchTaskboardHeight","taskboard","maxSize","currentMax","offsetHeight","InputSearchComponent","bindings","change","dirty","IssuesTableController","onEditIssue","onToggleTags","detach","onDetachIssue","onDeleteIssue","onLoadIssues","onAddIssuesInBulk","onAddNewIssue","sprintIssues","issueOptions","displayOptions","hideOptions","JoyRideDirective","joyRideService","initJoyrRide","unsuscribe","intro","introJs","oncomplete","onexit","disableJoyRide","setOptions","exitOnEsc","exitOnOverlayClick","showStepNumbers","nextLabel","prevLabel","skipLabel","doneLabel","disableInteraction","setOption","loadJoyRideConfig","exit","JoyRideService","checkPermissionsService","getConfig","dashboard","steps","backlog","check","joyRide","KanbanBoardZoomDirective","onZoomChange","getZoomView","zooms","zoomIndex","SelectUserDirective","closeLightbox","confirmSelection","getFilteredUsers","normalize","_filterRows","userIds","available","roleUsers","userNames","addItem","clearSearch","LiveAnnouncementDirective","defineProperties","LiveAnnouncementService","MoveToSprintLightboxController","someSelected","selectedSprintId","typesSelected","itemsToMove","_loadSprints","openItems","_init","hasManyItemTypes","ussCount","updateSelected","tasksCount","issuesCount","itemType","itemsNotMoved","itemsList","itemsType","moveItems","displayWarning","totalItemsMoved","moveToSprintLightboxDirective","MoveToSprintController","hasOpenItems","getOpenUss","getOpenStorylessTasks","getOpenIssues","checkOpenItems","open-items","unnasignedTasks","issue_id","moveToSprintDirective","ProjectLogoBigSrcDirective","projectLogoService","projectLogo","logo","getDefaultProjectLogo","ProjectLogoSmallSrcDirective","ProjectMenuController","menu","_getActiveSection","projectMenu","_setVideoConference","_setMenuPermissions","videoconferenceUrl","_videoConferenceUrl","oldSectionName","sectionsBreadcrumb","indexBacklog","indexKanban","baseUrl","ProjectMenuDirective","fixed","PromoteToUsButtonDirective","avaliableItems","isContainedIn","itemsById","parseString","resetAll","resetSelected","currentSelected","filterClosed","showClosed","textShowClosed","textHideClosed","choiceId","items","toggleShowClosed","filterItems","filtering","itemAttrs","filterBy","placeholder","itemDisabled","SwimlaneSelector","getCurrentSwimlane","getSelectedSwimlane","displaySelector","selectedSwimlane","filteredSwimlanes","defaultSwimlaneId","selectSwimlane","hasUnclassifiedStories","containerHeight","selectedPosition","onSelectTag","colorArray","TagLineCommonController","tagLineService","disableColorSelection","newTag","_createColorsArray","projectTagColors","createColorsArray","displayTagInput","addNewTag","onAddTag","selectColor","tagName","loadingAddTag","loadingRemoveTag","onDeleteTag","TagLineController","onDeleteTagError","onDeleteTagSuccess","onAddTagError","onAddTagSuccess","TagLineService","myPermissions","projectPermissions","hasPermissions","TaskboardZoomDirective","TasksSortableDirective","tgTasksSortable","TermsOfServiceAndPrivacyPolicyNoticeDirective","privacyPolicyUrl","termsOfServiceUrl","AssignedToDirective","currentUserId","isSelfAssigned","assignedUser","openAssignedUsers","currentItem","AssignedUsersDirective","deleteAssignedUser","visibleAssignedUsersCount","displayHidden","assignedToUser","assignedUserIds","selfAssigned","TicketWatchersController","openWatchers","watchers","watchersIds","getPerms","_watch","_unwatch","deleteWatcher","watcherId","WatchersDirective","visibleWatchersCount","tips","loadTip","waitingTimeout","tipLoaded","tip","TribeButtonDirective","locationService","port","TribeLinkedDirective","gigTitle","gigId","VoteButtonController","toggleVote","is_voter","VoteButtonDirective","ProjectSwimlanesWipLimitController","new_wip_limit","submitSwimlaneNewStatus","displayWipLimitSelector","swimlane_userstory_status_id","WipLimitSelector","toggleWipSelectorVisibility","CommentEditWysiwyg","CommentWysiwyg","saveComment","onAddComment","CustomFieldEditWysiwyg","ItemWysiwyg","Wysiwyg","$attachmentsFullService","htmlReadMode","editonly","onCancel","onSave","onUploadFile","discardLocalStorage","editorLinks","getCurrentContent","isDraft","isOutdated","linksEvents","localSave","saveEnd","setHtmlEditor","textEditor","throttleChange","unwatchContent","updateMarkdownWithCurrentHtml","isEditOnly","notPersist","initialPos","clientX","clientY","diffX","diffY","parentElement","setEditMode","unwatchLoader","outdated","uploadFunction","fullNameDisplay","detail","refreshAttachmentURLFromMarkdown","saving","cancelWithConfirmation","getMarkdown","throttle","WysiwygService","projectDataConversion","dataConversion","angularDataConversion","setUp","toMarkdown","toHtml","getAttachmentData","tokens","getCachedAttachment","cache_key","attachmentId","cached_result","newHref","currentHref","endsWith","removeAttribute","links","attrValue","warn","DiscoverHomeOrderByController","is_open","week","month","year","currentText","currentOrderBy","DiscoverHomeOrderByDirective","DiscoverSearchBarController","discoverProjectsService","projectsCount","fetchStats","submitFilter","DiscoverSearchBarDirective","DiscoverSearchListHeaderController","like_is_open","activity_is_open","openLike","setOrderBy","openActivity","DiscoverSearchListHeaderDirective","FeaturedProjectsController","featured","fetchFeatured","FeaturedProjectsDirective","HighlightedDirective","highlighted","MostActiveController","mostActive","getOrderBy","fetch","fetchMostActive","MostActiveDirective","MostLikedController","mostLiked","fetchMostLiked","MostLikedDirective","DiscoverHomeController","onSubmit","DiscoverSearchController","routeParams","searchResult","nextSearchPage","loadingGlobal","loadingList","loadingPagination","resetSearchList","fetchByGlobalSearch","fetchByOrderBy","getFilter","fetchSearch","is_looking_for_people","onChangeFilter","updateParams","onChangeOrder","DiscoverSearchDirective","DiscoverProjectsService","_discoverParams","projectsService","_mostLiked","_mostActive","_featured","_searchResult","_projectsCount","decorate","_decorate","_nextSearchPage","discover_mode","_params","getProjects","is_featured","CreateEpicController","epicsService","newEpic","default_epic_status","validateForm","setFormErrors","CreateEpicDirective","EpicRowController","displayUserStories","displayAssignedTo","displayStatusList","loadingStatus","_calculateProgressBar","progress","canEditEpics","toggleUserStoryList","listRelatedUserStories","userStories","epicStories","updateStatus","updateEpicStatus","updateAssignedTo","assignLoader","updateEpicAssignedTo","EpicRowDirective","EpicsDashboardController","setfn","isEpicsDashboardEnabled","fetchEpics","notFound","canCreateEpics","on-create-epic","EpicsSortableDirective","tgEpicsSortable","EpicsTableController","displayVotes","votes","assigned","closed_us","_disablePagination","_loadingEpics","toggleEpicTableOptions","reorderEpic","nextPage","hoverEpicTableOption","timer","hideEpicTableOption","updateViewOptions","EpicsTableDirective","StoryRowController","totalTasksCompleted","story","EpicsService","xhrError","_epics","_page","epicData","epics_order","reorderRelatedUserstory","epicUserstories","userstoryId","replaceEpic","RelatedUserStoriesController","showCreateRelatedUserstoriesLightbox","showRelatedUserStoriesSection","userCanSort","loadRelatedUserstories","RelatedUserstoriesCreateController","projectUserstories","filterUss","saveRelatedUserStory","selectedUserstoryId","onSavedRelatedUserstory","validateExistingUserstoryForm","setExistingUserstoryFormErrors","bulkCreateRelatedUserStories","userstoriesText","onCreatedRelatedUserstory","validateNewUserstoryForm","setNewUserstoryFormErrors","RelatedUserstoriesCreateDirective","newUserstoryForm","existingUserstoryForm","showLightbox","selectedUserstory","searchUserstory","relatedUserstoriesText","onUpdateSearchUserstory","RelatedUserstoriesSortableDirective","tgRelatedUserstoriesSortable","RelatedUserStoriesDirective","RelatedUserstoryRowController","setAvatarData","getAssignedToFullNameDisplay","onDeleteRelatedUserstory","RelatedUserstoryRowDirective","ExternalAppController","externalAppsService","createApplicationToken","_getApplicationToken","_redirect","_applicationId","application","_state","state","_user","_application","loginUrl","loginWithAnotherUserUrl","applicationToken","getApplicationToken","back","authorizeApplicationToken","ExternalAppsService","applicationId","externalapps","FeedbackService","sendFeedback","ActivityService","_contentType","_objectId","loadingEntries","getHistory","historyType","CommentController","permissionService","hiddenDeletedComment","showDeletedComment","hideDeletedComment","checkCancelComment","onEditMode","commentId","canEditDeleteComment","onEditComment","commentData","displayCommentHistory","editing","deleting","onDeleteComment","onRestoreDeletedComment","CommentsController","initializePermissions","canAddCommentPermission","comments","reverse","LightboxDisplayHistoricController","_loadHistoric","commentHistoryEntries","LightboxDisplayHistoricDirective","HistoryEntryDirective","showCommentTab","showActivityTab","onActiveComments","onActiveActivities","onOrderComments","activeTab","commentsNum","activitiesNum","onReverse","HistorySectionController","viewComments","_loadHistory","totalComments","_loadComments","_loadActivity","activities","nextActivityPage","showHistorySection","toggleEditMode","onActiveHistoryTab","restoreDeletedComment","addComment","HistorySectionDirective","ActivitiesDiffController","diffTags","diffRemoveTags","diffAddTags","promotedTo","generated_user_stories","DutyDirective","duty","isHidden","getDutyType","HomeController","HomeService","_attachProjectInfoToWorkInProgress","workInProgress","projectsById","_attachProjectInfoToDuty","_duties","_getValidDutiesAndAttachProjectInfo","assignedTo","watching","duties","dutyType","getWorkInProgress","projectsPromise","getListProjectsByUserId","params_epics","status__is_closed","params_uss","params_tasks","params_issues","assignedEpicsPromise","assignedUserStoriesPromise","assignedTasksPromise","assignedIssuesPromise","watchingEpicsPromise","watchingUserStoriesPromise","watchingTasksPromise","watchingIssuesPromise","HomeProjectListDirective","WorkingOnController","homeService","hiddenAssignedTo","showHiddenAssignedTo","showHiddenWatching","_setAssignedTo","elem","_setWatching","WorkingOnDirective","slot","slots","updateShowHiddenDuties","showHiddenDuties","getShowHiddenDuties","updateHiddenDuties","hiddenDuties","getHiddenDuties","toggleDutyHidden","toggleShowHiddenDuties","InviteMembersFormController","rolesValues","defaultMaxInvites","_areRolesValidated","contactsToInvite","emailsToInvite","_checkLimitMemberships","pendingMembersCount","membersLimit","showWarningMessage","sendInvites","setInvitedContacts","role_id","inviteContactsMessage","InviteMembersFormDirective","onDisplayContactList","onRemoveInvitedContact","onRemoveInvitedEmail","onSendInvites","AddMembersController","userService","displayContactList","_getContacts","excludeProjectId","getContacts","_filterContacts","invited","contact","inviteSuggested","removeContact","testEmptyContacts","inviteEmail","emailData","removeEmail","LightboxAddMembersDirective","SuggestAddMembersController","contactQuery","filterContacts","filteredContacts","setInvited","onInviteSuggested","SuggestAddMembersDirective","onInviteEmail","DropdownNotificationsDirective","notificationsService","notificationsList","newEvent","setAllAsRead","setNotificationsAsRead","DropdownProjectListDirective","newProject","DropdownUserDirective","authService","navUrlsService","isFeedbackEnabled","customSupportUrl","userMenu","NavigationBarDirective","attempts","loadUserPilot","userPilotInterval","isEnabledHeader","userPilotIframe","widget","contentWindow","userPilotTitle","innerText","TAIGA_USER_PILOT_TOKEN","userpilotEnabled","_taigaSendFeedback","NavigationBarService","enabledHeader","NotificationsListDirective","infiniteScrollContainer","infiniteScrollDistance","infiniteScrollDisabled","onlyUnread","NotificationsController","scrollDisabled","initList","loadNotifications","reloadList","getNotificationsList","setAsRead","setNotificationAsRead","$$url","NotificationsService","_notificationTypes","userTimelinePaginationSequenceService","translate_params","title_attr","_getLink","_getUsernameSpan","obj_name","_getNotificationObject","_getDetailObjUrl","getNotifications","_addNotificationAttributes","generate","notificationId","_getType","event_type","_getTitle","projectSectionPath","projectUrl","_translateTitleParams","span","_getParams","notification_type","translation","paramsKeys","ProfileBarController","loadStats","getStats","ProfileBarDirective","ProfileContactsController","loadContacts","ProfileContactsDirective","FavItemDirective","ProfileWatchedController","FavsBaseController","ProfileLikedController","tabName","enableFilterByAll","enableFilterByProjects","enableFilterByEpics","enableFilterByUserStories","enableFilterByTasks","enableFilterByIssues","enableFilterByTextQuery","_getItems","getLiked","ProfileVotedController","getVoted","getWatched","_resetList","_enableLoadingSpinner","_disableLoadingSpinner","_enableScroll","_disableScroll","_checkIfHasMorePages","hasNext","_checkIfHasNoResults","hasNoResults","loadItems","filterByTextQuery","showAll","showProjectsOnly","showEpicsOnly","showUserStoriesOnly","showTasksOnly","showIssuesOnly","ProfileLikedDirective","ProfileVotedDirective","ProfileWatchedDirective","ProfileHints","hintKey","HINTS","hint","linkText","ProfileProjectsController","getProjectsByUserId","attachUserContactsToProjects","ProfileProjectsDirective","ProfileTabDirective","tab","tabIcon","tabActive","tabDisabled","addTab","ProfileTabsController","tabs","toggleTab","ProfileTabsDirective","ProfileController","getUserByUserName","userFullName","userUsername","BlockedProjectExplanationDirective","ContactProjectButtonController","launchContactForm","ContactProjectButtonDirective","layout","ContactProjectLbController","contactProject","sendingFeedback","ContactProjectLbDirective","inject","LikeProjectButtonController","likeButtonService","isMouseOver","showTextWhenMouseIsOver","showTextWhenMouseIsLeave","toggleLike","_unlike","_like","like","unlike","LikeProjectButtonDirective","LikeProjectButtonService","_getProjectIndex","_updateProjects","isFan","projectIndex","totalFans","is_fan","total_fans","setProjects","_updateCurrentProject","setProject","likeProject","unlikeProject","SortProjectsDirective","sortData","sorted_project_ids","bulkUpdateProjectsOrder","WatchProjectButtonController","watchButtonService","showWatchOptions","toggleWatcherOptions","closeWatcherOptions","notifyLevel","WatchProjectButtonDirective","WatchProjectButtonService","isWatcher","totalWatchers","is_watcher","total_watchers","watchProject","unwatchProject","AsanaImportProjectFormController","canCreatePublicProjects","projectForm","platformName","keepExternalReference","project_type","checkUsersLimit","limitMembersPrivateProject","canAddMembersPrivateProject","limitMembersPublicProject","canAddMembersPublicProject","saveForm","onSaveProjectDetails","canCreateProject","isDisabled","AsanaImportProjectFormDirective","onCancelForm","fetchingUsers","AsanaImportController","asanaImportService","importProjectService","projectUsers","startProjectSelector","fetchProjects","onSelectProject","fetchUsers","onCancelMemberSelection","startImport","importProject","importPromise","submitUserSelection","AsanaImportDirective","AsanaImportService","asanaImporter","listProjects","listUsers","userBindings","projectType","getAuthUrl","authUrl","authorize","CreatetProjectFormController","errorList","creation_template","formSubmitLoading","CreateProjectFormDirective","CreateProjectController","displayScrumDesc","dontAsk","displayOnPremise","displayHelp","displayKanbanDesc","DuplicateProjectController","refreshReferenceProject","getProjectBySlug","referenceProject","invitedMembers","toggleInvitedMember","duplicate","DuplicateProjectDirective","GithubImportProjectFormController","GithubImportProjectFormDirective","GithubImportController","githubImportService","GithubImportDirective","GithubImportService","githubImporter","callbackUri","ImportProjectMembersController","selectImportUserLightbox","warningImportUsers","displayEmailSelector","cancelledUsers","selectedUsers","selectableUsers","userContacts","fetchUser","refreshSelectableUsers","searchUser","searchingUser","beforeSubmitUsers","confirmUser","externalUser","taigaUser","discardSuggestedUser","unselectUser","getSelectedMember","isMemberSelected","userSelected","showSuggestedMatch","getDistinctSelectedTaigaUsers","importMoreUsersDisabled","isImportMoreUsersDisabled","ImportProjectMembersDirective","platform","ImportProjectSelectorController","ImportProjectSelectorDirective","noProjectsMsg","ImportTaigaController","importTaiga","ImportTaigaDirective","LbImportErrorDirective","ImportProjectController","trelloService","jiraService","githubService","asanaService","tgNavUrls","trelloOauthToken","from","asanaOauthToken","cancelCurrentImport","oauth_verifier","githubOauthToken","oauth_token","jiraOauthVerifier","jiraUrl","absUrl","unfoldOptions","unfoldedOptions","isActiveImporter","backToCreate","ImportProjectDirective","onCancelImport","ImportProjectService","importSuccess","importError","restrictionError","getRestrictionError","error_message","errorKey","maxMemberships","membersError","publicError","privateError","InviteMembersController","InviteMembersDirective","onToggleInvitedMember","SingleMemberDirective","JiraImportProjectFormController","importer_type","create_subissues","JiraImportProjectFormDirective","JiraImportController","jiraImportService","JiraImportDirective","JiraImportService","jiraImporter","importerType","NewsletterEmailLightboxDirective","$storageService","openNewsletter","onSelectUser","preference","userEmail","setEmail","SelectImportUserLightboxCtrl","invalid","assignUser","SelectImportUserLightboxDirective","TrelloImportProjectFormController","TrelloImportProjectFormDirective","TrelloImportController","trelloImportService","TrelloImportDirective","TrelloImportService","trelloImporter","verifyCode","WarningUserImportDirective","onConfirm","ProjectsListingController","ProjectRouterController","getProjectHomepage","gotoDefaultProjectHomepage","homepage","ProjectController","activeMembers","registerUrl","ProjectsService","getProjectStats","paginate","transferValidateToken","transferAccept","reason","transferReject","CantOwnProjectExplanationDirective","TransferProject","showAddComment","_refreshUserData","_validateToken","_setProjectData","_checkOwnerData","canBeOwnedByUser","canOwnProject","currentProjects","maxProjects","ownerMessage","validNumberOfMemberships","loadingAccept","loadingReject","hideComment","Resource","urlsService","object_id","x-disable-pagination","bulkAttachments","after_attachment_id","bulk_attachments","progressMessage","progressPercent","AsanaResource","GithubResource","JiraResource","TrelloResource","users_bindings","keep_external_reference","jira_url","projectTemplate","requestParams","paginateResponseService","pagination","x-lazy-pagination","slight","getTimeline","only_relevant","services","Resources","serviceFn","serviceProperty","getUserByUsername","exclude_project","getProfileTimeline","getUserTimeline","listAllInProject","epicIid","AppMetaService","_set","meta","setTitle","setDescription","setTwitterMetas","origin","setOpenGraphMetas","listener","_listener","metas","AttachmentsService","getMaxFileSize","maxFileSizeFormated","sizeError","saveError","AvatarService","IMAGES","logos","getDefault","murmurhash3_32_gc","getUnnamed","gravatar","photo","root","avatarParamName","gravatar_id","CheckPermissionsService","CurrentUserService","storageService","_projects","_projectsById","_joyride","_loadUserInfo","loadProjectsList","totalMembers","membersResult","ErrorHandlingService","errorHandling","showingError","blocked","LightboxFactory","scopeAttrs","PaginateResponse","ProjectLogoService","ProjectService","userActivityService","manageProjectSignal","_project","_section","_sectionsBreadcrumb","_activeMembers","e2e","autoRefresh","watchSignals","fetchRequiredSignals","intervalId","onInactive","onActive","ThemeService","themeName","stylesheetEl","UserActivityService","resetTimer","subscriptionsActive","subscriptionsInactive","isActive","startTimer","idleTimeout","timerId","_fireInactive","_fireActive","_unSubscriptionsActive","_unSubscriptionsInactive","UserListService","excludedUser","UserService","pageNumber","objectType","textQuery","contactsFiltered","contactId","UserTimelineAttachmentDirective","validFileExtensions","extension","templateHtml","UserTimelineItemTitle","_fieldTranslationKey","description_diff","timeline","field_name","new_value","sprint_name","us_name","_getTimelineObj","related_us_name","epic_name","role_name","keySeq","parent_userstory","timeline_type","getTitle","UserTimelineType","getType","hasIn","UserTimelineItemDirective","UserTimelinePaginationSequence","getContent","minItems","UserTimelineController","userTimelineService","timelineList","getProjectTimeline","loadTimeline","UserTimelineDirective","UserTimelineService","userTimelineItemType","userTimelineItemTitle","_valid_fields","_invalid","fieldKey","value_diff","_isInValidTimeline","_parseEventType","_getTimelineObject","_attachExtraInfoToTimelineEntry","_parseTimeline","newdata","values_diff","moveInBacklog","deleteIn","newItem","_addEntyAttributes","filterNot","IsolateClickDirective","singleHistoryEntry","historyEntry","WikiHistoryController","initializeHistory","loadHistory"],"mappings":"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"}